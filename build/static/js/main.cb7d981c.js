/*! For license information please see main.cb7d981c.js.LICENSE.txt */
(()=>{var e={16:(e,t,n)=>{"use strict";e.exports=n(958)},43:(e,t,n)=>{"use strict";e.exports=n(202)},67:(e,t,n)=>{"use strict";e.exports=n(612)},101:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(561),s=(i=r)&&i.__esModule?i:{default:i};t.default={pauseVideo:{acceptableStates:[s.default.ENDED,s.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[s.default.ENDED,s.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[s.default.ENDED,s.default.PLAYING,s.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default},122:e=>{"use strict";e.exports=function e(t,n){if(t===n)return!0;if(t&&n&&"object"==typeof t&&"object"==typeof n){if(t.constructor!==n.constructor)return!1;var i,r,s;if(Array.isArray(t)){if((i=t.length)!=n.length)return!1;for(r=i;0!==r--;)if(!e(t[r],n[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if((i=(s=Object.keys(t)).length)!==Object.keys(n).length)return!1;for(r=i;0!==r--;)if(!Object.prototype.hasOwnProperty.call(n,s[r]))return!1;for(r=i;0!==r--;){var a=s[r];if(!e(t[a],n[a]))return!1}return!0}return t!==t&&n!==n}},144:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default},151:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,r=n(452),s=(i=r)&&i.__esModule?i:{default:i};t.default=function(e){return new Promise(function(t){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function)t(window.YT);else{var n="http:"===window.location.protocol?"http:":"https:";(0,s.default)(n+"//www.youtube.com/iframe_api",function(t){t&&e.trigger("error",t)});var i=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){i&&i(),t(window.YT)}}})},e.exports=t.default},153:(e,t,n)=>{"use strict";var i=n(43),r=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var i,s={},c=null,u=null;for(i in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,i)&&!l.hasOwnProperty(i)&&(s[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps)void 0===s[i]&&(s[i]=t[i]);return{$$typeof:r,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},173:(e,t,n)=>{e.exports=n(497)()},202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=x.prototype=new y;b.constructor=x,m(b,v.prototype),b.isPureReactComponent=!0;var _=Array.isArray,w=Object.prototype.hasOwnProperty,S={current:null},M={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,i){var r,s={},a=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)w.call(t,r)&&!M.hasOwnProperty(r)&&(s[r]=t[r]);var l=arguments.length-2;if(1===l)s.children=i;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===s[r]&&(s[r]=l[r]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:S.current}}function E(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function k(e,t,r,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case i:l=!0}}if(l)return a=a(l=e),e=""===s?"."+A(l,0):s,_(a)?(r="",null!=e&&(r=e.replace(T,"$&/")+"/"),k(a,t,r,"",function(e){return e})):null!=a&&(E(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,r+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(T,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",_(e))for(var c=0;c<e.length;c++){var u=s+A(o=e[c],c);l+=k(o,t,r,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=k(o=o.value,t,r,u=s+A(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var i=[],r=0;return k(e,i,"","",function(e){return t.call(n,e,r++)}),i}function L(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},R={transition:null},N={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:R,ReactCurrentOwner:S};function I(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!E(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=r,t.Profiler=a,t.PureComponent=x,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N,t.act=I,t.cloneElement=function(e,t,i){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=m({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=S.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w.call(t,c)&&!M.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=i;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=E,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:L}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=I,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,n){return D.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,n){return D.current.useReducer(e,t,n)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return D.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},205:(e,t,n)=>{"use strict";e.exports=n(302)},218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function _(e){if(g=!1,b(e),!m)if(null!==i(c))m=!0,R(w);else{var t=i(u);null!==t&&N(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var s=f;try{for(b(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!k());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===i(c)&&r(c),b(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&N(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,C=null,E=-1,T=5,A=-1;function k(){return!(t.unstable_now()-A<T)}function P(){if(null!==C){var e=t.unstable_now();A=e;var n=!0;try{n=C(!0,e)}finally{n?S():(M=!1,C=null)}}else M=!1}if("function"===typeof x)S=function(){x(P)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,D=L.port2;L.port1.onmessage=P,S=function(){D.postMessage(null)}}else S=function(){v(P,0)};function R(e){C=e,M||(M=!0,S())}function N(e,n){E=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(g?(y(E),E=-1):g=!0,N(_,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,R(w))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},282:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=o(n(345)),s=o(n(151)),a=o(n(750));function o(e){return e&&e.__esModule?e:{default:e}}var l=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,r.default)();if(l||(l=(0,s.default)(o)),t.events)throw new Error("Event handlers cannot be overwritten.");if("string"===typeof e&&!document.getElementById(e))throw new Error('Element "'+e+'" does not exist.');t.events=a.default.proxyEvents(o);var c=new Promise(function(n){"object"===("undefined"===typeof e?"undefined":i(e))&&e.playVideo instanceof Function?n(e):l.then(function(i){var r=new i.Player(e,t);return o.on("ready",function(){n(r)}),null})}),u=a.default.promisifyPlayer(c,n);return u.on=o.on,u.off=o.off,u},e.exports=t.default},302:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},345:e=>{"use strict";var t;t=function(){var e={},t={};return e.on=function(e,n){var i={name:e,handler:n};return t[e]=t[e]||[],t[e].unshift(i),i},e.off=function(e){var n=t[e.name].indexOf(e);-1!==n&&t[e.name].splice(n,1)},e.trigger=function(e,n){var i,r=t[e];if(r)for(i=r.length;i--;)r[i].handler(n)},e},e.exports=t},391:(e,t,n)=>{"use strict";var i=n(950);t.createRoot=i.createRoot,t.hydrateRoot=i.hydrateRoot},429:(e,t,n)=>{function i(){var e;try{e=t.storage.debug}catch(n){}return!e&&"undefined"!==typeof process&&"env"in process&&(e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.DEBUG),e}(t=e.exports=n(826)).log=function(){return"object"===typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var i="color: "+this.color;e.splice(1,0,i,"color: inherit");var r=0,s=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&(r++,"%c"===e&&(s=r))}),e.splice(s,0,i)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(n){}},t.load=i,t.useColors=function(){if("undefined"!==typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!==typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!==typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&"undefined"!=typeof chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},t.enable(i())},445:e=>{var t=1e3,n=60*t,i=60*n,r=24*i,s=365.25*r;function a(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,o){o=o||{};var l,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var a=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!a)return;var o=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return o*s;case"days":case"day":case"d":return o*r;case"hours":case"hour":case"hrs":case"hr":case"h":return o*i;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}(e);if("number"===c&&!1===isNaN(e))return o.long?a(l=e,r,"day")||a(l,i,"hour")||a(l,n,"minute")||a(l,t,"second")||l+" ms":function(e){if(e>=r)return Math.round(e/r)+"d";if(e>=i)return Math.round(e/i)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=t)return Math.round(e/t)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},452:e=>{function t(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}function n(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}}e.exports=function(e,i,r){var s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");"function"===typeof i&&(r=i,i={}),i=i||{},r=r||function(){},a.type=i.type||"text/javascript",a.charset=i.charset||"utf8",a.async=!("async"in i)||!!i.async,a.src=e,i.attrs&&function(e,t){for(var n in t)e.setAttribute(n,t[n])}(a,i.attrs),i.text&&(a.text=""+i.text),("onload"in a?t:n)(a,r),a.onload||t(a,r),s.appendChild(a)}},497:(e,t,n)=>{"use strict";var i=n(218);function r(){}function s(){}s.resetWarningCache=r,e.exports=function(){function e(e,t,n,r,s,a){if(a!==i){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:r};return n.PropTypes=n,n}},561:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default},579:(e,t,n)=>{"use strict";e.exports=n(153)},612:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,r=e[i];if(!(0<s(r,t)))break e;e[i]=t,e[n]=r,n=i}}function i(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,r=e.length,a=r>>>1;i<a;){var o=2*(i+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<r&&0>s(u,l)?(e[i]=u,e[c]=n,i=c):(e[i]=l,e[o]=n,i=o);else{if(!(c<r&&0>s(u,n)))break e;e[i]=u,e[c]=n,i=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=i(u);null!==t;){if(null===t.callback)r(u);else{if(!(t.startTime<=e))break;r(u),t.sortIndex=t.expirationTime,n(c,t)}t=i(u)}}function _(e){if(g=!1,b(e),!m)if(null!==i(c))m=!0,R(w);else{var t=i(u);null!==t&&N(_,t.startTime-e)}}function w(e,n){m=!1,g&&(g=!1,y(E),E=-1),p=!0;var s=f;try{for(b(n),d=i(c);null!==d&&(!(d.expirationTime>n)||e&&!k());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===i(c)&&r(c),b(n)}else r(c);d=i(c)}if(null!==d)var l=!0;else{var h=i(u);null!==h&&N(_,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var S,M=!1,C=null,E=-1,T=5,A=-1;function k(){return!(t.unstable_now()-A<T)}function P(){if(null!==C){var e=t.unstable_now();A=e;var n=!0;try{n=C(!0,e)}finally{n?S():(M=!1,C=null)}}else M=!1}if("function"===typeof x)S=function(){x(P)};else if("undefined"!==typeof MessageChannel){var L=new MessageChannel,D=L.port2;L.port1.onmessage=P,S=function(){D.postMessage(null)}}else S=function(){v(P,0)};function R(e){C=e,M||(M=!0,S())}function N(e,n){E=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return i(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,r,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:r,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===i(c)&&e===i(u)&&(g?(y(E),E=-1):g=!0,N(_,s-a))):(e.sortIndex=o,n(c,e),m||p||(m=!0,R(w))),e},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},730:(e,t,n)=>{"use strict";var i=n(43),r=n(67);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,i,r,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,i){var r=g.hasOwnProperty(t)?g[t]:null;(null!==r?0!==r.type:i||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,i){if(null===t||"undefined"===typeof t||function(e,t,n,i){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!i&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,i))return!0;if(i)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,i)&&(n=null),i||null===r?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,i=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,i?e.setAttributeNS(i,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_=Symbol.for("react.element"),w=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),M=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),T=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),L=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var N=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=N&&e[N]||e["@@iterator"])?e:null}var O,z=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var j=!1;function B(e,t){if(!e||j)return"";j=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{j=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function V(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case S:return"Fragment";case w:return"Portal";case C:return"Profiler";case M:return"StrictMode";case k:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case E:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case L:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function H(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===M?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function q(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){i=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(e){i=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function X(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=G(e)?e.checked?"true":"false":e.value),(e=i)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function K(e,t){var n=t.checked;return z({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,i=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:i,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Q(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function J(e,t){Q(e,t);var n=W(t.value),i=t.type;if(null!=n)"number"===i?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===i||"reset"===i)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!("submit"!==i&&"reset"!==i||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(i&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ie(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return z({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function se(e,t){var n=W(t.value),i=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=i&&(e.defaultValue=""+i)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,i){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var i=0===n.indexOf("--"),r=me(n,t[n],i);"float"===n&&(n="cssFloat"),i?e.setProperty(n,r):e[n]=r}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ve=z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function _e(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var we=null,Se=null,Me=null;function Ce(e){if(e=xr(e)){if("function"!==typeof we)throw Error(s(280));var t=e.stateNode;t&&(t=_r(t),we(e.stateNode,e.type,t))}}function Ee(e){Se?Me?Me.push(e):Me=[e]:Se=e}function Te(){if(Se){var e=Se,t=Me;if(Me=Se=null,Ce(e),t)for(e=0;e<t.length;e++)Ce(t[e])}}function Ae(e,t){return e(t)}function ke(){}var Pe=!1;function Le(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ae(e,t,n)}finally{Pe=!1,(null!==Se||null!==Me)&&(ke(),Te())}}function De(e,t){var n=e.stateNode;if(null===n)return null;var i=_r(n);if(null===i)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(i=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!i;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Re=!1;if(u)try{var Ne={};Object.defineProperty(Ne,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Ne,Ne),window.removeEventListener("test",Ne,Ne)}catch(ue){Re=!1}function Ie(e,t,n,i,r,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,ze=null,Fe=!1,je=null,Be={onError:function(e){Oe=!0,ze=e}};function Ve(e,t,n,i,r,s,a,o,l){Oe=!1,ze=null,Ie.apply(Be,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function He(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(s(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var a=r.alternate;if(null===a){if(null!==(i=r.return)){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return We(r),e;if(a===i)return We(r),t;a=a.sibling}throw Error(s(188))}if(n.return!==i.return)n=r,i=a;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=a;break}if(l===i){o=!0,i=r,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,i=r;break}if(l===i){o=!0,i=a,n=r;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==i)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?qe(e):null}function qe(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qe(e);if(null!==t)return t;e=e.sibling}return null}var Xe=r.unstable_scheduleCallback,Ye=r.unstable_cancelCallback,Ke=r.unstable_shouldYield,Ze=r.unstable_requestPaint,Qe=r.unstable_now,Je=r.unstable_getCurrentPriorityLevel,$e=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,it=r.unstable_IdlePriority,rt=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=ht(o):0!==(s&=a)&&(i=ht(s))}else 0!==(a=n&~r)?i=ht(a):0!==s&&(i=ht(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-at(t)),i|=e[n],t&=~r;return i}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-at(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var _t,wt,St,Mt,Ct,Et=!1,Tt=[],At=null,kt=null,Pt=null,Lt=new Map,Dt=new Map,Rt=[],Nt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function It(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":kt=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Lt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Dt.delete(t.pointerId)}}function Ot(e,t,n,i,r,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},null!==t&&(null!==(t=xr(t))&&wt(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function zt(e){var t=yr(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=He(n)))return e.blockedOn=t,void Ct(e.priority,function(){St(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xr(n))&&wt(t),e.blockedOn=n,!1;var i=new(n=e.nativeEvent).constructor(n.type,n);be=i,n.target.dispatchEvent(i),be=null,t.shift()}return!0}function jt(e,t,n){Ft(e)&&n.delete(t)}function Bt(){Et=!1,null!==At&&Ft(At)&&(At=null),null!==kt&&Ft(kt)&&(kt=null),null!==Pt&&Ft(Pt)&&(Pt=null),Lt.forEach(jt),Dt.forEach(jt)}function Vt(e,t){e.blockedOn===t&&(e.blockedOn=null,Et||(Et=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bt)))}function Ut(e){function t(t){return Vt(t,e)}if(0<Tt.length){Vt(Tt[0],e);for(var n=1;n<Tt.length;n++){var i=Tt[n];i.blockedOn===e&&(i.blockedOn=null)}}for(null!==At&&Vt(At,e),null!==kt&&Vt(kt,e),null!==Pt&&Vt(Pt,e),Lt.forEach(t),Dt.forEach(t),n=0;n<Rt.length;n++)(i=Rt[n]).blockedOn===e&&(i.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)zt(n),null===n.blockedOn&&Rt.shift()}var Ht=b.ReactCurrentBatchConfig,Wt=!0;function Gt(e,t,n,i){var r=xt,s=Ht.transition;Ht.transition=null;try{xt=1,Xt(e,t,n,i)}finally{xt=r,Ht.transition=s}}function qt(e,t,n,i){var r=xt,s=Ht.transition;Ht.transition=null;try{xt=4,Xt(e,t,n,i)}finally{xt=r,Ht.transition=s}}function Xt(e,t,n,i){if(Wt){var r=Kt(e,t,n,i);if(null===r)Wi(e,t,i,Yt,n),It(e,i);else if(function(e,t,n,i,r){switch(t){case"focusin":return At=Ot(At,e,t,n,i,r),!0;case"dragenter":return kt=Ot(kt,e,t,n,i,r),!0;case"mouseover":return Pt=Ot(Pt,e,t,n,i,r),!0;case"pointerover":var s=r.pointerId;return Lt.set(s,Ot(Lt.get(s)||null,e,t,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Dt.set(s,Ot(Dt.get(s)||null,e,t,n,i,r)),!0}return!1}(r,e,t,n,i))i.stopPropagation();else if(It(e,i),4&t&&-1<Nt.indexOf(e)){for(;null!==r;){var s=xr(r);if(null!==s&&_t(s),null===(s=Kt(e,t,n,i))&&Wi(e,t,i,Yt,n),s===r)break;r=s}null!==r&&i.stopPropagation()}else Wi(e,t,i,null,n)}}var Yt=null;function Kt(e,t,n,i){if(Yt=null,null!==(e=yr(e=_e(i))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=He(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case it:return 536870912;default:return 16}default:return 16}}var Qt=null,Jt=null,$t=null;function en(){if($t)return $t;var e,t,n=Jt,i=n.length,r="value"in Qt?Qt.value:Qt.textContent,s=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[s-t];t++);return $t=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,i,r,s){for(var a in this._reactName=t,this._targetInst=i,this.type=n,this.nativeEvent=r,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(r):r[a]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return z(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=z({},cn,{view:0,detail:0}),dn=sn(hn),fn=z({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),mn=sn(z({},fn,{dataTransfer:0})),gn=sn(z({},hn,{relatedTarget:0})),vn=sn(z({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=z({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(yn),bn=sn(z({},cn,{data:0})),_n={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Mn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Sn[e])&&!!t[e]}function Cn(){return Mn}var En=z({},hn,{key:function(e){if(e.key){var t=_n[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?wn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(En),An=sn(z({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),kn=sn(z({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cn})),Pn=sn(z({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ln=z({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Dn=sn(Ln),Rn=[9,13,27,32],Nn=u&&"CompositionEvent"in window,In=null;u&&"documentMode"in document&&(In=document.documentMode);var On=u&&"TextEvent"in window&&!In,zn=u&&(!Nn||In&&8<In&&11>=In),Fn=String.fromCharCode(32),jn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Vn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Hn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Hn[e.type]:"textarea"===t}function Gn(e,t,n,i){Ee(i),0<(t=qi(t,"onChange")).length&&(n=new un("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var qn=null,Xn=null;function Yn(e){Fi(e,0)}function Kn(e){if(X(br(e)))return e}function Zn(e,t){if("change"===e)return t}var Qn=!1;if(u){var Jn;if(u){var $n="oninput"in document;if(!$n){var ei=document.createElement("div");ei.setAttribute("oninput","return;"),$n="function"===typeof ei.oninput}Jn=$n}else Jn=!1;Qn=Jn&&(!document.documentMode||9<document.documentMode)}function ti(){qn&&(qn.detachEvent("onpropertychange",ni),Xn=qn=null)}function ni(e){if("value"===e.propertyName&&Kn(Xn)){var t=[];Gn(t,Xn,e,_e(e)),Le(Yn,t)}}function ii(e,t,n){"focusin"===e?(ti(),Xn=n,(qn=t).attachEvent("onpropertychange",ni)):"focusout"===e&&ti()}function ri(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Kn(Xn)}function si(e,t){if("click"===e)return Kn(t)}function ai(e,t){if("input"===e||"change"===e)return Kn(t)}var oi="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function li(e,t){if(oi(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!h.call(t,r)||!oi(e[r],t[r]))return!1}return!0}function ci(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ui(e,t){var n,i=ci(e);for(e=0;i;){if(3===i.nodeType){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}e:{for(;i;){if(i.nextSibling){i=i.nextSibling;break e}i=i.parentNode}i=void 0}i=ci(i)}}function hi(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hi(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function di(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(i){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function fi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pi(e){var t=di(),n=e.focusedElem,i=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hi(n.ownerDocument.documentElement,n)){if(null!==i&&fi(n))if(t=i.start,void 0===(e=i.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=void 0===i.end?s:Math.min(i.end,r),!e.extend&&s>i&&(r=i,i=s,s=r),r=ui(n,s);var a=ui(n,i);r&&a&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),s>i?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mi=u&&"documentMode"in document&&11>=document.documentMode,gi=null,vi=null,yi=null,xi=!1;function bi(e,t,n){var i=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xi||null==gi||gi!==Y(i)||("selectionStart"in(i=gi)&&fi(i)?i={start:i.selectionStart,end:i.selectionEnd}:i={anchorNode:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset},yi&&li(yi,i)||(yi=i,0<(i=qi(vi,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=gi)))}function _i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var wi={animationend:_i("Animation","AnimationEnd"),animationiteration:_i("Animation","AnimationIteration"),animationstart:_i("Animation","AnimationStart"),transitionend:_i("Transition","TransitionEnd")},Si={},Mi={};function Ci(e){if(Si[e])return Si[e];if(!wi[e])return e;var t,n=wi[e];for(t in n)if(n.hasOwnProperty(t)&&t in Mi)return Si[e]=n[t];return e}u&&(Mi=document.createElement("div").style,"AnimationEvent"in window||(delete wi.animationend.animation,delete wi.animationiteration.animation,delete wi.animationstart.animation),"TransitionEvent"in window||delete wi.transitionend.transition);var Ei=Ci("animationend"),Ti=Ci("animationiteration"),Ai=Ci("animationstart"),ki=Ci("transitionend"),Pi=new Map,Li="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Di(e,t){Pi.set(e,t),l(t,[e])}for(var Ri=0;Ri<Li.length;Ri++){var Ni=Li[Ri];Di(Ni.toLowerCase(),"on"+(Ni[0].toUpperCase()+Ni.slice(1)))}Di(Ei,"onAnimationEnd"),Di(Ti,"onAnimationIteration"),Di(Ai,"onAnimationStart"),Di("dblclick","onDoubleClick"),Di("focusin","onFocus"),Di("focusout","onBlur"),Di(ki,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ii="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Oi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ii));function zi(e,t,n){var i=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,i,r,a,o,l,c){if(Ve.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var u=ze;Oe=!1,ze=null,Fe||(Fe=!0,je=u)}}(i,t,void 0,e),e.currentTarget=null}function Fi(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var s=void 0;if(t)for(var a=i.length-1;0<=a;a--){var o=i[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;zi(r,o,c),s=l}else for(a=0;a<i.length;a++){if(l=(o=i[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;zi(r,o,c),s=l}}}if(Fe)throw e=je,Fe=!1,je=null,e}function ji(e,t){var n=t[mr];void 0===n&&(n=t[mr]=new Set);var i=e+"__bubble";n.has(i)||(Hi(t,e,2,!1),n.add(i))}function Bi(e,t,n){var i=0;t&&(i|=4),Hi(n,e,i,t)}var Vi="_reactListening"+Math.random().toString(36).slice(2);function Ui(e){if(!e[Vi]){e[Vi]=!0,a.forEach(function(t){"selectionchange"!==t&&(Oi.has(t)||Bi(t,!1,e),Bi(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vi]||(t[Vi]=!0,Bi("selectionchange",!1,t))}}function Hi(e,t,n,i){switch(Zt(t)){case 1:var r=Gt;break;case 4:r=qt;break;default:r=Xt}n=r.bind(null,t,n,e),r=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),i?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Wi(e,t,n,i,r){var s=i;if(0===(1&t)&&0===(2&t)&&null!==i)e:for(;;){if(null===i)return;var a=i.tag;if(3===a||4===a){var o=i.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===a)for(a=i.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;a=a.return}for(;null!==o;){if(null===(a=yr(o)))return;if(5===(l=a.tag)||6===l){i=s=a;continue e}o=o.parentNode}}i=i.return}Le(function(){var i=s,r=_e(n),a=[];e:{var o=Pi.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=kn;break;case Ei:case Ti:case Ai:l=vn;break;case ki:l=Pn;break;case"scroll":l=dn;break;case"wheel":l=Dn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=An}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=i;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=De(p,d))&&u.push(Gi(p,m,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,r),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yr(c)&&!c[pr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=i,null!==(c=(c=n.relatedTarget||n.toElement)?yr(c):null)&&(c!==(h=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=i),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=An,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:br(l),f=null==c?o:br(c),(o=new u(m,p+"leave",l,n,r)).target=h,o.relatedTarget=f,m=null,yr(r)===i&&((u=new u(d,p+"enter",c,n,r)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Xi(f))p++;for(f=0,m=d;m;m=Xi(m))f++;for(;0<p-f;)u=Xi(u),p--;for(;0<f-p;)d=Xi(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Xi(u),d=Xi(d)}u=null}else u=null;null!==l&&Yi(a,o,l,u,!1),null!==c&&null!==h&&Yi(a,h,c,u,!0)}if("select"===(l=(o=i?br(i):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Zn;else if(Wn(o))if(Qn)g=ai;else{g=ri;var v=ii}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=si);switch(g&&(g=g(e,i))?Gn(a,g,n,r):(v&&v(e,o,i),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=i?br(i):window,e){case"focusin":(Wn(v)||"true"===v.contentEditable)&&(gi=v,vi=i,yi=null);break;case"focusout":yi=vi=gi=null;break;case"mousedown":xi=!0;break;case"contextmenu":case"mouseup":case"dragend":xi=!1,bi(a,n,r);break;case"selectionchange":if(mi)break;case"keydown":case"keyup":bi(a,n,r)}var y;if(Nn)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Un?Bn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(zn&&"ko"!==n.locale&&(Un||"onCompositionStart"!==x?"onCompositionEnd"===x&&Un&&(y=en()):(Jt="value"in(Qt=r)?Qt.value:Qt.textContent,Un=!0)),0<(v=qi(i,x)).length&&(x=new bn(x,e,null,n,r),a.push({event:x,listeners:v}),y?x.data=y:null!==(y=Vn(n))&&(x.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return Vn(t);case"keypress":return 32!==t.which?null:(jn=!0,Fn);case"textInput":return(e=t.data)===Fn&&jn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!Nn&&Bn(e,t)?(e=en(),$t=Jt=Qt=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(i=qi(i,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),a.push({event:r,listeners:i}),r.data=y))}Fi(a,t)})}function Gi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",i=[];null!==e;){var r=e,s=r.stateNode;5===r.tag&&null!==s&&(r=s,null!=(s=De(e,n))&&i.unshift(Gi(e,s,r)),null!=(s=De(e,t))&&i.push(Gi(e,s,r))),e=e.return}return i}function Xi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yi(e,t,n,i,r){for(var s=t._reactName,a=[];null!==n&&n!==i;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===i)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=De(n,s))&&a.unshift(Gi(n,l,o)):r||null!=(l=De(n,s))&&a.push(Gi(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Ki=/\r\n?/g,Zi=/\u0000|\uFFFD/g;function Qi(e){return("string"===typeof e?e:""+e).replace(Ki,"\n").replace(Zi,"")}function Ji(e,t,n){if(t=Qi(t),Qi(e)!==t&&n)throw Error(s(425))}function $i(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ir="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,sr="function"===typeof Promise?Promise:void 0,ar="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sr?function(e){return sr.resolve(null).then(e).catch(or)}:ir;function or(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,i=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===i)return e.removeChild(r),void Ut(t);i--}else"$"!==n&&"$?"!==n&&"$!"!==n||i++;n=r}while(n);Ut(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ur(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hr=Math.random().toString(36).slice(2),dr="__reactFiber$"+hr,fr="__reactProps$"+hr,pr="__reactContainer$"+hr,mr="__reactEvents$"+hr,gr="__reactListeners$"+hr,vr="__reactHandles$"+hr;function yr(e){var t=e[dr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pr]||n[dr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ur(e);null!==e;){if(n=e[dr])return n;e=ur(e)}return t}n=(e=n).parentNode}return null}function xr(e){return!(e=e[dr]||e[pr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function _r(e){return e[fr]||null}var wr=[],Sr=-1;function Mr(e){return{current:e}}function Cr(e){0>Sr||(e.current=wr[Sr],wr[Sr]=null,Sr--)}function Er(e,t){Sr++,wr[Sr]=e.current,e.current=t}var Tr={},Ar=Mr(Tr),kr=Mr(!1),Pr=Tr;function Lr(e,t){var n=e.type.contextTypes;if(!n)return Tr;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Dr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Rr(){Cr(kr),Cr(Ar)}function Nr(e,t,n){if(Ar.current!==Tr)throw Error(s(168));Er(Ar,t),Er(kr,n)}function Ir(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(s(108,H(e)||"Unknown",r));return z({},n,i)}function Or(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Tr,Pr=Ar.current,Er(Ar,e),Er(kr,kr.current),!0}function zr(e,t,n){var i=e.stateNode;if(!i)throw Error(s(169));n?(e=Ir(e,t,Pr),i.__reactInternalMemoizedMergedChildContext=e,Cr(kr),Cr(Ar),Er(Ar,e)):Cr(kr),Er(kr,n)}var Fr=null,jr=!1,Br=!1;function Vr(e){null===Fr?Fr=[e]:Fr.push(e)}function Ur(){if(!Br&&null!==Fr){Br=!0;var e=0,t=xt;try{var n=Fr;for(xt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}Fr=null,jr=!1}catch(r){throw null!==Fr&&(Fr=Fr.slice(e+1)),Xe($e,Ur),r}finally{xt=t,Br=!1}}return null}var Hr=[],Wr=0,Gr=null,qr=0,Xr=[],Yr=0,Kr=null,Zr=1,Qr="";function Jr(e,t){Hr[Wr++]=qr,Hr[Wr++]=Gr,Gr=e,qr=t}function $r(e,t,n){Xr[Yr++]=Zr,Xr[Yr++]=Qr,Xr[Yr++]=Kr,Kr=e;var i=Zr;e=Qr;var r=32-at(i)-1;i&=~(1<<r),n+=1;var s=32-at(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,Zr=1<<32-at(t)+r|n<<r|i,Qr=s+e}else Zr=1<<s|n<<r|i,Qr=e}function es(e){null!==e.return&&(Jr(e,1),$r(e,1,0))}function ts(e){for(;e===Gr;)Gr=Hr[--Wr],Hr[Wr]=null,qr=Hr[--Wr],Hr[Wr]=null;for(;e===Kr;)Kr=Xr[--Yr],Xr[Yr]=null,Qr=Xr[--Yr],Xr[Yr]=null,Zr=Xr[--Yr],Xr[Yr]=null}var ns=null,is=null,rs=!1,ss=null;function as(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,is=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,is=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Kr?{id:Zr,overflow:Qr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,is=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(rs){var t=is;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=cr(n.nextSibling);var i=ns;t&&os(e,t)?as(i,n):(e.flags=-4097&e.flags|2,rs=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,rs=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!rs)return us(e),rs=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=is)){if(ls(e))throw ds(),Error(s(418));for(;t;)as(e,t),t=cr(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){is=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}is=null}}else is=ns?cr(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=is;e;)e=cr(e.nextSibling)}function fs(){is=ns=null,rs=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var ms=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var i=n.stateNode}if(!i)throw Error(s(147,e));var r=i,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=r.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Rc(e,t)).index=0,e.sibling=null,e}function a(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,i){return null===t||6!==t.tag?((t=zc(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,i){var s=n.type;return s===S?h(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===D&&ys(s)===t.type)?((i=r(t,n.props)).ref=gs(e,t,n),i.return=e,i):((i=Nc(n.type,n.key,n.props,null,e.mode,i)).ref=gs(e,t,n),i.return=e,i)}function u(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function h(e,t,n,i,s){return null===t||7!==t.tag?((t=Ic(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=zc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case _:return(n=Nc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case w:return(t=Fc(t,e.mode,n)).return=e,t;case D:return d(e,(0,t._init)(t._payload),n)}if(te(t)||I(t))return(t=Ic(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function f(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case _:return n.key===r?c(e,t,n,i):null;case w:return n.key===r?u(e,t,n,i):null;case D:return f(e,t,(r=n._init)(n._payload),i)}if(te(n)||I(n))return null!==r?null:h(e,t,n,i,null);vs(e,n)}return null}function p(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return l(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case _:return c(t,e=e.get(null===i.key?n:i.key)||null,i,r);case w:return u(t,e=e.get(null===i.key?n:i.key)||null,i,r);case D:return p(e,t,n,(0,i._init)(i._payload),r)}if(te(i)||I(i))return h(t,e=e.get(n)||null,i,r,null);vs(t,i)}return null}function m(r,s,o,l){for(var c=null,u=null,h=s,m=s=0,g=null;null!==h&&m<o.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(r,h,o[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(r,h),s=a(v,s,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===o.length)return n(r,h),rs&&Jr(r,m),c;if(null===h){for(;m<o.length;m++)null!==(h=d(r,o[m],l))&&(s=a(h,s,m),null===u?c=h:u.sibling=h,u=h);return rs&&Jr(r,m),c}for(h=i(r,h);m<o.length;m++)null!==(g=p(h,r,m,o[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),s=a(g,s,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach(function(e){return t(r,e)}),rs&&Jr(r,m),c}function g(r,o,l,c){var u=I(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,m=o,g=o=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var x=f(r,m,y.value,c);if(null===x){null===m&&(m=v);break}e&&m&&null===x.alternate&&t(r,m),o=a(x,o,g),null===h?u=x:h.sibling=x,h=x,m=v}if(y.done)return n(r,m),rs&&Jr(r,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(r,y.value,c))&&(o=a(y,o,g),null===h?u=y:h.sibling=y,h=y);return rs&&Jr(r,g),u}for(m=i(r,m);!y.done;g++,y=l.next())null!==(y=p(m,r,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),o=a(y,o,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach(function(e){return t(r,e)}),rs&&Jr(r,g),u}return function e(i,s,a,l){if("object"===typeof a&&null!==a&&a.type===S&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case _:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===S){if(7===u.tag){n(i,u.sibling),(s=r(u,a.props.children)).return=i,i=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===D&&ys(c)===u.type){n(i,u.sibling),(s=r(u,a.props)).ref=gs(i,u,a),s.return=i,i=s;break e}n(i,u);break}t(i,u),u=u.sibling}a.type===S?((s=Ic(a.props.children,i.mode,l,a.key)).return=i,i=s):((l=Nc(a.type,a.key,a.props,null,i.mode,l)).ref=gs(i,s,a),l.return=i,i=l)}return o(i);case w:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=Fc(a,i.mode,l)).return=i,i=s}return o(i);case D:return e(i,s,(u=a._init)(a._payload),l)}if(te(a))return m(i,s,a,l);if(I(a))return g(i,s,a,l);vs(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=zc(a,i.mode,l)).return=i,i=s),o(i)):n(i,s)}}var bs=xs(!0),_s=xs(!1),ws=Mr(null),Ss=null,Ms=null,Cs=null;function Es(){Cs=Ms=Ss=null}function Ts(e){var t=ws.current;Cr(ws),e._currentValue=t}function As(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function ks(e,t){Ss=e,Cs=Ms=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(Cs!==e)if(e={context:e,memoizedValue:t,next:null},null===Ms){if(null===Ss)throw Error(s(308));Ms=e,Ss.dependencies={lanes:0,firstContext:e}}else Ms=Ms.next=e;return t}var Ls=null;function Ds(e){null===Ls?Ls=[e]:Ls.push(e)}function Rs(e,t,n,i){var r=t.interleaved;return null===r?(n.next=n,Ds(t)):(n.next=r.next,r.next=n),t.interleaved=n,Ns(e,i)}function Ns(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Is=!1;function Os(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function js(e,t,n){var i=e.updateQueue;if(null===i)return null;if(i=i.shared,0!==(2&Al)){var r=i.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),i.pending=t,Ns(e,n)}return null===(r=i.interleaved)?(t.next=t,Ds(i)):(t.next=r.next,r.next=t),i.interleaved=t,Ns(e,n)}function Bs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Vs(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Us(e,t,n,i){var r=e.updateQueue;Is=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=r.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((i&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,m=o;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=z({},h,d);break e;case 2:Is=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=r.effects)?r.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(d=o).next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}if(null===u&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,null!==(t=r.shared.interleaved)){r=t;do{a|=r.lane,r=r.next}while(r!==t)}else null===s&&(r.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=h}}function Hs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(s(191,r));r.call(i)}}}var Ws={},Gs=Mr(Ws),qs=Mr(Ws),Xs=Mr(Ws);function Ys(e){if(e===Ws)throw Error(s(174));return e}function Ks(e,t){switch(Er(Xs,t),Er(qs,e),Er(Gs,Ws),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Cr(Gs),Er(Gs,t)}function Zs(){Cr(Gs),Cr(qs),Cr(Xs)}function Qs(e){Ys(Xs.current);var t=Ys(Gs.current),n=le(t,e.type);t!==n&&(Er(qs,e),Er(Gs,n))}function Js(e){qs.current===e&&(Cr(Gs),Cr(qs))}var $s=Mr(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ia=b.ReactCurrentDispatcher,ra=b.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,ha=0,da=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function ma(e,t,n,i,r,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?Ja:$a,e=n(i,r),ua){a=0;do{if(ua=!1,ha=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ia.current=eo,e=n(i,r)}while(ua)}if(ia.current=Qa,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==ha;return ha=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function xa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=oa,r=i.baseQueue,a=n.pending;if(null!==a){if(null!==r){var o=r.next;r.next=a.next,a.next=o}i.baseQueue=r=a,n.pending=null}if(null!==r){a=r.next,i=i.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((sa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=i):c=c.next=d,aa.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==a);null===c?o=i:c.next=l,oi(i,t.memoizedState)||(xo=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{a=r.lane,aa.lanes|=a,Ol|=a,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{a=e(a,o.action),o=o.next}while(o!==r);oi(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function wa(){}function Sa(e,t){var n=aa,i=ya(),r=t(),a=!oi(i.memoizedState,r);if(a&&(i.memoizedState=r,xo=!0),i=i.queue,Ia(Ea.bind(null,n,i,e),[e]),i.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Pa(9,Ca.bind(null,n,i,r,t),void 0,null),null===kl)throw Error(s(349));0!==(30&sa)||Ma(n,t,r)}return r}function Ma(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ca(e,t,n,i){t.value=n,t.getSnapshot=i,Ta(t)&&Aa(e)}function Ea(e,t,n){return n(function(){Ta(t)&&Aa(e)})}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch(i){return!0}}function Aa(e){var t=Ns(e,1);null!==t&&nc(t,e,1,-1)}function ka(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Xa.bind(null,aa,e),[t.memoizedState,e]}function Pa(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function La(){return ya().memoizedState}function Da(e,t,n,i){var r=va();aa.flags|=e,r.memoizedState=Pa(1|t,n,void 0,void 0===i?null:i)}function Ra(e,t,n,i){var r=ya();i=void 0===i?null:i;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==i&&pa(i,a.deps))return void(r.memoizedState=Pa(t,n,s,i))}aa.flags|=e,r.memoizedState=Pa(1|t,n,s,i)}function Na(e,t){return Da(8390656,8,e,t)}function Ia(e,t){return Ra(2048,8,e,t)}function Oa(e,t){return Ra(4,2,e,t)}function za(e,t){return Ra(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ja(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ra(4,4,Fa.bind(null,t,e),n)}function Ba(){}function Va(e,t){var n=ya();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&pa(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function Ua(e,t){var n=ya();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&pa(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(oi(n,t)||(n=mt(),aa.lanes|=n,Ol|=n,e.baseState=!0),t)}function Wa(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var i=ra.transition;ra.transition={};try{e(!1),t()}finally{xt=n,ra.transition=i}}function Ga(){return ya().memoizedState}function qa(e,t,n){var i=tc(e);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Ka(t,n);else if(null!==(n=Rs(e,t,n,i))){nc(n,e,i,ec()),Za(n,t,i)}}function Xa(e,t,n){var i=tc(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Ka(t,r);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,oi(o,a)){var l=t.interleaved;return null===l?(r.next=r,Ds(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Rs(e,t,r,i))&&(nc(n,e,i,r=ec()),Za(n,t,i))}}function Ya(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ka(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Za(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Qa={readContext:Ps,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:Ps,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Na,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=va();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=qa.bind(null,aa,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:ka,useDebugValue:Ba,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=ka(!1),t=e[0];return e=Wa.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=aa,r=va();if(rs){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===kl)throw Error(s(349));0!==(30&sa)||Ma(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Na(Ea.bind(null,i,a,e),[e]),i.flags|=2048,Pa(9,Ca.bind(null,i,a,n,t),void 0,null),n},useId:function(){var e=va(),t=kl.identifierPrefix;if(rs){var n=Qr;t=":"+t+"R"+(n=(Zr&~(1<<32-at(Zr)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},$a={readContext:Ps,useCallback:Va,useContext:Ps,useEffect:Ia,useImperativeHandle:ja,useInsertionEffect:Oa,useLayoutEffect:za,useMemo:Ua,useReducer:ba,useRef:La,useState:function(){return ba(xa)},useDebugValue:Ba,useDeferredValue:function(e){return Ha(ya(),oa.memoizedState,e)},useTransition:function(){return[ba(xa)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:Sa,useId:Ga,unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:Va,useContext:Ps,useEffect:Ia,useImperativeHandle:ja,useInsertionEffect:Oa,useLayoutEffect:za,useMemo:Ua,useReducer:_a,useRef:La,useState:function(){return _a(xa)},useDebugValue:Ba,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Ha(t,oa.memoizedState,e)},useTransition:function(){return[_a(xa)[0],ya().memoizedState]},useMutableSource:wa,useSyncExternalStore:Sa,useId:Ga,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=z({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:z({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var io={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=Fs(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,r))&&(nc(t,e,r,i),Bs(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ec(),r=tc(e),s=Fs(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=js(e,s,r))&&(nc(t,e,r,i),Bs(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),i=tc(e),r=Fs(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=js(e,r,i))&&(nc(t,e,i,n),Bs(t,e,i))}};function ro(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!li(n,i)||!li(r,s))}function so(e,t,n){var i=!1,r=Tr,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(r=Dr(t)?Pr:Ar.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?Lr(e,r):Tr),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=io,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&io.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Os(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=Ps(s):(s=Dr(t)?Pr:Ar.current,r.context=Lr(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&io.enqueueReplaceState(r,r.state,null),Us(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",i=t;do{n+=V(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){Wl||(Wl=!0,Gl=i),uo(0,t)},n}function po(e,t,n){(n=Fs(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof i&&(null===ql?ql=new Set([this]):ql.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mo(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new ho;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Cc.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,js(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var yo=b.ReactCurrentOwner,xo=!1;function bo(e,t,n,i){t.child=null===e?_s(t,null,n,i):bs(t,e.child,n,i)}function _o(e,t,n,i,r){n=n.render;var s=t.ref;return ks(t,r),i=ma(e,t,n,i,s,r),n=ga(),null===e||xo?(rs&&n&&es(t),t.flags|=1,bo(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function wo(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Dc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Nc(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,So(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:li)(a,i)&&e.ref===t.ref)return Wo(e,t,r)}return t.flags|=1,(e=Rc(s,i)).ref=t.ref,e.return=t,t.child=e}function So(e,t,n,i,r){if(null!==e){var s=e.memoizedProps;if(li(s,i)&&e.ref===t.ref){if(xo=!1,t.pendingProps=i=s,0===(e.lanes&r))return t.lanes=e.lanes,Wo(e,t,r);0!==(131072&e.flags)&&(xo=!0)}}return Eo(e,t,n,i,r)}function Mo(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Er(Rl,Dl),Dl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Er(Rl,Dl),Dl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=null!==s?s.baseLanes:n,Er(Rl,Dl),Dl|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,Er(Rl,Dl),Dl|=i;return bo(e,t,r,n),t.child}function Co(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Eo(e,t,n,i,r){var s=Dr(n)?Pr:Ar.current;return s=Lr(t,s),ks(t,r),n=ma(e,t,n,i,s,r),i=ga(),null===e||xo?(rs&&i&&es(t),t.flags|=1,bo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function To(e,t,n,i,r){if(Dr(n)){var s=!0;Or(t)}else s=!1;if(ks(t,r),null===t.stateNode)Ho(e,t),so(t,n,i),oo(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Lr(t,c=Dr(n)?Pr:Ar.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&ao(t,a,i,c),Is=!1;var d=t.memoizedState;a.state=d,Us(t,i,a,r),l=t.memoizedState,o!==i||d!==l||kr.current||Is?("function"===typeof u&&(no(t,n,u,i),l=t.memoizedState),(o=Is||ro(t,n,o,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,zs(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Lr(t,l=Dr(n)?Pr:Ar.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&ao(t,a,i,l),Is=!1,d=t.memoizedState,a.state=d,Us(t,i,a,r);var p=t.memoizedState;o!==h||d!==p||kr.current||Is?("function"===typeof f&&(no(t,n,f,i),p=t.memoizedState),(c=Is||ro(t,n,c,i,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),a.props=i,a.state=p,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Ao(e,t,n,i,s,r)}function Ao(e,t,n,i,r,s){Co(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&zr(t,n,!1),Wo(e,t,s);i=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=i.state,r&&zr(t,n,!0),t.child}function ko(e){var t=e.stateNode;t.pendingContext?Nr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Nr(0,t.context,!1),Ks(e,t.containerInfo)}function Po(e,t,n,i,r){return fs(),ps(r),t.flags|=256,bo(e,t,n,i),t.child}var Lo,Do,Ro,No,Io={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function zo(e,t,n){var i,r=t.pendingProps,a=$s.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&a)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Er($s,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,r,0,null),e=Ic(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(n),t.memoizedState=Io,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(i=a.dehydrated))return function(e,t,n,i,r,a,o){if(n)return 256&t.flags?(t.flags&=-257,jo(e,t,o,i=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=i.fallback,r=t.mode,i=Oc({mode:"visible",children:i.children},r,0,null),(a=Ic(a,r,o,null)).flags|=2,i.return=t,a.return=t,i.sibling=a,t.child=i,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=Io,a);if(0===(1&t.mode))return jo(e,t,o,null);if("$!"===r.data){if(i=r.nextSibling&&r.nextSibling.dataset)var l=i.dgst;return i=l,jo(e,t,o,i=co(a=Error(s(419)),i,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(i=kl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(i.suspendedLanes|o))?0:r)&&r!==a.retryLane&&(a.retryLane=r,Ns(e,r),nc(i,e,r,-1))}return mc(),jo(e,t,o,i=co(Error(s(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Tc.bind(null,e),r._reactRetry=t,null):(e=a.treeContext,is=cr(r.nextSibling),ns=t,rs=!0,ss=null,null!==e&&(Xr[Yr++]=Zr,Xr[Yr++]=Qr,Xr[Yr++]=Kr,Zr=e.id,Qr=e.overflow,Kr=t),t=Fo(t,i.children),t.flags|=4096,t)}(e,t,l,r,i,a,n);if(o){o=r.fallback,l=t.mode,i=(a=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==a?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Rc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==i?o=Rc(i,o):(o=Ic(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Io,r}return e=(o=e.child).sibling,r=Rc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Fo(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function jo(e,t,n,i){return null!==i&&ps(i),bs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bo(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),As(e.return,t,n)}function Vo(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Uo(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(bo(e,t,i.children,n),0!==(2&(i=$s.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bo(e,n,t);else if(19===e.tag)Bo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(Er($s,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),Vo(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ea(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}Vo(t,!0,n,null,s);break;case"together":Vo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ho(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Rc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Rc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Go(e,t){if(!rs)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function qo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Xo(e,t,n){var i=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qo(t),null;case 1:case 17:return Dr(t.type)&&Rr(),qo(t),null;case 3:return i=t.stateNode,Zs(),Cr(kr),Cr(Ar),na(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Do(e,t),qo(t),null;case 5:Js(t);var r=Ys(Xs.current);if(n=t.type,null!==e&&null!=t.stateNode)Ro(e,t,n,i,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(s(166));return qo(t),null}if(e=Ys(Gs.current),hs(t)){i=t.stateNode,n=t.type;var a=t.memoizedProps;switch(i[dr]=t,i[fr]=a,e=0!==(1&t.mode),n){case"dialog":ji("cancel",i),ji("close",i);break;case"iframe":case"object":case"embed":ji("load",i);break;case"video":case"audio":for(r=0;r<Ii.length;r++)ji(Ii[r],i);break;case"source":ji("error",i);break;case"img":case"image":case"link":ji("error",i),ji("load",i);break;case"details":ji("toggle",i);break;case"input":Z(i,a),ji("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!a.multiple},ji("invalid",i);break;case"textarea":re(i,a),ji("invalid",i)}for(var l in ye(n,a),r=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?i.textContent!==c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",c]):"number"===typeof c&&i.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Ji(i.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&ji("scroll",i)}switch(n){case"input":q(i),$(i,a,!0);break;case"textarea":q(i),ae(i);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(i.onclick=$i)}i=r,t.updateQueue=i,null!==i&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof i.is?e=l.createElement(n,{is:i.is}):(e=l.createElement(n),"select"===n&&(l=e,i.multiple?l.multiple=!0:i.size&&(l.size=i.size))):e=l.createElementNS(e,n),e[dr]=t,e[fr]=i,Lo(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,i),n){case"dialog":ji("cancel",e),ji("close",e),r=i;break;case"iframe":case"object":case"embed":ji("load",e),r=i;break;case"video":case"audio":for(r=0;r<Ii.length;r++)ji(Ii[r],e);r=i;break;case"source":ji("error",e),r=i;break;case"img":case"image":case"link":ji("error",e),ji("load",e),r=i;break;case"details":ji("toggle",e),r=i;break;case"input":Z(e,i),r=K(e,i),ji("invalid",e);break;case"option":default:r=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},r=z({},i,{value:void 0}),ji("invalid",e);break;case"textarea":re(e,i),r=ie(e,i),ji("invalid",e)}for(a in ye(n,r),c=r)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&ji("scroll",e):null!=u&&x(e,a,u,l))}switch(n){case"input":q(e),$(e,i,!1);break;case"textarea":q(e),ae(e);break;case"option":null!=i.value&&e.setAttribute("value",""+W(i.value));break;case"select":e.multiple=!!i.multiple,null!=(a=i.value)?ne(e,!!i.multiple,a,!1):null!=i.defaultValue&&ne(e,!!i.multiple,i.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=$i)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return qo(t),null;case 6:if(e&&null!=t.stateNode)No(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(s(166));if(n=Ys(Xs.current),Ys(Gs.current),hs(t)){if(i=t.stateNode,n=t.memoizedProps,i[dr]=t,(a=i.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Ji(i.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Ji(i.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(i=(9===n.nodeType?n:n.ownerDocument).createTextNode(i))[dr]=t,t.stateNode=i}return qo(t),null;case 13:if(Cr($s),i=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(rs&&null!==is&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,a=!1;else if(a=hs(t),null!==i&&null!==i.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[dr]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;qo(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((i=null!==i)!==(null!==e&&null!==e.memoizedState)&&i&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&$s.current)?0===Nl&&(Nl=3):mc())),null!==t.updateQueue&&(t.flags|=4),qo(t),null);case 4:return Zs(),Do(e,t),null===e&&Ui(t.stateNode.containerInfo),qo(t),null;case 10:return Ts(t.type._context),qo(t),null;case 19:if(Cr($s),null===(a=t.memoizedState))return qo(t),null;if(i=0!==(128&t.flags),null===(l=a.rendering))if(i)Go(a,!1);else{if(0!==Nl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Go(a,!1),null!==(i=l.updateQueue)&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=n,n=t.child;null!==n;)e=i,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Er($s,1&$s.current|2),t.child}e=e.sibling}null!==a.tail&&Qe()>Ul&&(t.flags|=128,i=!0,Go(a,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=ea(l))){if(t.flags|=128,i=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Go(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!rs)return qo(t),null}else 2*Qe()-a.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,i=!0,Go(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Qe(),t.sibling=null,n=$s.current,Er($s,i?1&n|2:1&n),t):(qo(t),null);case 22:case 23:return hc(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Dl)&&(qo(t),6&t.subtreeFlags&&(t.flags|=8192)):qo(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Yo(e,t){switch(ts(t),t.tag){case 1:return Dr(t.type)&&Rr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zs(),Cr(kr),Cr(Ar),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Cr($s),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Cr($s),null;case 4:return Zs(),null;case 10:return Ts(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Lo=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Do=function(){},Ro=function(e,t,n,i){var r=e.memoizedProps;if(r!==i){e=t.stateNode,Ys(Gs.current);var s,a=null;switch(n){case"input":r=K(e,r),i=K(e,i),a=[];break;case"select":r=z({},r,{value:void 0}),i=z({},i,{value:void 0}),a=[];break;case"textarea":r=ie(e,r),i=ie(e,i),a=[];break;default:"function"!==typeof r.onClick&&"function"===typeof i.onClick&&(e.onclick=$i)}for(u in ye(n,i),n=null,r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&null!=r[u])if("style"===u){var l=r[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in i){var c=i[u];if(l=null!=r?r[u]:void 0,i.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&ji("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},No=function(e,t,n,i){n!==i&&(t.flags|=4)};var Ko=!1,Zo=!1,Qo="function"===typeof WeakSet?WeakSet:Set,Jo=null;function $o(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Mc(e,t,i)}else n.current=null}function el(e,t,n){try{n()}catch(i){Mc(e,t,i)}}var tl=!1;function nl(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&el(t,n,s)}r=r.next}while(r!==i)}}function il(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[dr],delete t[fr],delete t[mr],delete t[gr],delete t[vr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$i));else if(4!==i&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==i&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Zo||$o(n,t);case 6:var i=ul,r=hl;ul=null,dl(e,t,n),hl=r,null!==(ul=i)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Ut(e)):lr(ul,n.stateNode));break;case 4:i=ul,r=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=i,hl=r;break;case 0:case 11:case 14:case 15:if(!Zo&&(null!==(i=n.updateQueue)&&null!==(i=i.lastEffect))){r=i=i.next;do{var s=r,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),r=r.next}while(r!==i)}dl(e,t,n);break;case 1:if(!Zo&&($o(n,t),"function"===typeof(i=n.stateNode).componentWillUnmount))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(o){Mc(n,t,o)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Zo=(i=Zo)||null!==n.memoizedState,dl(e,t,n),Zo=i):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Qo),t.forEach(function(t){var i=Ac.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function ml(e,t){var n=t.deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(a,o,r),ul=null,hl=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(u){Mc(r,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&i){try{nl(3,e,e.return),il(3,e)}catch(g){Mc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Mc(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&i&&null!==n&&$o(n,n.return);break;case 5:if(ml(t,e),vl(e),512&i&&null!==n&&$o(n,n.return),32&e.flags){var r=e.stateNode;try{de(r,"")}catch(g){Mc(e,e.return,g)}}if(4&i&&null!=(r=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&Q(r,a),xe(l,o);var u=xe(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?ge(r,d):"dangerouslySetInnerHTML"===h?he(r,d):"children"===h?de(r,d):x(r,h,d,u)}switch(l){case"input":J(r,a);break;case"textarea":se(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(r,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(r,!!a.multiple,a.defaultValue,!0):ne(r,!!a.multiple,a.multiple?[]:"",!1))}r[fr]=a}catch(g){Mc(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&i){if(null===e.stateNode)throw Error(s(162));r=e.stateNode,a=e.memoizedProps;try{r.nodeValue=a}catch(g){Mc(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&i&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){Mc(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(r=e.child).flags&&(a=null!==r.memoizedState,r.stateNode.isHidden=a,!a||null!==r.alternate&&null!==r.alternate.memoizedState||(Vl=Qe())),4&i&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Zo=(u=Zo)||h,ml(t,e),Zo=u):ml(t,e),vl(e),8192&i){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Jo=e,h=e.child;null!==h;){for(d=Jo=h;null!==Jo;){switch(p=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:$o(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){i=f,n=f.return;try{t=i,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Mc(i,n,g)}}break;case 5:$o(f,f.return);break;case 22:if(null!==f.memoizedState){_l(d);continue}}null!==p?(p.return=f,Jo=p):_l(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{r=d.stateNode,u?"function"===typeof(a=r.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",o))}catch(g){Mc(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Mc(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&i&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var i=n;break e}n=n.return}throw Error(s(160))}switch(i.tag){case 5:var r=i.stateNode;32&i.flags&&(de(r,""),i.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var a=i.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Mc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Jo=e,xl(e,t,n)}function xl(e,t,n){for(var i=0!==(1&e.mode);null!==Jo;){var r=Jo,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||Ko;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Zo;o=Ko;var c=Zo;if(Ko=a,(Zo=l)&&!c)for(Jo=r;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?wl(r):null!==l?(l.return=a,Jo=l):wl(r);for(;null!==s;)Jo=s,xl(s,t,n),s=s.sibling;Jo=r,Ko=o,Zo=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,Jo=s):bl(e)}}function bl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zo||il(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!Zo)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Hs(t,a,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Hs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Ut(d)}}}break;default:throw Error(s(163))}Zo||512&t.flags&&rl(t)}catch(f){Mc(t,t.return,f)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function _l(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function wl(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{il(4,t)}catch(l){Mc(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Mc(t,r,l)}}var s=t.return;try{rl(t)}catch(l){Mc(t,s,l)}break;case 5:var a=t.return;try{rl(t)}catch(l){Mc(t,a,l)}}}catch(l){Mc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var Sl,Ml=Math.ceil,Cl=b.ReactCurrentDispatcher,El=b.ReactCurrentOwner,Tl=b.ReactCurrentBatchConfig,Al=0,kl=null,Pl=null,Ll=0,Dl=0,Rl=Mr(0),Nl=0,Il=null,Ol=0,zl=0,Fl=0,jl=null,Bl=null,Vl=0,Ul=1/0,Hl=null,Wl=!1,Gl=null,ql=null,Xl=!1,Yl=null,Kl=0,Zl=0,Ql=null,Jl=-1,$l=0;function ec(){return 0!==(6&Al)?Qe():-1!==Jl?Jl:Jl=Qe()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Al)&&0!==Ll?Ll&-Ll:null!==ms.transition?(0===$l&&($l=mt()),$l):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nc(e,t,n,i){if(50<Zl)throw Zl=0,Ql=null,Error(s(185));vt(e,n,i),0!==(2&Al)&&e===kl||(e===kl&&(0===(2&Al)&&(zl|=n),4===Nl&&oc(e,Ll)),ic(e,i),1===n&&0===Al&&0===(1&t.mode)&&(Ul=Qe()+500,jr&&Ur()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=dt(e,e===kl?Ll:0);if(0===i)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){jr=!0,Vr(e)}(lc.bind(null,e)):Vr(lc.bind(null,e)),ar(function(){0===(6&Al)&&Ur()}),n=null;else{switch(bt(i)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=it}n=kc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Jl=-1,$l=0,0!==(6&Al))throw Error(s(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var i=dt(e,e===kl?Ll:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=gc(e,i);else{t=i;var r=Al;Al|=2;var a=pc();for(kl===e&&Ll===t||(Hl=null,Ul=Qe()+500,dc(e,t));;)try{yc();break}catch(l){fc(e,l)}Es(),Cl.current=a,Al=r,null!==Pl?t=0:(kl=null,Ll=0,t=Nl)}if(0!==t){if(2===t&&(0!==(r=pt(e))&&(i=r,t=sc(e,r))),1===t)throw n=Il,dc(e,0),oc(e,i),ic(e,Qe()),n;if(6===t)oc(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!oi(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=gc(e,i))&&(0!==(a=pt(e))&&(i=a,t=sc(e,a))),1===t))throw n=Il,dc(e,0),oc(e,i),ic(e,Qe()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(s(345));case 2:case 5:_c(e,Bl,Hl);break;case 3:if(oc(e,i),(130023424&i)===i&&10<(t=Vl+500-Qe())){if(0!==dt(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ir(_c.bind(null,e,Bl,Hl),t);break}_c(e,Bl,Hl);break;case 4:if(oc(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-at(i);a=1<<o,(o=t[o])>r&&(r=o),i&=~a}if(i=r,10<(i=(120>(i=Qe()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Ml(i/1960))-i)){e.timeoutHandle=ir(_c.bind(null,e,Bl,Hl),i);break}_c(e,Bl,Hl);break;default:throw Error(s(329))}}}return ic(e,Qe()),e.callbackNode===n?rc.bind(null,e):null}function sc(e,t){var n=jl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Bl,Bl=n,null!==t&&ac(t)),e}function ac(e){null===Bl?Bl=e:Bl.push.apply(Bl,e)}function oc(e,t){for(t&=~Fl,t&=~zl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),i=1<<n;e[n]=-1,t&=~i}}function lc(e){if(0!==(6&Al))throw Error(s(327));wc();var t=dt(e,0);if(0===(1&t))return ic(e,Qe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var i=pt(e);0!==i&&(t=i,n=sc(e,i))}if(1===n)throw n=Il,dc(e,0),oc(e,t),ic(e,Qe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Bl,Hl),ic(e,Qe()),null}function cc(e,t){var n=Al;Al|=1;try{return e(t)}finally{0===(Al=n)&&(Ul=Qe()+500,jr&&Ur())}}function uc(e){null!==Yl&&0===Yl.tag&&0===(6&Al)&&wc();var t=Al;Al|=1;var n=Tl.transition,i=xt;try{if(Tl.transition=null,xt=1,e)return e()}finally{xt=i,Tl.transition=n,0===(6&(Al=t))&&Ur()}}function hc(){Dl=Rl.current,Cr(Rl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Pl)for(n=Pl.return;null!==n;){var i=n;switch(ts(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&Rr();break;case 3:Zs(),Cr(kr),Cr(Ar),na();break;case 5:Js(i);break;case 4:Zs();break;case 13:case 19:Cr($s);break;case 10:Ts(i.type._context);break;case 22:case 23:hc()}n=n.return}if(kl=e,Pl=e=Rc(e.current,null),Ll=Dl=t,Nl=0,Il=null,Fl=zl=Ol=0,Bl=jl=null,null!==Ls){for(t=0;t<Ls.length;t++)if(null!==(i=(n=Ls[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}Ls=null}return e}function fc(e,t){for(;;){var n=Pl;try{if(Es(),ia.current=Qa,ca){for(var i=aa.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,ha=0,El.current=null,null===n||null===n.return){Nl=1,Il=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=go(o);if(null!==p){p.flags&=-257,vo(p,o,l,0,t),1&p.mode&&mo(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){mo(a,u,t),mc();break e}c=Error(s(426))}else if(rs&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ps(lo(c,l));break e}}a=c=lo(c,l),4!==Nl&&(Nl=2),null===jl?jl=[a]:jl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Vs(a,fo(0,c,t));break e;case 1:l=c;var y=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===ql||!ql.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Vs(a,po(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function pc(){var e=Cl.current;return Cl.current=Qa,null===e?Qa:e}function mc(){0!==Nl&&3!==Nl&&2!==Nl||(Nl=4),null===kl||0===(268435455&Ol)&&0===(268435455&zl)||oc(kl,Ll)}function gc(e,t){var n=Al;Al|=2;var i=pc();for(kl===e&&Ll===t||(Hl=null,dc(e,t));;)try{vc();break}catch(r){fc(e,r)}if(Es(),Al=n,Cl.current=i,null!==Pl)throw Error(s(261));return kl=null,Ll=0,Nl}function vc(){for(;null!==Pl;)xc(Pl)}function yc(){for(;null!==Pl&&!Ke();)xc(Pl)}function xc(e){var t=Sl(e.alternate,e,Dl);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,El.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Xo(n,t,Dl)))return void(Pl=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Nl=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Nl&&(Nl=5)}function _c(e,t,n){var i=xt,r=Tl.transition;try{Tl.transition=null,xt=1,function(e,t,n,i){do{wc()}while(null!==Yl);if(0!==(6&Al))throw Error(s(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-at(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,a),e===kl&&(Pl=kl=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Xl||(Xl=!0,kc(tt,function(){return wc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Tl.transition,Tl.transition=null;var o=xt;xt=1;var l=Al;Al|=4,El.current=null,function(e,t){if(er=Wt,fi(e=di())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var i=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(i&&0!==i.rangeCount){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(_){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==r&&3!==d.nodeType||(l=o+r),d!==a||0!==i&&3!==d.nodeType||(c=o+i),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===r&&(l=o),f===a&&++h===i&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(_){Mc(t,t.return,_)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}m=tl,tl=!1}(e,n),gl(n,e),pi(tr),Wt=!!er,tr=er=null,e.current=n,yl(n,e,r),Ze(),Al=l,xt=o,Tl.transition=a}else e.current=n;if(Xl&&(Xl=!1,Yl=e,Kl=r),a=e.pendingLanes,0===a&&(ql=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Qe()),null!==t)for(i=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=Gl,Gl=null,e;0!==(1&Kl)&&0!==e.tag&&wc(),a=e.pendingLanes,0!==(1&a)?e===Ql?Zl++:(Zl=0,Ql=e):Zl=0,Ur()}(e,t,n,i)}finally{Tl.transition=r,xt=i}return null}function wc(){if(null!==Yl){var e=bt(Kl),t=Tl.transition,n=xt;try{if(Tl.transition=null,xt=16>e?16:e,null===Yl)var i=!1;else{if(e=Yl,Yl=null,Kl=0,0!==(6&Al))throw Error(s(331));var r=Al;for(Al|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var h=Jo;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Jo=d;else for(;null!==Jo;){var f=(h=Jo).sibling,p=h.return;if(sl(h),h===u){Jo=null;break}if(null!==f){f.return=p,Jo=f;break}Jo=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Jo=y;break e}Jo=a.return}}var x=e.current;for(Jo=x;null!==Jo;){var b=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Jo=b;else e:for(o=x;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:il(9,l)}}catch(w){Mc(l,l.return,w)}if(l===o){Jo=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,Jo=_;break e}Jo=l.return}}if(Al=r,Ur(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(rt,e)}catch(w){}i=!0}return i}finally{xt=n,Tl.transition=t}}return!1}function Sc(e,t,n){e=js(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),ic(e,t))}function Mc(e,t,n){if(3===e.tag)Sc(e,e,n);else for(;null!==t;){if(3===t.tag){Sc(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===ql||!ql.has(i))){t=js(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),ic(t,e));break}}t=t.return}}function Cc(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,kl===e&&(Ll&n)===n&&(4===Nl||3===Nl&&(130023424&Ll)===Ll&&500>Qe()-Vl?dc(e,0):Fl|=n),ic(e,t)}function Ec(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Ns(e,t))&&(vt(e,t,n),ic(e,n))}function Tc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ec(e,n)}function Ac(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(s(314))}null!==i&&i.delete(t),Ec(e,n)}function kc(e,t){return Xe(e,t)}function Pc(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,i){return new Pc(e,t,n,i)}function Dc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Rc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Nc(e,t,n,i,r,a){var o=2;if(i=e,"function"===typeof e)Dc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case S:return Ic(n.children,r,a,t);case M:o=8,r|=8;break;case C:return(e=Lc(12,n,t,2|r)).elementType=C,e.lanes=a,e;case k:return(e=Lc(13,n,t,r)).elementType=k,e.lanes=a,e;case P:return(e=Lc(19,n,t,r)).elementType=P,e.lanes=a,e;case R:return Oc(n,r,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case E:o=10;break e;case T:o=9;break e;case A:o=11;break e;case L:o=14;break e;case D:o=16,i=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Lc(o,n,t,r)).elementType=e,t.type=i,t.lanes=a,t}function Ic(e,t,n,i){return(e=Lc(7,e,i,t)).lanes=n,e}function Oc(e,t,n,i){return(e=Lc(22,e,i,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function zc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,i,r,s,a,o,l){return e=new jc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Lc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Os(s),e}function Vc(e){if(!e)return Tr;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Dr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Dr(n))return Ir(e,n,t)}return t}function Uc(e,t,n,i,r,s,a,o,l){return(e=Bc(n,i,!0,e,0,s,0,o,l)).context=Vc(null),n=e.current,(s=Fs(i=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,js(n,s,r),e.current.lanes=r,vt(e,r,i),ic(e,i),e}function Hc(e,t,n,i){var r=t.current,s=ec(),a=tc(r);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),null!==(e=js(r,t,a))&&(nc(e,r,a,s),Bs(e,r,a)),a}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Gc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function qc(e,t){Gc(e,t),(e=e.alternate)&&Gc(e,t)}Sl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||kr.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:ko(t),fs();break;case 5:Qs(t);break;case 1:Dr(t.type)&&Or(t);break;case 4:Ks(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,r=t.memoizedProps.value;Er(ws,i._currentValue),i._currentValue=r;break;case 13:if(null!==(i=t.memoizedState))return null!==i.dehydrated?(Er($s,1&$s.current),t.flags|=128,null):0!==(n&t.child.childLanes)?zo(e,t,n):(Er($s,1&$s.current),null!==(e=Wo(e,t,n))?e.sibling:null);Er($s,1&$s.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return Uo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Er($s,$s.current),i)break;return null;case 22:case 23:return t.lanes=0,Mo(e,t,n)}return Wo(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,rs&&0!==(1048576&t.flags)&&$r(t,qr,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;Ho(e,t),e=t.pendingProps;var r=Lr(t,Ar.current);ks(t,n),r=ma(null,t,i,e,r,n);var a=ga();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Dr(i)?(a=!0,Or(t)):a=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Os(t),r.updater=io,t.stateNode=r,r._reactInternals=t,oo(t,i,e,n),t=Ao(null,t,i,!0,a,n)):(t.tag=0,rs&&a&&es(t),bo(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(Ho(e,t),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Dc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===L)return 14}return 2}(i),e=to(i,e),r){case 0:t=Eo(null,t,i,e,n);break e;case 1:t=To(null,t,i,e,n);break e;case 11:t=_o(null,t,i,e,n);break e;case 14:t=wo(null,t,i,to(i.type,e),n);break e}throw Error(s(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Eo(e,t,i,r=t.elementType===i?r:to(i,r),n);case 1:return i=t.type,r=t.pendingProps,To(e,t,i,r=t.elementType===i?r:to(i,r),n);case 3:e:{if(ko(t),null===e)throw Error(s(387));i=t.pendingProps,r=(a=t.memoizedState).element,zs(e,t),Us(t,i,null,n);var o=t.memoizedState;if(i=o.element,a.isDehydrated){if(a={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,i,n,r=lo(Error(s(423)),t));break e}if(i!==r){t=Po(e,t,i,n,r=lo(Error(s(424)),t));break e}for(is=cr(t.stateNode.containerInfo.firstChild),ns=t,rs=!0,ss=null,n=_s(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),i===r){t=Wo(e,t,n);break e}bo(e,t,i,n)}t=t.child}return t;case 5:return Qs(t),null===e&&cs(t),i=t.type,r=t.pendingProps,a=null!==e?e.memoizedProps:null,o=r.children,nr(i,r)?o=null:null!==a&&nr(i,a)&&(t.flags|=32),Co(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return zo(e,t,n);case 4:return Ks(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=bs(t,null,i,n):bo(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,_o(e,t,i,r=t.elementType===i?r:to(i,r),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,a=t.memoizedProps,o=r.value,Er(ws,i._currentValue),i._currentValue=o,null!==a)if(oi(a.value,o)){if(a.children===r.children&&!kr.current){t=Wo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),As(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),As(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,ks(t,n),i=i(r=Ps(r)),t.flags|=1,bo(e,t,i,n),t.child;case 14:return r=to(i=t.type,t.pendingProps),wo(e,t,i,r=to(i.type,r),n);case 15:return So(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:to(i,r),Ho(e,t),t.tag=1,Dr(i)?(e=!0,Or(t)):e=!1,ks(t,n),so(t,i,r),oo(t,i,r,n),Ao(null,t,i,!0,e,n);case 19:return Uo(e,t,n);case 22:return Mo(e,t,n)}throw Error(s(156,t.tag))};var Xc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Qc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function $c(e,t,n,i,r){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof r){var o=r;r=function(){var e=Wc(a);o.call(e)}}Hc(t,a,e,r)}else a=function(e,t,n,i,r){if(r){if("function"===typeof i){var s=i;i=function(){var e=Wc(a);s.call(e)}}var a=Uc(t,i,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pr]=a.current,Ui(8===e.nodeType?e.parentNode:e),uc(),a}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof i){var o=i;i=function(){var e=Wc(l);o.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pr]=l.current,Ui(8===e.nodeType?e.parentNode:e),uc(function(){Hc(t,l,n,i)}),l}(n,t,e,r,i);return Wc(a)}Kc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Hc(e,t,null,null)},Kc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Hc(null,e,null,null)}),t[pr]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Mt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&zt(e)}},_t=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),ic(t,Qe()),0===(6&Al)&&(Ul=Qe()+500,Ur()))}break;case 13:uc(function(){var t=Ns(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),qc(e,1)}},wt=function(e){if(13===e.tag){var t=Ns(e,134217728);if(null!==t)nc(t,e,134217728,ec());qc(e,134217728)}},St=function(e){if(13===e.tag){var t=tc(e),n=Ns(e,t);if(null!==n)nc(n,e,t,ec());qc(e,t)}},Mt=function(){return xt},Ct=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},we=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=_r(i);if(!r)throw Error(s(90));X(i),J(i,r)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ae=cc,ke=uc;var eu={usingClientEntryPoint:!1,Events:[xr,br,_r,Ee,Te,cc]},tu={findFiberByHostInstance:yr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var iu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!iu.isDisabled&&iu.supportsFiber)try{rt=iu.inject(nu),st=iu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(s(200));return function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(s(299));var n=!1,i="",r=Xc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(i=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,i,r),e[pr]=t.current,Ui(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Qc(t))throw Error(s(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(s(405));var i=null!=n&&n.hydratedSources||null,r=!1,a="",o=Xc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,r,0,a,o),e[pr]=t.current,Ui(e),i)for(e=0;e<i.length;e++)r=(r=(n=i[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Kc(t)},t.render=function(e,t,n){if(!Qc(t))throw Error(s(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Qc(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){$c(null,null,e,!1,function(){e._reactRootContainer=null,e[pr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,i){if(!Qc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return $c(e,t,n,!1,i)},t.version="18.3.1-next-f1338f8080-20240426"},750:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o(n(429)),r=o(n(866)),s=o(n(144)),a=o(n(101));function o(e){return e&&e.__esModule?e:{default:e}}var l=(0,i.default)("youtube-player"),c={proxyEvents:function(e){var t={},n=function(n){var i="on"+n.slice(0,1).toUpperCase()+n.slice(1);t[i]=function(t){l('event "%s"',i,t),e.trigger(n,t)}},i=!0,r=!1,a=void 0;try{for(var o,c=s.default[Symbol.iterator]();!(i=(o=c.next()).done);i=!0){n(o.value)}}catch(u){r=!0,a=u}finally{try{!i&&c.return&&c.return()}finally{if(r)throw a}}return t},promisifyPlayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n={},i=function(i){t&&a.default[i]?n[i]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.then(function(e){var t=a.default[i],r=e.getPlayerState(),s=e[i].apply(e,n);return t.stateChangeRequired||Array.isArray(t.acceptableStates)&&-1===t.acceptableStates.indexOf(r)?new Promise(function(n){e.addEventListener("onStateChange",function i(){var r=e.getPlayerState(),s=void 0;"number"===typeof t.timeout&&(s=setTimeout(function(){e.removeEventListener("onStateChange",i),n()},t.timeout)),Array.isArray(t.acceptableStates)&&-1!==t.acceptableStates.indexOf(r)&&(e.removeEventListener("onStateChange",i),clearTimeout(s),n())})}).then(function(){return s}):s})}:n[i]=function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.then(function(e){return e[i].apply(e,n)})}},s=!0,o=!1,l=void 0;try{for(var c,u=r.default[Symbol.iterator]();!(s=(c=u.next()).done);s=!0){i(c.value)}}catch(h){o=!0,l=h}finally{try{!s&&u.return&&u.return()}finally{if(o)throw l}}return n}};t.default=c,e.exports=t.default},826:(e,t,n)=>{var i;function r(e){function n(){if(n.enabled){var e=n,r=+new Date,s=r-(i||r);e.diff=s,e.prev=i,e.curr=r,i=r;for(var a=new Array(arguments.length),o=0;o<a.length;o++)a[o]=arguments[o];a[0]=t.coerce(a[0]),"string"!==typeof a[0]&&a.unshift("%O");var l=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(n,i){if("%%"===n)return n;l++;var r=t.formatters[i];if("function"===typeof r){var s=a[l];n=r.call(e,s),a.splice(l,1),l--}return n}),t.formatArgs.call(e,a),(n.log||t.log||console.log.bind(console)).apply(e,a)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,i=0;for(n in e)i=(i<<5)-i+e.charCodeAt(n),i|=0;return t.colors[Math.abs(i)%t.colors.length]}(e),"function"===typeof t.init&&t.init(n),n}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"===typeof e?e:"").split(/[\s,]+/),i=n.length,r=0;r<i;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,i;for(n=0,i=t.skips.length;n<i;n++)if(t.skips[n].test(e))return!1;for(n=0,i=t.names.length;n<i;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(445),t.names=[],t.skips=[],t.formatters={}},853:(e,t,n)=>{"use strict";e.exports=n(234)},866:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default},950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},958:(e,t,n)=>{e.exports=function(e){var t={},i=n(43),r=n(853),s=Object.assign;function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),x=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var b=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var _=Symbol.iterator;function w(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=_&&e[_]||e["@@iterator"])?e:null}function S(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case h:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case f:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:S(e.type)||"Memo";case x:t=e._payload,e=e._init;try{return S(e(t))}catch(n){}}return null}function M(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return S(t);case 8:return t===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function C(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function E(e){if(C(e)!==e)throw Error(a(188))}function T(e){var t=e.alternate;if(!t){if(null===(t=C(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(null===r)break;var s=r.alternate;if(null===s){if(null!==(i=r.return)){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return E(r),e;if(s===i)return E(r),t;s=s.sibling}throw Error(a(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==i)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}function A(e){return null!==(e=T(e))?k(e):null}function k(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=k(e);if(null!==t)return t;e=e.sibling}return null}function P(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=P(e);if(null!==t)return t}e=e.sibling}return null}var L,D=Array.isArray,R=e.getPublicInstance,N=e.getRootHostContext,I=e.getChildHostContext,O=e.prepareForCommit,z=e.resetAfterCommit,F=e.createInstance,j=e.appendInitialChild,B=e.finalizeInitialChildren,V=e.prepareUpdate,U=e.shouldSetTextContent,H=e.createTextInstance,W=e.scheduleTimeout,G=e.cancelTimeout,q=e.noTimeout,X=e.isPrimaryRenderer,Y=e.supportsMutation,K=e.supportsPersistence,Z=e.supportsHydration,Q=e.getInstanceFromNode,J=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,ie=e.supportsTestSelectors,re=e.findFiberRoot,se=e.getBoundingRect,ae=e.getTextContent,oe=e.isHiddenSubtree,le=e.matchAccessibilityRole,ce=e.setFocusIfFocusable,ue=e.setupIntersectionObserver,he=e.appendChild,de=e.appendChildToContainer,fe=e.commitTextUpdate,pe=e.commitMount,me=e.commitUpdate,ge=e.insertBefore,ve=e.insertInContainerBefore,ye=e.removeChild,xe=e.removeChildFromContainer,be=e.resetTextContent,_e=e.hideInstance,we=e.hideTextInstance,Se=e.unhideInstance,Me=e.unhideTextInstance,Ce=e.clearContainer,Ee=e.cloneInstance,Te=e.createContainerChildSet,Ae=e.appendChildToContainerChildSet,ke=e.finalizeContainerChildren,Pe=e.replaceContainerChildren,Le=e.cloneHiddenInstance,De=e.cloneHiddenTextInstance,Re=e.canHydrateInstance,Ne=e.canHydrateTextInstance,Ie=e.canHydrateSuspenseInstance,Oe=e.isSuspenseInstancePending,ze=e.isSuspenseInstanceFallback,Fe=e.registerSuspenseInstanceRetry,je=e.getNextHydratableSibling,Be=e.getFirstHydratableChild,Ve=e.getFirstHydratableChildWithinContainer,Ue=e.getFirstHydratableChildWithinSuspenseInstance,He=e.hydrateInstance,We=e.hydrateTextInstance,Ge=e.hydrateSuspenseInstance,qe=e.getNextHydratableInstanceAfterSuspenseInstance,Xe=e.commitHydratedContainer,Ye=e.commitHydratedSuspenseInstance,Ke=e.clearSuspenseBoundary,Ze=e.clearSuspenseBoundaryFromContainer,Qe=e.shouldDeleteUnhydratedTailInstances,Je=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var i=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){i=c}e.call(t.prototype)}else{try{throw Error()}catch(c){i=c}e()}}catch(c){if(c&&i&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),s=i.stack.split("\n"),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||r[a]!==s[o]){var l="\n"+r[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var it=Object.prototype.hasOwnProperty,rt=[],st=-1;function at(e){return{current:e}}function ot(e){0>st||(e.current=rt[st],rt[st]=null,st--)}function lt(e,t){st++,rt[st]=e.current,e.current=t}var ct={},ut=at(ct),ht=at(!1),dt=ct;function ft(e,t){var n=e.type.contextTypes;if(!n)return ct;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var r,s={};for(r in n)s[r]=t[r];return i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function pt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mt(){ot(ht),ot(ut)}function gt(e,t,n){if(ut.current!==ct)throw Error(a(168));lt(ut,t),lt(ht,n)}function vt(e,t,n){var i=e.stateNode;if(t=t.childContextTypes,"function"!==typeof i.getChildContext)return n;for(var r in i=i.getChildContext())if(!(r in t))throw Error(a(108,M(e)||"Unknown",r));return s({},n,i)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ct,dt=ut.current,lt(ut,e),lt(ht,ht.current),!0}function xt(e,t,n){var i=e.stateNode;if(!i)throw Error(a(169));n?(e=vt(e,t,dt),i.__reactInternalMemoizedMergedChildContext=e,ot(ht),ot(ut),lt(ut,e)):ot(ht),lt(ht,n)}var bt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(_t(e)/wt|0)|0},_t=Math.log,wt=Math.LN2;var St=64,Mt=4194304;function Ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Et(e,t){var n=e.pendingLanes;if(0===n)return 0;var i=0,r=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~r;0!==o?i=Ct(o):0!==(s&=a)&&(i=Ct(s))}else 0!==(a=n&~r)?i=Ct(a):0!==s&&(i=Ct(s));if(0===i)return 0;if(0!==t&&t!==i&&0===(t&r)&&((r=i&-i)>=(s=t&-t)||16===r&&0!==(4194240&s)))return t;if(0!==(4&i)&&(i|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=i;0<t;)r=1<<(n=31-bt(t)),i|=e[n],t&=~r;return i}function Tt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function At(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function kt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-bt(t)]=n}function Lt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-bt(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}var Dt=0;function Rt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Nt=r.unstable_scheduleCallback,It=r.unstable_cancelCallback,Ot=r.unstable_shouldYield,zt=r.unstable_requestPaint,Ft=r.unstable_now,jt=r.unstable_ImmediatePriority,Bt=r.unstable_UserBlockingPriority,Vt=r.unstable_NormalPriority,Ut=r.unstable_IdlePriority,Ht=null,Wt=null;var Gt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},qt=null,Xt=!1,Yt=!1;function Kt(e){null===qt?qt=[e]:qt.push(e)}function Zt(){if(!Yt&&null!==qt){Yt=!0;var e=0,t=Dt;try{var n=qt;for(Dt=1;e<n.length;e++){var i=n[e];do{i=i(!0)}while(null!==i)}qt=null,Xt=!1}catch(r){throw null!==qt&&(qt=qt.slice(e+1)),Nt(jt,Zt),r}finally{Dt=t,Yt=!1}}return null}var Qt=o.ReactCurrentBatchConfig;function Jt(e,t){if(Gt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!it.call(t,r)||!Gt(e[r],t[r]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=s({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=at(null),nn=null,rn=null,sn=null;function an(){sn=rn=nn=null}function on(e,t,n){X?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;ot(tn),X?e._currentValue=t:e._currentValue2=t}function cn(e,t,n){for(;null!==e;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==i&&(i.childLanes|=t)):null!==i&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function un(e,t){nn=e,sn=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Or=!0),e.firstContext=null)}function hn(e){var t=X?e._currentValue:e._currentValue2;if(sn!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(a(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var dn=null,fn=!1;function pn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Ys&&0!==(1&e.mode)&&0===(2&Xs)?(null===(e=n.interleaved)?(t.next=t,null===dn?dn=[n]:dn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Lt(e,n)}}function xn(e,t){var n=e.updateQueue,i=e.alternate;if(null!==i&&n===(i=i.updateQueue)){var r=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?r=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?r=s=t:s=s.next=t}else r=s=t;return n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function bn(e,t,n,i){var r=e.updateQueue;fn=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(null!==l){r.shared.pending=null;var c=l,u=c.next;c.next=null,null===o?a=u:o.next=u,o=c;var h=e.alternate;null!==h&&((l=(h=h.updateQueue).lastBaseUpdate)!==o&&(null===l?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(null!==a){var d=r.baseState;for(o=0,h=u=c=null,l=a;;){var f=l.lane,p=l.eventTime;if((i&f)===f){null!==h&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,g=l;switch(f=t,p=n,g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(p,d,f):m)||void 0===f)break e;d=s({},d,f);break e;case 2:fn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=r.effects)?r.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,o|=f;if(null===(l=l.next)){if(null===(l=r.shared.pending))break;l=(f=l).next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}if(null===h&&(c=d),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=h,null!==(t=r.shared.interleaved)){r=t;do{o|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);ta|=o,e.lanes=o,e.memoizedState=d}}function _n(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var i=e[t],r=i.callback;if(null!==r){if(i.callback=null,i=n,"function"!==typeof r)throw Error(a(191,r));r.call(i)}}}var wn=(new i.Component).refs;function Sn(e,t,n,i){n=null===(n=n(i,t=e.memoizedState))||void 0===n?t:s({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Mn={isMounted:function(e){return!!(e=e._reactInternals)&&C(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ba(),r=_a(e),s=gn(i,r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),vn(e,s),null!==(t=wa(e,r,i))&&yn(t,e,r)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ba(),r=_a(e),s=gn(i,r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),vn(e,s),null!==(t=wa(e,r,i))&&yn(t,e,r)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ba(),i=_a(e),r=gn(n,i);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),vn(e,r),null!==(t=wa(e,i,n))&&yn(t,e,i)}};function Cn(e,t,n,i,r,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(i,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!Jt(n,i)||!Jt(r,s))}function En(e,t,n){var i=!1,r=ct,s=t.contextType;return"object"===typeof s&&null!==s?s=hn(s):(r=pt(t)?dt:ut.current,s=(i=null!==(i=t.contextTypes)&&void 0!==i)?ft(e,r):ct),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Mn,e.stateNode=t,t._reactInternals=e,i&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function Tn(e,t,n,i){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,i),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&Mn.enqueueReplaceState(t,t.state,null)}function An(e,t,n,i){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs=wn,pn(e);var s=t.contextType;"object"===typeof s&&null!==s?r.context=hn(s):(s=pt(t)?dt:ut.current,r.context=ft(e,s)),r.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(Sn(e,t,s,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&Mn.enqueueReplaceState(r,r.state,null),bn(e,n,r,i),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}var kn=[],Pn=0,Ln=null,Dn=0,Rn=[],Nn=0,In=null,On=1,zn="";function Fn(e,t){kn[Pn++]=Dn,kn[Pn++]=Ln,Ln=e,Dn=t}function jn(e,t,n){Rn[Nn++]=On,Rn[Nn++]=zn,Rn[Nn++]=In,In=e;var i=On;e=zn;var r=32-bt(i)-1;i&=~(1<<r),n+=1;var s=32-bt(t)+r;if(30<s){var a=r-r%5;s=(i&(1<<a)-1).toString(32),i>>=a,r-=a,On=1<<32-bt(t)+r|n<<r|i,zn=s+e}else On=1<<s|n<<r|i,zn=e}function Bn(e){null!==e.return&&(Fn(e,1),jn(e,1,0))}function Vn(e){for(;e===Ln;)Ln=kn[--Pn],kn[Pn]=null,Dn=kn[--Pn],kn[Pn]=null;for(;e===In;)In=Rn[--Nn],Rn[Nn]=null,zn=Rn[--Nn],Rn[Nn]=null,On=Rn[--Nn],Rn[Nn]=null}var Un=null,Hn=null,Wn=!1,Gn=!1,qn=null;function Xn(e,t){var n=Qa(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Yn(e,t){switch(e.tag){case 5:return null!==(t=Re(t,e.type,e.pendingProps))&&(e.stateNode=t,Un=e,Hn=Be(t),!0);case 6:return null!==(t=Ne(t,e.pendingProps))&&(e.stateNode=t,Un=e,Hn=null,!0);case 13:if(null!==(t=Ie(t))){var n=null!==In?{id:On,overflow:zn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Qa(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Un=e,Hn=null,!0}return!1;default:return!1}}function Kn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Zn(e){if(Wn){var t=Hn;if(t){var n=t;if(!Yn(e,t)){if(Kn(e))throw Error(a(418));t=je(n);var i=Un;t&&Yn(e,t)?Xn(i,n):(e.flags=-4097&e.flags|2,Wn=!1,Un=e)}}else{if(Kn(e))throw Error(a(418));e.flags=-4097&e.flags|2,Wn=!1,Un=e}}}function Qn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Un=e}function Jn(e){if(!Z||e!==Un)return!1;if(!Wn)return Qn(e),Wn=!0,!1;if(3!==e.tag&&(5!==e.tag||Qe(e.type)&&!U(e.type,e.memoizedProps))){var t=Hn;if(t){if(Kn(e)){for(e=Hn;e;)e=je(e);throw Error(a(418))}for(;t;)Xn(e,t),t=je(t)}}if(Qn(e),13===e.tag){if(!Z)throw Error(a(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));Hn=qe(e)}else Hn=Un?je(e.stateNode):null;return!0}function $n(){Z&&(Hn=Un=null,Gn=Wn=!1)}function ei(e){null===qn?qn=[e]:qn.push(e)}function ti(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var i=n.stateNode}if(!i)throw Error(a(147,e));var r=i,s=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===s?t.ref:(t=function(e){var t=r.refs;t===wn&&(t=r.refs={}),null===e?delete t[s]:t[s]=e},t._stringRef=s,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function ni(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ii(e){return(0,e._init)(e._payload)}function ri(e){function t(t,n){if(e){var i=t.deletions;null===i?(t.deletions=[n],t.flags|=16):i.push(n)}}function n(n,i){if(!e)return null;for(;null!==i;)t(n,i),i=i.sibling;return null}function i(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=$a(e,t)).index=0,e.sibling=null,e}function s(t,n,i){return t.index=i,e?null!==(i=t.alternate)?(i=i.index)<n?(t.flags|=2,n):i:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function h(e,t,n,i){return null===t||6!==t.tag?((t=io(n,e.mode,i)).return=e,t):((t=r(t,n)).return=e,t)}function d(e,t,n,i){var s=n.type;return s===u?p(e,t,n.props.children,i,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===x&&ii(s)===t.type)?((i=r(t,n.props)).ref=ti(e,t,n),i.return=e,i):((i=eo(n.type,n.key,n.props,null,e.mode,i)).ref=ti(e,t,n),i.return=e,i)}function f(e,t,n,i){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=ro(n,e.mode,i)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function p(e,t,n,i,s){return null===t||7!==t.tag?((t=to(n,e.mode,i,s)).return=e,t):((t=r(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=io(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=eo(t.type,t.key,t.props,null,e.mode,n)).ref=ti(e,null,t),n.return=e,n;case c:return(t=ro(t,e.mode,n)).return=e,t;case x:return m(e,(0,t._init)(t._payload),n)}if(D(t)||w(t))return(t=to(t,e.mode,n,null)).return=e,t;ni(e,t)}return null}function g(e,t,n,i){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:h(e,t,""+n,i);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===r?d(e,t,n,i):null;case c:return n.key===r?f(e,t,n,i):null;case x:return g(e,t,(r=n._init)(n._payload),i)}if(D(n)||w(n))return null!==r?null:p(e,t,n,i,null);ni(e,n)}return null}function v(e,t,n,i,r){if("string"===typeof i&&""!==i||"number"===typeof i)return h(t,e=e.get(n)||null,""+i,r);if("object"===typeof i&&null!==i){switch(i.$$typeof){case l:return d(t,e=e.get(null===i.key?n:i.key)||null,i,r);case c:return f(t,e=e.get(null===i.key?n:i.key)||null,i,r);case x:return v(e,t,n,(0,i._init)(i._payload),r)}if(D(i)||w(i))return p(t,e=e.get(n)||null,i,r,null);ni(t,i)}return null}function y(r,a,o,l){for(var c=null,u=null,h=a,d=a=0,f=null;null!==h&&d<o.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=g(r,h,o[d],l);if(null===p){null===h&&(h=f);break}e&&h&&null===p.alternate&&t(r,h),a=s(p,a,d),null===u?c=p:u.sibling=p,u=p,h=f}if(d===o.length)return n(r,h),Wn&&Fn(r,d),c;if(null===h){for(;d<o.length;d++)null!==(h=m(r,o[d],l))&&(a=s(h,a,d),null===u?c=h:u.sibling=h,u=h);return Wn&&Fn(r,d),c}for(h=i(r,h);d<o.length;d++)null!==(f=v(h,r,d,o[d],l))&&(e&&null!==f.alternate&&h.delete(null===f.key?d:f.key),a=s(f,a,d),null===u?c=f:u.sibling=f,u=f);return e&&h.forEach(function(e){return t(r,e)}),Wn&&Fn(r,d),c}function b(r,o,l,c){var u=w(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,d=o,f=o=0,p=null,y=l.next();null!==d&&!y.done;f++,y=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var x=g(r,d,y.value,c);if(null===x){null===d&&(d=p);break}e&&d&&null===x.alternate&&t(r,d),o=s(x,o,f),null===h?u=x:h.sibling=x,h=x,d=p}if(y.done)return n(r,d),Wn&&Fn(r,f),u;if(null===d){for(;!y.done;f++,y=l.next())null!==(y=m(r,y.value,c))&&(o=s(y,o,f),null===h?u=y:h.sibling=y,h=y);return Wn&&Fn(r,f),u}for(d=i(r,d);!y.done;f++,y=l.next())null!==(y=v(d,r,f,y.value,c))&&(e&&null!==y.alternate&&d.delete(null===y.key?f:y.key),o=s(y,o,f),null===h?u=y:h.sibling=y,h=y);return e&&d.forEach(function(e){return t(r,e)}),Wn&&Fn(r,f),u}return function e(i,s,a,h){if("object"===typeof a&&null!==a&&a.type===u&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case l:e:{for(var d=a.key,f=s;null!==f;){if(f.key===d){if((d=a.type)===u){if(7===f.tag){n(i,f.sibling),(s=r(f,a.props.children)).return=i,i=s;break e}}else if(f.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===x&&ii(d)===f.type){n(i,f.sibling),(s=r(f,a.props)).ref=ti(i,f,a),s.return=i,i=s;break e}n(i,f);break}t(i,f),f=f.sibling}a.type===u?((s=to(a.props.children,i.mode,h,a.key)).return=i,i=s):((h=eo(a.type,a.key,a.props,null,i.mode,h)).ref=ti(i,s,a),h.return=i,i=h)}return o(i);case c:e:{for(f=a.key;null!==s;){if(s.key===f){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(i,s.sibling),(s=r(s,a.children||[])).return=i,i=s;break e}n(i,s);break}t(i,s),s=s.sibling}(s=ro(a,i.mode,h)).return=i,i=s}return o(i);case x:return e(i,s,(f=a._init)(a._payload),h)}if(D(a))return y(i,s,a,h);if(w(a))return b(i,s,a,h);ni(i,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(i,s.sibling),(s=r(s,a)).return=i,i=s):(n(i,s),(s=io(a,i.mode,h)).return=i,i=s),o(i)):n(i,s)}}var si=ri(!0),ai=ri(!1),oi={},li=at(oi),ci=at(oi),ui=at(oi);function hi(e){if(e===oi)throw Error(a(174));return e}function di(e,t){lt(ui,t),lt(ci,e),lt(li,oi),e=N(t),ot(li),lt(li,e)}function fi(){ot(li),ot(ci),ot(ui)}function pi(e){var t=hi(ui.current),n=hi(li.current);n!==(t=I(n,e.type,t))&&(lt(ci,e),lt(li,t))}function mi(e){ci.current===e&&(ot(li),ot(ci))}var gi=at(0);function vi(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Oe(n)||ze(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yi=[];function xi(){for(var e=0;e<yi.length;e++){var t=yi[e];X?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yi.length=0}var bi=o.ReactCurrentDispatcher,_i=o.ReactCurrentBatchConfig,wi=0,Si=null,Mi=null,Ci=null,Ei=!1,Ti=!1,Ai=0,ki=0;function Pi(){throw Error(a(321))}function Li(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Gt(e[n],t[n]))return!1;return!0}function Di(e,t,n,i,r,s){if(wi=s,Si=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,bi.current=null===e||null===e.memoizedState?pr:mr,e=n(i,r),Ti){s=0;do{if(Ti=!1,Ai=0,25<=s)throw Error(a(301));s+=1,Ci=Mi=null,t.updateQueue=null,bi.current=gr,e=n(i,r)}while(Ti)}if(bi.current=fr,t=null!==Mi&&null!==Mi.next,wi=0,Ci=Mi=Si=null,Ei=!1,t)throw Error(a(300));return e}function Ri(){var e=0!==Ai;return Ai=0,e}function Ni(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Ci?Si.memoizedState=Ci=e:Ci=Ci.next=e,Ci}function Ii(){if(null===Mi){var e=Si.alternate;e=null!==e?e.memoizedState:null}else e=Mi.next;var t=null===Ci?Si.memoizedState:Ci.next;if(null!==t)Ci=t,Mi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Mi=e).memoizedState,baseState:Mi.baseState,baseQueue:Mi.baseQueue,queue:Mi.queue,next:null},null===Ci?Si.memoizedState=Ci=e:Ci=Ci.next=e}return Ci}function Oi(e,t){return"function"===typeof t?t(e):t}function zi(e){var t=Ii(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=Mi,r=i.baseQueue,s=n.pending;if(null!==s){if(null!==r){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(null!==r){s=r.next,i=i.baseState;var l=o=null,c=null,u=s;do{var h=u.lane;if((wi&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:e(i,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=i):c=c.next=d,Si.lanes|=h,ta|=h}u=u.next}while(null!==u&&u!==s);null===c?o=i:c.next=l,Gt(i,t.memoizedState)||(Or=!0),t.memoizedState=i,t.baseState=o,t.baseQueue=c,n.lastRenderedState=i}if(null!==(e=n.interleaved)){r=e;do{s=r.lane,Si.lanes|=s,ta|=s,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Fi(e){var t=Ii(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,s=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{s=e(s,o.action),o=o.next}while(o!==r);Gt(s,t.memoizedState)||(Or=!0),t.memoizedState=s,null===t.baseQueue&&(t.baseState=s),n.lastRenderedState=s}return[s,i]}function ji(){}function Bi(e,t){var n=Si,i=Ii(),r=t(),s=!Gt(i.memoizedState,r);if(s&&(i.memoizedState=r,Or=!0),i=i.queue,Qi(Hi.bind(null,n,i,e),[e]),i.getSnapshot!==t||s||null!==Ci&&1&Ci.memoizedState.tag){if(n.flags|=2048,qi(9,Ui.bind(null,n,i,r,t),void 0,null),null===Ys)throw Error(a(349));0!==(30&wi)||Vi(n,t,r)}return r}function Vi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=Si.updateQueue)?(t={lastEffect:null,stores:null},Si.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ui(e,t,n,i){t.value=n,t.getSnapshot=i,Wi(t)&&wa(e,1,-1)}function Hi(e,t,n){return n(function(){Wi(t)&&wa(e,1,-1)})}function Wi(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Gt(e,n)}catch(i){return!0}}function Gi(e){var t=Ni();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oi,lastRenderedState:e},t.queue=e,e=e.dispatch=lr.bind(null,Si,e),[t.memoizedState,e]}function qi(e,t,n,i){return e={tag:e,create:t,destroy:n,deps:i,next:null},null===(t=Si.updateQueue)?(t={lastEffect:null,stores:null},Si.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Xi(){return Ii().memoizedState}function Yi(e,t,n,i){var r=Ni();Si.flags|=e,r.memoizedState=qi(1|t,n,void 0,void 0===i?null:i)}function Ki(e,t,n,i){var r=Ii();i=void 0===i?null:i;var s=void 0;if(null!==Mi){var a=Mi.memoizedState;if(s=a.destroy,null!==i&&Li(i,a.deps))return void(r.memoizedState=qi(t,n,s,i))}Si.flags|=e,r.memoizedState=qi(1|t,n,s,i)}function Zi(e,t){return Yi(8390656,8,e,t)}function Qi(e,t){return Ki(2048,8,e,t)}function Ji(e,t){return Ki(4,2,e,t)}function $i(e,t){return Ki(4,4,e,t)}function er(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function tr(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ki(4,4,er.bind(null,t,e),n)}function nr(){}function ir(e,t){var n=Ii();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Li(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function rr(e,t){var n=Ii();t=void 0===t?null:t;var i=n.memoizedState;return null!==i&&null!==t&&Li(t,i[1])?i[0]:(e=e(),n.memoizedState=[e,t],e)}function sr(e,t){var n=Dt;Dt=0!==n&&4>n?n:4,e(!0);var i=_i.transition;_i.transition={};try{e(!1),t()}finally{Dt=n,_i.transition=i}}function ar(){return Ii().memoizedState}function or(e,t,n){var i=_a(e);n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},cr(e)?ur(t,n):(hr(e,t,n),null!==(e=wa(e,i,n=ba()))&&dr(e,t,i))}function lr(e,t,n){var i=_a(e),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(cr(e))ur(t,r);else{hr(e,t,r);var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(r.hasEagerState=!0,r.eagerState=o,Gt(o,a))return}catch(l){}null!==(e=wa(e,i,n=ba()))&&dr(e,t,i)}}function cr(e){var t=e.alternate;return e===Si||null!==t&&t===Si}function ur(e,t){Ti=Ei=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hr(e,t,n){null!==Ys&&0!==(1&e.mode)&&0===(2&Xs)?(null===(e=t.interleaved)?(n.next=n,null===dn?dn=[t]:dn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function dr(e,t,n){if(0!==(4194240&n)){var i=t.lanes;n|=i&=e.pendingLanes,t.lanes=n,Lt(e,n)}}var fr={readContext:hn,useCallback:Pi,useContext:Pi,useEffect:Pi,useImperativeHandle:Pi,useInsertionEffect:Pi,useLayoutEffect:Pi,useMemo:Pi,useReducer:Pi,useRef:Pi,useState:Pi,useDebugValue:Pi,useDeferredValue:Pi,useTransition:Pi,useMutableSource:Pi,useSyncExternalStore:Pi,useId:Pi,unstable_isNewReconciler:!1},pr={readContext:hn,useCallback:function(e,t){return Ni().memoizedState=[e,void 0===t?null:t],e},useContext:hn,useEffect:Zi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Yi(4194308,4,er.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Yi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Yi(4,2,e,t)},useMemo:function(e,t){var n=Ni();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var i=Ni();return t=void 0!==n?n(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=or.bind(null,Si,e),[i.memoizedState,e]},useRef:function(e){return e={current:e},Ni().memoizedState=e},useState:Gi,useDebugValue:nr,useDeferredValue:function(e){var t=Gi(e),n=t[0],i=t[1];return Zi(function(){var t=_i.transition;_i.transition={};try{i(e)}finally{_i.transition=t}},[e]),n},useTransition:function(){var e=Gi(!1),t=e[0];return e=sr.bind(null,e[1]),Ni().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var i=Si,r=Ni();if(Wn){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ys)throw Error(a(349));0!==(30&wi)||Vi(i,t,n)}r.memoizedState=n;var s={value:n,getSnapshot:t};return r.queue=s,Zi(Hi.bind(null,i,s,e),[e]),i.flags|=2048,qi(9,Ui.bind(null,i,s,n,t),void 0,null),n},useId:function(){var e=Ni(),t=Ys.identifierPrefix;if(Wn){var n=zn;t=":"+t+"R"+(n=(On&~(1<<32-bt(On)-1)).toString(32)+n),0<(n=Ai++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ki++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mr={readContext:hn,useCallback:ir,useContext:hn,useEffect:Qi,useImperativeHandle:tr,useInsertionEffect:Ji,useLayoutEffect:$i,useMemo:rr,useReducer:zi,useRef:Xi,useState:function(){return zi(Oi)},useDebugValue:nr,useDeferredValue:function(e){var t=zi(Oi),n=t[0],i=t[1];return Qi(function(){var t=_i.transition;_i.transition={};try{i(e)}finally{_i.transition=t}},[e]),n},useTransition:function(){return[zi(Oi)[0],Ii().memoizedState]},useMutableSource:ji,useSyncExternalStore:Bi,useId:ar,unstable_isNewReconciler:!1},gr={readContext:hn,useCallback:ir,useContext:hn,useEffect:Qi,useImperativeHandle:tr,useInsertionEffect:Ji,useLayoutEffect:$i,useMemo:rr,useReducer:Fi,useRef:Xi,useState:function(){return Fi(Oi)},useDebugValue:nr,useDeferredValue:function(e){var t=Fi(Oi),n=t[0],i=t[1];return Qi(function(){var t=_i.transition;_i.transition={};try{i(e)}finally{_i.transition=t}},[e]),n},useTransition:function(){return[Fi(Oi)[0],Ii().memoizedState]},useMutableSource:ji,useSyncExternalStore:Bi,useId:ar,unstable_isNewReconciler:!1};function vr(e,t){try{var n="",i=t;do{n+=$t(i),i=i.return}while(i);var r=n}catch(s){r="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:r}}function yr(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var xr,br,_r,wr,Sr="function"===typeof WeakMap?WeakMap:Map;function Mr(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var i=t.value;return n.callback=function(){ua||(ua=!0,ha=i),yr(0,t)},n}function Cr(e,t,n){(n=gn(-1,n)).tag=3;var i=e.type.getDerivedStateFromError;if("function"===typeof i){var r=t.value;n.payload=function(){return i(r)},n.callback=function(){yr(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){yr(0,t),"function"!==typeof i&&(null===da?da=new Set([this]):da.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Er(e,t,n){var i=e.pingCache;if(null===i){i=e.pingCache=new Sr;var r=new Set;i.set(t,r)}else void 0===(r=i.get(t))&&(r=new Set,i.set(t,r));r.has(n)||(r.add(n),e=Ga.bind(null,e,t,n),t.then(e,e))}function Tr(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ar(e,t,n,i,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}function kr(e){e.flags|=4}function Pr(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(Y)xr=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)j(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},br=function(){},_r=function(e,t,n,i,r){if((e=e.memoizedProps)!==i){var s=t.stateNode,a=hi(li.current);n=V(s,n,e,i,r,a),(t.updateQueue=n)&&kr(t)}},wr=function(e,t,n,i){n!==i&&kr(t)};else if(K){xr=function(e,t,n,i){for(var r=t.child;null!==r;){if(5===r.tag){var s=r.stateNode;n&&i&&(s=Le(s,r.type,r.memoizedProps,r)),j(e,s)}else if(6===r.tag)s=r.stateNode,n&&i&&(s=De(s,r.memoizedProps,r)),j(e,s);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(s=r.child)&&(s.return=r),xr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};var Lr=function(e,t,n,i){for(var r=t.child;null!==r;){if(5===r.tag){var s=r.stateNode;n&&i&&(s=Le(s,r.type,r.memoizedProps,r)),Ae(e,s)}else if(6===r.tag)s=r.stateNode,n&&i&&(s=De(s,r.memoizedProps,r)),Ae(e,s);else if(4!==r.tag)if(22===r.tag&&null!==r.memoizedState)null!==(s=r.child)&&(s.return=r),Lr(e,r,!0,!0);else if(null!==r.child){r.child.return=r,r=r.child;continue}if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};br=function(e,t){var n=t.stateNode;if(!Pr(e,t)){e=n.containerInfo;var i=Te(e);Lr(i,t,!1,!1),n.pendingChildren=i,kr(t),ke(e,i)}},_r=function(e,t,n,i,r){var s=e.stateNode,a=e.memoizedProps;if((e=Pr(e,t))&&a===i)t.stateNode=s;else{var o=t.stateNode,l=hi(li.current),c=null;a!==i&&(c=V(o,n,a,i,r,l)),e&&null===c?t.stateNode=s:(s=Ee(s,c,n,a,i,t,e,o),B(s,n,i,r,l)&&kr(t),t.stateNode=s,e?kr(t):xr(s,t,!1,!1))}},wr=function(e,t,n,i){n!==i?(e=hi(ui.current),n=hi(li.current),t.stateNode=H(i,e,n,t),kr(t)):t.stateNode=e.stateNode}}else br=function(){},_r=function(){},wr=function(){};function Dr(e,t){if(!Wn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;null!==n;)null!==n.alternate&&(i=n),n=n.sibling;null===i?t||null===e.tail?e.tail=null:e.tail.sibling=null:i.sibling=null}}function Rr(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=14680064&r.subtreeFlags,i|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function Nr(e,t,n){var i=t.pendingProps;switch(Vn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Rr(t),null;case 1:case 17:return pt(t.type)&&mt(),Rr(t),null;case 3:return i=t.stateNode,fi(),ot(ht),ot(ut),xi(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),null!==e&&null!==e.child||(Jn(t)?kr(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==qn&&(Ta(qn),qn=null))),br(e,t),Rr(t),null;case 5:mi(t),n=hi(ui.current);var r=t.type;if(null!==e&&null!=t.stateNode)_r(e,t,r,i,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(null===t.stateNode)throw Error(a(166));return Rr(t),null}if(e=hi(li.current),Jn(t)){if(!Z)throw Error(a(175));e=He(t.stateNode,t.type,t.memoizedProps,n,e,t,!Gn),t.updateQueue=e,null!==e&&kr(t)}else{var s=F(r,i,n,e,t);xr(s,t,!1,!1),t.stateNode=s,B(s,r,i,n,e)&&kr(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Rr(t),null;case 6:if(e&&null!=t.stateNode)wr(e,t,e.memoizedProps,i);else{if("string"!==typeof i&&null===t.stateNode)throw Error(a(166));if(e=hi(ui.current),n=hi(li.current),Jn(t)){if(!Z)throw Error(a(176));if(e=t.stateNode,i=t.memoizedProps,(n=We(e,i,t,!Gn))&&null!==(r=Un))switch(s=0!==(1&r.mode),r.tag){case 3:Je(r.stateNode.containerInfo,e,i,s);break;case 5:$e(r.type,r.memoizedProps,r.stateNode,e,i,s)}n&&kr(t)}else t.stateNode=H(i,e,n,t)}return Rr(t),null;case 13:if(ot(gi),i=t.memoizedState,Wn&&null!==Hn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Hn;e;)e=je(e);return $n(),t.flags|=98560,t}if(null!==i&&null!==i.dehydrated){if(i=Jn(t),null===e){if(!i)throw Error(a(318));if(!Z)throw Error(a(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(317));Ge(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Rr(t),null}return null!==qn&&(Ta(qn),qn=null),0!==(128&t.flags)?(t.lanes=n,t):(i=null!==i,n=!1,null===e?Jn(t):n=null!==e.memoizedState,i&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&gi.current)?0===$s&&($s=3):Ia())),null!==t.updateQueue&&(t.flags|=4),Rr(t),null);case 4:return fi(),br(e,t),null===e&&J(t.stateNode.containerInfo),Rr(t),null;case 10:return ln(t.type._context),Rr(t),null;case 19:if(ot(gi),null===(r=t.memoizedState))return Rr(t),null;if(i=0!==(128&t.flags),null===(s=r.rendering))if(i)Dr(r,!1);else{if(0!==$s||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=vi(e))){for(t.flags|=128,Dr(r,!1),null!==(e=s.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,i=t.child;null!==i;)r=e,(n=i).flags&=14680066,null===(s=n.alternate)?(n.childLanes=0,n.lanes=r,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=s.childLanes,n.lanes=s.lanes,n.child=s.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=s.memoizedProps,n.memoizedState=s.memoizedState,n.updateQueue=s.updateQueue,n.type=s.type,r=s.dependencies,n.dependencies=null===r?null:{lanes:r.lanes,firstContext:r.firstContext}),i=i.sibling;return lt(gi,1&gi.current|2),t.child}e=e.sibling}null!==r.tail&&Ft()>oa&&(t.flags|=128,i=!0,Dr(r,!1),t.lanes=4194304)}else{if(!i)if(null!==(e=vi(s))){if(t.flags|=128,i=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Dr(r,!0),null===r.tail&&"hidden"===r.tailMode&&!s.alternate&&!Wn)return Rr(t),null}else 2*Ft()-r.renderingStartTime>oa&&1073741824!==n&&(t.flags|=128,i=!0,Dr(r,!1),t.lanes=4194304);r.isBackwards?(s.sibling=t.child,t.child=s):(null!==(e=r.last)?e.sibling=s:t.child=s,r.last=s)}return null!==r.tail?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Ft(),t.sibling=null,e=gi.current,lt(gi,i?1&e|2:1&e),t):(Rr(t),null);case 22:case 23:return La(),i=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==i&&(t.flags|=8192),i&&0!==(1&t.mode)?0!==(1073741824&Qs)&&(Rr(t),Y&&6&t.subtreeFlags&&(t.flags|=8192)):Rr(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}var Ir=o.ReactCurrentOwner,Or=!1;function zr(e,t,n,i){t.child=null===e?ai(t,null,n,i):si(t,e.child,n,i)}function Fr(e,t,n,i,r){n=n.render;var s=t.ref;return un(t,r),i=Di(e,t,n,i,s,r),n=Ri(),null===e||Or?(Wn&&n&&Bn(t),t.flags|=1,zr(e,t,i,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,rs(e,t,r))}function jr(e,t,n,i,r){if(null===e){var s=n.type;return"function"!==typeof s||Ja(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=eo(n.type,null,i,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,Br(e,t,s,i,r))}if(s=e.child,0===(e.lanes&r)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:Jt)(a,i)&&e.ref===t.ref)return rs(e,t,r)}return t.flags|=1,(e=$a(s,i)).ref=t.ref,e.return=t,t.child=e}function Br(e,t,n,i,r){if(null!==e&&Jt(e.memoizedProps,i)&&e.ref===t.ref){if(Or=!1,0===(e.lanes&r))return t.lanes=e.lanes,rs(e,t,r);0!==(131072&e.flags)&&(Or=!0)}return Hr(e,t,n,i,r)}function Vr(e,t,n){var i=t.pendingProps,r=i.children,s=null!==e?e.memoizedState:null;if("hidden"===i.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt(Js,Qs),Qs|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt(Js,Qs),Qs|=e,null;t.memoizedState={baseLanes:0,cachePool:null},i=null!==s?s.baseLanes:n,lt(Js,Qs),Qs|=i}else null!==s?(i=s.baseLanes|n,t.memoizedState=null):i=n,lt(Js,Qs),Qs|=i;return zr(e,t,r,n),t.child}function Ur(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Hr(e,t,n,i,r){var s=pt(n)?dt:ut.current;return s=ft(t,s),un(t,r),n=Di(e,t,n,i,s,r),i=Ri(),null===e||Or?(Wn&&i&&Bn(t),t.flags|=1,zr(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,rs(e,t,r))}function Wr(e,t,n,i,r){if(pt(n)){var s=!0;yt(t)}else s=!1;if(un(t,r),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),En(t,n,i),An(t,n,i,r),i=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=hn(c):c=ft(t,c=pt(n)?dt:ut.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==i||l!==c)&&Tn(t,a,i,c),fn=!1;var d=t.memoizedState;a.state=d,bn(t,i,a,r),l=t.memoizedState,o!==i||d!==l||ht.current||fn?("function"===typeof u&&(Sn(t,n,u,i),l=t.memoizedState),(o=fn||Cn(t,n,o,i,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=l),a.props=i,a.state=l,a.context=c,i=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,mn(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:en(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=hn(l):l=ft(t,l=pt(n)?dt:ut.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&Tn(t,a,i,l),fn=!1,d=t.memoizedState,a.state=d,bn(t,i,a,r);var p=t.memoizedState;o!==h||d!==p||ht.current||fn?("function"===typeof f&&(Sn(t,n,f,i),p=t.memoizedState),(c=fn||Cn(t,n,c,i,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(i,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(i,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=p),a.props=i,a.state=p,a.context=l,i=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),i=!1)}return Gr(e,t,n,i,s,r)}function Gr(e,t,n,i,r,s){Ur(e,t);var a=0!==(128&t.flags);if(!i&&!a)return r&&xt(t,n,!1),rs(e,t,s);i=t.stateNode,Ir.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:i.render();return t.flags|=1,null!==e&&a?(t.child=si(t,e.child,null,s),t.child=si(t,null,o,s)):zr(e,t,o,s),t.memoizedState=i.state,r&&xt(t,n,!0),t.child}function qr(e){var t=e.stateNode;t.pendingContext?gt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gt(0,t.context,!1),di(e,t.containerInfo)}function Xr(e,t,n,i,r){return $n(),ei(r),t.flags|=256,zr(e,t,n,i),t.child}var Yr={dehydrated:null,treeContext:null,retryLane:0};function Kr(e){return{baseLanes:e,cachePool:null}}function Zr(e,t,n){var i,r=t.pendingProps,s=gi.current,o=!1,l=0!==(128&t.flags);if((i=l)||(i=(null===e||null!==e.memoizedState)&&0!==(2&s)),i?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(s|=1),lt(gi,1&s),null===e)return Zn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:ze(e)?t.lanes=8:t.lanes=1073741824,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=s):o=no(s,r,0,null),e=to(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Kr(n),t.memoizedState=Yr,e):Qr(t,s));if(null!==(s=e.memoizedState)){if(null!==(i=s.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,es(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=no({mode:"visible",children:r.children},s,0,null),(o=to(o,s,n,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&si(t,e.child,null,n),t.child.memoizedState=Kr(n),t.memoizedState=Yr,o);if(0===(1&t.mode))t=es(e,t,n,null);else if(ze(i))t=es(e,t,n,Error(a(419)));else if(r=0!==(n&e.childLanes),Or||r){if(null!==(r=Ys)){switch(n&-n){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}0!==(r=0!==(o&(r.suspendedLanes|n))?0:o)&&r!==s.retryLane&&(s.retryLane=r,wa(e,r,-1))}Ia(),t=es(e,t,n,Error(a(421)))}else Oe(i)?(t.flags|=128,t.child=e.child,t=Xa.bind(null,e),Fe(i,t),t=null):(n=s.treeContext,Z&&(Hn=Ue(i),Un=t,Wn=!0,qn=null,Gn=!1,null!==n&&(Rn[Nn++]=On,Rn[Nn++]=zn,Rn[Nn++]=In,On=n.id,zn=n.overflow,In=t)),(t=Qr(t,t.pendingProps.children)).flags|=4096);return t}return o?(r=$r(e,t,r.children,r.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?Kr(n):{baseLanes:s.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Yr,r):(n=Jr(e,t,r.children,n),t.memoizedState=null,n)}return o?(r=$r(e,t,r.children,r.fallback,n),o=t.child,s=e.child.memoizedState,o.memoizedState=null===s?Kr(n):{baseLanes:s.baseLanes|n,cachePool:null},o.childLanes=e.childLanes&~n,t.memoizedState=Yr,r):(n=Jr(e,t,r.children,n),t.memoizedState=null,n)}function Qr(e,t){return(t=no({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Jr(e,t,n,i){var r=e.child;return e=r.sibling,n=$a(r,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=i),n.return=t,n.sibling=null,null!==e&&(null===(i=t.deletions)?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n}function $r(e,t,n,i,r){var s=t.mode,a=(e=e.child).sibling,o={mode:"hidden",children:n};return 0===(1&s)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=o,t.deletions=null):(n=$a(e,o)).subtreeFlags=14680064&e.subtreeFlags,null!==a?i=$a(a,i):(i=to(i,s,r,null)).flags|=2,i.return=t,n.return=t,n.sibling=i,t.child=n,i}function es(e,t,n,i){return null!==i&&ei(i),si(t,e.child,null,n),(e=Qr(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ts(e,t,n){e.lanes|=t;var i=e.alternate;null!==i&&(i.lanes|=t),cn(e.return,t,n)}function ns(e,t,n,i,r){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function is(e,t,n){var i=t.pendingProps,r=i.revealOrder,s=i.tail;if(zr(e,t,i.children,n),0!==(2&(i=gi.current)))i=1&i|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ts(e,n,t);else if(19===e.tag)ts(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(lt(gi,i),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===vi(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),ns(t,!1,r,n,s);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===vi(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}ns(t,!0,n,null,s);break;case"together":ns(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),ta|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=$a(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=$a(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ss(e,t){switch(Vn(t),t.tag){case 1:return pt(t.type)&&mt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return fi(),ot(ht),ot(ut),xi(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return mi(t),null;case 13:if(ot(gi),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return ot(gi),null;case 4:return fi(),null;case 10:return ln(t.type._context),null;case 22:case 23:return La(),null;default:return null}}var as=!1,os=!1,ls="function"===typeof WeakSet?WeakSet:Set,cs=null;function us(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(i){Wa(e,t,i)}else n.current=null}function hs(e,t,n){try{n()}catch(i){Wa(e,t,i)}}var ds=!1;function fs(e,t,n){var i=t.updateQueue;if(null!==(i=null!==i?i.lastEffect:null)){var r=i=i.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,void 0!==s&&hs(t,n,s)}r=r.next}while(r!==i)}}function ps(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var i=n.create;n.destroy=i()}n=n.next}while(n!==t)}}function ms(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=R(n);else e=n;"function"===typeof t?t(e):t.current=e}}function gs(e,t,n){if(Wt&&"function"===typeof Wt.onCommitFiberUnmount)try{Wt.onCommitFiberUnmount(Ht,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var i=e=e.next;do{var r=i,s=r.destroy;r=r.tag,void 0!==s&&(0!==(2&r)||0!==(4&r))&&hs(t,n,s),i=i.next}while(i!==e)}break;case 1:if(us(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Wa(t,n,a)}break;case 5:us(t,n);break;case 4:Y?Ms(e,t,n):K&&K&&(t=t.stateNode.containerInfo,n=Te(t),Pe(t,n))}}function vs(e,t,n){for(var i=t;;)if(gs(e,i,n),null===i.child||Y&&4===i.tag){if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}else i.child.return=i,i=i.child}function ys(e){var t=e.alternate;null!==t&&(e.alternate=null,ys(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xs(e){return 5===e.tag||3===e.tag||4===e.tag}function bs(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xs(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function _s(e){if(Y){e:{for(var t=e.return;null!==t;){if(xs(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(be(t),n.flags&=-33),Ss(e,n=bs(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,ws(e,n=bs(e),t);break;default:throw Error(a(161))}}}function ws(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?ve(n,e,t):de(n,e);else if(4!==i&&null!==(e=e.child))for(ws(e,t,n),e=e.sibling;null!==e;)ws(e,t,n),e=e.sibling}function Ss(e,t,n){var i=e.tag;if(5===i||6===i)e=e.stateNode,t?ge(n,e,t):he(n,e);else if(4!==i&&null!==(e=e.child))for(Ss(e,t,n),e=e.sibling;null!==e;)Ss(e,t,n),e=e.sibling}function Ms(e,t,n){for(var i,r,s=t,o=!1;;){if(!o){o=s.return;e:for(;;){if(null===o)throw Error(a(160));switch(i=o.stateNode,o.tag){case 5:r=!1;break e;case 3:case 4:i=i.containerInfo,r=!0;break e}o=o.return}o=!0}if(5===s.tag||6===s.tag)vs(e,s,n),r?xe(i,s.stateNode):ye(i,s.stateNode);else if(18===s.tag)r?Ze(i,s.stateNode):Ke(i,s.stateNode);else if(4===s.tag){if(null!==s.child){i=s.stateNode.containerInfo,r=!0,s.child.return=s,s=s.child;continue}}else if(gs(e,s,n),null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;4===(s=s.return).tag&&(o=!1)}s.sibling.return=s.return,s=s.sibling}}function Cs(e,t){if(Y){switch(t.tag){case 0:case 11:case 14:case 15:return fs(3,t,t.return),ps(3,t),void fs(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var i=t.memoizedProps;e=null!==e?e.memoizedProps:i;var r=t.type,s=t.updateQueue;t.updateQueue=null,null!==s&&me(n,s,r,e,i,t)}return;case 6:if(null===t.stateNode)throw Error(a(162));return n=t.memoizedProps,void fe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(Z&&null!==e&&e.memoizedState.isDehydrated&&Xe(t.stateNode.containerInfo));case 13:case 19:return void Es(t)}throw Error(a(163))}switch(t.tag){case 0:case 11:case 14:case 15:return fs(3,t,t.return),ps(3,t),void fs(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Es(t);case 3:Z&&null!==e&&e.memoizedState.isDehydrated&&Xe(t.stateNode.containerInfo)}e:if(K){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Pe(t.containerInfo,t.pendingChildren);break e}throw Error(a(163))}}function Es(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new ls),t.forEach(function(t){var i=Ya.bind(null,e,t);n.has(t)||(n.add(t),t.then(i,i))})}}function Ts(e,t,n){cs=e,As(e,t,n)}function As(e,t,n){for(var i=0!==(1&e.mode);null!==cs;){var r=cs,s=r.child;if(22===r.tag&&i){var a=null!==r.memoizedState||as;if(!a){var o=r.alternate,l=null!==o&&null!==o.memoizedState||os;o=as;var c=os;if(as=a,(os=l)&&!c)for(cs=r;null!==cs;)l=(a=cs).child,22===a.tag&&null!==a.memoizedState?Ls(r):null!==l?(l.return=a,cs=l):Ls(r);for(;null!==s;)cs=s,As(s,t,n),s=s.sibling;cs=r,as=o,os=c}ks(e)}else 0!==(8772&r.subtreeFlags)&&null!==s?(s.return=r,cs=s):ks(e)}}function ks(e){for(;null!==cs;){var t=cs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:os||ps(5,t);break;case 1:var i=t.stateNode;if(4&t.flags&&!os)if(null===n)i.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;null!==s&&_n(t,s,i);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=R(t.child.stateNode);break;case 1:n=t.child.stateNode}_n(t,o,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&pe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(Z&&null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ye(h)}}}break;default:throw Error(a(163))}os||512&t.flags&&ms(t)}catch(d){Wa(t,t.return,d)}}if(t===e){cs=null;break}if(null!==(n=t.sibling)){n.return=t.return,cs=n;break}cs=t.return}}function Ps(e){for(;null!==cs;){var t=cs;if(t===e){cs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,cs=n;break}cs=t.return}}function Ls(e){for(;null!==cs;){var t=cs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ps(4,t)}catch(l){Wa(t,n,l)}break;case 1:var i=t.stateNode;if("function"===typeof i.componentDidMount){var r=t.return;try{i.componentDidMount()}catch(l){Wa(t,r,l)}}var s=t.return;try{ms(t)}catch(l){Wa(t,s,l)}break;case 5:var a=t.return;try{ms(t)}catch(l){Wa(t,a,l)}}}catch(l){Wa(t,t.return,l)}if(t===e){cs=null;break}var o=t.sibling;if(null!==o){o.return=t.return,cs=o;break}cs=t.return}}var Ds=0,Rs=1,Ns=2,Is=3,Os=4;if("function"===typeof Symbol&&Symbol.for){var zs=Symbol.for;Ds=zs("selector.component"),Rs=zs("selector.has_pseudo_class"),Ns=zs("selector.role"),Is=zs("selector.test_id"),Os=zs("selector.text")}function Fs(e){var t=Q(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(a(364));return t}if(null===(e=re(e)))throw Error(a(362));return e.stateNode.current}function js(e,t){switch(t.$$typeof){case Ds:if(e.type===t.value)return!0;break;case Rs:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var i=e[n++],r=e[n++],s=t[r];if(5!==i.tag||!oe(i)){for(;null!=s&&js(i,s);)s=t[++r];if(r===t.length){t=!0;break e}for(i=i.child;null!==i;)e.push(i,r),i=i.sibling}}t=!1}return t;case Ns:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Os:if((5===e.tag||6===e.tag)&&(null!==(e=ae(e))&&0<=e.indexOf(t.value)))return!0;break;case Is:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function Bs(e){switch(e.$$typeof){case Ds:return"<"+(S(e.value)||"Unknown")+">";case Rs:return":has("+(Bs(e)||"")+")";case Ns:return'[role="'+e.value+'"]';case Os:return'"'+e.value+'"';case Is:return'[data-testname="'+e.value+'"]';default:throw Error(a(365))}}function Vs(e,t){var n=[];e=[e,0];for(var i=0;i<e.length;){var r=e[i++],s=e[i++],a=t[s];if(5!==r.tag||!oe(r)){for(;null!=a&&js(r,a);)a=t[++s];if(s===t.length)n.push(r);else for(r=r.child;null!==r;)e.push(r,s),r=r.sibling}}return n}function Us(e,t){if(!ie)throw Error(a(363));e=Vs(e=Fs(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var i=e[n++];if(5===i.tag)oe(i)||t.push(i.stateNode);else for(i=i.child;null!==i;)e.push(i),i=i.sibling}return t}var Hs=Math.ceil,Ws=o.ReactCurrentDispatcher,Gs=o.ReactCurrentOwner,qs=o.ReactCurrentBatchConfig,Xs=0,Ys=null,Ks=null,Zs=0,Qs=0,Js=at(0),$s=0,ea=null,ta=0,na=0,ia=0,ra=null,sa=null,aa=0,oa=1/0;function la(){oa=Ft()+500}var ca,ua=!1,ha=null,da=null,fa=!1,pa=null,ma=0,ga=0,va=null,ya=-1,xa=0;function ba(){return 0!==(6&Xs)?Ft():-1!==ya?ya:ya=Ft()}function _a(e){return 0===(1&e.mode)?1:0!==(2&Xs)&&0!==Zs?Zs&-Zs:null!==Qt.transition?(0===xa&&(e=St,0===(4194240&(St<<=1))&&(St=64),xa=e),xa):0!==(e=Dt)?e:$()}function wa(e,t,n){if(50<ga)throw ga=0,va=null,Error(a(185));var i=Sa(e,t);return null===i?null:(Pt(i,t,n),0!==(2&Xs)&&i===Ys||(i===Ys&&(0===(2&Xs)&&(na|=t),4===$s&&Aa(i,Zs)),Ma(i,n),1===t&&0===Xs&&0===(1&e.mode)&&(la(),Xt&&Zt())),i)}function Sa(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Ma(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-bt(s),o=1<<a,l=r[a];-1===l?0!==(o&n)&&0===(o&i)||(r[a]=Tt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var i=Et(e,e===Ys?Zs:0);if(0===i)null!==n&&It(n),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(null!=n&&It(n),1===t)0===e.tag?function(e){Xt=!0,Kt(e)}(ka.bind(null,e)):Kt(ka.bind(null,e)),te?ne(function(){0===Xs&&Zt()}):Nt(jt,Zt),n=null;else{switch(Rt(i)){case 1:n=jt;break;case 4:n=Bt;break;case 16:default:n=Vt;break;case 536870912:n=Ut}n=Ka(n,Ca.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ca(e,t){if(ya=-1,xa=0,0!==(6&Xs))throw Error(a(327));var n=e.callbackNode;if(Ua()&&e.callbackNode!==n)return null;var i=Et(e,e===Ys?Zs:0);if(0===i)return null;if(0!==(30&i)||0!==(i&e.expiredLanes)||t)t=Oa(e,i);else{t=i;var r=Xs;Xs|=2;var s=Na();for(Ys===e&&Zs===t||(la(),Da(e,t));;)try{Fa();break}catch(l){Ra(e,l)}an(),Ws.current=s,Xs=r,null!==Ks?t=0:(Ys=null,Zs=0,t=$s)}if(0!==t){if(2===t&&(0!==(r=At(e))&&(i=r,t=Ea(e,r))),1===t)throw n=ea,Da(e,0),Aa(e,i),Ma(e,Ft()),n;if(6===t)Aa(e,i);else{if(r=e.current.alternate,0===(30&i)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Gt(s(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=Oa(e,i))&&(0!==(s=At(e))&&(i=s,t=Ea(e,s))),1===t))throw n=ea,Da(e,0),Aa(e,i),Ma(e,Ft()),n;switch(e.finishedWork=r,e.finishedLanes=i,t){case 0:case 1:throw Error(a(345));case 2:case 5:Va(e,sa);break;case 3:if(Aa(e,i),(130023424&i)===i&&10<(t=aa+500-Ft())){if(0!==Et(e,0))break;if(((r=e.suspendedLanes)&i)!==i){ba(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=W(Va.bind(null,e,sa),t);break}Va(e,sa);break;case 4:if(Aa(e,i),(4194240&i)===i)break;for(t=e.eventTimes,r=-1;0<i;){var o=31-bt(i);s=1<<o,(o=t[o])>r&&(r=o),i&=~s}if(i=r,10<(i=(120>(i=Ft()-i)?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*Hs(i/1960))-i)){e.timeoutHandle=W(Va.bind(null,e,sa),i);break}Va(e,sa);break;default:throw Error(a(329))}}}return Ma(e,Ft()),e.callbackNode===n?Ca.bind(null,e):null}function Ea(e,t){var n=ra;return e.current.memoizedState.isDehydrated&&(Da(e,t).flags|=256),2!==(e=Oa(e,t))&&(t=sa,sa=n,null!==t&&Ta(t)),e}function Ta(e){null===sa?sa=e:sa.push.apply(sa,e)}function Aa(e,t){for(t&=~ia,t&=~na,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bt(t),i=1<<n;e[n]=-1,t&=~i}}function ka(e){if(0!==(6&Xs))throw Error(a(327));Ua();var t=Et(e,0);if(0===(1&t))return Ma(e,Ft()),null;var n=Oa(e,t);if(0!==e.tag&&2===n){var i=At(e);0!==i&&(t=i,n=Ea(e,i))}if(1===n)throw n=ea,Da(e,0),Aa(e,t),Ma(e,Ft()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Va(e,sa),Ma(e,Ft()),null}function Pa(e){null!==pa&&0===pa.tag&&0===(6&Xs)&&Ua();var t=Xs;Xs|=1;var n=qs.transition,i=Dt;try{if(qs.transition=null,Dt=1,e)return e()}finally{Dt=i,qs.transition=n,0===(6&(Xs=t))&&Zt()}}function La(){Qs=Js.current,ot(Js)}function Da(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==q&&(e.timeoutHandle=q,G(n)),null!==Ks)for(n=Ks.return;null!==n;){var i=n;switch(Vn(i),i.tag){case 1:null!==(i=i.type.childContextTypes)&&void 0!==i&&mt();break;case 3:fi(),ot(ht),ot(ut),xi();break;case 5:mi(i);break;case 4:fi();break;case 13:case 19:ot(gi);break;case 10:ln(i.type._context);break;case 22:case 23:La()}n=n.return}if(Ys=e,Ks=e=$a(e.current,null),Zs=Qs=t,$s=0,ea=null,ia=na=ta=0,sa=ra=null,null!==dn){for(t=0;t<dn.length;t++)if(null!==(i=(n=dn[t]).interleaved)){n.interleaved=null;var r=i.next,s=n.pending;if(null!==s){var a=s.next;s.next=r,i.next=a}n.pending=i}dn=null}return e}function Ra(e,t){for(;;){var n=Ks;try{if(an(),bi.current=fr,Ei){for(var i=Si.memoizedState;null!==i;){var r=i.queue;null!==r&&(r.pending=null),i=i.next}Ei=!1}if(wi=0,Ci=Mi=Si=null,Ti=!1,Ai=0,Gs.current=null,null===n||null===n.return){$s=1,ea=t,Ks=null;break}e:{var s=e,o=n.return,l=n,c=t;if(t=Zs,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Tr(o);if(null!==p){p.flags&=-257,Ar(p,o,l,0,t),1&p.mode&&Er(s,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){Er(s,u,t),Ia();break e}c=Error(a(426))}else if(Wn&&1&l.mode){var v=Tr(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),Ar(v,o,l,0,t),ei(c);break e}}s=c,4!==$s&&($s=2),null===ra?ra=[s]:ra.push(s),c=vr(c,l),l=o;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,xn(l,Mr(0,c,t));break e;case 1:s=c;var y=l.type,x=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===da||!da.has(x)))){l.flags|=65536,t&=-t,l.lanes|=t,xn(l,Cr(l,s,t));break e}}l=l.return}while(null!==l)}Ba(n)}catch(b){t=b,Ks===n&&null!==n&&(Ks=n=n.return);continue}break}}function Na(){var e=Ws.current;return Ws.current=fr,null===e?fr:e}function Ia(){0!==$s&&3!==$s&&2!==$s||($s=4),null===Ys||0===(268435455&ta)&&0===(268435455&na)||Aa(Ys,Zs)}function Oa(e,t){var n=Xs;Xs|=2;var i=Na();for(Ys===e&&Zs===t||Da(e,t);;)try{za();break}catch(r){Ra(e,r)}if(an(),Xs=n,Ws.current=i,null!==Ks)throw Error(a(261));return Ys=null,Zs=0,$s}function za(){for(;null!==Ks;)ja(Ks)}function Fa(){for(;null!==Ks&&!Ot();)ja(Ks)}function ja(e){var t=ca(e.alternate,e,Qs);e.memoizedProps=e.pendingProps,null===t?Ba(e):Ks=t,Gs.current=null}function Ba(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Nr(n,t,Qs)))return void(Ks=n)}else{if(null!==(n=ss(n,t)))return n.flags&=32767,void(Ks=n);if(null===e)return $s=6,void(Ks=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ks=t);Ks=t=e}while(null!==t);0===$s&&($s=5)}function Va(e,t){var n=Dt,i=qs.transition;try{qs.transition=null,Dt=1,function(e,t,n){do{Ua()}while(null!==pa);if(0!==(6&Xs))throw Error(a(327));var i=e.finishedWork,r=e.finishedLanes;if(null===i)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-bt(n),s=1<<r;t[r]=0,i[r]=-1,e[r]=-1,n&=~s}}(e,s),e===Ys&&(Ks=Ys=null,Zs=0),0===(2064&i.subtreeFlags)&&0===(2064&i.flags)||fa||(fa=!0,Ka(Vt,function(){return Ua(),null})),s=0!==(15990&i.flags),0!==(15990&i.subtreeFlags)||s){s=qs.transition,qs.transition=null;var o=Dt;Dt=1;var l=Xs;Xs|=4,Gs.current=null,function(e,t){for(O(e.containerInfo),cs=t;null!==cs;)if(t=(e=cs).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,cs=t;else for(;null!==cs;){e=cs;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var i=n.memoizedProps,r=n.memoizedState,s=e.stateNode,o=s.getSnapshotBeforeUpdate(e.elementType===e.type?i:en(e.type,i),r);s.__reactInternalSnapshotBeforeUpdate=o}break;case 3:Y&&Ce(e.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(l){Wa(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,cs=t;break}cs=e.return}n=ds,ds=!1}(e,i),function(e,t){for(cs=t;null!==cs;){var n=(t=cs).deletions;if(null!==n)for(var i=0;i<n.length;i++){var r=n[i];try{var s=e;Y?Ms(s,r,t):vs(s,r,t);var a=r.alternate;null!==a&&(a.return=null),r.return=null}catch(_){Wa(r,t,_)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,cs=n;else for(;null!==cs;){t=cs;try{var o=t.flags;if(32&o&&Y&&be(t.stateNode),512&o){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"===typeof c?c(null):c.current=null)}}if(8192&o)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(aa=Ft())}break;case 22:var h=null!==t.memoizedState,d=t.alternate,f=null!==d&&null!==d.memoizedState;if(n=t,Y)e:if(i=n,r=h,s=null,Y)for(var p=i;;){if(5===p.tag){if(null===s){s=p;var m=p.stateNode;r?_e(m):Se(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===s){var g=p.stateNode;r?we(g):Me(g,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===i)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===i)break;for(;null===p.sibling;){if(null===p.return||p.return===i)break e;s===p&&(s=null),p=p.return}s===p&&(s=null),p.sibling.return=p.return,p=p.sibling}if(h&&!f&&0!==(1&n.mode)){cs=n;for(var v=n.child;null!==v;){for(n=cs=v;null!==cs;){var y=(i=cs).child;switch(i.tag){case 0:case 11:case 14:case 15:fs(4,i,i.return);break;case 1:us(i,i.return);var x=i.stateNode;if("function"===typeof x.componentWillUnmount){var b=i.return;try{x.props=i.memoizedProps,x.state=i.memoizedState,x.componentWillUnmount()}catch(_){Wa(i,b,_)}}break;case 5:us(i,i.return);break;case 22:if(null!==i.memoizedState){Ps(n);continue}}null!==y?(y.return=i,cs=y):Ps(n)}v=v.sibling}}}switch(4102&o){case 2:_s(t),t.flags&=-3;break;case 6:_s(t),t.flags&=-3,Cs(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Cs(t.alternate,t);break;case 4:Cs(t.alternate,t)}}catch(_){Wa(t,t.return,_)}if(null!==(n=t.sibling)){n.return=t.return,cs=n;break}cs=t.return}}}(e,i),z(e.containerInfo),e.current=i,Ts(i,e,r),zt(),Xs=l,Dt=o,qs.transition=s}else e.current=i;if(fa&&(fa=!1,pa=e,ma=r),s=e.pendingLanes,0===s&&(da=null),function(e){if(Wt&&"function"===typeof Wt.onCommitFiberRoot)try{Wt.onCommitFiberRoot(Ht,e,void 0,128===(128&e.current.flags))}catch(t){}}(i.stateNode),Ma(e,Ft()),null!==t)for(n=e.onRecoverableError,i=0;i<t.length;i++)n(t[i]);if(ua)throw ua=!1,e=ha,ha=null,e;0!==(1&ma)&&0!==e.tag&&Ua(),s=e.pendingLanes,0!==(1&s)?e===va?ga++:(ga=0,va=e):ga=0,Zt()}(e,t,n)}finally{qs.transition=i,Dt=n}return null}function Ua(){if(null!==pa){var e=Rt(ma),t=qs.transition,n=Dt;try{if(qs.transition=null,Dt=16>e?16:e,null===pa)var i=!1;else{if(e=pa,pa=null,ma=0,0!==(6&Xs))throw Error(a(331));var r=Xs;for(Xs|=4,cs=e.current;null!==cs;){var s=cs,o=s.child;if(0!==(16&cs.flags)){var l=s.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(cs=u;null!==cs;){var h=cs;switch(h.tag){case 0:case 11:case 15:fs(8,h,s)}var d=h.child;if(null!==d)d.return=h,cs=d;else for(;null!==cs;){var f=(h=cs).sibling,p=h.return;if(ys(h),h===u){cs=null;break}if(null!==f){f.return=p,cs=f;break}cs=p}}}var m=s.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}cs=s}}if(0!==(2064&s.subtreeFlags)&&null!==o)o.return=s,cs=o;else e:for(;null!==cs;){if(0!==(2048&(s=cs).flags))switch(s.tag){case 0:case 11:case 15:fs(9,s,s.return)}var y=s.sibling;if(null!==y){y.return=s.return,cs=y;break e}cs=s.return}}var x=e.current;for(cs=x;null!==cs;){var b=(o=cs).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,cs=b;else e:for(o=x;null!==cs;){if(0!==(2048&(l=cs).flags))try{switch(l.tag){case 0:case 11:case 15:ps(9,l)}}catch(w){Wa(l,l.return,w)}if(l===o){cs=null;break e}var _=l.sibling;if(null!==_){_.return=l.return,cs=_;break e}cs=l.return}}if(Xs=r,Zt(),Wt&&"function"===typeof Wt.onPostCommitFiberRoot)try{Wt.onPostCommitFiberRoot(Ht,e)}catch(w){}i=!0}return i}finally{Dt=n,qs.transition=t}}return!1}function Ha(e,t,n){vn(e,t=Mr(0,t=vr(n,t),1)),t=ba(),null!==(e=Sa(e,1))&&(Pt(e,1,t),Ma(e,t))}function Wa(e,t,n){if(3===e.tag)Ha(e,e,n);else for(;null!==t;){if(3===t.tag){Ha(t,e,n);break}if(1===t.tag){var i=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof i.componentDidCatch&&(null===da||!da.has(i))){vn(t,e=Cr(t,e=vr(n,e),1)),e=ba(),null!==(t=Sa(t,1))&&(Pt(t,1,e),Ma(t,e));break}}t=t.return}}function Ga(e,t,n){var i=e.pingCache;null!==i&&i.delete(t),t=ba(),e.pingedLanes|=e.suspendedLanes&n,Ys===e&&(Zs&n)===n&&(4===$s||3===$s&&(130023424&Zs)===Zs&&500>Ft()-aa?Da(e,0):ia|=n),Ma(e,t)}function qa(e,t){0===t&&(0===(1&e.mode)?t=1:(t=Mt,0===(130023424&(Mt<<=1))&&(Mt=4194304)));var n=ba();null!==(e=Sa(e,t))&&(Pt(e,t,n),Ma(e,n))}function Xa(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),qa(e,n)}function Ya(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(a(314))}null!==i&&i.delete(t),qa(e,n)}function Ka(e,t){return Nt(e,t)}function Za(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qa(e,t,n,i){return new Za(e,t,n,i)}function Ja(e){return!(!(e=e.prototype)||!e.isReactComponent)}function $a(e,t){var n=e.alternate;return null===n?((n=Qa(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function eo(e,t,n,i,r,s){var o=2;if(i=e,"function"===typeof e)Ja(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case u:return to(n.children,r,s,t);case h:o=8,r|=8;break;case d:return(e=Qa(12,n,t,2|r)).elementType=d,e.lanes=s,e;case g:return(e=Qa(13,n,t,r)).elementType=g,e.lanes=s,e;case v:return(e=Qa(19,n,t,r)).elementType=v,e.lanes=s,e;case b:return no(n,r,s,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case f:o=10;break e;case p:o=9;break e;case m:o=11;break e;case y:o=14;break e;case x:o=16,i=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Qa(o,n,t,r)).elementType=e,t.type=i,t.lanes=s,t}function to(e,t,n,i){return(e=Qa(7,e,i,t)).lanes=n,e}function no(e,t,n,i){return(e=Qa(22,e,i,t)).elementType=b,e.lanes=n,e.stateNode={},e}function io(e,t,n){return(e=Qa(6,e,null,t)).lanes=n,e}function ro(e,t,n){return(t=Qa(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function so(e,t,n,i,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=q,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kt(0),this.expirationTimes=kt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kt(0),this.identifierPrefix=i,this.onRecoverableError=r,Z&&(this.mutableSourceEagerHydrationData=null)}function ao(e,t,n,i,r,s,a,o,l){return e=new so(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Qa(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null},pn(s),e}function oo(e){if(!e)return ct;e:{if(C(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(pt(n))return vt(e,n,t)}return t}function lo(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=A(t))?null:e.stateNode}function co(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function uo(e,t){co(e,t),(e=e.alternate)&&co(e,t)}function ho(e){return null===(e=A(e))?null:e.stateNode}function fo(){return null}return ca=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ht.current)Or=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Or=!1,function(e,t,n){switch(t.tag){case 3:qr(t),$n();break;case 5:pi(t);break;case 1:pt(t.type)&&yt(t);break;case 4:di(t,t.stateNode.containerInfo);break;case 10:on(0,t.type._context,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(null!==i)return null!==i.dehydrated?(lt(gi,1&gi.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Zr(e,t,n):(lt(gi,1&gi.current),null!==(e=rs(e,t,n))?e.sibling:null);lt(gi,1&gi.current);break;case 19:if(i=0!==(n&t.childLanes),0!==(128&e.flags)){if(i)return is(e,t,n);t.flags|=128}var r=t.memoizedState;if(null!==r&&(r.rendering=null,r.tail=null,r.lastEffect=null),lt(gi,gi.current),i)break;return null;case 22:case 23:return t.lanes=0,Vr(e,t,n)}return rs(e,t,n)}(e,t,n);Or=0!==(131072&e.flags)}else Or=!1,Wn&&0!==(1048576&t.flags)&&jn(t,Dn,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var r=ft(t,ut.current);un(t,n),r=Di(null,t,i,e,r,n);var s=Ri();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(i)?(s=!0,yt(t)):s=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,pn(t),r.updater=Mn,t.stateNode=r,r._reactInternals=t,An(t,i,e,n),t=Gr(null,t,i,!0,s,n)):(t.tag=0,Wn&&s&&Bn(t),zr(null,t,r,n),t=t.child),t;case 16:i=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,i=(r=i._init)(i._payload),t.type=i,r=t.tag=function(e){if("function"===typeof e)return Ja(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===m)return 11;if(e===y)return 14}return 2}(i),e=en(i,e),r){case 0:t=Hr(null,t,i,e,n);break e;case 1:t=Wr(null,t,i,e,n);break e;case 11:t=Fr(null,t,i,e,n);break e;case 14:t=jr(null,t,i,en(i.type,e),n);break e}throw Error(a(306,i,""))}return t;case 0:return i=t.type,r=t.pendingProps,Hr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 1:return i=t.type,r=t.pendingProps,Wr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 3:e:{if(qr(t),null===e)throw Error(a(387));i=t.pendingProps,r=(s=t.memoizedState).element,mn(e,t),bn(t,i,null,n);var o=t.memoizedState;if(i=o.element,Z&&s.isDehydrated){if(s={element:i,isDehydrated:!1,cache:o.cache,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,256&t.flags){t=Xr(e,t,i,n,r=Error(a(423)));break e}if(i!==r){t=Xr(e,t,i,n,r=Error(a(424)));break e}for(Z&&(Hn=Ve(t.stateNode.containerInfo),Un=t,Wn=!0,qn=null,Gn=!1),n=ai(t,null,i,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),i===r){t=rs(e,t,n);break e}zr(e,t,i,n)}t=t.child}return t;case 5:return pi(t),null===e&&Zn(t),i=t.type,r=t.pendingProps,s=null!==e?e.memoizedProps:null,o=r.children,U(i,r)?o=null:null!==s&&U(i,s)&&(t.flags|=32),Ur(e,t),zr(e,t,o,n),t.child;case 6:return null===e&&Zn(t),null;case 13:return Zr(e,t,n);case 4:return di(t,t.stateNode.containerInfo),i=t.pendingProps,null===e?t.child=si(t,null,i,n):zr(e,t,i,n),t.child;case 11:return i=t.type,r=t.pendingProps,Fr(e,t,i,r=t.elementType===i?r:en(i,r),n);case 7:return zr(e,t,t.pendingProps,n),t.child;case 8:case 12:return zr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(i=t.type._context,r=t.pendingProps,s=t.memoizedProps,on(0,i,o=r.value),null!==s)if(Gt(s.value,o)){if(s.children===r.children&&!ht.current){t=rs(e,t,n);break e}}else for(null!==(s=t.child)&&(s.return=t);null!==s;){var l=s.dependencies;if(null!==l){o=s.child;for(var c=l.firstContext;null!==c;){if(c.context===i){if(1===s.tag){(c=gn(-1,n&-n)).tag=2;var u=s.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}s.lanes|=n,null!==(c=s.alternate)&&(c.lanes|=n),cn(s.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===s.tag)o=s.type===t.type?null:s.child;else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),cn(o,n,t),o=s.sibling}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===t){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}zr(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,i=t.pendingProps.children,un(t,n),i=i(r=hn(r)),t.flags|=1,zr(e,t,i,n),t.child;case 14:return r=en(i=t.type,t.pendingProps),jr(e,t,i,r=en(i.type,r),n);case 15:return Br(e,t,t.type,t.pendingProps,n);case 17:return i=t.type,r=t.pendingProps,r=t.elementType===i?r:en(i,r),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pt(i)?(e=!0,yt(t)):e=!1,un(t,n),En(t,i,r),An(t,i,r,n),Gr(null,t,i,!0,e,n);case 19:return is(e,t,n);case 22:return Vr(e,t,n)}throw Error(a(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(wa(e,134217728,ba()),uo(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=ba(),n=_a(e);wa(e,n,t),uo(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ct(t.pendingLanes);0!==n&&(Lt(t,1|n),Ma(t,Ft()),0===(6&Xs)&&(la(),Zt()))}break;case 13:var i=ba();Pa(function(){return wa(e,1,i)}),uo(e,1)}},t.batchedUpdates=function(e,t){var n=Xs;Xs|=1;try{return e(t)}finally{0===(Xs=n)&&(la(),Xt&&Zt())}},t.createComponentSelector=function(e){return{$$typeof:Ds,value:e}},t.createContainer=function(e,t,n,i,r,s,a){return ao(e,t,!1,null,0,i,0,s,a)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Rs,value:e}},t.createHydrationContainer=function(e,t,n,i,r,s,a,o,l){return(e=ao(n,i,!0,e,0,s,0,o,l)).context=oo(null),n=e.current,(s=gn(i=ba(),r=_a(n))).callback=void 0!==t&&null!==t?t:null,vn(n,s),e.current.lanes=r,Pt(e,r,i),Ma(e,i),e},t.createPortal=function(e,t,n){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==i?null:""+i,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:Ns,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Is,value:e}},t.createTextSelector=function(e){return{$$typeof:Os,value:e}},t.deferredUpdates=function(e){var t=Dt,n=qs.transition;try{return qs.transition=null,Dt=16,e()}finally{Dt=t,qs.transition=n}},t.discreteUpdates=function(e,t,n,i,r){var s=Dt,a=qs.transition;try{return qs.transition=null,Dt=1,e(t,n,i,r)}finally{Dt=s,qs.transition=a,0===Xs&&la()}},t.findAllNodes=Us,t.findBoundingRects=function(e,t){if(!ie)throw Error(a(363));t=Us(e,t),e=[];for(var n=0;n<t.length;n++)e.push(se(t[n]));for(t=e.length-1;0<t;t--)for(var i=(n=e[t]).x,r=i+n.width,s=n.y,o=s+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,h=u+c.width,d=c.y,f=d+c.height;if(i>=u&&s>=d&&r<=h&&o<=f){e.splice(t,1);break}if(!(i!==u||n.width!==c.width||f<s||d>o)){d>s&&(c.height+=d-s,c.y=s),f<o&&(c.height=o-d),e.splice(t,1);break}if(!(s!==d||n.height!==c.height||h<i||u>r)){u>i&&(c.width+=u-i,c.x=i),h<r&&(c.width=r-u),e.splice(t,1);break}}return e},t.findHostInstance=lo,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=T(e))?P(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return lo(e)},t.flushControlled=function(e){var t=Xs;Xs|=1;var n=qs.transition,i=Dt;try{qs.transition=null,Dt=1,e()}finally{Dt=i,qs.transition=n,0===(Xs=t)&&(la(),Zt())}},t.flushPassiveEffects=Ua,t.flushSync=Pa,t.focusWithin=function(e,t){if(!ie)throw Error(a(363));for(t=Vs(e=Fs(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!oe(n)){if(5===n.tag&&ce(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Dt},t.getFindAllNodesFailureDescription=function(e,t){if(!ie)throw Error(a(363));var n=0,i=[];e=[Fs(e),0];for(var r=0;r<e.length;){var s=e[r++],o=e[r++],l=t[o];if((5!==s.tag||!oe(s))&&(js(s,l)&&(i.push(Bs(l)),++o>n&&(n=o)),o<t.length))for(s=s.child;null!==s;)e.push(s,o),s=s.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(Bs(t[n]));return"findAllNodes was able to match part of the selector:\n  "+i.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?R(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:o.ReactCurrentDispatcher,findHostInstanceByFiber:ho,findFiberByHostInstance:e.findFiberByHostInstance||fo,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Ht=t.inject(e),Wt=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,i){if(!ie)throw Error(a(363));e=Us(e,t);var r=ue(e,n,i).disconnect;return{disconnect:function(){r()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Dt;try{return Dt=e,t()}finally{Dt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,i){var r=t.current,s=ba(),a=_a(r);return n=oo(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(s,a)).payload={element:e},null!==(i=void 0===i?null:i)&&(t.callback=i),vn(r,t),null!==(e=wa(r,a,s))&&yn(e,r,a),a},t}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var s=t[i]={exports:{}};return e[i](s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>zS,AddEquation:()=>aS,AddOperation:()=>DS,AdditiveAnimationBlendMode:()=>dC,AdditiveBlending:()=>nS,AlphaFormat:()=>mM,AlwaysDepth:()=>SS,AlwaysStencilFunc:()=>VC,AmbientLight:()=>II,AmbientLightProbe:()=>JI,AnimationClip:()=>sI,AnimationLoader:()=>pI,AnimationMixer:()=>AO,AnimationObjectGroup:()=>CO,AnimationUtils:()=>qN,ArcCurve:()=>cR,ArrayCamera:()=>jL,ArrowHelper:()=>xz,Audio:()=>uO,AudioAnalyser:()=>gO,AudioContext:()=>KI,AudioListener:()=>cO,AudioLoader:()=>ZI,AxesHelper:()=>bz,BackSide:()=>Qw,BasicDepthPacking:()=>yC,BasicShadowMap:()=>qw,Bone:()=>ED,BooleanKeyframeTrack:()=>JN,Box2:()=>BO,Box3:()=>XE,Box3Helper:()=>pz,BoxBufferGeometry:()=>Cz,BoxGeometry:()=>KA,BoxHelper:()=>fz,BufferAttribute:()=>pA,BufferGeometry:()=>DA,BufferGeometryLoader:()=>UI,ByteType:()=>sM,Cache:()=>oI,Camera:()=>tk,CameraHelper:()=>uz,CanvasTexture:()=>aR,CapsuleBufferGeometry:()=>Ez,CapsuleGeometry:()=>PR,CatmullRomCurve3:()=>mR,CineonToneMapping:()=>OS,CircleBufferGeometry:()=>Tz,CircleGeometry:()=>LR,ClampToEdgeWrapping:()=>qS,Clock:()=>iO,Color:()=>cA,ColorKeyframeTrack:()=>$N,ColorManagement:()=>RE,CompressedArrayTexture:()=>sR,CompressedTexture:()=>rR,CompressedTextureLoader:()=>mI,ConeBufferGeometry:()=>Az,ConeGeometry:()=>RR,CubeCamera:()=>rk,CubeReflectionMapping:()=>BS,CubeRefractionMapping:()=>VS,CubeTexture:()=>sk,CubeTextureLoader:()=>vI,CubeUVReflectionMapping:()=>WS,CubicBezierCurve:()=>xR,CubicBezierCurve3:()=>bR,CubicInterpolant:()=>YN,CullFaceBack:()=>Hw,CullFaceFront:()=>Ww,CullFaceFrontBack:()=>Gw,CullFaceNone:()=>Uw,Curve:()=>oR,CurvePath:()=>TR,CustomBlending:()=>sS,CustomToneMapping:()=>FS,CylinderBufferGeometry:()=>kz,CylinderGeometry:()=>DR,Cylindrical:()=>FO,Data3DTexture:()=>WE,DataArrayTexture:()=>UE,DataTexture:()=>TD,DataTextureLoader:()=>yI,DataUtils:()=>Mz,DecrementStencilOp:()=>PC,DecrementWrapStencilOp:()=>DC,DefaultLoadingManager:()=>cI,DepthFormat:()=>xM,DepthStencilFormat:()=>bM,DepthTexture:()=>HL,DirectionalLight:()=>NI,DirectionalLightHelper:()=>oz,DiscreteInterpolant:()=>ZN,DisplayP3ColorSpace:()=>CC,DodecahedronBufferGeometry:()=>Pz,DodecahedronGeometry:()=>IR,DoubleSide:()=>Jw,DstAlphaFactor:()=>vS,DstColorFactor:()=>xS,DynamicCopyUsage:()=>KC,DynamicDrawUsage:()=>HC,DynamicReadUsage:()=>qC,EdgesGeometry:()=>BR,EllipseCurve:()=>lR,EqualDepth:()=>ES,EqualStencilFunc:()=>OC,EquirectangularReflectionMapping:()=>US,EquirectangularRefractionMapping:()=>HS,Euler:()=>PT,EventDispatcher:()=>eE,ExtrudeBufferGeometry:()=>Lz,ExtrudeGeometry:()=>gN,FileLoader:()=>fI,Float16BufferAttribute:()=>wA,Float32BufferAttribute:()=>SA,Float64BufferAttribute:()=>MA,FloatType:()=>uM,Fog:()=>ZL,FogExp2:()=>KL,FramebufferTexture:()=>iR,FrontSide:()=>Zw,Frustum:()=>fk,GLBufferAttribute:()=>RO,GLSL1:()=>QC,GLSL3:()=>JC,GreaterDepth:()=>AS,GreaterEqualDepth:()=>TS,GreaterEqualStencilFunc:()=>BC,GreaterStencilFunc:()=>FC,GridHelper:()=>nz,Group:()=>BL,HalfFloatType:()=>hM,HemisphereLight:()=>_I,HemisphereLightHelper:()=>tz,HemisphereLightProbe:()=>QI,IcosahedronBufferGeometry:()=>Dz,IcosahedronGeometry:()=>yN,ImageBitmapLoader:()=>XI,ImageLoader:()=>gI,ImageUtils:()=>IE,IncrementStencilOp:()=>kC,IncrementWrapStencilOp:()=>LC,InstancedBufferAttribute:()=>LD,InstancedBufferGeometry:()=>VI,InstancedInterleavedBuffer:()=>DO,InstancedMesh:()=>zD,Int16BufferAttribute:()=>yA,Int32BufferAttribute:()=>bA,Int8BufferAttribute:()=>mA,IntType:()=>lM,InterleavedBuffer:()=>JL,InterleavedBufferAttribute:()=>eD,Interpolant:()=>XN,InterpolateDiscrete:()=>sC,InterpolateLinear:()=>aC,InterpolateSmooth:()=>oC,InvertStencilOp:()=>RC,KeepStencilOp:()=>TC,KeyframeTrack:()=>QN,LOD:()=>xD,LatheBufferGeometry:()=>Rz,LatheGeometry:()=>kR,Layers:()=>LT,LessDepth:()=>MS,LessEqualDepth:()=>CS,LessEqualStencilFunc:()=>zC,LessStencilFunc:()=>IC,Light:()=>bI,LightProbe:()=>FI,Line:()=>WD,Line3:()=>HO,LineBasicMaterial:()=>FD,LineCurve:()=>_R,LineCurve3:()=>wR,LineDashedMaterial:()=>jN,LineLoop:()=>YD,LineSegments:()=>XD,LinearEncoding:()=>gC,LinearFilter:()=>$S,LinearInterpolant:()=>KN,LinearMipMapLinearFilter:()=>iM,LinearMipMapNearestFilter:()=>tM,LinearMipmapLinearFilter:()=>nM,LinearMipmapNearestFilter:()=>eM,LinearSRGBColorSpace:()=>MC,LinearToneMapping:()=>NS,Loader:()=>uI,LoaderUtils:()=>BI,LoadingManager:()=>lI,LoopOnce:()=>nC,LoopPingPong:()=>rC,LoopRepeat:()=>iC,LuminanceAlphaFormat:()=>yM,LuminanceFormat:()=>vM,MOUSE:()=>Bw,Material:()=>rA,MaterialLoader:()=>jI,MathUtils:()=>pE,Matrix3:()=>gE,Matrix4:()=>bT,MaxEquation:()=>uS,Mesh:()=>XA,MeshBasicMaterial:()=>hA,MeshDepthMaterial:()=>LL,MeshDistanceMaterial:()=>DL,MeshLambertMaterial:()=>zN,MeshMatcapMaterial:()=>FN,MeshNormalMaterial:()=>ON,MeshPhongMaterial:()=>NN,MeshPhysicalMaterial:()=>RN,MeshStandardMaterial:()=>DN,MeshToonMaterial:()=>IN,MinEquation:()=>cS,MirroredRepeatWrapping:()=>XS,MixOperation:()=>LS,MultiplyBlending:()=>rS,MultiplyOperation:()=>PS,NearestFilter:()=>YS,NearestMipMapLinearFilter:()=>JS,NearestMipMapNearestFilter:()=>ZS,NearestMipmapLinearFilter:()=>QS,NearestMipmapNearestFilter:()=>KS,NeverDepth:()=>wS,NeverStencilFunc:()=>NC,NoBlending:()=>eS,NoColorSpace:()=>wC,NoToneMapping:()=>RS,NormalAnimationBlendMode:()=>hC,NormalBlending:()=>tS,NotEqualDepth:()=>kS,NotEqualStencilFunc:()=>jC,NumberKeyframeTrack:()=>eI,Object3D:()=>GT,ObjectLoader:()=>HI,ObjectSpaceNormalMap:()=>_C,OctahedronBufferGeometry:()=>Nz,OctahedronGeometry:()=>xN,OneFactor:()=>dS,OneMinusDstAlphaFactor:()=>yS,OneMinusDstColorFactor:()=>bS,OneMinusSrcAlphaFactor:()=>gS,OneMinusSrcColorFactor:()=>pS,OrthographicCamera:()=>Tk,PCFShadowMap:()=>Xw,PCFSoftShadowMap:()=>Yw,PMREMGenerator:()=>Ok,Path:()=>AR,PerspectiveCamera:()=>nk,Plane:()=>uk,PlaneBufferGeometry:()=>Iz,PlaneGeometry:()=>gk,PlaneHelper:()=>mz,PointLight:()=>DI,PointLightHelper:()=>QO,Points:()=>eR,PointsMaterial:()=>KD,PolarGridHelper:()=>iz,PolyhedronBufferGeometry:()=>Oz,PolyhedronGeometry:()=>NR,PositionalAudio:()=>mO,PropertyBinding:()=>MO,PropertyMixer:()=>vO,QuadraticBezierCurve:()=>SR,QuadraticBezierCurve3:()=>MR,Quaternion:()=>wE,QuaternionKeyframeTrack:()=>nI,QuaternionLinearInterpolant:()=>tI,RED_GREEN_RGTC2_Format:()=>eC,RED_RGTC1_Format:()=>JM,REVISION:()=>jw,RGBADepthPacking:()=>xC,RGBAFormat:()=>gM,RGBAIntegerFormat:()=>CM,RGBA_ASTC_10x10_Format:()=>YM,RGBA_ASTC_10x5_Format:()=>GM,RGBA_ASTC_10x6_Format:()=>qM,RGBA_ASTC_10x8_Format:()=>XM,RGBA_ASTC_12x10_Format:()=>KM,RGBA_ASTC_12x12_Format:()=>ZM,RGBA_ASTC_4x4_Format:()=>zM,RGBA_ASTC_5x4_Format:()=>FM,RGBA_ASTC_5x5_Format:()=>jM,RGBA_ASTC_6x5_Format:()=>BM,RGBA_ASTC_6x6_Format:()=>VM,RGBA_ASTC_8x5_Format:()=>UM,RGBA_ASTC_8x6_Format:()=>HM,RGBA_ASTC_8x8_Format:()=>WM,RGBA_BPTC_Format:()=>QM,RGBA_ETC2_EAC_Format:()=>OM,RGBA_PVRTC_2BPPV1_Format:()=>RM,RGBA_PVRTC_4BPPV1_Format:()=>DM,RGBA_S3TC_DXT1_Format:()=>TM,RGBA_S3TC_DXT3_Format:()=>AM,RGBA_S3TC_DXT5_Format:()=>kM,RGB_ETC1_Format:()=>NM,RGB_ETC2_Format:()=>IM,RGB_PVRTC_2BPPV1_Format:()=>LM,RGB_PVRTC_4BPPV1_Format:()=>PM,RGB_S3TC_DXT1_Format:()=>EM,RGFormat:()=>SM,RGIntegerFormat:()=>MM,RawShaderMaterial:()=>LN,Ray:()=>xT,Raycaster:()=>NO,RectAreaLight:()=>OI,RedFormat:()=>_M,RedIntegerFormat:()=>wM,ReinhardToneMapping:()=>IS,RepeatWrapping:()=>GS,ReplaceStencilOp:()=>AC,ReverseSubtractEquation:()=>lS,RingBufferGeometry:()=>zz,RingGeometry:()=>bN,SIGNED_RED_GREEN_RGTC2_Format:()=>tC,SIGNED_RED_RGTC1_Format:()=>$M,SRGBColorSpace:()=>SC,Scene:()=>QL,ShaderChunk:()=>vk,ShaderLib:()=>xk,ShaderMaterial:()=>ek,ShadowMaterial:()=>PN,Shape:()=>VR,ShapeBufferGeometry:()=>Fz,ShapeGeometry:()=>_N,ShapePath:()=>_z,ShapeUtils:()=>fN,ShortType:()=>aM,Skeleton:()=>PD,SkeletonHelper:()=>KO,SkinnedMesh:()=>CD,Source:()=>OE,Sphere:()=>hT,SphereBufferGeometry:()=>jz,SphereGeometry:()=>wN,Spherical:()=>zO,SphericalHarmonics3:()=>zI,SplineCurve:()=>CR,SpotLight:()=>TI,SpotLightHelper:()=>GO,Sprite:()=>mD,SpriteMaterial:()=>tD,SrcAlphaFactor:()=>mS,SrcAlphaSaturateFactor:()=>_S,SrcColorFactor:()=>fS,StaticCopyUsage:()=>YC,StaticDrawUsage:()=>UC,StaticReadUsage:()=>GC,StereoCamera:()=>nO,StreamCopyUsage:()=>ZC,StreamDrawUsage:()=>WC,StreamReadUsage:()=>XC,StringKeyframeTrack:()=>iI,SubtractEquation:()=>oS,SubtractiveBlending:()=>iS,TOUCH:()=>Vw,TangentSpaceNormalMap:()=>bC,TetrahedronBufferGeometry:()=>Bz,TetrahedronGeometry:()=>SN,Texture:()=>jE,TextureLoader:()=>xI,TorusBufferGeometry:()=>Vz,TorusGeometry:()=>MN,TorusKnotBufferGeometry:()=>Uz,TorusKnotGeometry:()=>CN,Triangle:()=>nA,TriangleFanDrawMode:()=>mC,TriangleStripDrawMode:()=>pC,TrianglesDrawMode:()=>fC,TubeBufferGeometry:()=>Hz,TubeGeometry:()=>EN,TwoPassDoubleSide:()=>$w,UVMapping:()=>jS,Uint16BufferAttribute:()=>xA,Uint32BufferAttribute:()=>_A,Uint8BufferAttribute:()=>gA,Uint8ClampedBufferAttribute:()=>vA,Uniform:()=>kO,UniformsGroup:()=>LO,UniformsLib:()=>yk,UniformsUtils:()=>$A,UnsignedByteType:()=>rM,UnsignedInt248Type:()=>pM,UnsignedIntType:()=>cM,UnsignedShort4444Type:()=>dM,UnsignedShort5551Type:()=>fM,UnsignedShortType:()=>oM,VSMShadowMap:()=>Kw,Vector2:()=>mE,Vector3:()=>SE,Vector4:()=>BE,VectorKeyframeTrack:()=>rI,VideoTexture:()=>nR,WebGL1Renderer:()=>YL,WebGL3DRenderTarget:()=>GE,WebGLArrayRenderTarget:()=>HE,WebGLCubeRenderTarget:()=>ak,WebGLMultipleRenderTargets:()=>qE,WebGLRenderTarget:()=>VE,WebGLRenderer:()=>XL,WebGLUtils:()=>FL,WireframeGeometry:()=>TN,WrapAroundEnding:()=>uC,ZeroCurvatureEnding:()=>lC,ZeroFactor:()=>hS,ZeroSlopeEnding:()=>cC,ZeroStencilOp:()=>EC,_SRGBAFormat:()=>$C,sRGBEncoding:()=>vC});var t=n(43),r=n(391),s=n(579);const a="undefined"!==typeof document,o=a?t.useLayoutEffect:t.useEffect;function l(){const e=(0,t.useRef)(!1);return o(()=>(e.current=!0,()=>{e.current=!1}),[]),e}const c=e=>e,u=!1,h=!1;class d{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const f=["read","resolveKeyframes","update","preRender","render","postRender"];function p(e,t){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=f.reduce((e,t)=>(e[t]=function(e){let t=new d,n=new d,i=0,r=!1,s=!1;const a=new WeakSet,o={schedule:function(e){const s=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r,o=s?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&a.add(e),o.add(e)&&s&&r&&(i=t.order.length),e},cancel:e=>{n.remove(e),a.delete(e)},process:l=>{if(r)s=!0;else{if(r=!0,[t,n]=[n,t],n.clear(),i=t.order.length,i)for(let n=0;n<i;n++){const i=t.order[n];a.has(i)&&(o.schedule(i),e()),i(l)}r=!1,s&&(s=!1,o.process(l))}}};return o}(()=>n=!0),e),{}),a=e=>{s[e].process(r)},o=()=>{const s=h?r.timestamp:performance.now();n=!1,r.delta=i?1e3/60:Math.max(Math.min(s-r.timestamp,40),1),r.timestamp=s,r.isProcessing=!0,f.forEach(a),r.isProcessing=!1,n&&t&&(i=!1,e(o))},l=f.reduce((t,a)=>{const l=s[a];return t[a]=function(t){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,i=!0,r.isProcessing||e(o)),l.schedule(t,s,a)},t},{});return{schedule:l,cancel:e=>f.forEach(t=>s[t].cancel(e)),state:r,steps:s}}const{schedule:m,cancel:g,state:v,steps:y}=p("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:c,!0);const x=(0,t.createContext)(null);function b(e){const n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}const _=(0,t.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class w extends t.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=this.props.sizeRef.current;e.height=t.offsetHeight||0,e.width=t.offsetWidth||0,e.top=t.offsetTop,e.left=t.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function S(e){let{children:n,isPresent:i}=e;const r=(0,t.useId)(),a=(0,t.useRef)(null),o=(0,t.useRef)({width:0,height:0,top:0,left:0}),{nonce:l}=(0,t.useContext)(_);return(0,t.useInsertionEffect)(()=>{const{width:e,height:t,top:n,left:s}=o.current;if(i||!a.current||!e||!t)return;a.current.dataset.motionPopId=r;const c=document.createElement("style");return l&&(c.nonce=l),document.head.appendChild(c),c.sheet&&c.sheet.insertRule('\n          [data-motion-pop-id="'.concat(r,'"] {\n            position: absolute !important;\n            width: ').concat(e,"px !important;\n            height: ").concat(t,"px !important;\n            top: ").concat(n,"px !important;\n            left: ").concat(s,"px !important;\n          }\n        ")),()=>{document.head.removeChild(c)}},[i]),(0,s.jsx)(w,{isPresent:i,childRef:a,sizeRef:o,children:t.cloneElement(n,{ref:a})})}const M=e=>{let{children:n,initial:i,isPresent:r,onExitComplete:a,custom:o,presenceAffectsLayout:l,mode:c}=e;const u=b(C),h=(0,t.useId)(),d=(0,t.useMemo)(()=>({id:h,initial:i,isPresent:r,custom:o,onExitComplete:e=>{u.set(e,!0);for(const t of u.values())if(!t)return;a&&a()},register:e=>(u.set(e,!1),()=>u.delete(e))}),l?[Math.random()]:[r]);return(0,t.useMemo)(()=>{u.forEach((e,t)=>u.set(t,!1))},[r]),t.useEffect(()=>{!r&&!u.size&&a&&a()},[r]),"popLayout"===c&&(n=(0,s.jsx)(S,{isPresent:r,children:n})),(0,s.jsx)(x.Provider,{value:d,children:n})};function C(){return new Map}const E=(0,t.createContext)({});let T=c,A=c;const k=e=>e.key||"";const P=e=>{let{children:n,custom:i,initial:r=!0,onExitComplete:a,exitBeforeEnter:c,presenceAffectsLayout:u=!0,mode:h="sync"}=e;A(!c,"Replace exitBeforeEnter with mode='wait'");const d=(0,t.useContext)(E).forceRender||function(){const e=l(),[n,i]=(0,t.useState)(0),r=(0,t.useCallback)(()=>{e.current&&i(n+1)},[n]);return[(0,t.useCallback)(()=>m.postRender(r),[r]),n]}()[0],f=l(),p=function(e){const n=[];return t.Children.forEach(e,e=>{(0,t.isValidElement)(e)&&n.push(e)}),n}(n);let g=p;const v=(0,t.useRef)(new Map).current,y=(0,t.useRef)(g),x=(0,t.useRef)(new Map).current,b=(0,t.useRef)(!0);if(o(()=>{b.current=!1,function(e,t){e.forEach(e=>{const n=k(e);t.set(n,e)})}(p,x),y.current=g}),function(e){(0,t.useEffect)(()=>()=>e(),[])}(()=>{b.current=!0,x.clear(),v.clear()}),b.current)return(0,s.jsx)(s.Fragment,{children:g.map(e=>(0,s.jsx)(M,{isPresent:!0,initial:!!r&&void 0,presenceAffectsLayout:u,mode:h,children:e},k(e)))});g=[...g];const _=y.current.map(k),w=p.map(k),S=_.length;for(let t=0;t<S;t++){const e=_[t];-1!==w.indexOf(e)||v.has(e)||v.set(e,void 0)}return"wait"===h&&v.size&&(g=[]),v.forEach((e,t)=>{if(-1!==w.indexOf(t))return;const n=x.get(t);if(!n)return;const r=_.indexOf(t);let o=e;if(!o){const e=()=>{v.delete(t);const e=Array.from(x.keys()).filter(e=>!w.includes(e));if(e.forEach(e=>x.delete(e)),y.current=p.filter(n=>{const i=k(n);return i===t||e.includes(i)}),!v.size){if(!1===f.current)return;d(),a&&a()}};o=(0,s.jsx)(M,{isPresent:!1,onExitComplete:e,custom:i,presenceAffectsLayout:u,mode:h,children:n},k(n)),v.set(t,o)}g.splice(r,0,o)}),g=g.map(e=>{const t=e.key;return v.has(t)?e:(0,s.jsx)(M,{isPresent:!0,presenceAffectsLayout:u,mode:h,children:e},k(e))}),(0,s.jsx)(s.Fragment,{children:v.size?g:g.map(e=>(0,t.cloneElement)(e))})};function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function D(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=L(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:t+""}function R(e,t,n){return(t=D(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach(function(t){R(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const O=(0,t.createContext)({}),z=(0,t.createContext)({strict:!1}),F=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),j="data-"+F("framerAppearId"),{schedule:B,cancel:V}=p(queueMicrotask,!1);function U(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}const H=(0,t.createContext)({});let W=!1;function G(e,n,i,r,s){const{visualElement:a}=(0,t.useContext)(O),l=(0,t.useContext)(z),c=(0,t.useContext)(x),u=(0,t.useContext)(_).reducedMotion,h=(0,t.useRef)();r=r||l.renderer,!h.current&&r&&(h.current=r(e,{visualState:n,parent:a,props:i,presenceContext:c,blockInitialAnimation:!!c&&!1===c.initial,reducedMotionConfig:u}));const d=h.current,f=(0,t.useContext)(H);!d||d.projection||!s||"html"!==d.type&&"svg"!==d.type||function(e,t,n,i){const{layoutId:r,layout:s,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:X(e.parent)),e.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:Boolean(a)||o&&U(o),visualElement:e,scheduleRender:()=>e.scheduleRender(),animationType:"string"===typeof s?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}(h.current,i,s,f),(0,t.useInsertionEffect)(()=>{d&&d.update(i,c)});const p=(0,t.useRef)(Boolean(i[j]&&!window.HandoffComplete));return o(()=>{d&&(d.updateFeatures(),B.render(d.render),p.current&&d.animationState&&d.animationState.animateChanges())}),(0,t.useEffect)(()=>{d&&(!p.current&&d.animationState&&d.animationState.animateChanges(),p.current&&(p.current=!1,W||(W=!0,queueMicrotask(q))))}),d}function q(){window.HandoffComplete=!0}function X(e){if(e)return!1!==e.options.allowProjection?e.projection:X(e.parent)}function Y(e,n,i){return(0,t.useCallback)(t=>{t&&e.mount&&e.mount(t),n&&(t?n.mount(t):n.unmount()),i&&("function"===typeof i?i(t):U(i)&&(i.current=t))},[n])}function K(e){return"string"===typeof e||Array.isArray(e)}function Z(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const Q=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],J=["initial",...Q];function $(e){return Z(e.animate)||J.some(t=>K(e[t]))}function ee(e){return Boolean($(e)||e.variants)}function te(e){const{initial:n,animate:i}=function(e,t){if($(e)){const{initial:t,animate:n}=e;return{initial:!1===t||K(t)?t:void 0,animate:K(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(O));return(0,t.useMemo)(()=>({initial:n,animate:i}),[ne(n),ne(i)])}function ne(e){return Array.isArray(e)?e.join(" "):e}const ie={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},re={};for(const n in ie)re[n]={isEnabled:e=>ie[n].some(t=>!!e[t])};const se=Symbol.for("motionComponentSymbol");function ae(e){let{preloadedFeatures:n,createVisualElement:i,useRender:r,useVisualState:o,Component:l}=e;n&&function(e){for(const t in e)re[t]=I(I({},re[t]),e[t])}(n);const c=(0,t.forwardRef)(function(e,n){let c;const u=I(I(I({},(0,t.useContext)(_)),e),{},{layoutId:oe(e)}),{isStatic:h}=u,d=te(e),f=o(e,h);if(!h&&a){!function(){(0,t.useContext)(z).strict;0}();const e=function(e){const{drag:t,layout:n}=re;if(!t&&!n)return{};const i=I(I({},t),n);return{MeasureLayout:(null===t||void 0===t?void 0:t.isEnabled(e))||(null===n||void 0===n?void 0:n.isEnabled(e))?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}(u);c=e.MeasureLayout,d.visualElement=G(l,f,u,i,e.ProjectionNode)}return(0,s.jsxs)(O.Provider,{value:d,children:[c&&d.visualElement?(0,s.jsx)(c,I({visualElement:d.visualElement},u)):null,r(l,e,Y(f,d.visualElement,n),f,h,d.visualElement)]})});return c[se]=l,c}function oe(e){let{layoutId:n}=e;const i=(0,t.useContext)(E).id;return i&&void 0!==n?i+"-"+n:n}function le(e){function t(t){return ae(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,i)=>(n.has(i)||n.set(i,t(i)),n.get(i))})}const ce=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ue(e){return"string"===typeof e&&!e.includes("-")&&!!(ce.indexOf(e)>-1||/[A-Z]/.test(e))}const he={};const de=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fe=new Set(de);function pe(e,t){let{layout:n,layoutId:i}=t;return fe.has(e)||e.startsWith("origin")||(n||void 0!==i)&&(!!he[e]||"opacity"===e)}const me=e=>Boolean(e&&e.getVelocity),ge={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},ve=de.length;const ye=e=>t=>"string"===typeof t&&t.startsWith(e),xe=ye("--"),be=ye("var(--"),_e=e=>!!be(e)&&we.test(e.split("/*")[0].trim()),we=/var\(--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)$/i,Se=(e,t)=>t&&"number"===typeof e?t.transform(e):e,Me=(e,t,n)=>n>t?t:n<e?e:n,Ce={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},Ee=I(I({},Ce),{},{transform:e=>Me(0,1,e)}),Te=I(I({},Ce),{},{default:1}),Ae=e=>Math.round(1e5*e)/1e5,ke=/-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/g,Pe=/(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))/gi,Le=/^(?:#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\))$/i;function De(e){return"string"===typeof e}const Re=e=>({test:t=>De(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),Ne=Re("deg"),Ie=Re("%"),Oe=Re("px"),ze=Re("vh"),Fe=Re("vw"),je=I(I({},Ie),{},{parse:e=>Ie.parse(e)/100,transform:e=>Ie.transform(100*e)}),Be=I(I({},Ce),{},{transform:Math.round}),Ve={borderWidth:Oe,borderTopWidth:Oe,borderRightWidth:Oe,borderBottomWidth:Oe,borderLeftWidth:Oe,borderRadius:Oe,radius:Oe,borderTopLeftRadius:Oe,borderTopRightRadius:Oe,borderBottomRightRadius:Oe,borderBottomLeftRadius:Oe,width:Oe,maxWidth:Oe,height:Oe,maxHeight:Oe,size:Oe,top:Oe,right:Oe,bottom:Oe,left:Oe,padding:Oe,paddingTop:Oe,paddingRight:Oe,paddingBottom:Oe,paddingLeft:Oe,margin:Oe,marginTop:Oe,marginRight:Oe,marginBottom:Oe,marginLeft:Oe,rotate:Ne,rotateX:Ne,rotateY:Ne,rotateZ:Ne,scale:Te,scaleX:Te,scaleY:Te,scaleZ:Te,skew:Ne,skewX:Ne,skewY:Ne,distance:Oe,translateX:Oe,translateY:Oe,translateZ:Oe,x:Oe,y:Oe,z:Oe,perspective:Oe,transformPerspective:Oe,opacity:Ee,originX:je,originY:je,originZ:Oe,zIndex:Be,backgroundPositionX:Oe,backgroundPositionY:Oe,fillOpacity:Ee,strokeOpacity:Ee,numOctaves:Be};function Ue(e,t,n,i){const{style:r,vars:s,transform:a,transformOrigin:o}=e;let l=!1,c=!1,u=!0;for(const h in t){const e=t[h];if(xe(h)){s[h]=e;continue}const n=Ve[h],i=Se(e,n);if(fe.has(h)){if(l=!0,a[h]=i,!u)continue;e!==(n.default||0)&&(u=!1)}else h.startsWith("origin")?(c=!0,o[h]=i):r[h]=i}if(t.transform||(l||i?r.transform=function(e,t,n,i){let{enableHardwareAcceleration:r=!0,allowTransformNone:s=!0}=t,a="";for(let o=0;o<ve;o++){const t=de[o];void 0!==e[t]&&(a+="".concat(ge[t]||t,"(").concat(e[t],") "))}return r&&!e.z&&(a+="translateZ(0)"),a=a.trim(),i?a=i(e,n?"":a):s&&n&&(a="none"),a}(e.transform,n,u,i):r.transform&&(r.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const He=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function We(e,t,n){for(const i in t)me(t[i])||pe(i,n)||(e[i]=t[i])}function Ge(e,n,i){const r={};return We(r,e.style||{},e),Object.assign(r,function(e,n,i){let{transformTemplate:r}=e;return(0,t.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Ue(e,n,{enableHardwareAcceleration:!i},r),Object.assign({},e.vars,e.style)},[n])}(e,n,i)),r}function qe(e,t,n){const i={},r=Ge(e,t,n);return e.drag&&!1!==e.dragListener&&(i.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(i.tabIndex=0),i.style=r,i}const Xe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ye(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Xe.has(e)}let Ke=e=>!Ye(e);try{(Ze=require("@emotion/is-prop-valid").default)&&(Ke=e=>e.startsWith("on")?!Ye(e):Ze(e))}catch(dj){}var Ze;function Qe(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n={};for(var i in e)if({}.hasOwnProperty.call(e,i)){if(-1!==t.indexOf(i))continue;n[i]=e[i]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Je(e,t,n){return"string"===typeof e?e:Oe.transform(t+n*e)}const $e={offset:"stroke-dashoffset",array:"stroke-dasharray"},et={offset:"strokeDashoffset",array:"strokeDasharray"};const tt=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function nt(e,t,n,i,r){let{attrX:s,attrY:a,attrScale:o,originX:l,originY:c,pathLength:u,pathSpacing:h=1,pathOffset:d=0}=t;if(Ue(e,Qe(t,tt),n,r),i)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:f,style:p,dimensions:m}=e;f.transform&&(m&&(p.transform=f.transform),delete f.transform),m&&(void 0!==l||void 0!==c||p.transform)&&(p.transformOrigin=function(e,t,n){const i=Je(t,e.x,e.width),r=Je(n,e.y,e.height);return"".concat(i," ").concat(r)}(m,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==s&&(f.x=s),void 0!==a&&(f.y=a),void 0!==o&&(f.scale=o),void 0!==u&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const s=r?$e:et;e[s.offset]=Oe.transform(-i);const a=Oe.transform(t),o=Oe.transform(n);e[s.array]="".concat(a," ").concat(o)}(f,u,h,d,!1)}const it=()=>I(I({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),rt=e=>"string"===typeof e&&"svg"===e.toLowerCase();function st(e,n,i,r){const s=(0,t.useMemo)(()=>{const t=it();return nt(t,n,{enableHardwareAcceleration:!1},rt(r),e.transformTemplate),I(I({},t.attrs),{},{style:I({},t.style)})},[n]);if(e.style){const t={};We(t,e.style,e),s.style=I(I({},t),s.style)}return s}function at(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(n,i,r,s,a)=>{let{latestValues:o}=s;const l=(ue(n)?st:qe)(i,o,a,n),c=function(e,t,n){const i={};for(const r in e)"values"===r&&"object"===typeof e.values||(Ke(r)||!0===n&&Ye(r)||!t&&!Ye(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}(i,"string"===typeof n,e),u=n!==t.Fragment?I(I(I({},c),l),{},{ref:r}):{},{children:h}=i,d=(0,t.useMemo)(()=>me(h)?h.get():h,[h]);return(0,t.createElement)(n,I(I({},u),{},{children:d}))}}function ot(e,t,n,i){let{style:r,vars:s}=t;Object.assign(e.style,r,i&&i.getProjectionStyles(n));for(const a in s)e.style.setProperty(a,s[a])}const lt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function ct(e,t,n,i){ot(e,t,void 0,i);for(const r in t.attrs)e.setAttribute(lt.has(r)?r:F(r),t.attrs[r])}function ut(e,t,n){var i;const{style:r}=e,s={};for(const a in r)(me(r[a])||t.style&&me(t.style[a])||pe(a,e)||void 0!==(null===(i=null===n||void 0===n?void 0:n.getValue(a))||void 0===i?void 0:i.liveStyle))&&(s[a]=r[a]);return s}function ht(e,t,n){const i=ut(e,t,n);for(const r in e)if(me(e[r])||me(t[r])){i[-1!==de.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return i}function dt(e){const t=[{},{}];return null===e||void 0===e||e.values.forEach((e,n)=>{t[0][n]=e.get(),t[1][n]=e.getVelocity()}),t}function ft(e,t,n,i){if("function"===typeof t){const[r,s]=dt(i);t=t(void 0!==n?n:e.custom,r,s)}if("string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t){const[r,s]=dt(i);t=t(void 0!==n?n:e.custom,r,s)}return t}const pt=e=>Array.isArray(e),mt=e=>pt(e)?e[e.length-1]||0:e;function gt(e){const t=me(e)?e.get():e;return n=t,Boolean(n&&"object"===typeof n&&n.mix&&n.toValue)?t.toValue():t;var n}const vt=["transitionEnd","transition"];const yt=e=>(n,i)=>{const r=(0,t.useContext)(O),s=(0,t.useContext)(x),a=()=>function(e,t,n,i){let{scrapeMotionValuesFromProps:r,createRenderState:s,onMount:a}=e;const o={latestValues:xt(t,n,i,r),renderState:s()};return a&&(o.mount=e=>a(t,e,o)),o}(e,n,r,s);return i?a():b(a)};function xt(e,t,n,i){const r={},s=i(e,{});for(const d in s)r[d]=gt(s[d]);let{initial:a,animate:o}=e;const l=$(e),c=ee(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let u=!!n&&!1===n.initial;u=u||!1===a;const h=u?o:a;if(h&&"boolean"!==typeof h&&!Z(h)){(Array.isArray(h)?h:[h]).forEach(t=>{const n=ft(e,t);if(!n)return;const{transitionEnd:i,transition:s}=n,a=Qe(n,vt);for(const e in a){let t=a[e];if(Array.isArray(t)){t=t[u?t.length-1:0]}null!==t&&(r[e]=t)}for(const e in i)r[e]=i[e]})}return r}const bt={useVisualState:yt({scrapeMotionValuesFromProps:ht,createRenderState:it,onMount:(e,t,n)=>{let{renderState:i,latestValues:r}=n;m.read(()=>{try{i.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(Kg){i.dimensions={x:0,y:0,width:0,height:0}}}),m.render(()=>{nt(i,r,{enableHardwareAcceleration:!1},rt(t.tagName),e.transformTemplate),ct(t,i)})}})},_t={useVisualState:yt({scrapeMotionValuesFromProps:ut,createRenderState:He})};function wt(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}const St=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function Mt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e["".concat(t,"X")],y:e["".concat(t,"Y")]}}}function Ct(e,t,n,i){return wt(e,t,(e=>t=>St(t)&&e(t,Mt(t)))(n),i)}const Et=(e,t)=>n=>t(e(n)),Tt=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Et)};function At(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const kt=At("dragHorizontal"),Pt=At("dragVertical");function Lt(e){let t=!1;if("y"===e)t=Pt();else if("x"===e)t=kt();else{const e=kt(),n=Pt();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function Dt(){const e=Lt(!0);return!e||(e(),!1)}class Rt{constructor(e){this.isMounted=!1,this.node=e}update(){}}function Nt(e,t){const n=t?"pointerenter":"pointerleave",i=t?"onHoverStart":"onHoverEnd";return Ct(e.current,n,(n,r)=>{if("touch"===n.pointerType||Dt())return;const s=e.getProps();e.animationState&&s.whileHover&&e.animationState.setActive("whileHover",t);const a=s[i];a&&m.postRender(()=>a(n,r))},{passive:!e.getProps()[i]})}const It=(e,t)=>!!t&&(e===t||It(e,t.parentElement));function Ot(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,Mt(n))}const zt=["root"],Ft=new WeakMap,jt=new WeakMap,Bt=e=>{const t=Ft.get(e.target);t&&t(e)},Vt=e=>{e.forEach(Bt)};function Ut(e,t,n){const i=function(e){let{root:t}=e,n=Qe(e,zt);const i=t||document;jt.has(i)||jt.set(i,{});const r=jt.get(i),s=JSON.stringify(n);return r[s]||(r[s]=new IntersectionObserver(Vt,I({root:t},n))),r[s]}(t);return Ft.set(e,n),i.observe(e),()=>{Ft.delete(e),i.unobserve(e)}}const Ht={some:0,all:1};const Wt={inView:{Feature:class extends Rt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:i="some",once:r}=e,s={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof i?i:Ht[i]};return Ut(this.node.current,s,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:i}=this.node.getProps(),s=t?n:i;s&&s(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Rt{constructor(){super(...arguments),this.removeStartListeners=c,this.removeEndListeners=c,this.removeAccessibleListeners=c,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),i=Ct(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:i,globalTapTarget:r}=this.node.getProps(),s=r||It(this.node.current,e.target)?n:i;s&&m.update(()=>s(e,t))},{passive:!(n.onTap||n.onPointerUp)}),r=Ct(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Tt(i,r),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=wt(this.node.current,"keydown",e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=wt(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&Ot("up",(e,t)=>{const{onTap:n}=this.node.getProps();n&&m.postRender(()=>n(e,t))})}),Ot("down",(e,t)=>{this.startPress(e,t)})}),t=wt(this.node.current,"blur",()=>{this.isPressing&&Ot("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=Tt(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&m.postRender(()=>n(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Dt()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&m.postRender(()=>n(e,t))}mount(){const e=this.node.getProps(),t=Ct(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=wt(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Tt(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends Rt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(Kg){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tt(wt(this.node.current,"focus",()=>this.onFocus()),wt(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Rt{mount(){this.unmount=Tt(Nt(this.node,!0),Nt(this.node,!1))}unmount(){}}}};function Gt(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function qt(e,t,n){const i=e.getProps();return ft(i,t,void 0!==n?n:i.custom,e)}const Xt=e=>1e3*e,Yt=e=>e/1e3,Kt={type:"spring",stiffness:500,damping:25,restSpeed:10},Zt={type:"keyframes",duration:.8},Qt={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Jt=(e,t)=>{let{keyframes:n}=t;return n.length>2?Zt:fe.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:Kt:Qt},$t=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function en(e,t){return e[t]||e.default||e}const tn=!1,nn=e=>null!==e;function rn(e,t,n){let{repeat:i,repeatType:r="loop"}=t;const s=e.filter(nn),a=i&&"loop"!==r&&i%2===1?0:s.length-1;return a&&void 0!==n?n:s[a]}let sn;function an(){sn=void 0}const on={now:()=>(void 0===sn&&on.set(v.isProcessing||h?v.timestamp:performance.now()),sn),set:e=>{sn=e,queueMicrotask(an)}},ln=e=>/^0(?:[\0-\x08\x0E-\x1F!-\x2D\/-\x9F\xA1-\u167F\u1681-\u1FFF\u200B-\u2027\u202A-\u202E\u2030-\u205E\u2060-\u2FFF\u3001-\uD7FF\uE000-\uFEFE\uFF00-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+$/.test(e);function cn(e){return"number"===typeof e?0===e:null===e||("none"===e||"0"===e||ln(e))}const un=e=>/^-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)$/.test(e),hn=/^var\(--(?:([\x2D0-9A-Z_a-z]+)|([\x2D0-9A-Z_a-z]+), ?([ #%\(\),-\.0-9A-Za-z]+))\)/;function dn(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;A(n<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[i,r]=function(e){const t=hn.exec(e);if(!t)return[,];const[,n,i,r]=t;return["--".concat(null!==n&&void 0!==n?n:i),r]}(e);if(!i)return;const s=window.getComputedStyle(t).getPropertyValue(i);if(s){const e=s.trim();return un(e)?parseFloat(e):e}return _e(r)?dn(r,t,n+1):r}const fn=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),pn=e=>e===Ce||e===Oe,mn=(e,t)=>parseFloat(e.split(", ")[t]),gn=(e,t)=>(n,i)=>{let{transform:r}=i;if("none"===r||!r)return 0;const s=r.match(/^matrix3d\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)\)$/);if(s)return mn(s[1],t);{const t=r.match(/^matrix\(((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])+)\)$/);return t?mn(t[1],e):0}},vn=new Set(["x","y","z"]),yn=de.filter(e=>!vn.has(e));const xn={width:(e,t)=>{let{x:n}=e,{paddingLeft:i="0",paddingRight:r="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(r)},height:(e,t)=>{let{y:n}=e,{paddingTop:i="0",paddingBottom:r="0"}=t;return n.max-n.min-parseFloat(i)-parseFloat(r)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:i}=t;return parseFloat(i)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:i}=t;return parseFloat(i)+(n.max-n.min)},x:gn(4,13),y:gn(5,14)};xn.translateX=xn.x,xn.translateY=xn.y;const bn=e=>t=>t.test(e),_n=[Ce,Oe,Ie,Ne,Fe,ze,{test:e=>"auto"===e,parse:e=>e}],wn=e=>_n.find(bn(e)),Sn=new Set;let Mn=!1,Cn=!1;function En(){if(Cn){const e=Array.from(Sn).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),n=new Map;t.forEach(e=>{const t=function(e){const t=[];return yn.forEach(n=>{const i=e.getValue(n);void 0!==i&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}(e);t.length&&(n.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=n.get(e);t&&t.forEach(t=>{let[n,i]=t;var r;null===(r=e.getValue(n))||void 0===r||r.set(i)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Cn=!1,Mn=!1,Sn.forEach(e=>e.complete()),Sn.clear()}function Tn(){Sn.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Cn=!0)})}class An{constructor(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=n,this.motionValue=i,this.element=r,this.isAsync=s}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Sn.add(this),Mn||(Mn=!0,m.read(Tn),m.resolveKeyframes(En))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:n,motionValue:i}=this;for(let r=0;r<e.length;r++)if(null===e[r])if(0===r){const r=null===i||void 0===i?void 0:i.get(),s=e[e.length-1];if(void 0!==r)e[0]=r;else if(n&&t){const i=n.readValue(t,s);void 0!==i&&null!==i&&(e[0]=i)}void 0===e[0]&&(e[0]=s),i&&void 0===r&&i.set(e[0])}else e[r]=e[r-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Sn.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Sn.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const kn=(e,t)=>n=>Boolean(De(n)&&Le.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),Pn=(e,t,n)=>i=>{if(!De(i))return i;const[r,s,a,o]=i.match(ke);return{[e]:parseFloat(r),[t]:parseFloat(s),[n]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},Ln=I(I({},Ce),{},{transform:e=>Math.round((e=>Me(0,255,e))(e))}),Dn={test:kn("rgb","red"),parse:Pn("red","green","blue"),transform:e=>{let{red:t,green:n,blue:i,alpha:r=1}=e;return"rgba("+Ln.transform(t)+", "+Ln.transform(n)+", "+Ln.transform(i)+", "+Ae(Ee.transform(r))+")"}};const Rn={test:kn("#"),parse:function(e){let t="",n="",i="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}},transform:Dn.transform},Nn={test:kn("hsl","hue"),parse:Pn("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:i,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+Ie.transform(Ae(n))+", "+Ie.transform(Ae(i))+", "+Ae(Ee.transform(r))+")"}},In={test:e=>Dn.test(e)||Rn.test(e)||Nn.test(e),parse:e=>Dn.test(e)?Dn.parse(e):Nn.test(e)?Nn.parse(e):Rn.parse(e),transform:e=>De(e)?e:e.hasOwnProperty("red")?Dn.transform(e):Nn.transform(e)};const On="number",zn="color",Fn=/var[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*--(?:[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*|[\x2D0-9A-Z_a-z\u017F\u212A]+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,(?:[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:(?![\t-\r \(\)\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uD800-\uDFFF\uFEFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*\((?:(?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])|\((?:(?![\(\)\uD800-\uDFFF])[^]|[\uD800-\uDBFF][\uDC00-\uDFFF])*\))*\))+[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)\)|#[0-9a-f]{3,8}|(?:rgb|h[s\u017F]l)a?\((?:-?[\.0-9]+%?[\t-\r ,\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+){2}-?[\.0-9]+%?[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*(?:[,\/][\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?(?:\b[0-9]+(?:\.[0-9]+)?|\.[0-9]+)?%?\)|-?(?:[0-9]+(?:\.[0-9]+)?|\.[0-9]+)/gi;function jn(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=t.replace(Fn,e=>(In.test(e)?(i.color.push(s),r.push(zn),n.push(In.parse(e))):e.startsWith("var(")?(i.var.push(s),r.push("var"),n.push(e)):(i.number.push(s),r.push(On),n.push(parseFloat(e))),++s,"${}")).split("${}");return{values:n,split:a,indexes:i,types:r}}function Bn(e){return jn(e).values}function Vn(e){const{split:t,types:n}=jn(e),i=t.length;return e=>{let r="";for(let s=0;s<i;s++)if(r+=t[s],void 0!==e[s]){const t=n[s];r+=t===On?Ae(e[s]):t===zn?In.transform(e[s]):e[s]}return r}}const Un=e=>"number"===typeof e?0:e;const Hn={test:function(e){var t,n;return isNaN(e)&&De(e)&&((null===(t=e.match(ke))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Pe))||void 0===n?void 0:n.length)||0)>0},parse:Bn,createTransformer:Vn,getAnimatableNone:function(e){const t=Bn(e);return Vn(e)(t.map(Un))}},Wn=new Set(["brightness","contrast","saturate","opacity"]);function Gn(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[i]=n.match(ke)||[];if(!i)return e;const r=n.replace(i,"");let s=Wn.has(t)?1:0;return i!==n&&(s*=100),t+"("+s+r+")"}const qn=/\b([\x2Da-z]*)\((?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*?\)/g,Xn=I(I({},Hn),{},{getAnimatableNone:e=>{const t=e.match(qn);return t?t.map(Gn).join(" "):e}}),Yn=I(I({},Ve),{},{color:In,backgroundColor:In,outlineColor:In,fill:In,stroke:In,borderColor:In,borderTopColor:In,borderRightColor:In,borderBottomColor:In,borderLeftColor:In,filter:Xn,WebkitFilter:Xn}),Kn=e=>Yn[e];function Zn(e,t){let n=Kn(e);return n!==Xn&&(n=Hn),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Qn=new Set(["auto","none","0"]);class Jn extends An{constructor(e,t,n,i){super(e,t,n,i,null===i||void 0===i?void 0:i.owner,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:n}=this;if(!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let n=e[o];if("string"===typeof n&&(n=n.trim(),_e(n))){const i=dn(n,t.current);void 0!==i&&(e[o]=i),o===e.length-1&&(this.finalKeyframe=n)}}if(this.resolveNoneKeyframes(),!fn.has(n)||2!==e.length)return;const[i,r]=e,s=wn(i),a=wn(r);if(s!==a)if(pn(s)&&pn(a))for(let o=0;o<e.length;o++){const t=e[o];"string"===typeof t&&(e[o]=parseFloat(t))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,n=[];for(let i=0;i<e.length;i++)cn(e[i])&&n.push(i);n.length&&function(e,t,n){let i,r=0;for(;r<e.length&&!i;){const t=e[r];"string"===typeof t&&!Qn.has(t)&&jn(t).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=Zn(n,i)}(e,n,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:n}=this;if(!e.current)return;"height"===n&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xn[n](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const i=t[t.length-1];void 0!==i&&e.getValue(n,i).jump(i,!1)}measureEndState(){var e;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t.current)return;const r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,a=i[s];i[s]=xn[n](t.measureViewportBox(),window.getComputedStyle(t.current)),null!==a&&void 0===this.finalKeyframe&&(this.finalKeyframe=a),(null===(e=this.removedTransforms)||void 0===e?void 0:e.length)&&this.removedTransforms.forEach(e=>{let[n,i]=e;t.getValue(n).set(i)}),this.resolveNoneKeyframes()}}function $n(e){let t;return()=>(void 0===t&&(t=e()),t)}const ei=(e,t)=>"zIndex"!==t&&(!("number"!==typeof e&&!Array.isArray(e))||!("string"!==typeof e||!Hn.test(e)&&"0"!==e||e.startsWith("url(")));const ti=["autoplay","delay","type","repeat","repeatDelay","repeatType"];class ni{constructor(e){let{autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a="loop"}=e,o=Qe(e,ti);this.isStopped=!1,this.hasAttemptedResolve=!1,this.options=I({autoplay:t,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:a},o),this.updateFinishedPromise()}get resolved(){return this._resolved||this.hasAttemptedResolve||(Tn(),En()),this._resolved}onKeyframesResolved(e,t){this.hasAttemptedResolve=!0;const{name:n,type:i,velocity:r,delay:s,onComplete:a,onUpdate:o,isGenerator:l}=this.options;if(!l&&!function(e,t,n,i){const r=e[0];if(null===r)return!1;if("display"===t||"visibility"===t)return!0;const s=e[e.length-1],a=ei(r,t),o=ei(s,t);return T(a===o,"You are trying to animate ".concat(t,' from "').concat(r,'" to "').concat(s,'". ').concat(r," is not an animatable value - to enable this animation set ").concat(r," to a value animatable to ").concat(s," via the `style` property.")),!(!a||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}(e)||"spring"===n&&i)}(e,n,i,r)){if(tn||!s)return null===o||void 0===o||o(rn(e,this.options,t)),null===a||void 0===a||a(),void this.resolveFinishedPromise();this.options.duration=0}const c=this.initPlayback(e,t);!1!==c&&(this._resolved=I({keyframes:e,finalKeyframe:t},c),this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function ii(e,t){return t?e*(1e3/t):0}function ri(e,t,n){const i=Math.max(t-5,0);return ii(n-e(i),t-i)}const si=.001;function ai(e){let t,n,{duration:i=800,bounce:r=.25,velocity:s=0,mass:a=1}=e;T(i<=Xt(10),"Spring duration must be 10 seconds or less");let o=1-r;o=Me(.05,1,o),i=Me(.01,10,Yt(i)),o<1?(t=e=>{const t=e*o,n=t*i,r=t-s,a=li(e,o),l=Math.exp(-n);return si-r/a*l},n=e=>{const n=e*o*i,r=n*s+s,a=Math.pow(o,2)*Math.pow(e,2)*i,l=Math.exp(-n),c=li(Math.pow(e,2),o);return(-t(e)+si>0?-1:1)*((r-a)*l)/c}):(t=e=>Math.exp(-e*i)*((e-s)*i+1)-.001,n=e=>Math.exp(-e*i)*(i*i*(s-e)));const l=function(e,t,n){let i=n;for(let r=1;r<oi;r++)i-=e(i)/t(i);return i}(t,n,5/i);if(i=Xt(i),isNaN(l))return{stiffness:100,damping:10,duration:i};{const e=Math.pow(l,2)*a;return{stiffness:e,damping:2*o*Math.sqrt(a*e),duration:i}}}const oi=12;function li(e,t){return e*Math.sqrt(1-t*t)}const ci=["keyframes","restDelta","restSpeed"],ui=["duration","bounce"],hi=["stiffness","damping","mass"];function di(e,t){return t.some(t=>void 0!==e[t])}function fi(e){let{keyframes:t,restDelta:n,restSpeed:i}=e,r=Qe(e,ci);const s=t[0],a=t[t.length-1],o={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=function(e){let t=I({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!di(e,hi)&&di(e,ui)){const n=ai(e);t=I(I(I({},t),n),{},{mass:1}),t.isResolvedFromDuration=!0}return t}(I(I({},r),{},{velocity:-Yt(r.velocity||0)})),p=d||0,m=c/(2*Math.sqrt(l*u)),g=a-s,v=Yt(Math.sqrt(l/u)),y=Math.abs(g)<5;let x;if(i||(i=y?.01:2),n||(n=y?.005:.5),m<1){const e=li(v,m);x=t=>{const n=Math.exp(-m*v*t);return a-n*((p+m*v*g)/e*Math.sin(e*t)+g*Math.cos(e*t))}}else if(1===m)x=e=>a-Math.exp(-v*e)*(g+(p+v*g)*e);else{const e=v*Math.sqrt(m*m-1);x=t=>{const n=Math.exp(-m*v*t),i=Math.min(e*t,300);return a-n*((p+m*v*g)*Math.sinh(i)+e*g*Math.cosh(i))/e}}return{calculatedDuration:f&&h||null,next:e=>{const t=x(e);if(f)o.done=e>=h;else{let r=p;0!==e&&(r=m<1?ri(x,e,t):0);const s=Math.abs(r)<=i,l=Math.abs(a-t)<=n;o.done=s&&l}return o.value=o.done?a:t,o}}}function pi(e){let{keyframes:t,velocity:n=0,power:i=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:h}=e;const d=t[0],f={done:!1,value:d},p=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let m=i*n;const g=d+m,v=void 0===o?g:o(g);v!==g&&(m=v-d);const y=e=>-m*Math.exp(-e/r),x=e=>v+y(e),b=e=>{const t=y(e),n=x(e);f.done=Math.abs(t)<=u,f.value=f.done?v:n};let _,w;const S=e=>{var t;(t=f.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(_=e,w=fi({keyframes:[f.value,p(f.value)],velocity:ri(x,e,f.value),damping:s,stiffness:a,restDelta:u,restSpeed:h}))};return S(0),{calculatedDuration:null,next:e=>{let t=!1;return w||void 0!==_||(t=!0,b(e),S(e)),void 0!==_&&e>=_?w.next(e-_):(!t&&b(e),f)}}}const mi=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function gi(e,t,n,i){if(e===t&&n===i)return c;const r=t=>function(e,t,n,i,r){let s,a,o=0;do{a=t+(n-t)/2,s=mi(a,i,r)-e,s>0?n=a:t=a}while(Math.abs(s)>1e-7&&++o<12);return a}(t,0,1,e,n);return e=>0===e||1===e?e:mi(r(e),t,i)}const vi=gi(.42,0,1,1),yi=gi(0,0,.58,1),xi=gi(.42,0,.58,1),bi=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,_i=e=>t=>1-e(1-t),wi=e=>1-Math.sin(Math.acos(e)),Si=_i(wi),Mi=bi(wi),Ci=gi(.33,1.53,.69,.99),Ei=_i(Ci),Ti=bi(Ei),Ai={linear:c,easeIn:vi,easeInOut:xi,easeOut:yi,circIn:wi,circInOut:Mi,circOut:Si,backIn:Ei,backInOut:Ti,backOut:Ci,anticipate:e=>(e*=2)<1?.5*Ei(e):.5*(2-Math.pow(2,-10*(e-1)))},ki=e=>{if(Array.isArray(e)){A(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,i,r]=e;return gi(t,n,i,r)}return"string"===typeof e?(A(void 0!==Ai[e],"Invalid easing type '".concat(e,"'")),Ai[e]):e},Pi=(e,t,n)=>{const i=t-e;return 0===i?1:(n-e)/i},Li=(e,t,n)=>e+(t-e)*n;function Di(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ri(e,t){return n=>n>0?t:e}const Ni=(e,t,n)=>{const i=e*e,r=n*(t*t-i)+i;return r<0?0:Math.sqrt(r)},Ii=[Rn,Dn,Nn];function Oi(e){const t=(n=e,Ii.find(e=>e.test(n)));var n;if(T(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead.")),!Boolean(t))return!1;let i=t.parse(e);return t===Nn&&(i=function(e){let{hue:t,saturation:n,lightness:i,alpha:r}=e;t/=360,n/=100,i/=100;let s=0,a=0,o=0;if(n){const e=i<.5?i*(1+n):i+n-i*n,r=2*i-e;s=Di(r,e,t+1/3),a=Di(r,e,t),o=Di(r,e,t-1/3)}else s=a=o=i;return{red:Math.round(255*s),green:Math.round(255*a),blue:Math.round(255*o),alpha:r}}(i)),i}const zi=(e,t)=>{const n=Oi(e),i=Oi(t);if(!n||!i)return Ri(e,t);const r=I({},n);return e=>(r.red=Ni(n.red,i.red,e),r.green=Ni(n.green,i.green,e),r.blue=Ni(n.blue,i.blue,e),r.alpha=Li(n.alpha,i.alpha,e),Dn.transform(r))},Fi=new Set(["none","hidden"]);function ji(e,t){return n=>Li(e,t,n)}function Bi(e){return"number"===typeof e?ji:"string"===typeof e?_e(e)?Ri:In.test(e)?zi:Hi:Array.isArray(e)?Vi:"object"===typeof e?In.test(e)?zi:Ui:Ri}function Vi(e,t){const n=[...e],i=n.length,r=e.map((e,n)=>Bi(e)(e,t[n]));return e=>{for(let t=0;t<i;t++)n[t]=r[t](e);return n}}function Ui(e,t){const n=I(I({},e),t),i={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(i[r]=Bi(e[r])(e[r],t[r]));return e=>{for(const t in i)n[t]=i[t](e);return n}}const Hi=(e,t)=>{const n=Hn.createTransformer(t),i=jn(e),r=jn(t);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?Fi.has(e)&&!r.values.length||Fi.has(t)&&!i.values.length?function(e,t){return Fi.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}(e,t):Tt(Vi(function(e,t){var n;const i=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],o=e.indexes[a][r[a]],l=null!==(n=e.values[o])&&void 0!==n?n:0;i[s]=l,r[a]++}return i}(i,r),r.values),n):(T(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),Ri(e,t))};function Wi(e,t,n){if("number"===typeof e&&"number"===typeof t&&"number"===typeof n)return Li(e,t,n);return Bi(e)(e,t)}function Gi(e,t){let{clamp:n=!0,ease:i,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=e.length;if(A(s===t.length,"Both input and output ranges must be the same length"),1===s)return()=>t[0];if(2===s&&e[0]===e[1])return()=>t[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const a=function(e,t,n){const i=[],r=n||Wi,s=e.length-1;for(let a=0;a<s;a++){let n=r(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||c:t;n=Tt(e,n)}i.push(n)}return i}(t,i,r),o=a.length,l=t=>{let n=0;if(o>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const i=Pi(e[n],e[n+1],t);return a[n](i)};return n?t=>l(Me(e[0],e[s-1],t)):l}function qi(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const r=Pi(0,t,i);e.push(Li(n,1,r))}}(t,e.length-1),t}function Xi(e){let{duration:t=300,keyframes:n,times:i,ease:r="easeInOut"}=e;const s=(e=>Array.isArray(e)&&"number"!==typeof e[0])(r)?r.map(ki):ki(r),a={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(i&&i.length===n.length?i:qi(n),t),l=Gi(o,n,{ease:Array.isArray(s)?s:(c=n,u=s,c.map(()=>u||xi).splice(0,c.length-1))});var c,u;return{calculatedDuration:t,next:e=>(a.value=l(e),a.done=e>=t,a)}}const Yi=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>m.update(t,!0),stop:()=>g(t),now:()=>v.isProcessing?v.timestamp:on.now()}},Ki=["KeyframeResolver"],Zi={decay:pi,inertia:pi,tween:Xi,keyframes:Xi,spring:fi},Qi=e=>e/100;class Ji extends ni{constructor(e){let{KeyframeResolver:t=An}=e;super(Qe(e,Ki)),this.holdTime=null,this.startTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;this.teardown();const{onStop:e}=this.options;e&&e()};const{name:n,motionValue:i,keyframes:r}=this.options,s=(e,t)=>this.onKeyframesResolved(e,t);n&&i&&i.owner?this.resolver=i.owner.resolveKeyframes(r,s,n,i):this.resolver=new t(r,s,n,i),this.resolver.scheduleResolve()}initPlayback(e){const{type:t="keyframes",repeat:n=0,repeatDelay:i=0,repeatType:r,velocity:s=0}=this.options,a=Zi[t]||Xi;let o,l;a!==Xi&&"number"!==typeof e[0]&&(o=Tt(Qi,Wi(e[0],e[1])),e=[0,100]);const c=a(I(I({},this.options),{},{keyframes:e}));"mirror"===r&&(l=a(I(I({},this.options),{},{keyframes:[...e].reverse(),velocity:-s}))),null===c.calculatedDuration&&(c.calculatedDuration=function(e){let t=0,n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}(c));const{calculatedDuration:u}=c,h=u+i;return{generator:c,mirroredGenerator:l,mapPercentToKeyframes:o,calculatedDuration:u,resolvedDuration:h,totalDuration:h*(n+1)-i}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),"paused"!==this.pendingPlayState&&e?this.state=this.pendingPlayState:this.pause()}tick(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const{resolved:n}=this;if(!n){const{keyframes:e}=this.options;return{done:!0,value:e[e.length-1]}}const{finalKeyframe:i,generator:r,mirroredGenerator:s,mapPercentToKeyframes:a,keyframes:o,calculatedDuration:l,totalDuration:c,resolvedDuration:u}=n;if(null===this.startTime)return r.next(0);const{delay:h,repeat:d,repeatType:f,repeatDelay:p,onUpdate:m}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-c/this.speed,this.startTime)),t?this.currentTime=e:null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const g=this.currentTime-h*(this.speed>=0?1:-1),v=this.speed>=0?g<0:g>c;this.currentTime=Math.max(g,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=c);let y=this.currentTime,x=r;if(d){const e=Math.min(this.currentTime,c)/u;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===f?(n=1-n,p&&(n-=p/u)):"mirror"===f&&(x=s)),y=Me(0,1,n)*u}const b=v?{done:!1,value:o[0]}:x.next(y);a&&(b.value=a(b.value));let{done:_}=b;v||null===l||(_=this.speed>=0?this.currentTime>=c:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&_);return w&&void 0!==i&&(b.value=rn(o,this.options,i)),m&&m(b.value),w&&this.finish(),b}get duration(){const{resolved:e}=this;return e?Yt(e.calculatedDuration):0}get time(){return Yt(this.currentTime)}set time(e){e=Xt(e),this.currentTime=e,null!==this.holdTime||0===this.speed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Yt(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved)return void(this.pendingPlayState="running");if(this.isStopped)return;const{driver:e=Yi,onPlay:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),t&&t();const n=this.driver.now();null!==this.holdTime?this.startTime=n-this.holdTime:this.startTime&&"finished"!==this.state||(this.startTime=n),"finished"===this.state&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;this._resolved?(this.state="paused",this.holdTime=null!==(e=this.currentTime)&&void 0!==e?e:0):this.pendingPlayState="paused"}complete(){"running"!==this.state&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){null!==this.cancelTime&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const $i=e=>Array.isArray(e)&&"number"===typeof e[0];function er(e){return Boolean(!e||"string"===typeof e&&e in nr||$i(e)||Array.isArray(e)&&e.every(er))}const tr=e=>{let[t,n,i,r]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(i,", ").concat(r,")")},nr={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:tr([0,.65,.55,1]),circOut:tr([.55,0,1,.45]),backIn:tr([.31,.01,.66,-.59]),backOut:tr([.33,1.53,.69,.99])};function ir(e){return rr(e)||nr.easeOut}function rr(e){return e?$i(e)?tr(e):Array.isArray(e)?e.map(ir):nr[e]:void 0}const sr=["onComplete","onUpdate","motionValue"],ar=["motionValue","onUpdate","onComplete"],or=$n(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),lr=new Set(["opacity","clipPath","filter","transform"]);class cr extends ni{constructor(e){super(e);const{name:t,motionValue:n,keyframes:i}=this.options;this.resolver=new Jn(i,(e,t)=>this.onKeyframesResolved(e,t),t,n),this.resolver.scheduleResolve()}initPlayback(e,t){var n;let{duration:i=300,times:r,ease:s,type:a,motionValue:o,name:l}=this.options;if(!(null===(n=o.owner)||void 0===n?void 0:n.current))return!1;if("spring"===(c=this.options).type||"backgroundColor"===c.name||!er(c.ease)){const t=this.options,{onComplete:n,onUpdate:o,motionValue:l}=t,c=Qe(t,sr),u=function(e,t){const n=new Ji(I(I({},t),{},{keyframes:e,repeat:0,delay:0,isGenerator:!0}));let i={done:!1,value:e[0]};const r=[];let s=0;for(;!i.done&&s<2e4;)i=n.sample(s),r.push(i.value),s+=10;return{times:void 0,keyframes:r,duration:s-10,ease:"linear"}}(e,c);1===(e=u.keyframes).length&&(e[1]=e[0]),i=u.duration,r=u.times,s=u.ease,a="keyframes"}var c;const u=function(e,t,n){let{delay:i=0,duration:r=300,repeat:s=0,repeatType:a="loop",ease:o,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const u=rr(o);return Array.isArray(u)&&(c.easing=u),e.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:"reverse"===a?"alternate":"normal"})}(o.owner.current,l,e,I(I({},this.options),{},{duration:i,times:r,ease:s}));return u.startTime=on.now(),this.pendingTimeline?(u.timeline=this.pendingTimeline,this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:n}=this.options;o.set(rn(e,this.options,t)),n&&n(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:r,type:a,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Yt(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Yt(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.currentTime=Xt(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}attachTimeline(e){if(this._resolved){const{resolved:t}=this;if(!t)return c;const{animation:n}=t;n.timeline=e,n.onfinish=null}else this.pendingTimeline=e;return c}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;"finished"===t.playState&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,"idle"===this.state)return;const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:n,duration:i,type:r,ease:s,times:a}=e;if("idle"!==t.playState&&"finished"!==t.playState){if(this.time){const e=this.options,{motionValue:t,onUpdate:o,onComplete:l}=e,c=Qe(e,ar),u=new Ji(I(I({},c),{},{keyframes:n,duration:i,type:r,ease:s,times:a,isGenerator:!0})),h=Xt(this.time);t.setWithVelocity(u.sample(h-10).value,u.sample(h).value,10)}this.cancel()}}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:n,repeatDelay:i,repeatType:r,damping:s,type:a}=e;return or()&&n&&lr.has(n)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!i&&"mirror"!==r&&0!==s&&"inertia"!==a}}const ur=$n(()=>void 0!==window.ScrollTimeline);class hr{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let n=0;n<this.animations.length;n++)this.animations[n][e]=t}attachTimeline(e){const t=this.animations.map(t=>{if(!ur()||!t.attachTimeline)return t.pause(),function(e,t){let n;const i=()=>{const{currentTime:i}=t,r=(null===i?0:i.value)/100;n!==r&&e(r),n=r};return m.update(i,!0),()=>g(i)}(e=>{t.time=t.duration*e},e);t.attachTimeline(e)});return()=>{t.forEach((e,t)=>{e&&e(),this.animations[t].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}const dr=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0;return a=>{const o=en(i,e)||{},l=o.delay||i.delay||0;let{elapsed:c=0}=i;c-=Xt(l);let h=I(I({keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity()},o),{},{delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:s?void 0:r});(function(e){let{when:t,delay:n,delayChildren:i,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u}=e,h=Qe(e,$t);return!!Object.keys(h).length})(o)||(h=I(I({},h),Jt(e,h))),h.duration&&(h.duration=Xt(h.duration)),h.repeatDelay&&(h.repeatDelay=Xt(h.repeatDelay)),void 0!==h.from&&(h.keyframes[0]=h.from);let d=!1;if((!1===h.type||0===h.duration&&!h.repeatDelay)&&(h.duration=0,0===h.delay&&(d=!0)),(tn||u)&&(d=!0,h.duration=0,h.delay=0),d&&!s&&void 0!==t.get()){const e=rn(h.keyframes,o);if(void 0!==e)return m.update(()=>{h.onUpdate(e),h.onComplete()}),new hr([])}return!s&&cr.supports(h)?new cr(h):new Ji(h)}};function fr(e){return Boolean(me(e)&&e.add)}function pr(e,t){-1===e.indexOf(t)&&e.push(t)}function mr(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class gr{constructor(){this.subscriptions=[]}add(e){return pr(this.subscriptions,e),()=>mr(this.subscriptions,e)}notify(e,t,n){const i=this.subscriptions.length;if(i)if(1===i)this.subscriptions[0](e,t,n);else for(let r=0;r<i;r++){const i=this.subscriptions[r];i&&i(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const vr={current:void 0};class yr{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.version="11.2.11",this.canTrackVelocity=null,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=on.now();t.updatedAt!==i&&t.setPrevFrameValue(),t.prev=t.current,t.setCurrent(e),t.current!==t.prev&&t.events.change&&t.events.change.notify(t.current),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){var t;this.current=e,this.updatedAt=on.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.current;this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new gr);const n=this.events[e].add(t);return"change"===e?()=>{n(),m.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return vr.current&&vr.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=on.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return ii(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function xr(e,t){return new yr(e,t)}const br=["transitionEnd","transition"];function _r(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,xr(n))}function wr(e){return e.getProps()[j]}const Sr=["transition","transitionEnd"];function Mr(e,t){let{protectedKeys:n,needsAnimating:i}=e;const r=n.hasOwnProperty(t)&&!0!==i[t];return i[t]=!1,r}function Cr(e,t){let{delay:n=0,transitionOverride:i,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var s;let{transition:a=e.getDefaultTransition(),transitionEnd:o}=t,l=Qe(t,Sr);const c=e.getValue("willChange");i&&(a=i);const u=[],h=r&&e.animationState&&e.animationState.getState()[r];for(const d in l){const t=e.getValue(d,null!==(s=e.latestValues[d])&&void 0!==s?s:null),i=l[d];if(void 0===i||h&&Mr(h,d))continue;const r=I({delay:n,elapsed:0},en(a||{},d));let o=!1;if(window.HandoffAppearAnimations){const n=wr(e);if(n){const e=window.HandoffAppearAnimations(n,d,t,m);null!==e&&(r.elapsed=e,o=!0)}}t.start(dr(d,t,i,e.shouldReduceMotion&&fe.has(d)?{type:!1}:r,e,o));const f=t.animation;f&&(fr(c)&&(c.add(d),f.then(()=>c.remove(d))),u.push(f))}return o&&Promise.all(u).then(()=>{m.update(()=>{o&&function(e,t){let n=qt(e,t)||{},{transitionEnd:i={},transition:r={}}=n,s=Qe(n,br);s=I(I({},s),i);for(const a in s)_r(e,a,mt(s[a]))}(e,o)})}),u}function Er(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;const r=qt(e,t,"exit"===n.type?null===(i=e.presenceContext)||void 0===i?void 0:i.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(Cr(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?function(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:r=0,staggerChildren:a,staggerDirection:o}=s;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5?arguments[5]:void 0;const a=[],o=(e.variantChildren.size-1)*i,l=1===r?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*i};return Array.from(e.variantChildren).sort(Tr).forEach((e,i)=>{e.notify("AnimationStart",t),a.push(Er(e,t,I(I({},s),{},{delay:n+l(i)})).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(a)}(e,t,r+i,a,o,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[e,t]="beforeChildren"===l?[a,o]:[o,a];return e().then(()=>t())}return Promise.all([a(),o(n.delay)])}function Tr(e,t){return e.sortNodePosition(t)}const Ar=["transition","transitionEnd"],kr=[...Q].reverse(),Pr=Q.length;function Lr(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:i}=t;return function(e,t){let n,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map(t=>Er(e,t,i));n=Promise.all(r)}else if("string"===typeof t)n=Er(e,t,i);else{const r="function"===typeof t?qt(e,t,i.custom):t;n=Promise.all(Cr(e,r,i))}return n.then(()=>{m.postRender(()=>{e.notify("AnimationComplete",t)})})}(e,n,i)}))}function Dr(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Gt(t,e)}function Rr(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Nr(){return{animate:Rr(!0),whileInView:Rr(),whileHover:Rr(),whileTap:Rr(),whileDrag:Rr(),whileFocus:Rr(),exit:Rr()}}let Ir=0;const Or={animation:{Feature:class extends Rt{constructor(e){super(e),e.animationState||(e.animationState=function(e){let t=Lr(e),n=Nr(),i=!0;const r=t=>(n,i)=>{var r;const s=qt(e,i,"exit"===t?null===(r=e.presenceContext)||void 0===r?void 0:r.custom:void 0);if(s){const{transition:e,transitionEnd:t}=s,i=Qe(s,Ar);n=I(I(I({},n),i),t)}return n};function s(s){const a=e.getProps(),o=e.getVariantContext(!0)||{},l=[],c=new Set;let u={},h=1/0;for(let t=0;t<Pr;t++){const d=kr[t],f=n[d],p=void 0!==a[d]?a[d]:o[d],m=K(p),g=d===s?f.isActive:null;!1===g&&(h=t);let v=p===o[d]&&p!==a[d]&&m;if(v&&i&&e.manuallyAnimateOnMount&&(v=!1),f.protectedKeys=I({},u),!f.isActive&&null===g||!p&&!f.prevProp||Z(p)||"boolean"===typeof p)continue;let y=Dr(f.prevProp,p)||d===s&&f.isActive&&!v&&m||t>h&&m,x=!1;const b=Array.isArray(p)?p:[p];let _=b.reduce(r(d),{});!1===g&&(_={});const{prevResolvedValues:w={}}=f,S=I(I({},w),_),M=t=>{y=!0,c.has(t)&&(x=!0,c.delete(t)),f.needsAnimating[t]=!0;const n=e.getValue(t);n&&(n.liveStyle=!1)};for(const e in S){const t=_[e],n=w[e];if(u.hasOwnProperty(e))continue;let i=!1;i=pt(t)&&pt(n)?!Gt(t,n):t!==n,i?void 0!==t&&null!==t?M(e):c.add(e):void 0!==t&&c.has(e)?M(e):f.protectedKeys[e]=!0}f.prevProp=p,f.prevResolvedValues=_,f.isActive&&(u=I(I({},u),_)),i&&e.blockInitialAnimation&&(y=!1),!y||v&&!x||l.push(...b.map(e=>({animation:e,options:{type:d}})))}if(c.size){const t={};c.forEach(n=>{const i=e.getBaseTarget(n),r=e.getValue(n);r&&(r.liveStyle=!0),t[n]=null!==i&&void 0!==i?i:null}),l.push({animation:t})}let d=Boolean(l.length);return!i||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(d=!1),i=!1,d?t(l):Promise.resolve()}return{animateChanges:s,setActive:function(t,i){var r;if(n[t].isActive===i)return Promise.resolve();null===(r=e.variantChildren)||void 0===r||r.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,i)}),n[t].isActive=i;const a=s(t);for(const e in n)n[e].protectedKeys={};return a},setAnimateFunction:function(n){t=n(e)},getState:()=>n,reset:()=>{n=Nr(),i=!0}}}(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Z(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),null===(e=this.unmountControls)||void 0===e||e.call(this)}}},exit:{Feature:class extends Rt{constructor(){super(...arguments),this.id=Ir++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const i=this.node.animationState.setActive("exit",!e);t&&!e&&i.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},zr=(e,t)=>Math.abs(e-t);class Fr{constructor(e,t){let{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Vr(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=zr(e.x,t.x),i=zr(e.y,t.y);return Math.sqrt(n**2+i**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:i}=e,{timestamp:r}=v;this.history.push(I(I({},i),{},{timestamp:r}));const{onStart:s,onMove:a}=this.handlers;t||(s&&s(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=jr(t,this.transformPagePoint),m.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:i,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const s=Vr("pointercancel"===e.type?this.lastMoveEventInfo:jr(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,s),i&&i(e,s)},!St(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.contextWindow=i||window;const s=jr(Mt(e),this.transformPagePoint),{point:a}=s,{timestamp:o}=v;this.history=[I(I({},a),{},{timestamp:o})];const{onSessionStart:l}=t;l&&l(e,Vr(s,this.history)),this.removeListeners=Tt(Ct(this.contextWindow,"pointermove",this.handlePointerMove),Ct(this.contextWindow,"pointerup",this.handlePointerUp),Ct(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),g(this.updatePoint)}}function jr(e,t){return t?{point:t(e.point)}:e}function Br(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Vr(e,t){let{point:n}=e;return{point:n,delta:Br(n,Hr(t)),offset:Br(n,Ur(t)),velocity:Wr(t,.1)}}function Ur(e){return e[0]}function Hr(e){return e[e.length-1]}function Wr(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const r=Hr(e);for(;n>=0&&(i=e[n],!(r.timestamp-i.timestamp>Xt(t)));)n--;if(!i)return{x:0,y:0};const s=Yt(r.timestamp-i.timestamp);if(0===s)return{x:0,y:0};const a={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Gr(e){return e.max-e.min}function qr(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function Xr(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=i,e.originPoint=Li(t.min,t.max,e.origin),e.scale=Gr(n)/Gr(t),(qr(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=Li(n.min,n.max,e.origin)-e.originPoint,(qr(e.translate)||isNaN(e.translate))&&(e.translate=0)}function Yr(e,t,n,i){Xr(e.x,t.x,n.x,i?i.originX:void 0),Xr(e.y,t.y,n.y,i?i.originY:void 0)}function Kr(e,t,n){e.min=n.min+t.min,e.max=e.min+Gr(t)}function Zr(e,t,n){e.min=t.min-n.min,e.max=e.min+Gr(t)}function Qr(e,t,n){Zr(e.x,t.x,n.x),Zr(e.y,t.y,n.y)}function Jr(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function $r(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}const es=.35;function ts(e,t,n){return{min:ns(e,t),max:ns(e,n)}}function ns(e,t){return"number"===typeof e?e:e[t]||0}const is=()=>({x:{min:0,max:0},y:{min:0,max:0}});function rs(e){return[e("x"),e("y")]}function ss(e){let{top:t,left:n,right:i,bottom:r}=e;return{x:{min:n,max:i},y:{min:t,max:r}}}function as(e){return void 0===e||1===e}function os(e){let{scale:t,scaleX:n,scaleY:i}=e;return!as(t)||!as(n)||!as(i)}function ls(e){return os(e)||cs(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function cs(e){return us(e.x)||us(e.y)}function us(e){return e&&"0%"!==e}function hs(e,t,n){return n+t*(e-n)}function ds(e,t,n,i,r){return void 0!==r&&(e=hs(e,r,i)),hs(e,n,i)+t}function fs(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=ds(e.min,t,n,i,r),e.max=ds(e.max,t,n,i,r)}function ps(e,t){let{x:n,y:i}=t;fs(e.x,n.translate,n.scale,n.originPoint),fs(e.y,i.translate,i.scale,i.originPoint)}function ms(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function gs(e,t){e.min=e.min+t,e.max=e.max+t}function vs(e,t,n){let[i,r,s]=n;const a=void 0!==t[s]?t[s]:.5,o=Li(e.min,e.max,a);fs(e,t[i],t[r],o,t.scale)}const ys=["x","scaleX","originX"],xs=["y","scaleY","originY"];function bs(e,t){vs(e.x,t,ys),vs(e.y,t,xs)}function _s(e,t){return ss(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}(e.getBoundingClientRect(),t))}const ws=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Ss=new WeakMap;class Ms{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:i}=this.getProps();this.panSession=new Fr(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Mt(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:i,onDragStart:r}=this.getProps();if(n&&!i&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Lt(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),rs(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Ie.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const i=n.layout.layoutBox[e];if(i){t=Gr(i)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),r&&m.postRender(()=>r(e,t));const{animationState:s}=this.visualElement;s&&s.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:i,onDirectionLock:r,onDrag:s}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:a}=t;if(i&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(a),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),s&&s(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>rs(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:i,contextWindow:ws(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=t;this.startAnimation(i);const{onDragEnd:r}=this.getProps();r&&m.postRender(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:i}=this.getProps();if(!n||!Cs(e,i,this.currentDirection))return;const r=this.getAxisMotionValue(e);let s=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(s=function(e,t,n){let{min:i,max:r}=t;return void 0!==i&&e<i?e=n?Li(i,e,n.min):Math.max(e,i):void 0!==r&&e>r&&(e=n?Li(r,e,n.max):Math.min(e,r)),e}(s,this.constraints[e],this.elastic[e])),r.set(s)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,r=this.constraints;t&&U(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!i)&&function(e,t){let{top:n,left:i,bottom:r,right:s}=t;return{x:Jr(e.x,i,s),y:Jr(e.y,n,r)}}(i.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:es;return!1===e?e=0:!0===e&&(e=es),{x:ts(e,"left","right"),y:ts(e,"top","bottom")}}(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&rs(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!U(e))return!1;const n=e.current;A(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const r=function(e,t,n){const i=_s(e,n),{scroll:r}=t;return r&&(gs(i.x,r.offset.x),gs(i.y,r.offset.y)),i}(n,i.root,this.visualElement.getTransformPagePoint());let s=function(e,t){return{x:$r(e.x,t.x),y:$r(e.y,t.y)}}(i.layout.layoutBox,r);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(s));this.hasMutatedConstraints=!!e,e&&(s=ss(e))}return s}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:i,dragTransition:r,dragSnapToOrigin:s,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=rs(a=>{if(!Cs(a,t,this.currentDirection))return;let l=o&&o[a]||{};s&&(l={min:0,max:0});const c=i?200:1e6,u=i?40:1e7,h=I(I({type:"inertia",velocity:n?e[a]:0,bounceStiffness:c,bounceDamping:u,timeConstant:750,restDelta:1,restSpeed:10},r),l);return this.startAxisValueAnimation(a,h)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(dr(e,n,0,t,this.visualElement))}stopAnimation(){rs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){rs(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag".concat(e.toUpperCase()),n=this.visualElement.getProps(),i=n[t];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){rs(t=>{const{drag:n}=this.getProps();if(!Cs(t,n,this.currentDirection))return;const{projection:i}=this.visualElement,r=this.getAxisMotionValue(t);if(i&&i.layout){const{min:n,max:s}=i.layout.layoutBox[t];r.set(e[t]-Li(n,s,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!U(t)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};rs(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const n=t.get();i[e]=function(e,t){let n=.5;const i=Gr(e),r=Gr(t);return r>i?n=Pi(t.min,t.max-i,e.min):i>r&&(n=Pi(e.min,e.max-r,t.min)),Me(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),rs(t=>{if(!Cs(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:s}=this.constraints[t];n.set(Li(r,s,i[t]))})}addListeners(){if(!this.visualElement.current)return;Ss.set(this.visualElement,this);const e=Ct(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();U(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,i=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),m.read(t);const r=wt(window,"resize",()=>this.scalePositionWithinConstraints()),s=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(rs(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{r(),e(),i(),s&&s()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:r=!1,dragElastic:s=es,dragMomentum:a=!0}=e;return I(I({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:i,dragConstraints:r,dragElastic:s,dragMomentum:a})}}function Cs(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const Es=e=>(t,n)=>{e&&m.postRender(()=>e(t,n))};const Ts={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function As(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ks={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!Oe.test(e))return e;e=parseFloat(e)}const n=As(e,t.target.x),i=As(e,t.target.y);return"".concat(n,"% ").concat(i,"%")}},Ps={correct:(e,t)=>{let{treeScale:n,projectionDelta:i}=t;const r=e,s=Hn.parse(e);if(s.length>5)return r;const a=Hn.createTransformer(e),o="number"!==typeof s[0]?1:0,l=i.x.scale*n.x,c=i.y.scale*n.y;s[0+o]/=l,s[1+o]/=c;const u=Li(l,c,.5);return"number"===typeof s[2+o]&&(s[2+o]/=u),"number"===typeof s[3+o]&&(s[3+o]/=u),a(s)}};class Ls extends t.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:i}=this.props,{projection:r}=e;var s;s=Rs,Object.assign(he,s),r&&(t.group&&t.group.add(r),n&&n.register&&i&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions(I(I({},r.options),{},{onExitComplete:()=>this.safeToRemove()}))),Ts.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:i,isPresent:r}=this.props,s=n.projection;return s?(s.isPresent=r,i||e.layoutDependency!==t||void 0===t?s.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?s.promote():s.relegate()||m.postRender(()=>{const e=s.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),B.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Ds(e){const[n,i]=function(){const e=(0,t.useContext)(x);if(null===e)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,s=(0,t.useId)();return(0,t.useEffect)(()=>r(s),[]),!n&&i?[!1,()=>i&&i(s)]:[!0]}(),r=(0,t.useContext)(E);return(0,s.jsx)(Ls,I(I({},e),{},{layoutGroup:r,switchLayoutGroup:(0,t.useContext)(H),isPresent:n,safeToRemove:i}))}const Rs={borderRadius:I(I({},ks),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:ks,borderTopRightRadius:ks,borderBottomLeftRadius:ks,borderBottomRightRadius:ks,boxShadow:Ps},Ns=["TopLeft","TopRight","BottomLeft","BottomRight"],Is=Ns.length,Os=e=>"string"===typeof e?parseFloat(e):e,zs=e=>"number"===typeof e||Oe.test(e);function Fs(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const js=Vs(0,.5,Si),Bs=Vs(.5,.95,c);function Vs(e,t,n){return i=>i<e?0:i>t?1:n(Pi(e,t,i))}function Us(e,t){e.min=t.min,e.max=t.max}function Hs(e,t){Us(e.x,t.x),Us(e.y,t.y)}function Ws(e,t,n,i,r){return e=hs(e-=t,1/n,i),void 0!==r&&(e=hs(e,1/r,i)),e}function Gs(e,t,n,i,r){let[s,a,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Ie.test(t)&&(t=parseFloat(t),t=Li(a.min,a.max,t/100)-a.min);if("number"!==typeof t)return;let o=Li(s.min,s.max,i);e===s&&(o-=t),e.min=Ws(e.min,t,n,o,r),e.max=Ws(e.max,t,n,o,r)}(e,t[s],t[a],t[o],t.scale,i,r)}const qs=["x","scaleX","originX"],Xs=["y","scaleY","originY"];function Ys(e,t,n,i){Gs(e.x,t,qs,n?n.x:void 0,i?i.x:void 0),Gs(e.y,t,Xs,n?n.y:void 0,i?i.y:void 0)}function Ks(e){return 0===e.translate&&1===e.scale}function Zs(e){return Ks(e.x)&&Ks(e.y)}function Qs(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Js(e){return Gr(e.x)/Gr(e.y)}class $s{constructor(){this.members=[]}add(e){pr(this.members,e),e.scheduleRender()}remove(e){if(mr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let i=t;i>=0;i--){const e=this.members[i];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;!1===i&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function ea(e,t,n){let i="";const r=e.x.translate/t.x,s=e.y.translate/t.y,a=(null===n||void 0===n?void 0:n.z)||0;if((r||s||a)&&(i="translate3d(".concat(r,"px, ").concat(s,"px, ").concat(a,"px) ")),1===t.x&&1===t.y||(i+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{transformPerspective:e,rotate:t,rotateX:r,rotateY:s,skewX:a,skewY:o}=n;e&&(i="perspective(".concat(e,"px) ").concat(i)),t&&(i+="rotate(".concat(t,"deg) ")),r&&(i+="rotateX(".concat(r,"deg) ")),s&&(i+="rotateY(".concat(s,"deg) ")),a&&(i+="skewX(".concat(a,"deg) ")),o&&(i+="skewY(".concat(o,"deg) "))}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(i+="scale(".concat(o,", ").concat(l,")")),i||"none"}const ta=(e,t)=>e.depth-t.depth;class na{constructor(){this.children=[],this.isDirty=!1}add(e){pr(this.children,e),this.isDirty=!0}remove(e){mr(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(ta),this.isDirty=!1,this.children.forEach(e)}}const ia=["","X","Y","Z"],ra={visibility:"hidden"};let sa=0;const aa={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function oa(e,t,n,i){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),i&&(i[e]=0))}function la(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return!1;const{visualElement:t}=e.options;return!!t&&(!!wr(t)||!(!e.parent||e.parent.hasCheckedOptimisedAppear)&&la(e.parent))}function ca(e){let{attachResizeListener:t,defaultParent:n,measureScroll:i,checkIsScrollRoot:r,resetTransform:s}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=sa++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{var e;this.projectionUpdateScheduled=!1,aa.totalNodes=aa.resolvedTargetDeltas=aa.recalculatedProjection=0,this.nodes.forEach(da),this.nodes.forEach(xa),this.nodes.forEach(ba),this.nodes.forEach(fa),e=aa,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new na)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new gr),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t&&t.notify(...i)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var i;this.isSVG=(i=e)instanceof SVGElement&&"svg"!==i.tagName,this.instance=e;const{layoutId:r,layout:s,visualElement:a}=this.options;if(a&&!a.current&&a.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(s||r)&&(this.isLayoutDirty=!0),t){let n;const i=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=on.now(),i=r=>{let{timestamp:s}=r;const a=s-n;a>=t&&(g(i),e(a-t))};return m.read(i,!0),()=>g(i)}(i,250),Ts.hasAnimatedSinceResize&&(Ts.hasAnimatedSinceResize=!1,this.nodes.forEach(ya))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&a&&(r||s)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:i,layout:r}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const s=this.options.transition||a.getDefaultTransition()||Ea,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=a.getProps(),c=!this.targetLayout||!Qs(this.targetLayout,r)||i,u=!n&&i;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||u||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,u);const e=I(I({},en(s,"layout")),{},{onPlay:o,onComplete:l});(a.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||ya(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,g(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(_a),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.HandoffCancelAllAnimations&&la(this)&&window.HandoffCancelAllAnimations(),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const i=this.getTransformTemplate();this.prevTransformTemplateValue=i?i(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(ma);this.isUpdating||this.nodes.forEach(ga),this.isUpdating=!1,this.nodes.forEach(va),this.nodes.forEach(ua),this.nodes.forEach(ha),this.clearAllSnapshots();const e=on.now();v.delta=Me(0,1e3/60,e-v.timestamp),v.timestamp=e,v.isProcessing=!0,y.update.process(v),y.preRender.process(v),y.render.process(v),v.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,B.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(pa),this.sharedNodes.forEach(wa)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,m.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){m.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:r(this.instance),offset:i(this.instance)})}resetTransform(){if(!s)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!Zs(this.projectionDelta),n=this.getTransformTemplate(),i=n?n(this.latestValues,""):void 0,r=i!==this.prevTransformTemplateValue;e&&(t||ls(this.latestValues)||r)&&(s(this.instance,i),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var i;return e&&(n=this.removeTransform(n)),ka((i=n).x),ka(i.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(gs(t.x,n.offset.x),gs(t.y,n.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Hs(t,e);for(let n=0;n<this.path.length;n++){const i=this.path[n],{scroll:r,options:s}=i;if(i!==this.root&&r&&s.layoutScroll){if(r.isRoot){Hs(t,e);const{scroll:n}=this.root;n&&(gs(t.x,-n.offset.x),gs(t.y,-n.offset.y))}gs(t.x,r.offset.x),gs(t.y,r.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};Hs(n,e);for(let i=0;i<this.path.length;i++){const e=this.path[i];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&bs(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),ls(e.latestValues)&&bs(n,e.latestValues)}return ls(this.latestValues)&&bs(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};Hs(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!ls(e.latestValues))continue;os(e.latestValues)&&e.updateSnapshot();const i=is();Hs(i,e.measurePageBox()),Ys(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,i)}return ls(this.latestValues)&&Ys(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=I(I(I({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==v.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const i=Boolean(this.resumingFrom)||this!==n;if(!(e||i&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:r,layoutId:s}=this.options;if(this.layout&&(r||s)){if(this.resolvedRelativeTargetAt=v.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Qr(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),Hs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var a,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),a=this.target,o=this.relativeTarget,l=this.relativeParent.target,Kr(a.x,o.x,l.x),Kr(a.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):Hs(this.target,this.layout.layoutBox),ps(this.target,this.targetDelta)):Hs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Qr(this.relativeTargetOrigin,this.target,e.target),Hs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}aa.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!os(this.parent.latestValues)&&!cs(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let i=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(i=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(i=!1),this.resolvedRelativeTargetAt===v.timestamp&&(i=!1),i)return;const{layout:r,layoutId:s}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!s)return;Hs(this.layoutCorrected,this.layout.layoutBox);const a=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=n.length;if(!r)return;let s,a;t.x=t.y=1;for(let o=0;o<r;o++){s=n[o],a=s.projectionDelta;const r=s.instance;r&&r.style&&"contents"===r.style.display||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&bs(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,ps(e,a)),i&&ls(s.latestValues)&&bs(e,s.latestValues))}t.x=ms(t.x),t.y=ms(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox,t.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;Yr(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=ea(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===a&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),aa.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,i=n?n.latestValues:{},r=I({},this.latestValues),s={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,u=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(Ca));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,d;Sa(s.x,e.x,n),Sa(s.y,e.y,n),this.setTargetDelta(s),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Qr(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),function(e,t,n,i){Ma(e.x,t.x,n.x,i),Ma(e.y,t.y,n.y,i)}(this.relativeTarget,this.relativeTargetOrigin,a,n),h&&(l=this.relativeTarget,d=h,l.x.min===d.x.min&&l.x.max===d.x.max&&l.y.min===d.y.min&&l.y.max===d.y.max)&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),Hs(h,this.relativeTarget)),o&&(this.animationValues=r,function(e,t,n,i,r,s){r?(e.opacity=Li(0,void 0!==n.opacity?n.opacity:1,js(i)),e.opacityExit=Li(void 0!==t.opacity?t.opacity:1,0,Bs(i))):s&&(e.opacity=Li(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,i));for(let a=0;a<Is;a++){const r="border".concat(Ns[a],"Radius");let s=Fs(t,r),o=Fs(n,r);void 0===s&&void 0===o||(s||(s=0),o||(o=0),0===s||0===o||zs(s)===zs(o)?(e[r]=Math.max(Li(Os(s),Os(o),i),0),(Ie.test(o)||Ie.test(s))&&(e[r]+="%")):e[r]=o)}(t.rotate||n.rotate)&&(e.rotate=Li(t.rotate||0,n.rotate||0,i))}(r,i,this.latestValues,n,u,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(g(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=m.update(()=>{Ts.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const i=me(e)?e:xr(e);return i.start(dr("",i,t,n)),i.animation}(0,1e3,I(I({},e),{},{onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:i,latestValues:r}=e;if(t&&n&&i){if(this!==e&&this.layout&&i&&Pa(this.options.animationType,this.layout.layoutBox,i.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Gr(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const i=Gr(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+i}Hs(t,n),bs(t,r),Yr(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new $s);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this.getStack();i&&i.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.z||n.rotate||n.rotateX||n.rotateY||n.rotateZ||n.skewX||n.skewY)&&(t=!0),!t)return;const i={};n.z&&oa("z",e,i,this.animationValues);for(let r=0;r<ia.length;r++)oa("rotate".concat(ia[r]),e,i,this.animationValues),oa("skew".concat(ia[r]),e,i,this.animationValues);e.render();for(const r in i)e.setStaticValue(r,i[r]),this.animationValues&&(this.animationValues[r]=i[r]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return ra;const i={visibility:""},r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=gt(null===e||void 0===e?void 0:e.pointerEvents)||"",i.transform=r?r(this.latestValues,""):"none",i;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=gt(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!ls(this.latestValues)&&(t.transform=r?r({},""):"none",this.hasProjected=!1),t}const a=s.animationValues||s.latestValues;this.applyTransformsToTarget(),i.transform=ea(this.projectionDeltaWithTransform,this.treeScale,a),r&&(i.transform=r(a,i.transform));const{x:o,y:l}=this.projectionDelta;i.transformOrigin="".concat(100*o.origin,"% ").concat(100*l.origin,"% 0"),s.animationValues?i.opacity=s===this?null!==(n=null!==(t=a.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:a.opacityExit:i.opacity=s===this?void 0!==a.opacity?a.opacity:"":void 0!==a.opacityExit?a.opacityExit:0;for(const c in he){if(void 0===a[c])continue;const{correct:e,applyTo:t}=he[c],n="none"===i.transform?a[c]:e(a[c],s);if(t){const e=t.length;for(let r=0;r<e;r++)i[t[r]]=n}else i[c]=n}return this.options.layoutId&&(i.pointerEvents=s===this?gt(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(ma),this.root.sharedNodes.clear()}}}function ua(e){e.updateLayout()}function ha(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:i}=e.layout,{animationType:r}=e.options,s=n.source!==e.layout.source;"size"===r?rs(e=>{const i=s?n.measuredBox[e]:n.layoutBox[e],r=Gr(i);i.min=t[e].min,i.max=i.min+r}):Pa(r,n.layoutBox,t)&&rs(i=>{const r=s?n.measuredBox[i]:n.layoutBox[i],a=Gr(t[i]);r.max=r.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[i].max=e.relativeTarget[i].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Yr(a,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};s?Yr(o,e.applyTransform(i,!0),n.measuredBox):Yr(o,t,n.layoutBox);const l=!Zs(a);let c=!1;if(!e.resumeFrom){const i=e.getClosestProjectingParent();if(i&&!i.resumeFrom){const{snapshot:r,layout:s}=i;if(r&&s){const a={x:{min:0,max:0},y:{min:0,max:0}};Qr(a,n.layoutBox,r.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Qr(o,t,s.layoutBox),Qs(a,o)||(c=!0),i.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=i)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function da(e){aa.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function fa(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function pa(e){e.clearSnapshot()}function ma(e){e.clearMeasurements()}function ga(e){e.isLayoutDirty=!1}function va(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function ya(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function xa(e){e.resolveTargetDelta()}function ba(e){e.calcProjection()}function _a(e){e.resetSkewAndRotation()}function wa(e){e.removeLeadSnapshot()}function Sa(e,t,n){e.translate=Li(t.translate,0,n),e.scale=Li(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Ma(e,t,n,i){e.min=Li(t.min,n.min,i),e.max=Li(t.max,n.max,i)}function Ca(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Ea={duration:.45,ease:[.4,0,.1,1]},Ta=e=>"undefined"!==typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Aa=Ta("applewebkit/")&&!Ta("chrome/")?Math.round:c;function ka(e){e.min=Aa(e.min),e.max=Aa(e.max)}function Pa(e,t,n){return"position"===e||"preserve-aspect"===e&&!qr(Js(t),Js(n),.2)}const La=ca({attachResizeListener:(e,t)=>wt(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Da={current:void 0},Ra=ca({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Da.current){const e=new La({});e.mount(window),e.setOptions({layoutScroll:!0}),Da.current=e}return Da.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Na={pan:{Feature:class extends Rt{constructor(){super(...arguments),this.removePointerDownListener=c}onPointerDown(e){this.session=new Fr(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ws(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Es(e),onStart:Es(t),onMove:n,onEnd:(e,t)=>{delete this.session,i&&m.postRender(()=>i(e,t))}}}mount(){this.removePointerDownListener=Ct(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Rt{constructor(e){super(e),this.removeGroupControls=c,this.removeListeners=c,this.controls=new Ms(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||c}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Ra,MeasureLayout:Ds}},Ia={current:null},Oa={current:!1};const za=new WeakMap,Fa=[..._n,In,Hn],ja=["willChange"],Ba=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Va=J.length;class Ua{scrapeMotionValuesFromProps(e,t,n){return{}}constructor(e){let{parent:t,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:a}=e,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.resolveKeyframes=(e,t,n,i)=>new this.KeyframeResolver(e,t,n,i,this),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=An,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>m.render(this.render,!1,!0);const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget=I({},l),this.initialValues=n.initial?I({},l):{},this.renderState=c,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.blockInitialAnimation=Boolean(s),this.isControllingVariants=$(n),this.isVariantNode=ee(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const u=this.scrapeMotionValuesFromProps(n,{},this),{willChange:h}=u,d=Qe(u,ja);for(const f in d){const e=d[f];void 0!==l[f]&&me(e)&&(e.set(l[f],!1),fr(h)&&h.add(f))}}mount(e){this.current=e,za.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),Oa.current||function(){if(Oa.current=!0,a)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Ia.current=e.matches;e.addListener(t),t()}else Ia.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||Ia.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){za.delete(this.current),this.projection&&this.projection.unmount(),g(this.notifyUpdate),g(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){const n=fe.has(e),i=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&m.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),r(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in re){const t=re[e];if(!t)continue;const{isEnabled:n,Feature:i}=t;if(!this.features[e]&&i&&n(this.props)&&(this.features[e]=new i(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Ba.length;n++){const t=Ba[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const i=e["on"+t];i&&(this.propEventSubscriptions[t]=this.on(t,i))}this.prevMotionValues=function(e,t,n){const{willChange:i}=t;for(const r in t){const s=t[r],a=n[r];if(me(s))e.addValue(r,s),fr(i)&&i.add(r);else if(me(a))e.addValue(r,xr(s,{owner:e})),fr(i)&&i.remove(r);else if(a!==s)if(e.hasValue(r)){const t=e.getValue(r);!0===t.liveStyle?t.jump(s):t.hasAnimated||t.set(s)}else{const t=e.getStaticValue(r);e.addValue(r,xr(void 0!==t?t:s,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<Va;t++){const n=J[t],i=this.props[n];(K(i)||!1===i)&&(e[n]=i)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const n=this.values.get(e);t!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=xr(null===t?void 0:t,{owner:this}),this.addValue(e,n)),n}readValue(e,t){var n;let i=void 0===this.latestValues[e]&&this.current?null!==(n=this.getBaseTargetFromProps(this.props,e))&&void 0!==n?n:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var r;return void 0!==i&&null!==i&&("string"===typeof i&&(un(i)||ln(i))?i=parseFloat(i):(r=i,!Fa.find(bn(r))&&Hn.test(t)&&(i=Zn(e,t))),this.setBaseTarget(e,me(i)?i.get():i)),me(i)?i.get():i}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props;let i;if("string"===typeof n||"object"===typeof n){const r=ft(this.props,n,null===(t=this.presenceContext)||void 0===t?void 0:t.custom);r&&(i=r[e])}if(n&&void 0!==i)return i;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||me(r)?void 0!==this.initialValues[e]&&void 0===i?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new gr),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];this.events[e].notify(...n)}}}class Ha extends Ua{constructor(){super(...arguments),this.KeyframeResolver=Jn}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:i}=t;delete n[e],delete i[e]}}class Wa extends Ha{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(fe.has(t)){const e=Kn(t);return e&&e.default||0}{const i=(n=e,window.getComputedStyle(n)),r=(xe(t)?i.getPropertyValue(t):i[t])||0;return"string"===typeof r?r.trim():r}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return _s(e,n)}build(e,t,n,i){Ue(e,t,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,n){return ut(e,t,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;me(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}renderInstance(e,t,n,i){ot(e,t,n,i)}}class Ga extends Ha{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(fe.has(t)){const e=Kn(t);return e&&e.default||0}return t=lt.has(t)?t:F(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t,n){return ht(e,t,n)}build(e,t,n,i){nt(e,t,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,n,i){ct(e,t,0,i)}mount(e){this.isSVGTag=rt(e.tagName),super.mount(e)}}const qa=(e,n)=>ue(e)?new Ga(n,{enableHardwareAcceleration:!1}):new Wa(n,{allowProjection:e!==t.Fragment,enableHardwareAcceleration:!0}),Xa={layout:{ProjectionNode:Ra,MeasureLayout:Ds}},Ya=I(I(I(I({},Or),Wt),Na),Xa),Ka=le((e,t)=>function(e,t,n,i){let{forwardMotionProps:r=!1}=t;return I(I({},ue(e)?bt:_t),{},{preloadedFeatures:n,useRender:at(r),createVisualElement:i,Component:e})}(e,t,Ya,qa));const Za=(e,t)=>{try{const n=window.localStorage.getItem(e);return n?JSON.parse(n):t}catch(Mj){return console.error("Error reading from localStorage key \u201c".concat(e,"\u201d:"),Mj),t}},Qa=(e,t)=>{try{window.localStorage.setItem(e,JSON.stringify(t))}catch(Mj){console.error("Error writing to localStorage key \u201c".concat(e,"\u201d:"),Mj)}},Ja={CREATE_FIRST_NOTE:{title:"\u6700\u521d\u306e\u7b2c\u4e00\u6b69",description:"\u3044\u305a\u308c\u304b\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3067\u30ad\u30e3\u30e9\u5bfe\u7b56\u30e1\u30e2\u30921\u3064\u4f5c\u6210\u3059\u308b\u3002",type:"NOTE_COUNT_TOTAL",goal:1,reward:{type:"se",id:"se_click_kirby"}},CREATE_10_NOTES:{title:"\u30e1\u30e2\u9b54\u306e\u5146\u3057",description:"\u30ad\u30e3\u30e9\u5bfe\u7b56\u30e1\u30e2\u3092\u5408\u8a0810\u500b\u4f5c\u6210\u3059\u308b\u3002",type:"NOTE_COUNT_TOTAL",goal:10,reward:{type:"bgm",id:"bgm_calm"}},WIN_10_MATCHES:{title:"\u52dd\u5229\u306e\u5473",description:"\u5408\u8a08\u306710\u52dd\u3059\u308b\u3002",type:"WIN_COUNT_TOTAL",goal:10,reward:{type:"image",id:"img_home_01"}},REGISTER_10_CHARS:{title:"\u4ef2\u9593\u96c6\u3081",description:"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u309210\u4f53\u767b\u9332\u3059\u308b\u3002",type:"CHARACTER_COUNT",goal:10,reward:{type:"se",id:"se_click_kirby"}},CREATE_3_TIER_LISTS:{title:"\u30e9\u30f3\u30af\u4ed8\u3051\u540d\u4eba",description:"\u30c6\u30a3\u30a2\u30ea\u30b9\u30c8\u30923\u3064\u4f5c\u6210\u3059\u308b\u3002",type:"TIER_LIST_COUNT",goal:3,reward:{type:"bgm",id:"bgm_calm"}}},$a={bgm_main_dark:{id:"bgm_main_dark",type:"bgm",name:"\u30c0\u30fc\u30af\u30c6\u30fc\u30de",source:"/audio/home_bgm.mp3",unlockedByDefault:!0},bgm_main_smash:{id:"bgm_main_smash",type:"bgm",name:"\u30b9\u30de\u30c3\u30b7\u30e5\u30c6\u30fc\u30de",source:"/audio/splash_bgm.mp3",unlockedByDefault:!0},bgm_calm:{id:"bgm_calm",type:"bgm",name:"\u9759\u5bc2\u306e\u8abf\u3079",source:"/audio/calm_bgm.mp3",unlockedByDefault:!1},img_home_default:{id:"img_home_default",type:"image",name:"\u30c7\u30d5\u30a9\u30eb\u30c8\u80cc\u666f",source:"/images/menu-bg-default.jpg",unlockedByDefault:!0},img_home_01:{id:"img_home_01",type:"image",name:"\u30d5\u30a1\u30a4\u30bf\u30fc\u30ba",source:"/images/menu-bg-1.jpg",unlockedByDefault:!1},se_click_default:{id:"se_click_default",type:"se",name:"\u30c7\u30d5\u30a9\u30eb\u30c8\u30af\u30ea\u30c3\u30af",source:"/audio/click.mp3",unlockedByDefault:!0},se_click_kirby:{id:"se_click_kirby",type:"se",name:"\u30ab\u30fc\u30d3\u30a3\u98a8\u30af\u30ea\u30c3\u30af",source:"/audio/click_kirby.mp3",unlockedByDefault:!1}},eo=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let r=e.charCodeAt(i);r<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296===(64512&r)&&i+1<e.length&&56320===(64512&e.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&e.charCodeAt(++i)),t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128)}return t},to={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<e.length;r+=3){const t=e[r],s=r+1<e.length,a=s?e[r+1]:0,o=r+2<e.length,l=o?e[r+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),i.push(n[c],n[u],n[h],n[d])}return i.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(eo(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,i=0;for(;n<e.length;){const r=e[n++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=e[n++];t[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=((7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[i++]=String.fromCharCode(55296+(s>>10)),t[i++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<e.length;){const t=n[e.charAt(r++)],s=r<e.length?n[e.charAt(r)]:0;++r;const a=r<e.length?n[e.charAt(r)]:64;++r;const o=r<e.length?n[e.charAt(r)]:64;if(++r,null==t||null==s||null==a||null==o)throw new no;const l=t<<2|s>>4;if(i.push(l),64!==a){const e=s<<4&240|a>>2;if(i.push(e),64!==o){const e=a<<6&192|o;i.push(e)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class no extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const io=function(e){return function(e){const t=eo(e);return to.encodeByteArray(t,!0)}(e).replace(/\./g,"")},ro=function(e){try{return to.decodeString(e,!0)}catch(Kg){console.error("base64Decode failed: ",Kg)}return null};function so(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const ao=()=>{try{return so().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Kg){return}const t=e&&ro(e[1]);return t&&JSON.parse(t)})()}catch(Kg){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(Kg))}},oo=e=>{const t=(e=>{var t,n;return null===(n=null===(t=ao())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]})(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const i=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),i]:[t.substring(0,n),i]},lo=()=>{var e;return null===(e=ao())||void 0===e?void 0:e.config};class co{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function uo(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(dj){return!1}}const ho={};let fo=!1;function po(e,t){if("undefined"===typeof window||"undefined"===typeof document||!uo(window.location.host)||ho[e]===t||ho[e]||fo)return;function n(e){return"__firebase__banner__".concat(e)}ho[e]=t;const i="__firebase__banner",r=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(ho))ho[t]?e.emulator.push(t):e.prod.push(t);return e}(),s=r.prod.length>0;function a(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{fo=!0,function(){const e=document.getElementById(i);e&&e.remove()}()},e}function o(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(i),t=n("text"),r=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=a();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,r,l,n),document.body.appendChild(t)}s?(r.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',r.innerText="Preview backend running in this workspace."),r.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",o):o()}function mo(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function go(){var e;const t=null===(e=ao())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(Kg){return!1}}function vo(){return!go()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yo(){try{return"object"===typeof indexedDB}catch(Kg){return!1}}class xo extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,xo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,bo.prototype.create)}}class bo{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),i=this.errors[e],r=i?function(e,t){return e.replace(_o,(e,n)=>{const i=t[n];return null!=i?String(i):"<".concat(n,"?>")})}(i,t):"Error",s="".concat(this.serviceName,": ").concat(r," (").concat(n,").");return new xo(n,s,t)}}const _o=/\{\$([^}]+)}/g;function wo(e,t){if(e===t)return!0;const n=Object.keys(e),i=Object.keys(t);for(const r of n){if(!i.includes(r))return!1;const n=e[r],s=t[r];if(So(n)&&So(s)){if(!wo(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function So(e){return null!==e&&"object"===typeof e}function Mo(e){return e&&e._delegate?e._delegate:e}class Co{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Eo="[DEFAULT]";class To{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new co;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Kg){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),i=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Kg){if(i)return null;throw Kg}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Eo})}catch(Kg){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Kg){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eo;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eo;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eo;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[r,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(r)&&s.resolve(i)}return i}onInit(e,t){var n;const i=this.normalizeInstanceIdentifier(t),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(e),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&e(s,i),()=>{r.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(dj){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:(r=t,r===Eo?void 0:r),options:n}),this.instances.set(t,i),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch(dj){}var r;return i||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Eo;return this.component?this.component.multipleInstances?e:Eo:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ao{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new To(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ko=[];var Po;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Po||(Po={}));const Lo={debug:Po.DEBUG,verbose:Po.VERBOSE,info:Po.INFO,warn:Po.WARN,error:Po.ERROR,silent:Po.SILENT},Do=Po.INFO,Ro={[Po.DEBUG]:"log",[Po.VERBOSE]:"log",[Po.INFO]:"info",[Po.WARN]:"warn",[Po.ERROR]:"error"},No=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),i=Ro[t];if(!i)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var r=arguments.length,s=new Array(r>2?r-2:0),a=2;a<r;a++)s[a-2]=arguments[a];console[i]("[".concat(n,"]  ").concat(e.name,":"),...s)};class Io{constructor(e){this.name=e,this._logLevel=Do,this._logHandler=No,this._userLogHandler=null,ko.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Po))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Lo[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Po.DEBUG,...t),this._logHandler(this,Po.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Po.VERBOSE,...t),this._logHandler(this,Po.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Po.INFO,...t),this._logHandler(this,Po.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Po.WARN,...t),this._logHandler(this,Po.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,Po.ERROR,...t),this._logHandler(this,Po.ERROR,...t)}}let Oo,zo;const Fo=new WeakMap,jo=new WeakMap,Bo=new WeakMap,Vo=new WeakMap,Uo=new WeakMap;let Ho={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return jo.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Bo.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return qo(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Wo(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(zo||(zo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return e.apply(Xo(this),n),qo(Fo.get(this))}:function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return qo(e.apply(Xo(this),n))}:function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];const s=e.call(Xo(this),t,...i);return Bo.set(s,t.sort?t.sort():[t]),qo(s)}}function Go(e){return"function"===typeof e?Wo(e):(e instanceof IDBTransaction&&function(e){if(jo.has(e))return;const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("complete",r),e.removeEventListener("error",s),e.removeEventListener("abort",s)},r=()=>{t(),i()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",r),e.addEventListener("error",s),e.addEventListener("abort",s)});jo.set(e,t)}(e),t=e,(Oo||(Oo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Ho):e);var t}function qo(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const i=()=>{e.removeEventListener("success",r),e.removeEventListener("error",s)},r=()=>{t(qo(e.result)),i()},s=()=>{n(e.error),i()};e.addEventListener("success",r),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&Fo.set(t,e)}).catch(()=>{}),Uo.set(t,e),t}(e);if(Vo.has(e))return Vo.get(e);const t=Go(e);return t!==e&&(Vo.set(e,t),Uo.set(t,e)),t}const Xo=e=>Uo.get(e);const Yo=["get","getKey","getAll","getAllKeys","count"],Ko=["put","add","delete","clear"],Zo=new Map;function Qo(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(Zo.get(t))return Zo.get(t);const n=t.replace(/FromIndex$/,""),i=t!==n,r=Ko.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!Yo.includes(n))return;const s=async function(e){const t=this.transaction(e,r?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return i&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),r&&t.done]))[0]};return Zo.set(t,s),s}!function(e){Ho=e(Ho)}(e=>I(I({},e),{},{get:(t,n,i)=>Qo(t,n)||e.get(t,n,i),has:(t,n)=>!!Qo(t,n)||e.has(t,n)}));class Jo{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const $o="@firebase/app",el="0.13.2",tl=new Io("@firebase/app"),nl="@firebase/app-compat",il="@firebase/analytics-compat",rl="@firebase/analytics",sl="@firebase/app-check-compat",al="@firebase/app-check",ol="@firebase/auth",ll="@firebase/auth-compat",cl="@firebase/database",ul="@firebase/data-connect",hl="@firebase/database-compat",dl="@firebase/functions",fl="@firebase/functions-compat",pl="@firebase/installations",ml="@firebase/installations-compat",gl="@firebase/messaging",vl="@firebase/messaging-compat",yl="@firebase/performance",xl="@firebase/performance-compat",bl="@firebase/remote-config",_l="@firebase/remote-config-compat",wl="@firebase/storage",Sl="@firebase/storage-compat",Ml="@firebase/firestore",Cl="@firebase/ai",El="@firebase/firestore-compat",Tl="firebase",Al="[DEFAULT]",kl={[$o]:"fire-core",[nl]:"fire-core-compat",[rl]:"fire-analytics",[il]:"fire-analytics-compat",[al]:"fire-app-check",[sl]:"fire-app-check-compat",[ol]:"fire-auth",[ll]:"fire-auth-compat",[cl]:"fire-rtdb",[ul]:"fire-data-connect",[hl]:"fire-rtdb-compat",[dl]:"fire-fn",[fl]:"fire-fn-compat",[pl]:"fire-iid",[ml]:"fire-iid-compat",[gl]:"fire-fcm",[vl]:"fire-fcm-compat",[yl]:"fire-perf",[xl]:"fire-perf-compat",[bl]:"fire-rc",[_l]:"fire-rc-compat",[wl]:"fire-gcs",[Sl]:"fire-gcs-compat",[Ml]:"fire-fst",[El]:"fire-fst-compat",[Cl]:"fire-vertex","fire-js":"fire-js",[Tl]:"fire-js-all"},Pl=new Map,Ll=new Map,Dl=new Map;function Rl(e,t){try{e.container.addComponent(t)}catch(Kg){tl.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),Kg)}}function Nl(e){const t=e.name;if(Dl.has(t))return tl.debug("There were multiple attempts to register component ".concat(t,".")),!1;Dl.set(t,e);for(const n of Pl.values())Rl(n,e);for(const n of Ll.values())Rl(n,e);return!0}function Il(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const Ol=new bo("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class zl{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Co("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ol.create("app-deleted",{appName:this._name})}}function Fl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:Al,automaticDataCollectionEnabled:!0},t),r=i.name;if("string"!==typeof r||!r)throw Ol.create("bad-app-name",{appName:String(r)});if(n||(n=lo()),!n)throw Ol.create("no-options");const s=Pl.get(r);if(s){if(wo(n,s.options)&&wo(i,s.config))return s;throw Ol.create("duplicate-app",{appName:r})}const a=new Ao(r);for(const l of Dl.values())a.addComponent(l);const o=new zl(n,i,a);return Pl.set(r,o),o}function jl(e,t,n){var i;let r=null!==(i=kl[e])&&void 0!==i?i:e;n&&(r+="-".concat(n));const s=r.match(/\s|\//),a=t.match(/\s|\//);if(s||a){const e=['Unable to register library "'.concat(r,'" with version "').concat(t,'":')];return s&&e.push('library name "'.concat(r,'" contains illegal characters (whitespace or "/")')),s&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void tl.warn(e.join(" "))}Nl(new Co("".concat(r,"-version"),()=>({library:r,version:t}),"VERSION"))}const Bl="firebase-heartbeat-store";let Vl=null;function Ul(){return Vl||(Vl=function(e,t){let{blocked:n,upgrade:i,blocking:r,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=qo(a);return i&&a.addEventListener("upgradeneeded",e=>{i(qo(a.result),e.oldVersion,e.newVersion,qo(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),r&&e.addEventListener("versionchange",e=>r(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Bl)}catch(Kg){console.warn(Kg)}}}).catch(e=>{throw Ol.create("idb-open",{originalErrorMessage:e.message})})),Vl}async function Hl(e,t){try{const n=(await Ul()).transaction(Bl,"readwrite"),i=n.objectStore(Bl);await i.put(t,Wl(e)),await n.done}catch(Kg){if(Kg instanceof xo)tl.warn(Kg.message);else{const t=Ol.create("idb-set",{originalErrorMessage:null===Kg||void 0===Kg?void 0:Kg.message});tl.warn(t.message)}}}function Wl(e){return"".concat(e.name,"!").concat(e.options.appId)}class Gl{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Xl(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=ql();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(e=>e.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let i=1;i<e.length;i++)e[i].date<n&&(n=e[i].date,t=i);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(Kg){tl.warn(Kg)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ql(),{heartbeatsToSend:n,unsentEntries:i}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let i=e.slice();for(const r of e){const e=n.find(e=>e.agent===r.agent);if(e){if(e.dates.push(r.date),Yl(n)>t){e.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Yl(n)>t){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}(this._heartbeatsCache.heartbeats),r=io(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(Kg){return tl.warn(Kg),""}}}function ql(){return(new Date).toISOString().substring(0,10)}class Xl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!yo()&&new Promise((e,t)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),e(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var e;t((null===(e=r.error)||void 0===e?void 0:e.message)||"")}}catch(Mj){t(Mj)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Ul()).transaction(Bl),n=await t.objectStore(Bl).get(Wl(e));return await t.done,n}catch(Kg){if(Kg instanceof xo)tl.warn(Kg.message);else{const t=Ol.create("idb-get",{originalErrorMessage:null===Kg||void 0===Kg?void 0:Kg.message});tl.warn(t.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Hl(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Hl(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Yl(e){return io(JSON.stringify({version:2,heartbeats:e})).length}var Kl;Kl="",Nl(new Co("platform-logger",e=>new Jo(e),"PRIVATE")),Nl(new Co("heartbeat",e=>new Gl(e),"PRIVATE")),jl($o,el,Kl),jl($o,el,"esm2017"),jl("fire-js","");jl("firebase","11.10.0","app");var Zl,Ql="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Jl={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var i=Array(16);if("string"===typeof t)for(var r=0;16>r;++r)i[r]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],r=e.g[2];var s=e.g[3],a=t+(s^n&(r^s))+i[0]+3614090360&4294967295;a=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=(n=(r=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(r^t&(n^r))+i[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(t^n))+i[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(s^t))+i[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(r^s))+i[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^t&(n^r))+i[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(t^n))+i[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(s^t))+i[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(r^s))+i[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^t&(n^r))+i[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(t^n))+i[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(s^t))+i[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(r^s))+i[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(r^t&(n^r))+i[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=r+(n^s&(t^n))+i[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^r&(s^t))+i[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(r^s&(n^r))+i[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(t^n))+i[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(s^t))+i[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(r^s))+i[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^s&(n^r))+i[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(t^n))+i[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(s^t))+i[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(r^s))+i[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^s&(n^r))+i[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(t^n))+i[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(s^t))+i[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(r^s))+i[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(r^s&(n^r))+i[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^r&(t^n))+i[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=r+(t^n&(s^t))+i[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(r^s))+i[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^r^s)+i[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^r)+i[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^n)+i[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^t)+i[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^s)+i[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^r)+i[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^n)+i[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^t)+i[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^s)+i[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^r)+i[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^n)+i[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^t)+i[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^r^s)+i[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^r)+i[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=r+(s^t^n)+i[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(r^s^t)+i[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(r^(n|~s))+i[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~r))+i[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(s|~n))+i[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(r|~t))+i[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(n|~s))+i[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~r))+i[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(s|~n))+i[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(r|~t))+i[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(r^(n|~s))+i[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~r))+i[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=r+(t^(s|~n))+i[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(r|~t))+i[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(r^(n|~s))+i[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~r))+i[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((r=s+((a=r+(t^(s|~n))+i[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+i[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(r+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+r&4294967295,e.g[3]=e.g[3]+s&4294967295}function i(e,t){this.h=t;for(var n=[],i=!0,r=e.length-1;0<=r;r--){var s=0|e[r];i&&s==t||(n[r]=s,i=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var i=t-this.blockSize,r=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=i;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(r[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,r),s=0;break}}else for(;a<t;)if(r[s++]=e[a++],s==this.blockSize){n(this,r),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var i=0;32>i;i+=8)e[n++]=this.g[t]>>>i&255;return e};var r={};function s(e){return-128<=e&&128>e?function(e,t){var n=r;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new i([0|e],0>e?-1:0)}):new i([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return d(a(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new i(t,0)}var o=s(0),l=s(1),c=s(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function h(e){return-1==e.h}function d(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new i(n,~e.h).add(l)}function f(e,t){return e.add(d(t))}function p(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function m(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new m(o,o);if(h(e))return t=g(d(e),t),new m(d(t.g),d(t.h));if(h(t))return t=g(e,d(t)),new m(d(t.g),t.h);if(30<e.g.length){if(h(e)||h(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,i=t;0>=i.l(e);)n=v(n),i=v(i);var r=y(n,1),s=y(i,1);for(i=y(i,2),n=y(n,2);!u(i);){var c=s.add(i);0>=c.l(e)&&(r=r.add(n),s=c),i=y(i,1),n=y(n,1)}return t=f(e,r.j(t)),new m(r,t)}for(r=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),i=48>=(i=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,i-48),c=(s=a(n)).j(t);h(c)||0<c.l(e);)c=(s=a(n-=i)).j(t);u(s)&&(s=l),r=r.add(s),e=f(e,c)}return new m(r,e)}function v(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new i(n,e.h)}function y(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],a=0;a<r;a++)s[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new i(s,e.h)}(e=i.prototype).m=function(){if(h(this))return-d(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var i=this.i(n);e+=(0<=i?i:4294967296+i)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(h(this))return"-"+d(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,i="";;){var r=g(n,t).g,s=((0<(n=f(n,r.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=r))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return h(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return h(this)?d(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var a=r+(65535&this.i(s))+(65535&e.i(s)),o=(a>>>16)+(this.i(s)>>>16)+(e.i(s)>>>16);r=o>>>16,a&=65535,o&=65535,n[s]=o<<16|a}return new i(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(h(this))return h(e)?d(this).j(d(e)):d(d(this).j(e));if(h(e))return d(this.j(d(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var l=this.i(r)>>>16,f=65535&this.i(r),m=e.i(s)>>>16,g=65535&e.i(s);n[2*r+2*s]+=f*g,p(n,2*r+2*s),n[2*r+2*s+1]+=l*g,p(n,2*r+2*s+1),n[2*r+2*s+1]+=f*m,p(n,2*r+2*s+1),n[2*r+2*s+2]+=l*m,p(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new i(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new i(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new i(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new i(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,Jl.Md5=t,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.A,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=a,i.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return d(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var i=a(Math.pow(n,8)),r=o,s=0;s<t.length;s+=8){var l=Math.min(8,t.length-s),c=parseInt(t.substring(s,s+l),n);8>l?(l=a(Math.pow(n,l)),r=r.j(l).add(a(c))):r=(r=r.j(i)).add(a(c))}return r},Zl=Jl.Integer=i}).apply("undefined"!==typeof Ql?Ql:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var $l,ec,tc,nc,ic,rc,sc,ac,oc="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},lc={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof oc&&oc];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,i){if(i)e:{var r=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in r))break e;r=r[a]}(i=i(s=r[e=e[e.length-1]]))!=s&&null!=i&&t(r,e,{configurable:!0,writable:!0,value:i})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,i=!1,r={next:function(){if(!i&&n<e.length){var r=n++;return{value:t(r,e[r]),done:!1}}return i=!0,{done:!0,value:void 0}}};return r[Symbol.iterator]=function(){return r},r}(this,function(e,t){return t})}});var i=i||{},r=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function h(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return t.prototype[n].apply(e,r)}}function d(e){const t=e.length;if(0<t){const n=Array(t);for(let i=0;i<t;i++)n[i]=e[i];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,i=t.length||0;e.length=n+i;for(let r=0;r<i;r++)e[n+r]=t[r]}else e.push(t)}}function p(e){return/^[\s\xa0]*$/.test(e)}function m(){var e=r.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var v=-1!=m().indexOf("Gecko")&&!(-1!=m().toLowerCase().indexOf("webkit")&&-1==m().indexOf("Edge"))&&!(-1!=m().indexOf("Trident")||-1!=m().indexOf("MSIE"))&&-1==m().indexOf("Edge");function y(e,t,n){for(const i in e)t.call(n,e[i],i,e)}function x(e){const t={};for(const n in e)t[n]=e[n];return t}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(e,t){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)e[n]=i[n];for(let t=0;t<b.length;t++)n=b[t],Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}}function w(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){r.setTimeout(()=>{throw e},0)}function M(){var e=k;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var C=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new E,e=>e.reset());class E{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,A=!1,k=new class{constructor(){this.h=this.g=null}add(e,t){const n=C.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},P=()=>{const e=r.Promise.resolve(void 0);T=()=>{e.then(L)}};var L=()=>{for(var e;e=M();){try{e.h.call(e.g)}catch(n){S(n)}var t=C;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}A=!1};function D(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}D.prototype.s=!1,D.prototype.ma=function(){this.s||(this.s=!0,this.N())},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!r.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};r.addEventListener("test",e,t),r.removeEventListener("test",e,t)}catch(n){}return e}();function I(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,i=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(v){e:{try{g(t.nodeName);var r=!0;break e}catch(s){}r=!1}r||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:O[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&I.aa.h.call(this)}}h(I,R);var O={2:"touch",3:"pen",4:"mouse"};I.prototype.h=function(){I.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var z="closure_listenable_"+(1e6*Math.random()|0),F=0;function j(e,t,n,i,r){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!i,this.ha=r,this.key=++F,this.da=this.fa=!1}function B(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e){this.src=e,this.g={},this.h=0}function U(e,t){var n=t.type;if(n in e.g){var i,r=e.g[n],s=Array.prototype.indexOf.call(r,t,void 0);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(B(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function H(e,t,n,i){for(var r=0;r<e.length;++r){var s=e[r];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==i)return r}return-1}V.prototype.add=function(e,t,n,i,r){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=H(e,t,i,r);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new j(t,this.src,s,!!i,r)).fa=n,e.push(t)),t};var W="closure_lm_"+(1e6*Math.random()|0),G={};function q(e,t,n,i,r){if(i&&i.once)return Y(e,t,n,i,r);if(Array.isArray(t)){for(var s=0;s<t.length;s++)q(e,t[s],n,i,r);return null}return n=te(n),e&&e[z]?e.K(t,n,a(i)?!!i.capture:!!i,r):X(e,t,n,!1,i,r)}function X(e,t,n,i,r,s){if(!t)throw Error("Invalid event type");var o=a(r)?!!r.capture:!!r,l=$(e);if(l||(e[W]=l=new V(e)),(n=l.add(t,n,i,o,s)).proxy)return n;if(i=function(){function e(n){return t.call(e.src,e.listener,n)}const t=J;return e}(),n.proxy=i,i.src=e,i.listener=n,e.addEventListener)N||(r=o),void 0===r&&(r=!1),e.addEventListener(t.toString(),i,r);else if(e.attachEvent)e.attachEvent(Q(t.toString()),i);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(i)}return n}function Y(e,t,n,i,r){if(Array.isArray(t)){for(var s=0;s<t.length;s++)Y(e,t[s],n,i,r);return null}return n=te(n),e&&e[z]?e.L(t,n,a(i)?!!i.capture:!!i,r):X(e,t,n,!0,i,r)}function K(e,t,n,i,r){if(Array.isArray(t))for(var s=0;s<t.length;s++)K(e,t[s],n,i,r);else i=a(i)?!!i.capture:!!i,n=te(n),e&&e[z]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=H(s=e.g[t],n,i,r))&&(B(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=$(e))&&(t=e.g[t.toString()],e=-1,t&&(e=H(t,n,i,r)),(n=-1<e?t[e]:null)&&Z(n))}function Z(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[z])U(t.i,e);else{var n=e.type,i=e.proxy;t.removeEventListener?t.removeEventListener(n,i,e.capture):t.detachEvent?t.detachEvent(Q(n),i):t.addListener&&t.removeListener&&t.removeListener(i),(n=$(t))?(U(n,e),0==n.h&&(n.src=null,t[W]=null)):B(e)}}}function Q(e){return e in G?G[e]:G[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new I(t,this);var n=e.listener,i=e.ha||e.src;e.fa&&Z(e),e=n.call(i,t)}return e}function $(e){return(e=e[W])instanceof V?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){D.call(this),this.i=new V(this),this.M=this,this.F=null}function ie(e,t){var n,i=e.F;if(i)for(n=[];i;i=i.F)n.push(i);if(e=e.M,i=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var r=t;_(t=new R(i,e),r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];r=re(a,i,!0,t)&&r}if(r=re(a=t.g=e,i,!0,t)&&r,r=re(a,i,!1,t)&&r,n)for(s=0;s<n.length;s++)r=re(a=t.g=n[s],i,!1,t)&&r}function re(e,t,n,i){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var r=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&U(e.i,a),r=!1!==o.call(l,i)&&r}}return r&&!i.defaultPrevented}function se(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:r.setTimeout(e,t||0)}function ae(e){e.g=se(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}h(ne,D),ne.prototype[z]=!0,ne.prototype.removeEventListener=function(e,t,n,i){K(this,e,t,n,i)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],i=0;i<n.length;i++)B(n[i]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,i){return this.i.add(String(e),t,!1,n,i)},ne.prototype.L=function(e,t,n,i){return this.i.add(String(e),t,!0,n,i)};class oe extends D{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(r.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){D.call(this),this.h=e,this.g={}}h(le,D);var ce=[];function ue(e){y(e.g,function(e,t){this.g.hasOwnProperty(t)&&Z(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var he=r.JSON.stringify,de=r.JSON.parse,fe=class{stringify(e){return r.JSON.stringify(e,void 0)}parse(e){return r.JSON.parse(e,void 0)}};function pe(){}function me(e){return e.h||(e.h=e.i())}function ge(){}pe.prototype.h=null;var ve={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ye(){R.call(this,"d")}function xe(){R.call(this,"c")}h(ye,R),h(xe,R);var be={},_e=null;function we(){return _e=_e||new ne}function Se(e){R.call(this,be.La,e)}function Me(e){const t=we();ie(t,new Se(t))}function Ce(e,t){R.call(this,be.STAT_EVENT,e),this.stat=t}function Ee(e){const t=we();ie(t,new Ce(t,e))}function Te(e,t){R.call(this,be.Ma,e),this.size=t}function Ae(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return r.setTimeout(function(){e()},t)}function ke(){this.g=!0}function Pe(e,t,n,i){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var i=n[e];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<r.length;a++)r[a]=""}}}return he(n)}catch(o){return t}}(e,n)+(i?" "+i:"")})}be.La="serverreachability",h(Se,R),be.STAT_EVENT="statevent",h(Ce,R),be.Ma="timingevent",h(Te,R),ke.prototype.xa=function(){this.g=!1},ke.prototype.info=function(){};var Le,De={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ne(){}function Ie(e,t,n,i){this.j=e,this.i=t,this.l=n,this.R=i||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Oe}function Oe(){this.i=null,this.g="",this.h=!1}h(Ne,pe),Ne.prototype.g=function(){return new XMLHttpRequest},Ne.prototype.i=function(){return{}},Le=new Ne;var ze={},Fe={};function je(e,t,n){e.L=1,e.v=ht(at(t)),e.m=n,e.P=!0,Be(e,null)}function Be(e,t){e.F=Date.now(),He(e),e.A=at(e.v);var n=e.A,i=e.R;Array.isArray(i)||(i=[String(i)]),Ct(n.i,"t",i),e.C=0,n=e.j.J,e.h=new Oe,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,i=e.ca;var r="readystatechange";Array.isArray(r)||(r&&(ce[0]=r.toString()),r=ce);for(var s=0;s<r.length;s++){var a=q(n,r[s],i||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?x(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Me(),function(e,t,n,i,r,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Ve(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function Ue(e,t){var n=e.C,i=t.indexOf("\n",n);return-1==i?Fe:(n=Number(t.substring(n,i)),isNaN(n)?ze:(i+=1)+n>t.length?Fe:(t=t.slice(i,i+n),e.C=i+n,t))}function He(e){e.S=Date.now()+e.I,We(e,e.I)}function We(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ae(c(e.ba,e),t)}function Ge(e){e.B&&(r.clearTimeout(e.B),e.B=null)}function qe(e){0==e.j.G||e.J||ln(e.j,e)}function Xe(e){Ge(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Ye(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||$e(n.h,e)))if(!e.K&&$e(n.h,e)&&3==n.G){try{var i=n.Da.g.parse(t)}catch(u){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Zt(n)}rn(n),Ee(18)}}else n.za=r[1],0<n.za-n.T&&37500>r[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ae(c(n.Za,n),6e3));if(1>=Je(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!p(t))for(r=n.Da.g.parse(t),t=0;t<r.length;t++){let c=r[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const r=c[4];null!=r&&(n.Aa=r,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.j.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=i.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(et(s,s.h),s.h=null))}if(i.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(i.ya=e,ut(i.I,i.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((i=n).qa=dn(i,i.J?i.ia:null,i.W),a.K){tt(i.h,a);var o=a,l=i.L;l&&(o.I=l),o.B&&(Ge(o),He(o)),i.g=a}else nn(i);0<n.i.length&&Jt(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Kt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Me()}catch(u){}}Ie.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Gt(e)?t.j():this.Y(e)},Ie.prototype.Y=function(e){try{if(e==this.g)e:{const d=Gt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||qt(this.g)))){this.J||4!=d||7==t||Me(),Ge(this);var n=this.g.Z();this.X=n;t:if(Ve(this)){var i=qt(this.g);e="";var s=i.length,a=4==Gt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Xe(this),qe(this);var o="";break t}this.h.i=new r.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(i[t],{stream:!(a&&t==s-1)});i.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,i,r,s,a){e.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!p(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Ee(12),Xe(this),qe(this);break e}Pe(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ye(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=Ue(this,o),e==Fe){4==d&&(this.s=4,Ee(14),n=!1),Pe(this.i,this.l,null,"[Incomplete Response]");break}if(e==ze){this.s=4,Ee(15),Pe(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Pe(this.i,this.l,e,null),Ye(this,e)}if(Ve(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Ee(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(h),h.M=!0,Ee(11))}}else Pe(this.i,this.l,o,"[Invalid Chunked Response]"),Xe(this),qe(this)}else Pe(this.i,this.l,o,null),Ye(this,o);4==d&&Xe(this),this.o&&!this.J&&(4==d?ln(this.j,this):(this.o=!1,He(this)))}else(function(e){const t={};e=(e.g&&2<=Gt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<e.length;i++){if(p(e[i]))continue;var n=w(e[i]);const r=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[r]||[];t[r]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Ee(12)):(this.s=0,Ee(13)),Xe(this),qe(this)}}}catch(d){}},Ie.prototype.cancel=function(){this.J=!0,Xe(this)},Ie.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Me(),Ee(17)),Xe(this),this.s=2,qe(this)):We(this,this.S-e)};var Ke=class{constructor(e,t){this.g=e,this.map=t}};function Ze(e){this.l=e||10,r.PerformanceNavigationTiming?e=0<(e=r.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(r.chrome&&r.chrome.loadTimes&&r.chrome.loadTimes()&&r.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Qe(e){return!!e.h||!!e.g&&e.g.size>=e.j}function Je(e){return e.h?1:e.g?e.g.size:0}function $e(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return d(e.i)}function it(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const i in e)t[n++]=i;return t}}}(e),i=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,i=0;i<n;i++)t.push(e[i]);return t}for(i in t=[],n=0,e)t[n++]=e[i];return t}(e),r=i.length,a=0;a<r;a++)t.call(void 0,i[a],n&&n[a],e)}Ze.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var rt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function st(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof st){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new _t;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(rt))?(this.h=!1,ot(this,t[1]||"",!0),this.o=dt(t[2]||""),this.g=dt(t[3]||"",!0),lt(this,t[4]),this.l=dt(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=dt(t[7]||"")):(this.h=!1,this.i=new _t(null,this.h))}function at(e){return new st(e)}function ot(e,t,n){e.j=n?dt(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof _t?(e.i=t,function(e,t){t&&!e.j&&(wt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),Ct(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,xt)),e.i=new _t(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function ht(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function dt(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,pt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function pt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}st.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?yt:vt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,bt)),e.join("")};var mt,gt=/[#\/\?@]/g,vt=/[#\?:]/g,yt=/[#\?]/g,xt=/[#\?@]/g,bt=/#/g;function _t(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var i=e[n].indexOf("="),r=null;if(0<=i){var s=e[n].substring(0,i);r=e[n].substring(i+1)}else s=e[n];t(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function St(e,t){wt(e),t=Et(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Mt(e,t){return wt(e),t=Et(e,t),e.g.has(t)}function Ct(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(Et(e,t),d(n)),e.h+=n.length)}function Et(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,i,r){try{r&&(r.onload=null,r.onerror=null,r.onabort=null,r.ontimeout=null),i(n)}catch(s){}}function At(){this.g=new fe}function kt(e,t,n){const i=n||"";try{it(e,function(e,n){let r=e;a(e)&&(r=he(e)),t.push(i+n+"="+encodeURIComponent(r))})}catch(Kg){throw t.push(i+"type="+encodeURIComponent("_badmap")),Kg}}function Pt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Lt(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Dt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Nt(e)}function Nt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function It(e){let t="";return y(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Ot(e,t,n){e:{for(i in n){var i=!1;break e}i=!0}i||(n=It(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function zt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=_t.prototype).add=function(e,t){wt(this),this.i=null,e=Et(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){wt(this),this.g.forEach(function(n,i){n.forEach(function(n){e.call(t,n,i,this)},this)},this)},e.na=function(){wt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let i=0;i<t.length;i++){const r=e[i];for(let e=0;e<r.length;e++)n.push(t[i])}return n},e.V=function(e){wt(this);let t=[];if("string"===typeof e)Mt(this,e)&&(t=t.concat(this.g.get(Et(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return wt(this),this.i=null,Mt(this,e=Et(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var i=t[n];const s=encodeURIComponent(String(i)),a=this.V(i);for(i=0;i<a.length;i++){var r=s;""!==a[i]&&(r+="="+encodeURIComponent(String(a[i]))),e.push(r)}}return this.i=e.join("&")},h(Pt,pe),Pt.prototype.g=function(){return new Lt(this.l,this.j)},Pt.prototype.i=(mt={},function(){return mt}),h(Lt,ne),(e=Lt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Nt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||r).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Nt(this)),this.g&&(this.readyState=3,Nt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof r.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Nt(this),3==this.readyState&&Dt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Lt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),h(zt,ne);var Ft=/^https?$/i,jt=["POST","PUT"];function Bt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Vt(e),Ht(e)}function Vt(e){e.A||(e.A=!0,ie(e,"complete"),ie(e,"error"))}function Ut(e){if(e.h&&"undefined"!=typeof i&&(!e.v[1]||4!=Gt(e)||2!=e.Z()))if(e.u&&4==Gt(e))se(e.Ea,0,e);else if(ie(e,"readystatechange"),4==Gt(e)){e.h=!1;try{const i=e.Z();e:switch(i){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===i){var a=String(e.D).match(rt)[1]||null;!a&&r.self&&r.self.location&&(a=r.self.location.protocol.slice(0,-1)),s=!Ft.test(a?a.toLowerCase():"")}n=s}if(n)ie(e,"complete"),ie(e,"success");else{e.m=6;try{var o=2<Gt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Vt(e)}}finally{Ht(e)}}}function Ht(e,t){if(e.g){Wt(e);const n=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||ie(e,"ready");try{n.onreadystatechange=i}catch(Kg){}}}function Wt(e){e.I&&(r.clearTimeout(e.I),e.I=null)}function Gt(e){return e.g?e.g.readyState:0}function qt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Xt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Yt(e){this.Aa=0,this.i=[],this.j=new ke,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xt("baseRetryDelayMs",5e3,e),this.cb=Xt("retryDelaySeedMs",1e4,e),this.Wa=Xt("forwardChannelMaxRetries",2,e),this.wa=Xt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Ze(e&&e.concurrentRequestLimit),this.Da=new At,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Kt(e){if(Qt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Ie(e,e.j,t)).L=2,t.v=ht(at(n)),n=!1,r.navigator&&r.navigator.sendBeacon)try{n=r.navigator.sendBeacon(t.v.toString(),"")}catch(i){}!n&&r.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),He(t)}hn(e)}function Zt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Qt(e){Zt(e),e.u&&(r.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&r.clearTimeout(e.s),e.s=null)}function Jt(e){if(!Qe(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||P(),A||(T(),A=!0),k.add(t,e),e.B=0}}function $t(e,t){var n;n=t?t.l:e.U++;const i=at(e.I);ut(i,"SID",e.K),ut(i,"RID",n),ut(i,"AID",e.T),en(e,i),e.m&&e.o&&Ot(i,e.m,e.o),n=new Ie(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),je(n,i,t)}function en(e,t){e.H&&y(e.H,function(e,n){ut(t,n,e)}),e.l&&it({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var i=e.l?c(e.l.Na,e.l,e):null;e:{var r=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=r[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=r[o].g;const l=r[o].map;if(n-=t,0>n)t=Math.max(0,r[o].g-100),a=!1;else try{kt(l,e,"req"+n+"_")}catch(s){i&&i(l)}}if(a){i=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,i}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||P(),A||(T(),A=!0),k.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ae(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(r.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Ie(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Ot(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=ht(at(t)),n.m=null,n.P=!0,Be(n,e)}function on(e){null!=e.C&&(r.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var i=2}else{if(!$e(e.h,t))return;n=t.D,tt(e.h,t),i=1}if(0!=e.G)if(t.o)if(1==i){n=t.m?t.m.length:0,t=Date.now()-t.F;var r=e.B;ie(i=we(),new Te(i,n)),Jt(e)}else nn(e);else if(3==(r=t.s)||0==r&&0<t.X||!(1==i&&function(e,t){return!(Je(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ae(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==i&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),r){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),i=e.Xa;const t=!i;i=new st(i||"//www.google.com/images/cleardot.gif"),r.location&&"http"==r.location.protocol||ot(i,"https"),ht(i),t?function(e,t){const n=new ke;if(r.Image){const i=new Image;i.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,i),i.onerror=u(Tt,n,"TestLoadImage: error",!1,t,i),i.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,i),i.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,i),r.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=e}else t(!1)}(i.toString(),n):function(e,t){new ke;const n=new AbortController,i=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(i),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(i),Tt(0,0,!1,t)})}(i.toString(),n)}else Ee(2);e.G=0,e.l&&e.l.sa(t),hn(e),Qt(e)}function hn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,d(e.i),e.i.length=0),e.l.ra()}}function dn(e,t,n){var i=n instanceof st?at(n):new st(n);if(""!=i.g)t&&(i.g=t+"."+i.g),lt(i,i.s);else{var s=r.location;i=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new st(null);i&&ot(a,i),t&&(a.g=t),s&&lt(a,s),n&&(a.l=n),i=a}return n=e.D,t=e.ya,n&&t&&ut(i,n,t),ut(i,"VER",e.la),en(e,i),i}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new zt(new Pt({eb:n})):new zt(e.pa)).Ha(e.J),t}function pn(){}function mn(){}function gn(e,t){ne.call(this),this.g=new Yt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!p(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!p(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new xn(this)}function vn(e){ye.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function yn(){xe.call(this),this.status=1}function xn(e){this.g=e}(e=zt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Le.g(),this.v=this.o?me(this.o):me(Le),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Bt(this,a)}if(e=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)n.set(s,i[s]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const e of i.keys())n.set(e,i.get(e))}i=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=r.FormData&&e instanceof r.FormData,!(0<=Array.prototype.indexOf.call(jt,t,void 0))||i||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,o]of n)this.g.setRequestHeader(r,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wt(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Bt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,ie(this,"complete"),ie(this,"abort"),Ht(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ht(this,!0)),zt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Ut(this):this.bb())},e.bb=function(){Ut(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch(mt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(mt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),de(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Yt.prototype).la=8,e.G=1,e.connect=function(e,t,n,i){Ee(0),this.W=e,this.H=t||{},n&&void 0!==i&&(this.H.OSID=n,this.H.OAID=i),this.F=this.X,this.I=dn(this,null,this.W),Jt(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const r=new Ie(this,this.j,e);let s=this.o;if(this.S&&(s?(s=x(s),_(s,this.S)):s=this.S),null!==this.m||this.O||(r.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var i=this.i[n];if(void 0===(i="__data__"in i.map&&"string"===typeof(i=i.map.__data__)?i.length:void 0))break;if(4096<(t+=i)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,r,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(It(s)))+"&"+t:this.m&&Ot(n,this.m,s)),et(this.h,r),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),r.T=!0,je(r,n,null)):je(r,n,t),this.G=2}}else 3==this.G&&(e?$t(this,e):0==this.i.length||Qe(this.h)||$t(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ae(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ee(10),Zt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Zt(this),rn(this),Ee(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Ee(2)):(this.j.info("Failed to ping google.com"),Ee(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=pn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},mn.prototype.g=function(e,t){return new gn(e,t)},h(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Kt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=he(e),e=n);t.i.push(new Ke(t.Ya++,e)),3==t.G&&Jt(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Kt(this.g),delete this.g,gn.aa.N.call(this)},h(vn,ye),h(yn,xe),h(xn,pn),xn.prototype.ua=function(){ie(this.g,"a")},xn.prototype.ta=function(e){ie(this.g,new vn(e))},xn.prototype.sa=function(e){ie(this.g,new yn)},xn.prototype.ra=function(){ie(this.g,"b")},mn.prototype.createWebChannel=mn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,ac=lc.createWebChannelTransport=function(){return new mn},sc=lc.getStatEventTarget=function(){return we()},rc=lc.Event=be,ic=lc.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},De.NO_ERROR=0,De.TIMEOUT=8,De.HTTP_ERROR=6,nc=lc.ErrorCode=De,Re.COMPLETE="complete",tc=lc.EventType=Re,ge.EventType=ve,ve.OPEN="a",ve.CLOSE="b",ve.ERROR="c",ve.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ec=lc.WebChannel=ge,lc.FetchXmlHttpFactory=Pt,zt.prototype.listenOnce=zt.prototype.L,zt.prototype.getLastError=zt.prototype.Ka,zt.prototype.getLastErrorCode=zt.prototype.Ba,zt.prototype.getStatus=zt.prototype.Z,zt.prototype.getResponseJson=zt.prototype.Oa,zt.prototype.getResponseText=zt.prototype.oa,zt.prototype.send=zt.prototype.ea,zt.prototype.setWithCredentials=zt.prototype.Ha,$l=lc.XhrIo=zt}).apply("undefined"!==typeof oc?oc:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const cc="@firebase/firestore",uc="4.8.0";class hc{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hc.UNAUTHENTICATED=new hc(null),hc.GOOGLE_CREDENTIALS=new hc("google-credentials-uid"),hc.FIRST_PARTY=new hc("first-party-uid"),hc.MOCK_USER=new hc("mock-user");let dc="11.10.0";const fc=new Io("@firebase/firestore");function pc(){return fc.logLevel}function mc(e){if(fc.logLevel<=Po.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(yc);fc.debug("Firestore (".concat(dc,"): ").concat(e),...r)}}function gc(e){if(fc.logLevel<=Po.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(yc);fc.error("Firestore (".concat(dc,"): ").concat(e),...r)}}function vc(e){if(fc.logLevel<=Po.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];const r=n.map(yc);fc.warn("Firestore (".concat(dc,"): ").concat(e),...r)}}function yc(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(Gg){return e}}function xc(e,t,n){let i="Unexpected state";"string"==typeof t?i=t:n=t,bc(e,i,n)}function bc(e,t,n){let i="FIRESTORE (".concat(dc,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{i+=" CONTEXT: "+JSON.stringify(n)}catch(e){i+=" CONTEXT: "+n}throw gc(i),new Error(i)}function _c(e,t,n,i){let r="Unexpected state";"string"==typeof n?r=n:i=n,e||bc(t,r,i)}function wc(e,t){return e}const Sc={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Mc extends xo{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Cc{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ec{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Tc{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hc.UNAUTHENTICATED))}shutdown(){}}class Ac{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kc{constructor(e){this.t=e,this.currentUser=hc.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){_c(void 0===this.o,42304);let n=this.i;const i=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let r=new Cc;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Cc,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const t=r;e.enqueueRetryable(async()=>{await t.promise,await i(this.currentUser)})},a=e=>{mc("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(mc("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Cc)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(mc("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(_c("string"==typeof t.accessToken,31837,{l:t}),new Ec(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return _c(null===e||"string"==typeof e,2055,{h:e}),new hc(e)}}class Pc{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=hc.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Lc{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Pc(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(hc.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Dc{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Rc{constructor(e,t){var n;this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,null!==(n=e)&&void 0!==n&&void 0!==n.settings&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){_c(void 0===this.o,3512);const n=e=>{null!=e.error&&mc("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,mc("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const i=e=>{mc("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>i(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?i(e):mc("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Dc(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(_c("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new Dc(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Nc(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let i=0;i<e;i++)n[i]=Math.floor(256*Math.random());return n}function Ic(){return new TextEncoder}class Oc{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Nc(40);for(let i=0;i<n.length;++i)t.length<20&&n[i]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[i]%62))}return t}}function zc(e,t){return e<t?-1:e>t?1:0}function Fc(e,t){let n=0;for(;n<e.length&&n<t.length;){const i=e.codePointAt(n),r=t.codePointAt(n);if(i!==r){if(i<128&&r<128)return zc(i,r);{const s=Ic(),a=Bc(s.encode(jc(e,n)),s.encode(jc(t,n)));return 0!==a?a:zc(i,r)}}n+=i>65535?2:1}return zc(e.length,t.length)}function jc(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function Bc(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return zc(e[n],t[n]);return zc(e.length,t.length)}function Vc(e,t,n){return e.length===t.length&&e.every((e,i)=>n(e,t[i]))}const Uc="__name__";class Hc{constructor(e,t,n){void 0===t?t=0:t>e.length&&xc(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&xc(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Hc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Hc?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let i=0;i<n;i++){const n=Hc.compareSegments(e.get(i),t.get(i));if(0!==n)return n}return zc(e.length,t.length)}static compareSegments(e,t){const n=Hc.isNumericId(e),i=Hc.isNumericId(t);return n&&!i?-1:!n&&i?1:n&&i?Hc.extractNumericId(e).compare(Hc.extractNumericId(t)):Fc(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Zl.fromString(e.substring(4,e.length-2))}}class Wc extends Hc{construct(e,t,n){return new Wc(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n){if(r.indexOf("//")>=0)throw new Mc(Sc.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));e.push(...r.split("/").filter(e=>e.length>0))}return new Wc(e)}static emptyPath(){return new Wc([])}}const Gc=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class qc extends Hc{construct(e,t,n){return new qc(e,t,n)}static isValidIdentifier(e){return Gc.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),qc.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===Uc}static keyField(){return new qc([Uc])}static fromServerFormat(e){const t=[];let n="",i=0;const r=()=>{if(0===n.length)throw new Mc(Sc.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;i<e.length;){const t=e[i];if("\\"===t){if(i+1===e.length)throw new Mc(Sc.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[i+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Mc(Sc.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,i+=2}else"`"===t?(s=!s,i++):"."!==t||s?(n+=t,i++):(r(),i++)}if(r(),s)throw new Mc(Sc.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new qc(t)}static emptyPath(){return new qc([])}}class Xc{constructor(e){this.path=e}static fromPath(e){return new Xc(Wc.fromString(e))}static fromName(e){return new Xc(Wc.fromString(e).popFirst(5))}static empty(){return new Xc(Wc.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Wc.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Wc.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xc(new Wc(e.slice()))}}function Yc(e,t,n){if(!n)throw new Mc(Sc.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Kc(e){if(!Xc.isDocumentKey(e))throw new Mc(Sc.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Zc(e){if(Xc.isDocumentKey(e))throw new Mc(Sc.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Qc(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function Jc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":xc(12329,{type:typeof e})}function $c(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Mc(Sc.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jc(e);throw new Mc(Sc.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function eu(e,t){const n={typeString:e};return t&&(n.value=t),n}function tu(e,t){if(!Qc(e))throw new Mc(Sc.INVALID_ARGUMENT,"JSON must be an object");let n;for(const i in t)if(t[i]){const r=t[i].typeString,s="value"in t[i]?{value:t[i].value}:void 0;if(!(i in e)){n="JSON missing required field: '".concat(i,"'");break}const a=e[i];if(r&&typeof a!==r){n="JSON field '".concat(i,"' must be a ").concat(r,".");break}if(void 0!==s&&a!==s.value){n="Expected '".concat(i,"' field to equal '").concat(s.value,"'");break}}if(n)throw new Mc(Sc.INVALID_ARGUMENT,n);return!0}const nu=-62135596800,iu=1e6;class ru{static now(){return ru.fromMillis(Date.now())}static fromDate(e){return ru.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*iu);return new ru(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Mc(Sc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Mc(Sc.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<nu)throw new Mc(Sc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Mc(Sc.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/iu}_compareTo(e){return this.seconds===e.seconds?zc(this.nanoseconds,e.nanoseconds):zc(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ru._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tu(e,ru._jsonSchema))return new ru(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-nu;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ru._jsonSchemaVersion="firestore/timestamp/1.0",ru._jsonSchema={type:eu("string",ru._jsonSchemaVersion),seconds:eu("number"),nanoseconds:eu("number")};class su{static fromTimestamp(e){return new su(e)}static min(){return new su(new ru(0,0))}static max(){return new su(new ru(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const au=-1;class ou{constructor(e,t,n,i){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=i}}ou.UNKNOWN_ID=-1;function lu(e,t){const n=e.toTimestamp().seconds,i=e.toTimestamp().nanoseconds+1,r=su.fromTimestamp(1e9===i?new ru(n+1,0):new ru(n,i));return new uu(r,Xc.empty(),t)}function cu(e){return new uu(e.readTime,e.key,au)}class uu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new uu(su.min(),Xc.empty(),au)}static max(){return new uu(su.max(),Xc.empty(),au)}}function hu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Xc.comparator(e.documentKey,t.documentKey),0!==n?n:zc(e.largestBatchId,t.largestBatchId))}const du="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class fu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function pu(e){if(e.code!==Sc.FAILED_PRECONDITION||e.message!==du)throw e;mc("LocalStore","Unexpectedly lost primary lease")}class mu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&xc(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new mu((n,i)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,i)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof mu?t:mu.resolve(t)}catch(e){return mu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):mu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):mu.reject(t)}static resolve(e){return new mu((t,n)=>{t(e)})}static reject(e){return new mu((t,n)=>{n(e)})}static waitFor(e){return new mu((t,n)=>{let i=0,r=0,s=!1;e.forEach(e=>{++i,e.next(()=>{++r,s&&r===i&&t()},e=>n(e))}),s=!0,r===i&&t()})}static or(e){let t=mu.resolve(!1);for(const n of e)t=t.next(e=>e?mu.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,i)=>{n.push(t.call(this,e,i))}),this.waitFor(n)}static mapArray(e,t){return new mu((n,i)=>{const r=e.length,s=new Array(r);let a=0;for(let o=0;o<r;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===r&&n(s)},e=>i(e))}})}static doWhile(e,t){return new mu((n,i)=>{const r=()=>{!0===e()?t().next(()=>{r()},i):n()};r()})}}function gu(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function vu(e){return"IndexedDbTransactionError"===e.name}class yu{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this._e(e),this.ae=e=>t.writeSequenceNumber(e))}_e(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ae&&this.ae(e),e}}yu.ue=-1;const xu=-1;function bu(e){return null==e}function _u(e){return 0===e&&1/e==-1/0}function wu(e){return"number"==typeof e&&Number.isInteger(e)&&!_u(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Su="\x01";function Mu(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Eu(t)),t=Cu(e.get(n),t);return Eu(t)}function Cu(e,t){let n=t;const i=e.length;for(let r=0;r<i;r++){const t=e.charAt(r);switch(t){case"\0":n+="\x01\x10";break;case Su:n+="\x01\x11";break;default:n+=t}}return n}function Eu(e){return e+Su+"\x01"}const Tu="remoteDocuments",Au="owner",ku="mutationQueues",Pu="mutations";const Lu="documentMutations",Du="remoteDocumentsV14",Ru="remoteDocumentGlobal",Nu="targets",Iu="targetDocuments",Ou="targetGlobal",zu="collectionParents",Fu="clientMetadata",ju="bundles",Bu="namedQueries",Vu="indexConfiguration",Uu="indexState",Hu="indexEntries",Wu="documentOverlays",Gu="globals",qu=[ku,Pu,Lu,Tu,Nu,Au,Ou,Iu,Fu,Ru,zu,ju,Bu],Xu=[ku,Pu,Lu,Du,Nu,Au,Ou,Iu,Fu,Ru,zu,ju,Bu,Wu],Yu=Xu,Ku=[...Yu,Vu,Uu,Hu];function Zu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Qu(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Ju(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class $u{constructor(e,t){this.comparator=e,this.root=t||th.EMPTY}insert(e,t){return new $u(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,th.BLACK,null,null))}remove(e){return new $u(this.comparator,this.root.remove(e,this.comparator).copy(null,null,th.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(e,n.key);if(0===i)return t+n.left.size;i<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new eh(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new eh(this.root,e,this.comparator,!1)}getReverseIterator(){return new eh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new eh(this.root,e,this.comparator,!0)}}class eh{constructor(e,t,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?n(e.key,t):1,t&&i&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class th{constructor(e,t,n,i,r){this.key=e,this.value=t,this.color=null!=n?n:th.RED,this.left=null!=i?i:th.EMPTY,this.right=null!=r?r:th.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,i,r){return new th(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let i=this;const r=n(e,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(e,t,n),null):0===r?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return th.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return th.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,th.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,th.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw xc(43730,{key:this.key,value:this.value});if(this.right.isRed())throw xc(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw xc(27949);return e+(this.isRed()?0:1)}}th.EMPTY=null,th.RED=!0,th.BLACK=!1,th.EMPTY=new class{constructor(){this.size=0}get key(){throw xc(57766)}get value(){throw xc(16141)}get color(){throw xc(16727)}get left(){throw xc(29726)}get right(){throw xc(36894)}copy(e,t,n,i,r){return this}insert(e,t,n){return new th(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nh{constructor(e){this.comparator=e,this.data=new $u(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new ih(this.data.getIterator())}getIteratorFrom(e){return new ih(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof nh))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,i=n.getNext().key;if(0!==this.comparator(e,i))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nh(this.comparator);return t.data=e,t}}class ih{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class rh{constructor(e){this.fields=e,e.sort(qc.comparator)}static empty(){return new rh([])}unionWith(e){let t=new nh(qc.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new rh(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vc(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class sh extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ah{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new sh("Invalid base64 string: "+e):e}}(e);return new ah(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ah(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return zc(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ah.EMPTY_BYTE_STRING=new ah("");const oh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function lh(e){if(_c(!!e,39018),"string"==typeof e){let t=0;const n=oh.exec(e);if(_c(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ch(e.seconds),nanos:ch(e.nanos)}}function ch(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function uh(e){return"string"==typeof e?ah.fromBase64String(e):ah.fromUint8Array(e)}const hh="server_timestamp",dh="__type__",fh="__previous_value__",ph="__local_write_time__";function mh(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[dh])||void 0===n?void 0:n.stringValue)===hh}function gh(e){const t=e.mapValue.fields[fh];return mh(t)?gh(t):t}function vh(e){const t=lh(e.mapValue.fields[ph].timestampValue);return new ru(t.seconds,t.nanos)}class yh{constructor(e,t,n,i,r,s,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const xh="(default)";class bh{constructor(e,t){this.projectId=e,this.database=t||xh}static empty(){return new bh("","")}get isDefaultDatabase(){return this.database===xh}isEqual(e){return e instanceof bh&&e.projectId===this.projectId&&e.database===this.database}}const _h="__type__",wh="__max__",Sh={mapValue:{fields:{__type__:{stringValue:wh}}}},Mh="__vector__",Ch="value";function Eh(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?mh(e)?4:Bh(e)?9007199254740991:Fh(e)?10:11:xc(28295,{value:e})}function Th(e,t){if(e===t)return!0;const n=Eh(e);if(n!==Eh(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return vh(e).isEqual(vh(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=lh(e.timestampValue),i=lh(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return uh(e.bytesValue).isEqual(uh(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ch(e.geoPointValue.latitude)===ch(t.geoPointValue.latitude)&&ch(e.geoPointValue.longitude)===ch(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ch(e.integerValue)===ch(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ch(e.doubleValue),i=ch(t.doubleValue);return n===i?_u(n)===_u(i):isNaN(n)&&isNaN(i)}return!1}(e,t);case 9:return Vc(e.arrayValue.values||[],t.arrayValue.values||[],Th);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},i=t.mapValue.fields||{};if(Zu(n)!==Zu(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!Th(n[r],i[r])))return!1;return!0}(e,t);default:return xc(52216,{left:e})}}function Ah(e,t){return void 0!==(e.values||[]).find(e=>Th(e,t))}function kh(e,t){if(e===t)return 0;const n=Eh(e),i=Eh(t);if(n!==i)return zc(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return zc(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ch(e.integerValue||e.doubleValue),i=ch(t.integerValue||t.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(e,t);case 3:return Ph(e.timestampValue,t.timestampValue);case 4:return Ph(vh(e),vh(t));case 5:return Fc(e.stringValue,t.stringValue);case 6:return function(e,t){const n=uh(e),i=uh(t);return n.compareTo(i)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),i=t.split("/");for(let r=0;r<n.length&&r<i.length;r++){const e=zc(n[r],i[r]);if(0!==e)return e}return zc(n.length,i.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=zc(ch(e.latitude),ch(t.latitude));return 0!==n?n:zc(ch(e.longitude),ch(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Lh(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,i,r,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a[Ch])||void 0===n?void 0:n.arrayValue,c=null===(i=o[Ch])||void 0===i?void 0:i.arrayValue,u=zc((null===(r=null==l?void 0:l.values)||void 0===r?void 0:r.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Lh(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Sh.mapValue&&t===Sh.mapValue)return 0;if(e===Sh.mapValue)return 1;if(t===Sh.mapValue)return-1;const n=e.fields||{},i=Object.keys(n),r=t.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let a=0;a<i.length&&a<s.length;++a){const e=Fc(i[a],s[a]);if(0!==e)return e;const t=kh(n[i[a]],r[s[a]]);if(0!==t)return t}return zc(i.length,s.length)}(e.mapValue,t.mapValue);default:throw xc(23264,{le:n})}}function Ph(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return zc(e,t);const n=lh(e),i=lh(t),r=zc(n.seconds,i.seconds);return 0!==r?r:zc(n.nanos,i.nanos)}function Lh(e,t){const n=e.values||[],i=t.values||[];for(let r=0;r<n.length&&r<i.length;++r){const e=kh(n[r],i[r]);if(e)return e}return zc(n.length,i.length)}function Dh(e){return Rh(e)}function Rh(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=lh(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return uh(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return Xc.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const i of e.values||[])n?n=!1:t+=",",t+=Rh(i);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",i=!0;for(const r of t)i?i=!1:n+=",",n+="".concat(r,":").concat(Rh(e.fields[r]));return n+"}"}(e.mapValue):xc(61005,{value:e})}function Nh(e){switch(Eh(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=gh(e);return t?16+Nh(t):16;case 5:return 2*e.stringValue.length;case 6:return uh(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Nh(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return Qu(e.fields,(e,n)=>{t+=e.length+Nh(n)}),t}(e.mapValue);default:throw xc(13486,{value:e})}}function Ih(e){return!!e&&"integerValue"in e}function Oh(e){return!!e&&"arrayValue"in e}function zh(e){return!!e&&"mapValue"in e}function Fh(e){var t,n;return(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{})[_h])||void 0===n?void 0:n.stringValue)===Mh}function jh(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Qu(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=jh(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=jh(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Bh(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===wh}class Vh{constructor(e){this.value=e}static empty(){return new Vh({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!zh(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jh(t)}setAll(e){let t=qc.emptyPath(),n={},i=[];e.forEach((e,r)=>{if(!t.isImmediateParentOf(r)){const e=this.getFieldsMap(t);this.applyChanges(e,n,i),n={},i=[],t=r.popLast()}e?n[r.lastSegment()]=jh(e):i.push(r.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,n,i)}delete(e){const t=this.field(e.popLast());zh(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Th(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let i=t.mapValue.fields[e.get(n)];zh(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,n){Qu(t,(t,n)=>e[t]=n);for(const i of n)delete e[i]}clone(){return new Vh(jh(this.value))}}function Uh(e){const t=[];return Qu(e.fields,(e,n)=>{const i=new qc([e]);if(zh(n)){const e=Uh(n.mapValue).fields;if(0===e.length)t.push(i);else for(const n of e)t.push(i.child(n))}else t.push(i)}),new rh(t)}class Hh{constructor(e,t,n,i,r,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=a}static newInvalidDocument(e){return new Hh(e,0,su.min(),su.min(),su.min(),Vh.empty(),0)}static newFoundDocument(e,t,n,i){return new Hh(e,1,t,su.min(),n,i,0)}static newNoDocument(e,t){return new Hh(e,2,t,su.min(),su.min(),Vh.empty(),0)}static newUnknownDocument(e,t){return new Hh(e,3,t,su.min(),su.min(),Vh.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(su.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vh.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vh.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=su.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Hh&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Hh(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class Wh{constructor(e,t){this.position=e,this.inclusive=t}}function Gh(e,t,n){let i=0;for(let r=0;r<e.position.length;r++){const s=t[r],a=e.position[r];if(i=s.field.isKeyField()?Xc.comparator(Xc.fromName(a.referenceValue),n.key):kh(a,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function qh(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Th(e.position[n],t.position[n]))return!1;return!0}class Xh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Yh(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Kh{}class Zh extends Kh{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new rd(e,t,n):"array-contains"===t?new ld(e,n):"in"===t?new cd(e,n):"not-in"===t?new ud(e,n):"array-contains-any"===t?new hd(e,n):new Zh(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new sd(e,n):new ad(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(kh(t,this.value)):null!==t&&Eh(this.value)===Eh(t)&&this.matchesComparison(kh(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return xc(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Qh extends Kh{constructor(e,t){super(),this.filters=e,this.op=t,this.he=null}static create(e,t){return new Qh(e,t)}matches(e){return Jh(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.he||(this.he=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.he}getFilters(){return Object.assign([],this.filters)}}function Jh(e){return"and"===e.op}function $h(e){return ed(e)&&Jh(e)}function ed(e){for(const t of e.filters)if(t instanceof Qh)return!1;return!0}function td(e){if(e instanceof Zh)return e.field.canonicalString()+e.op.toString()+Dh(e.value);if($h(e))return e.filters.map(e=>td(e)).join(",");{const t=e.filters.map(e=>td(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function nd(e,t){return e instanceof Zh?function(e,t){return t instanceof Zh&&e.op===t.op&&e.field.isEqual(t.field)&&Th(e.value,t.value)}(e,t):e instanceof Qh?function(e,t){return t instanceof Qh&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,i)=>e&&nd(n,t.filters[i]),!0)}(e,t):void xc(19439)}function id(e){return e instanceof Zh?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Dh(e.value))}(e):e instanceof Qh?function(e){return e.op.toString()+" {"+e.getFilters().map(id).join(" ,")+"}"}(e):"Filter"}class rd extends Zh{constructor(e,t,n){super(e,t,n),this.key=Xc.fromName(n.referenceValue)}matches(e){const t=Xc.comparator(e.key,this.key);return this.matchesComparison(t)}}class sd extends Zh{constructor(e,t){super(e,"in",t),this.keys=od("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class ad extends Zh{constructor(e,t){super(e,"not-in",t),this.keys=od("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function od(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Xc.fromName(e.referenceValue))}class ld extends Zh{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Oh(t)&&Ah(t.arrayValue,this.value)}}class cd extends Zh{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Ah(this.value.arrayValue,t)}}class ud extends Zh{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ah(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Ah(this.value.arrayValue,t)}}class hd extends Zh{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Oh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Ah(this.value.arrayValue,e))}}class dd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=a,this.Pe=null}}function fd(e){return new dd(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function pd(e){const t=wc(e);if(null===t.Pe){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>td(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),bu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Dh(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Dh(e)).join(",")),t.Pe=e}return t.Pe}function md(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Yh(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!nd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!qh(e.startAt,t.startAt)&&qh(e.endAt,t.endAt)}class gd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=a,this.endAt=o,this.Te=null,this.Ie=null,this.de=null,this.startAt,this.endAt}}function vd(e,t,n,i,r,s,a,o){return new gd(e,t,n,i,r,s,a,o)}function yd(e){return new gd(e)}function xd(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function bd(e){return null!==e.collectionGroup}function _d(e){const t=wc(e);if(null===t.Te){t.Te=[];const e=new Set;for(const r of t.explicitOrderBy)t.Te.push(r),e.add(r.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",i=function(e){let t=new nh(qc.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);i.forEach(i=>{e.has(i.canonicalString())||i.isKeyField()||t.Te.push(new Xh(i,n))}),e.has(qc.keyField().canonicalString())||t.Te.push(new Xh(qc.keyField(),n))}return t.Te}function wd(e){const t=wc(e);return t.Ie||(t.Ie=Sd(t,_d(e))),t.Ie}function Sd(e,t){if("F"===e.limitType)return fd(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new Xh(e.field,t)});const n=e.endAt?new Wh(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new Wh(e.startAt.position,e.startAt.inclusive):null;return fd(e.path,e.collectionGroup,t,e.filters,e.limit,n,i)}}function Md(e,t,n){return new gd(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Cd(e,t){return md(wd(e),wd(t))&&e.limitType===t.limitType}function Ed(e){return"".concat(pd(wd(e)),"|lt:").concat(e.limitType)}function Td(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>id(e)).join(", "),"]")),bu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Dh(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Dh(e)).join(",")),"Target(".concat(t,")")}(wd(e)),"; limitType=").concat(e.limitType,")")}function Ad(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Xc.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of _d(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const i=Gh(e,t,n);return e.inclusive?i<=0:i<0}(e.startAt,_d(e),t))&&!(e.endAt&&!function(e,t,n){const i=Gh(e,t,n);return e.inclusive?i>=0:i>0}(e.endAt,_d(e),t))}(e,t)}function kd(e){return(t,n)=>{let i=!1;for(const r of _d(e)){const e=Pd(r,t,n);if(0!==e)return e;i=i||r.field.isKeyField()}return 0}}function Pd(e,t,n){const i=e.field.isKeyField()?Xc.comparator(t.key,n.key):function(e,t,n){const i=t.data.field(e),r=n.data.field(e);return null!==i&&null!==r?kh(i,r):xc(42886)}(e.field,t,n);switch(e.dir){case"asc":return i;case"desc":return-1*i;default:return xc(19790,{direction:e.dir})}}class Ld{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),i=this.inner[n];if(void 0===i)return this.inner[n]=[[e,t]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return void(i[r]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],e))return 1===n.length?delete this.inner[t]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Qu(this.inner,(t,n)=>{for(const[i,r]of n)e(i,r)})}isEmpty(){return Ju(this.inner)}size(){return this.innerSize}}const Dd=new $u(Xc.comparator);function Rd(){return Dd}const Nd=new $u(Xc.comparator);function Id(){let e=Nd;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.insert(r.key,r);return e}function Od(e){let t=Nd;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function zd(){return jd()}function Fd(){return jd()}function jd(){return new Ld(e=>e.toString(),(e,t)=>e.isEqual(t))}const Bd=new $u(Xc.comparator),Vd=new nh(Xc.comparator);function Ud(){let e=Vd;for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];for(const r of n)e=e.add(r);return e}const Hd=new nh(zc);function Wd(){return Hd}function Gd(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:_u(t)?"-0":t}}function qd(e){return{integerValue:""+e}}function Xd(e,t){return wu(t)?qd(t):Gd(e,t)}class Yd{constructor(){this._=void 0}}function Kd(e,t,n){return e instanceof Jd?function(e,t){const n={fields:{[dh]:{stringValue:hh},[ph]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&mh(t)&&(t=gh(t)),t&&(n.fields[fh]=t),{mapValue:n}}(n,t):e instanceof $d?ef(e,t):e instanceof tf?nf(e,t):function(e,t){const n=Qd(e,t),i=sf(n)+sf(e.Ee);return Ih(n)&&Ih(e.Ee)?qd(i):Gd(e.serializer,i)}(e,t)}function Zd(e,t,n){return e instanceof $d?ef(e,t):e instanceof tf?nf(e,t):n}function Qd(e,t){return e instanceof rf?function(e){return Ih(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Jd extends Yd{}class $d extends Yd{constructor(e){super(),this.elements=e}}function ef(e,t){const n=af(t);for(const i of e.elements)n.some(e=>Th(e,i))||n.push(i);return{arrayValue:{values:n}}}class tf extends Yd{constructor(e){super(),this.elements=e}}function nf(e,t){let n=af(t);for(const i of e.elements)n=n.filter(e=>!Th(e,i));return{arrayValue:{values:n}}}class rf extends Yd{constructor(e,t){super(),this.serializer=e,this.Ee=t}}function sf(e){return ch(e.integerValue||e.doubleValue)}function af(e){return Oh(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class of{constructor(e,t){this.version=e,this.transformResults=t}}class lf{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lf}static exists(e){return new lf(void 0,e)}static updateTime(e){return new lf(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function cf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class uf{}function hf(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new _f(e.key,lf.none()):new gf(e.key,e.data,lf.none());{const n=e.data,i=Vh.empty();let r=new nh(qc.comparator);for(let e of t.fields)if(!r.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?i.delete(e):i.set(e,t),r=r.add(e)}return new vf(e.key,i,new rh(r.toArray()),lf.none())}}function df(e,t,n){e instanceof gf?function(e,t,n){const i=e.value.clone(),r=xf(e.fieldTransforms,t,n.transformResults);i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):e instanceof vf?function(e,t,n){if(!cf(e.precondition,t))return void t.convertToUnknownDocument(n.version);const i=xf(e.fieldTransforms,t,n.transformResults),r=t.data;r.setAll(yf(e)),r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function ff(e,t,n,i){return e instanceof gf?function(e,t,n,i){if(!cf(e.precondition,t))return n;const r=e.value.clone(),s=bf(e.fieldTransforms,i,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}(e,t,n,i):e instanceof vf?function(e,t,n,i){if(!cf(e.precondition,t))return n;const r=bf(e.fieldTransforms,i,t),s=t.data;return s.setAll(yf(e)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,i):function(e,t,n){return cf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function pf(e,t){let n=null;for(const i of e.fieldTransforms){const e=t.data.field(i.field),r=Qd(i.transform,e||null);null!=r&&(null===n&&(n=Vh.empty()),n.set(i.field,r))}return n||null}function mf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Vc(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof $d&&t instanceof $d||e instanceof tf&&t instanceof tf?Vc(e.elements,t.elements,Th):e instanceof rf&&t instanceof rf?Th(e.Ee,t.Ee):e instanceof Jd&&t instanceof Jd}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class gf extends uf{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class vf extends uf{constructor(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function yf(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const i=e.data.field(n);t.set(n,i)}}),t}function xf(e,t,n){const i=new Map;_c(e.length===n.length,32656,{Ae:n.length,Re:e.length});for(let r=0;r<n.length;r++){const s=e[r],a=s.transform,o=t.data.field(s.field);i.set(s.field,Zd(a,o,n[r]))}return i}function bf(e,t,n){const i=new Map;for(const r of e){const e=r.transform,s=n.data.field(r.field);i.set(r.field,Kd(e,s,t))}return i}class _f extends uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class wf extends uf{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Sf{constructor(e,t,n,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const t=this.mutations[i];t.key.isEqual(e.key)&&df(t,e,n[i])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=ff(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=ff(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Fd();return this.mutations.forEach(i=>{const r=e.get(i.key),s=r.overlayedDocument;let a=this.applyToLocalView(s,r.mutatedFields);a=t.has(i.key)?null:a;const o=hf(s,a);null!==o&&n.set(i.key,o),s.isValidDocument()||s.convertToNoDocument(su.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ud())}isEqual(e){return this.batchId===e.batchId&&Vc(this.mutations,e.mutations,(e,t)=>mf(e,t))&&Vc(this.baseMutations,e.baseMutations,(e,t)=>mf(e,t))}}class Mf{constructor(e,t,n,i){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=i}static from(e,t,n){_c(e.mutations.length===n.length,58842,{Ve:e.mutations.length,me:n.length});let i=Bd;const r=e.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new Mf(e,t,n,i)}}class Cf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}var Ef,Tf;function Af(e){switch(e){case Sc.OK:return xc(64938);case Sc.CANCELLED:case Sc.UNKNOWN:case Sc.DEADLINE_EXCEEDED:case Sc.RESOURCE_EXHAUSTED:case Sc.INTERNAL:case Sc.UNAVAILABLE:case Sc.UNAUTHENTICATED:return!1;case Sc.INVALID_ARGUMENT:case Sc.NOT_FOUND:case Sc.ALREADY_EXISTS:case Sc.PERMISSION_DENIED:case Sc.FAILED_PRECONDITION:case Sc.ABORTED:case Sc.OUT_OF_RANGE:case Sc.UNIMPLEMENTED:case Sc.DATA_LOSS:return!0;default:return xc(15467,{code:e})}}function kf(e){if(void 0===e)return gc("GRPC error has no .code"),Sc.UNKNOWN;switch(e){case Ef.OK:return Sc.OK;case Ef.CANCELLED:return Sc.CANCELLED;case Ef.UNKNOWN:return Sc.UNKNOWN;case Ef.DEADLINE_EXCEEDED:return Sc.DEADLINE_EXCEEDED;case Ef.RESOURCE_EXHAUSTED:return Sc.RESOURCE_EXHAUSTED;case Ef.INTERNAL:return Sc.INTERNAL;case Ef.UNAVAILABLE:return Sc.UNAVAILABLE;case Ef.UNAUTHENTICATED:return Sc.UNAUTHENTICATED;case Ef.INVALID_ARGUMENT:return Sc.INVALID_ARGUMENT;case Ef.NOT_FOUND:return Sc.NOT_FOUND;case Ef.ALREADY_EXISTS:return Sc.ALREADY_EXISTS;case Ef.PERMISSION_DENIED:return Sc.PERMISSION_DENIED;case Ef.FAILED_PRECONDITION:return Sc.FAILED_PRECONDITION;case Ef.ABORTED:return Sc.ABORTED;case Ef.OUT_OF_RANGE:return Sc.OUT_OF_RANGE;case Ef.UNIMPLEMENTED:return Sc.UNIMPLEMENTED;case Ef.DATA_LOSS:return Sc.DATA_LOSS;default:return xc(39323,{code:e})}}(Tf=Ef||(Ef={}))[Tf.OK=0]="OK",Tf[Tf.CANCELLED=1]="CANCELLED",Tf[Tf.UNKNOWN=2]="UNKNOWN",Tf[Tf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tf[Tf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tf[Tf.NOT_FOUND=5]="NOT_FOUND",Tf[Tf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tf[Tf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tf[Tf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tf[Tf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tf[Tf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tf[Tf.ABORTED=10]="ABORTED",Tf[Tf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tf[Tf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tf[Tf.INTERNAL=13]="INTERNAL",Tf[Tf.UNAVAILABLE=14]="UNAVAILABLE",Tf[Tf.DATA_LOSS=15]="DATA_LOSS";new Zl([4294967295,4294967295],0);Error;class Pf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Lf(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Df(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Rf(e,t){return Lf(e,t.toTimestamp())}function Nf(e){return _c(!!e,49232),su.fromTimestamp(function(e){const t=lh(e);return new ru(t.seconds,t.nanos)}(e))}function If(e,t){return Of(e,t).canonicalString()}function Of(e,t){const n=function(e){return new Wc(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function zf(e){const t=Wc.fromString(e);return _c(Yf(t),10190,{key:t.toString()}),t}function Ff(e,t){return If(e.databaseId,t.path)}function jf(e){const t=zf(e);return 4===t.length?Wc.emptyPath():Vf(t)}function Bf(e){return new Wc(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Vf(e){return _c(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Uf(e,t,n){return{name:Ff(e,t),fields:n.value.mapValue.fields}}function Hf(e,t){let n;if(t instanceof gf)n={update:Uf(e,t.key,t.value)};else if(t instanceof _f)n={delete:Ff(e,t.key)};else if(t instanceof vf)n={update:Uf(e,t.key,t.data),updateMask:Xf(t.fieldMask)};else{if(!(t instanceof wf))return xc(16599,{Rt:t.type});n={verify:Ff(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Jd)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof $d)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof tf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof rf)return{fieldPath:t.field.canonicalString(),increment:n.Ee};throw xc(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Rf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:xc(27497)}(e,t.precondition)),n}function Wf(e){let t=jf(e.parent);const n=e.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){_c(1===i,65062);const e=n.from[0];e.allDescendants?r=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Gf(e);return t instanceof Qh&&$h(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new Xh(qf(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,bu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Wh(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Wh(n,t)}(n.endAt)),vd(t,r,a,s,o,"F",l,c)}function Gf(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=qf(e.unaryFilter.field);return Zh.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=qf(e.unaryFilter.field);return Zh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=qf(e.unaryFilter.field);return Zh.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=qf(e.unaryFilter.field);return Zh.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return xc(61313);default:return xc(60726)}}(e):void 0!==e.fieldFilter?function(e){return Zh.create(qf(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return xc(58110);default:return xc(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Qh.create(e.compositeFilter.filters.map(e=>Gf(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return xc(1026)}}(e.compositeFilter.op))}(e):xc(30097,{filter:e})}function qf(e){return qc.fromServerFormat(e.fieldPath)}function Xf(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Yf(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class Kf{constructor(e){this.gt=e}}function Zf(e){const t=Wf({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Md(t,t.limit,"L"):t}class Qf{constructor(){}bt(e,t){this.Dt(e,t),t.vt()}Dt(e,t){if("nullValue"in e)this.Ct(t,5);else if("booleanValue"in e)this.Ct(t,10),t.Ft(e.booleanValue?1:0);else if("integerValue"in e)this.Ct(t,15),t.Ft(ch(e.integerValue));else if("doubleValue"in e){const n=ch(e.doubleValue);isNaN(n)?this.Ct(t,13):(this.Ct(t,15),_u(n)?t.Ft(0):t.Ft(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ct(t,20),"string"==typeof n&&(n=lh(n)),t.Mt("".concat(n.seconds||"")),t.Ft(n.nanos||0)}else if("stringValue"in e)this.xt(e.stringValue,t),this.Ot(t);else if("bytesValue"in e)this.Ct(t,30),t.Nt(uh(e.bytesValue)),this.Ot(t);else if("referenceValue"in e)this.Bt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ct(t,45),t.Ft(n.latitude||0),t.Ft(n.longitude||0)}else"mapValue"in e?Bh(e)?this.Ct(t,Number.MAX_SAFE_INTEGER):Fh(e)?this.Lt(e.mapValue,t):(this.kt(e.mapValue,t),this.Ot(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Ot(t)):xc(19022,{Qt:e})}xt(e,t){this.Ct(t,25),this.$t(e,t)}$t(e,t){t.Mt(e)}kt(e,t){const n=e.fields||{};this.Ct(t,55);for(const i of Object.keys(n))this.xt(i,t),this.Dt(n[i],t)}Lt(e,t){var n,i;const r=e.fields||{};this.Ct(t,53);const s=Ch,a=(null===(i=null===(n=r[s].arrayValue)||void 0===n?void 0:n.values)||void 0===i?void 0:i.length)||0;this.Ct(t,15),t.Ft(ch(a)),this.xt(s,t),this.Dt(r[s],t)}qt(e,t){const n=e.values||[];this.Ct(t,50);for(const i of n)this.Dt(i,t)}Bt(e,t){this.Ct(t,37),Xc.fromName(e).path.forEach(e=>{this.Ct(t,60),this.$t(e,t)})}Ct(e,t){e.Ft(t)}Ot(e){e.Ft(2)}}Qf.Ut=new Qf;class Jf{constructor(){this.Dn=new $f}addToCollectionParentIndex(e,t){return this.Dn.add(t),mu.resolve()}getCollectionParents(e,t){return mu.resolve(this.Dn.getEntries(t))}addFieldIndex(e,t){return mu.resolve()}deleteFieldIndex(e,t){return mu.resolve()}deleteAllFieldIndexes(e){return mu.resolve()}createTargetIndexes(e,t){return mu.resolve()}getDocumentsMatchingTarget(e,t){return mu.resolve(null)}getIndexType(e,t){return mu.resolve(0)}getFieldIndexes(e,t){return mu.resolve([])}getNextCollectionGroupToUpdate(e){return mu.resolve(null)}getMinOffset(e,t){return mu.resolve(uu.min())}getMinOffsetFromCollectionGroup(e,t){return mu.resolve(uu.min())}updateCollectionGroup(e,t,n){return mu.resolve()}updateIndexEntries(e,t){return mu.resolve()}}class $f{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t]||new nh(Wc.comparator),r=!i.has(n);return this.index[t]=i.add(n),r}has(e){const t=e.lastSegment(),n=e.popLast(),i=this.index[t];return i&&i.has(n)}getEntries(e){return(this.index[e]||new nh(Wc.comparator)).toArray()}}new Uint8Array(0);const ep={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},tp=41943040;class np{static withCacheSize(e){return new np(e,np.DEFAULT_COLLECTION_PERCENTILE,np.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}np.DEFAULT_COLLECTION_PERCENTILE=10,np.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,np.DEFAULT=new np(tp,np.DEFAULT_COLLECTION_PERCENTILE,np.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),np.DISABLED=new np(-1,0,0);class ip{constructor(e){this._r=e}next(){return this._r+=2,this._r}static ar(){return new ip(0)}static ur(){return new ip(-1)}}const rp="LruGarbageCollector",sp=1048576;function ap(e,t){let[n,i]=e,[r,s]=t;const a=zc(n,r);return 0===a?zc(i,s):a}class op{constructor(e){this.Tr=e,this.buffer=new nh(ap),this.Ir=0}dr(){return++this.Ir}Er(e){const t=[e,this.dr()];if(this.buffer.size<this.Tr)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ap(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class lp{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Ar=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Rr(6e4)}stop(){this.Ar&&(this.Ar.cancel(),this.Ar=null)}get started(){return null!==this.Ar}Rr(e){mc(rp,"Garbage collection scheduled in ".concat(e,"ms")),this.Ar=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Ar=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){vu(e)?mc(rp,"Ignoring IndexedDB error during garbage collection: ",e):await pu(e)}await this.Rr(3e5)})}}class cp{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.mr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return mu.resolve(yu.ue);const n=new op(t);return this.Vr.forEachTarget(e,e=>n.Er(e.sequenceNumber)).next(()=>this.Vr.gr(e,e=>n.Er(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Vr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(mc("LruGarbageCollector","Garbage collection skipped; disabled"),mu.resolve(ep)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(mc("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),ep):this.pr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}pr(e,t){let n,i,r,s,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(mc("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),i=this.params.maximumSequenceNumbersToCollect):i=t,s=Date.now(),this.nthSequenceNumber(e,i))).next(i=>(n=i,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(r=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),pc()<=Po.DEBUG&&mc("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-c,"ms\n\tDetermined least recently used ").concat(i," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(r," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),mu.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:e})))}}function up(e,t){return new cp(e,t)}class hp{constructor(){this.changes=new Ld(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Hh.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?mu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class dp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class fp{constructor(e,t,n,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=i}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(n=i,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&ff(n.mutation,e,rh.empty(),ru.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Ud()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ud();const i=zd();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,n).next(e=>{let t=Id();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=zd();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Ud()))}populateOverlays(e,t,n){const i=[];return n.forEach(e=>{t.has(e)||i.push(e)}),this.documentOverlayCache.getOverlays(e,i).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,i){let r=Rd();const s=jd(),a=jd();return t.forEach((e,t)=>{const a=n.get(t.key);i.has(t.key)&&(void 0===a||a.mutation instanceof vf)?r=r.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),ff(a.mutation,t,a.mutation.getFieldMask(),ru.now())):s.set(t.key,rh.empty())}),this.recalculateAndSaveOverlays(e,r).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new dp(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=jd();let i=new $u((e,t)=>e-t),r=Ud();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const r of e)r.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||rh.empty();a=r.applyToLocalView(s,a),n.set(e,a);const o=(i.get(r.batchId)||Ud()).add(e);i=i.insert(r.batchId,o)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const i=a.getNext(),o=i.key,l=i.value,c=Fd();l.forEach(e=>{if(!r.has(e)){const i=hf(t.get(e),n.get(e));null!==i&&c.set(e,i),r=r.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return mu.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,i){return function(e){return Xc.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bd(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,i):this.getDocumentsMatchingCollectionQuery(e,t,n,i)}getNextDocuments(e,t,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,i).next(r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,i-r.size):mu.resolve(zd());let a=au,o=r;return s.next(t=>mu.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),r.get(t)?mu.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,r)).next(()=>this.computeViews(e,o,t,Ud())).next(e=>({batchId:a,changes:Od(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Xc(t)).next(e=>{let t=Id();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,i){const r=t.collectionGroup;let s=Id();return this.indexManager.getCollectionParents(e,r).next(a=>mu.forEach(a,a=>{const o=function(e,t){return new gd(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n,i).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r,i))).next(e=>{r.forEach((t,n)=>{const i=n.getKey();null===e.get(i)&&(e=e.insert(i,Hh.newInvalidDocument(i)))});let n=Id();return e.forEach((e,i)=>{const s=r.get(e);void 0!==s&&ff(s.mutation,i,rh.empty(),ru.now()),Ad(t,i)&&(n=n.insert(e,i))}),n})}}class pp{constructor(e){this.serializer=e,this.Br=new Map,this.Lr=new Map}getBundleMetadata(e,t){return mu.resolve(this.Br.get(t))}saveBundleMetadata(e,t){return this.Br.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Nf(e.createTime)}}(t)),mu.resolve()}getNamedQuery(e,t){return mu.resolve(this.Lr.get(t))}saveNamedQuery(e,t){return this.Lr.set(t.name,function(e){return{name:e.name,query:Zf(e.bundledQuery),readTime:Nf(e.readTime)}}(t)),mu.resolve()}}class mp{constructor(){this.overlays=new $u(Xc.comparator),this.kr=new Map}getOverlay(e,t){return mu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=zd();return mu.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,i)=>{this.wt(e,t,i)}),mu.resolve()}removeOverlaysForBatchId(e,t,n){const i=this.kr.get(n);return void 0!==i&&(i.forEach(e=>this.overlays=this.overlays.remove(e)),this.kr.delete(n)),mu.resolve()}getOverlaysForCollection(e,t,n){const i=zd(),r=t.length+1,s=new Xc(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===r&&e.largestBatchId>n&&i.set(e.getKey(),e)}return mu.resolve(i)}getOverlaysForCollectionGroup(e,t,n,i){let r=new $u((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=r.get(e.largestBatchId);null===t&&(t=zd(),r=r.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=zd(),o=r.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=i)););return mu.resolve(a)}wt(e,t,n){const i=this.overlays.get(n.key);if(null!==i){const e=this.kr.get(i.largestBatchId).delete(n.key);this.kr.set(i.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new Cf(t,n));let r=this.kr.get(t);void 0===r&&(r=Ud(),this.kr.set(t,r)),this.kr.set(t,r.add(n.key))}}class gp{constructor(){this.sessionToken=ah.EMPTY_BYTE_STRING}getSessionToken(e){return mu.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,mu.resolve()}}class vp{constructor(){this.qr=new nh(yp.Qr),this.$r=new nh(yp.Ur)}isEmpty(){return this.qr.isEmpty()}addReference(e,t){const n=new yp(e,t);this.qr=this.qr.add(n),this.$r=this.$r.add(n)}Kr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new yp(e,t))}Gr(e,t){e.forEach(e=>this.removeReference(e,t))}zr(e){const t=new Xc(new Wc([])),n=new yp(t,e),i=new yp(t,e+1),r=[];return this.$r.forEachInRange([n,i],e=>{this.Wr(e),r.push(e.key)}),r}jr(){this.qr.forEach(e=>this.Wr(e))}Wr(e){this.qr=this.qr.delete(e),this.$r=this.$r.delete(e)}Jr(e){const t=new Xc(new Wc([])),n=new yp(t,e),i=new yp(t,e+1);let r=Ud();return this.$r.forEachInRange([n,i],e=>{r=r.add(e.key)}),r}containsKey(e){const t=new yp(e,0),n=this.qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class yp{constructor(e,t){this.key=e,this.Hr=t}static Qr(e,t){return Xc.comparator(e.key,t.key)||zc(e.Hr,t.Hr)}static Ur(e,t){return zc(e.Hr,t.Hr)||Xc.comparator(e.key,t.key)}}class xp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.er=1,this.Yr=new nh(yp.Qr)}checkEmpty(e){return mu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,i){const r=this.er;this.er++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Sf(r,t,n,i);this.mutationQueue.push(s);for(const a of i)this.Yr=this.Yr.add(new yp(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return mu.resolve(s)}lookupMutationBatch(e,t){return mu.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,i=this.Xr(n),r=i<0?0:i;return mu.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return mu.resolve(0===this.mutationQueue.length?xu:this.er-1)}getAllMutationBatches(e){return mu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new yp(t,0),i=new yp(t,Number.POSITIVE_INFINITY),r=[];return this.Yr.forEachInRange([n,i],e=>{const t=this.Zr(e.Hr);r.push(t)}),mu.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nh(zc);return t.forEach(e=>{const t=new yp(e,0),i=new yp(e,Number.POSITIVE_INFINITY);this.Yr.forEachInRange([t,i],e=>{n=n.add(e.Hr)})}),mu.resolve(this.ei(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,i=n.length+1;let r=n;Xc.isDocumentKey(r)||(r=r.child(""));const s=new yp(new Xc(r),0);let a=new nh(zc);return this.Yr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===i&&(a=a.add(e.Hr)),!0)},s),mu.resolve(this.ei(a))}ei(e){const t=[];return e.forEach(e=>{const n=this.Zr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){_c(0===this.ti(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Yr;return mu.forEach(t.mutations,i=>{const r=new yp(i.key,t.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Yr=n})}rr(e){}containsKey(e,t){const n=new yp(t,0),i=this.Yr.firstAfterOrEqual(n);return mu.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,mu.resolve()}ti(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){const t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class bp{constructor(e){this.ni=e,this.docs=new $u(Xc.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,i=this.docs.get(n),r=i?i.size:0,s=this.ni(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return mu.resolve(n?n.document.mutableCopy():Hh.newInvalidDocument(t))}getEntries(e,t){let n=Rd();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Hh.newInvalidDocument(e))}),mu.resolve(n)}getDocumentsMatchingQuery(e,t,n,i){let r=Rd();const s=t.path,a=new Xc(s.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||hu(cu(a),n)<=0||(i.has(a.key)||Ad(t,a))&&(r=r.insert(a.key,a.mutableCopy()))}return mu.resolve(r)}getAllFromCollectionGroup(e,t,n,i){xc(9500)}ri(e,t){return mu.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new _p(this)}getSize(e){return mu.resolve(this.size)}}class _p extends hp{constructor(e){super(),this.Or=e}applyChanges(e){const t=[];return this.changes.forEach((n,i)=>{i.isValidDocument()?t.push(this.Or.addEntry(e,i)):this.Or.removeEntry(n)}),mu.waitFor(t)}getFromCache(e,t){return this.Or.getEntry(e,t)}getAllFromCache(e,t){return this.Or.getEntries(e,t)}}class wp{constructor(e){this.persistence=e,this.ii=new Ld(e=>pd(e),md),this.lastRemoteSnapshotVersion=su.min(),this.highestTargetId=0,this.si=0,this.oi=new vp,this.targetCount=0,this._i=ip.ar()}forEachTarget(e,t){return this.ii.forEach((e,n)=>t(n)),mu.resolve()}getLastRemoteSnapshotVersion(e){return mu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return mu.resolve(this.si)}allocateTargetId(e){return this.highestTargetId=this._i.next(),mu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.si&&(this.si=t),mu.resolve()}hr(e){this.ii.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this._i=new ip(t),this.highestTargetId=t),e.sequenceNumber>this.si&&(this.si=e.sequenceNumber)}addTargetData(e,t){return this.hr(t),this.targetCount+=1,mu.resolve()}updateTargetData(e,t){return this.hr(t),mu.resolve()}removeTargetData(e,t){return this.ii.delete(t.target),this.oi.zr(t.targetId),this.targetCount-=1,mu.resolve()}removeTargets(e,t,n){let i=0;const r=[];return this.ii.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.ii.delete(s),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),mu.waitFor(r).next(()=>i)}getTargetCount(e){return mu.resolve(this.targetCount)}getTargetData(e,t){const n=this.ii.get(t)||null;return mu.resolve(n)}addMatchingKeys(e,t,n){return this.oi.Kr(t,n),mu.resolve()}removeMatchingKeys(e,t,n){this.oi.Gr(t,n);const i=this.persistence.referenceDelegate,r=[];return i&&t.forEach(t=>{r.push(i.markPotentiallyOrphaned(e,t))}),mu.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.oi.zr(t),mu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.oi.Jr(t);return mu.resolve(n)}containsKey(e,t){return mu.resolve(this.oi.containsKey(t))}}class Sp{constructor(e,t){this.ai={},this.overlays={},this.ui=new yu(0),this.ci=!1,this.ci=!0,this.li=new gp,this.referenceDelegate=e(this),this.hi=new wp(this),this.indexManager=new Jf,this.remoteDocumentCache=function(e){return new bp(e)}(e=>this.referenceDelegate.Pi(e)),this.serializer=new Kf(t),this.Ti=new pp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ci=!1,Promise.resolve()}get started(){return this.ci}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new mp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ai[e.toKey()];return n||(n=new xp(t,this.referenceDelegate),this.ai[e.toKey()]=n),n}getGlobalsCache(){return this.li}getTargetCache(){return this.hi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ti}runTransaction(e,t,n){mc("MemoryPersistence","Starting transaction:",e);const i=new Mp(this.ui.next());return this.referenceDelegate.Ii(),n(i).next(e=>this.referenceDelegate.di(i).next(()=>e)).toPromise().then(e=>(i.raiseOnCommittedEvent(),e))}Ei(e,t){return mu.or(Object.values(this.ai).map(n=>()=>n.containsKey(e,t)))}}class Mp extends fu{constructor(e){super(),this.currentSequenceNumber=e}}class Cp{constructor(e){this.persistence=e,this.Ai=new vp,this.Ri=null}static Vi(e){return new Cp(e)}get mi(){if(this.Ri)return this.Ri;throw xc(60996)}addReference(e,t,n){return this.Ai.addReference(n,t),this.mi.delete(n.toString()),mu.resolve()}removeReference(e,t,n){return this.Ai.removeReference(n,t),this.mi.add(n.toString()),mu.resolve()}markPotentiallyOrphaned(e,t){return this.mi.add(t.toString()),mu.resolve()}removeTarget(e,t){this.Ai.zr(t.targetId).forEach(e=>this.mi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.mi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ii(){this.Ri=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return mu.forEach(this.mi,n=>{const i=Xc.fromPath(n);return this.fi(e,i).next(e=>{e||t.removeEntry(i,su.min())})}).next(()=>(this.Ri=null,t.apply(e)))}updateLimboDocument(e,t){return this.fi(e,t).next(e=>{e?this.mi.delete(t.toString()):this.mi.add(t.toString())})}Pi(e){return 0}fi(e,t){return mu.or([()=>mu.resolve(this.Ai.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class Ep{constructor(e,t){this.persistence=e,this.gi=new Ld(e=>Mu(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=up(this,t)}static Vi(e,t){return new Ep(e,t)}Ii(){}di(e){return mu.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}mr(e){const t=this.yr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}yr(e){let t=0;return this.gr(e,e=>{t++}).next(()=>t)}gr(e,t){return mu.forEach(this.gi,(n,i)=>this.Sr(e,n,i).next(e=>e?mu.resolve():t(i)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.ri(e,i=>this.Sr(e,i,t).next(e=>{e||(n++,r.removeEntry(i,su.min()))})).next(()=>r.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.gi.set(t,e.currentSequenceNumber),mu.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),mu.resolve()}removeReference(e,t,n){return this.gi.set(n,e.currentSequenceNumber),mu.resolve()}updateLimboDocument(e,t){return this.gi.set(t,e.currentSequenceNumber),mu.resolve()}Pi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Nh(e.data.value)),t}Sr(e,t,n){return mu.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.gi.get(t);return mu.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class Tp{constructor(e,t,n,i){this.targetId=e,this.fromCache=t,this.Is=n,this.ds=i}static Es(e,t){let n=Ud(),i=Ud();for(const r of t.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new Tp(e,t.fromCache,n,i)}}class Ap{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class kp{constructor(){this.As=!1,this.Rs=!1,this.Vs=100,this.fs=vo()?8:gu(mo())>0?6:4}initialize(e,t){this.gs=e,this.indexManager=t,this.As=!0}getDocumentsMatchingQuery(e,t,n,i){const r={result:null};return this.ps(e,t).next(e=>{r.result=e}).next(()=>{if(!r.result)return this.ys(e,t,i,n).next(e=>{r.result=e})}).next(()=>{if(r.result)return;const n=new Ap;return this.ws(e,t,n).next(i=>{if(r.result=i,this.Rs)return this.Ss(e,t,n,i.size)})}).next(()=>r.result)}Ss(e,t,n,i){return n.documentReadCount<this.Vs?(pc()<=Po.DEBUG&&mc("QueryEngine","SDK will not create cache indexes for query:",Td(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),mu.resolve()):(pc()<=Po.DEBUG&&mc("QueryEngine","Query:",Td(t),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.fs*i?(pc()<=Po.DEBUG&&mc("QueryEngine","The SDK decides to create cache indexes for query:",Td(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,wd(t))):mu.resolve())}ps(e,t){if(xd(t))return mu.resolve(null);let n=wd(t);return this.indexManager.getIndexType(e,n).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Md(t,null,"F"),n=wd(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const r=Ud(...i);return this.gs.getDocuments(e,r).next(i=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.bs(t,i);return this.Ds(t,s,r,n.readTime)?this.ps(e,Md(t,null,"F")):this.vs(e,s,t,n)}))})))}ys(e,t,n,i){return xd(t)||i.isEqual(su.min())?mu.resolve(null):this.gs.getDocuments(e,n).next(r=>{const s=this.bs(t,r);return this.Ds(t,s,n,i)?mu.resolve(null):(pc()<=Po.DEBUG&&mc("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Td(t)),this.vs(e,s,t,lu(i,au)).next(e=>e))})}bs(e,t){let n=new nh(kd(e));return t.forEach((t,i)=>{Ad(e,i)&&(n=n.add(i))}),n}Ds(e,t,n,i){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}ws(e,t,n){return pc()<=Po.DEBUG&&mc("QueryEngine","Using full collection scan to execute query:",Td(t)),this.gs.getDocumentsMatchingQuery(e,t,uu.min(),n)}vs(e,t,n,i){return this.gs.getDocumentsMatchingQuery(e,n,i).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Pp="LocalStore";class Lp{constructor(e,t,n,i){this.persistence=e,this.Cs=t,this.serializer=i,this.Fs=new $u(zc),this.Ms=new Ld(e=>pd(e),md),this.xs=new Map,this.Os=e.getRemoteDocumentCache(),this.hi=e.getTargetCache(),this.Ti=e.getBundleCache(),this.Ns(n)}Ns(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fp(this.Os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Os.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Fs))}}function Dp(e,t,n,i){return new Lp(e,t,n,i)}async function Rp(e,t){const n=wc(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let i;return n.mutationQueue.getAllMutationBatches(e).next(r=>(i=r,n.Ns(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const r=[],s=[];let a=Ud();for(const e of i){r.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Bs:e,removedBatchIds:r,addedBatchIds:s}))})})}function Np(e){const t=wc(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.hi.getLastRemoteSnapshotVersion(e))}function Ip(e,t){const n=wc(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=xu),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}class Op{constructor(){this.activeTargetIds=Wd()}Gs(e){this.activeTargetIds=this.activeTargetIds.add(e)}zs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zp{constructor(){this.Fo=new Op,this.Mo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Fo.Gs(e),this.Mo[e]||"not-current"}updateQueryState(e,t,n){this.Mo[e]=t}removeLocalQueryTarget(e){this.Fo.zs(e)}isLocalQueryTarget(e){return this.Fo.activeTargetIds.has(e)}clearQueryState(e){delete this.Mo[e]}getAllActiveQueryTargets(){return this.Fo.activeTargetIds}isActiveQueryTarget(e){return this.Fo.activeTargetIds.has(e)}start(){return this.Fo=new Op,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Fp{xo(e){}shutdown(){}}const jp="ConnectivityMonitor";class Bp{constructor(){this.Oo=()=>this.No(),this.Bo=()=>this.Lo(),this.ko=[],this.qo()}xo(e){this.ko.push(e)}shutdown(){window.removeEventListener("online",this.Oo),window.removeEventListener("offline",this.Bo)}qo(){window.addEventListener("online",this.Oo),window.addEventListener("offline",this.Bo)}No(){mc(jp,"Network connectivity changed: AVAILABLE");for(const e of this.ko)e(0)}Lo(){mc(jp,"Network connectivity changed: UNAVAILABLE");for(const e of this.ko)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Vp=null;function Up(){return null===Vp?Vp=268435456+Math.round(2147483648*Math.random()):Vp++,"0x"+Vp.toString(16)}const Hp="RestConnection",Wp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Gp{get Qo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.$o=t+"://"+e.host,this.Uo="projects/".concat(n,"/databases/").concat(i),this.Ko=this.databaseId.database===xh?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(i)}Wo(e,t,n,i,r){const s=Up(),a=this.Go(e,t.toUriEncodedString());mc(Hp,"Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.Ko};this.zo(o,i,r);const{host:l}=new URL(a),c=uo(l);return this.jo(e,a,o,n,c).then(t=>(mc(Hp,"Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw vc(Hp,"RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}Jo(e,t,n,i,r,s){return this.Wo(e,t,n,i,r)}zo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+dc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}Go(e,t){const n=Wp[e];return"".concat(this.$o,"/v1/").concat(t,":").concat(n)}terminate(){}}class qp{constructor(e){this.Ho=e.Ho,this.Yo=e.Yo}Zo(e){this.Xo=e}e_(e){this.t_=e}n_(e){this.r_=e}onMessage(e){this.i_=e}close(){this.Yo()}send(e){this.Ho(e)}s_(){this.Xo()}o_(){this.t_()}__(e){this.r_(e)}a_(e){this.i_(e)}}const Xp="WebChannelConnection";class Yp extends Gp{constructor(e){super(e),this.u_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}jo(e,t,n,i,r){const s=Up();return new Promise((r,a)=>{const o=new $l;o.setWithCredentials(!0),o.listenOnce(tc.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case nc.NO_ERROR:const t=o.getResponseJson();mc(Xp,"XHR for RPC '".concat(e,"' ").concat(s," received:"),JSON.stringify(t)),r(t);break;case nc.TIMEOUT:mc(Xp,"RPC '".concat(e,"' ").concat(s," timed out")),a(new Mc(Sc.DEADLINE_EXCEEDED,"Request time out"));break;case nc.HTTP_ERROR:const n=o.getStatus();if(mc(Xp,"RPC '".concat(e,"' ").concat(s," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Sc).indexOf(t)>=0?t:Sc.UNKNOWN}(t.status);a(new Mc(e,t.message))}else a(new Mc(Sc.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Mc(Sc.UNAVAILABLE,"Connection failed."));break;default:xc(9055,{c_:e,streamId:s,l_:o.getLastErrorCode(),h_:o.getLastError()})}}finally{mc(Xp,"RPC '".concat(e,"' ").concat(s," completed."))}});const l=JSON.stringify(i);mc(Xp,"RPC '".concat(e,"' ").concat(s," sending request:"),i),o.send(t,"POST",l,n,15)})}P_(e,t,n){const i=Up(),r=[this.$o,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=ac(),a=sc(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.zo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=r.join("");mc(Xp,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(c),o);const u=s.createWebChannel(c,o);this.T_(u);let h=!1,d=!1;const f=new qp({Ho:t=>{d?mc(Xp,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),t):(h||(mc(Xp,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),u.open(),h=!0),mc(Xp,"RPC '".concat(e,"' stream ").concat(i," sending:"),t),u.send(t))},Yo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,ec.EventType.OPEN,()=>{d||(mc(Xp,"RPC '".concat(e,"' stream ").concat(i," transport opened.")),f.s_())}),p(u,ec.EventType.CLOSE,()=>{d||(d=!0,mc(Xp,"RPC '".concat(e,"' stream ").concat(i," transport closed")),f.__(),this.I_(u))}),p(u,ec.EventType.ERROR,t=>{d||(d=!0,vc(Xp,"RPC '".concat(e,"' stream ").concat(i," transport errored. Name:"),t.name,"Message:",t.message),f.__(new Mc(Sc.UNAVAILABLE,"The operation could not be completed")))}),p(u,ec.EventType.MESSAGE,t=>{var n;if(!d){const r=t.data[0];_c(!!r,16349);const s=r,a=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){mc(Xp,"RPC '".concat(e,"' stream ").concat(i," received error:"),a);const t=a.status;let n=function(e){const t=Ef[e];if(void 0!==t)return kf(t)}(t),r=a.message;void 0===n&&(n=Sc.INTERNAL,r="Unknown error status: "+t+" with message "+a.message),d=!0,f.__(new Mc(n,r)),u.close()}else mc(Xp,"RPC '".concat(e,"' stream ").concat(i," received:"),r),f.a_(r)}}),p(a,rc.STAT_EVENT,t=>{t.stat===ic.PROXY?mc(Xp,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):t.stat===ic.NOPROXY&&mc(Xp,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))}),setTimeout(()=>{f.o_()},0),f}terminate(){this.u_.forEach(e=>e.close()),this.u_=[]}T_(e){this.u_.push(e)}I_(e){this.u_=this.u_.filter(t=>t===e)}}function Kp(){return"undefined"!=typeof document?document:null}function Zp(e){return new Pf(e,!0)}class Qp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Fi=e,this.timerId=t,this.d_=n,this.E_=i,this.A_=r,this.R_=0,this.V_=null,this.m_=Date.now(),this.reset()}reset(){this.R_=0}f_(){this.R_=this.A_}g_(e){this.cancel();const t=Math.floor(this.R_+this.p_()),n=Math.max(0,Date.now()-this.m_),i=Math.max(0,t-n);i>0&&mc("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.R_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.V_=this.Fi.enqueueAfterDelay(this.timerId,i,()=>(this.m_=Date.now(),e())),this.R_*=this.E_,this.R_<this.d_&&(this.R_=this.d_),this.R_>this.A_&&(this.R_=this.A_)}y_(){null!==this.V_&&(this.V_.skipDelay(),this.V_=null)}cancel(){null!==this.V_&&(this.V_.cancel(),this.V_=null)}p_(){return(Math.random()-.5)*this.R_}}const Jp="PersistentStream";class $p{constructor(e,t,n,i,r,s,a,o){this.Fi=e,this.w_=n,this.S_=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.b_=0,this.D_=null,this.v_=null,this.stream=null,this.C_=0,this.F_=new Qp(e,t)}M_(){return 1===this.state||5===this.state||this.x_()}x_(){return 2===this.state||3===this.state}start(){this.C_=0,4!==this.state?this.auth():this.O_()}async stop(){this.M_()&&await this.close(0)}N_(){this.state=0,this.F_.reset()}B_(){this.x_()&&null===this.D_&&(this.D_=this.Fi.enqueueAfterDelay(this.w_,6e4,()=>this.L_()))}k_(e){this.q_(),this.stream.send(e)}async L_(){if(this.x_())return this.close(0)}q_(){this.D_&&(this.D_.cancel(),this.D_=null)}Q_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.Q_(),this.F_.cancel(),this.b_++,4!==e?this.F_.reset():t&&t.code===Sc.RESOURCE_EXHAUSTED?(gc(t.toString()),gc("Using maximum backoff delay to prevent overloading the backend."),this.F_.f_()):t&&t.code===Sc.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.U_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.n_(t)}U_(){}auth(){this.state=1;const e=this.K_(this.b_),t=this.b_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,i]=e;this.b_===t&&this.W_(n,i)},t=>{e(()=>{const e=new Mc(Sc.UNKNOWN,"Fetching auth token failed: "+t.message);return this.G_(e)})})}W_(e,t){const n=this.K_(this.b_);this.stream=this.z_(e,t),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.e_(()=>{n(()=>(this.state=2,this.v_=this.Fi.enqueueAfterDelay(this.S_,1e4,()=>(this.x_()&&(this.state=3),Promise.resolve())),this.listener.e_()))}),this.stream.n_(e=>{n(()=>this.G_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.C_?this.j_(e):this.onNext(e))})}O_(){this.state=5,this.F_.g_(async()=>{this.state=0,this.start()})}G_(e){return mc(Jp,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}K_(e){return t=>{this.Fi.enqueueAndForget(()=>this.b_===e?t():(mc(Jp,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class em extends $p{constructor(e,t,n,i,r,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i,s),this.serializer=r}get Z_(){return this.C_>0}start(){this.lastStreamToken=void 0,super.start()}U_(){this.Z_&&this.X_([])}z_(e,t){return this.connection.P_("Write",e,t)}j_(e){return _c(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,_c(!e.writeResults||0===e.writeResults.length,55816),this.listener.ea()}onNext(e){_c(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.F_.reset();const t=function(e,t){return e&&e.length>0?(_c(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?Nf(e.updateTime):Nf(t);return n.isEqual(su.min())&&(n=Nf(t)),new of(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Nf(e.commitTime);return this.listener.ta(n,t)}na(){const e={};e.database=Bf(this.serializer),this.k_(e)}X_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Hf(this.serializer,e))};this.k_(t)}}class tm{}class nm extends tm{constructor(e,t,n,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=i,this.ra=!1}ia(){if(this.ra)throw new Mc(Sc.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,n,i){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[s,a]=r;return this.connection.Wo(e,Of(t,n),i,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Sc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Mc(Sc.UNKNOWN,e.toString())})}Jo(e,t,n,i,r){return this.ia(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.Jo(e,Of(t,n),i,a,o,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Sc.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Mc(Sc.UNKNOWN,e.toString())})}terminate(){this.ra=!0,this.connection.terminate()}}class im{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.sa=0,this.oa=null,this._a=!0}aa(){0===this.sa&&(this.ua("Unknown"),this.oa=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.oa=null,this.ca("Backend didn't respond within 10 seconds."),this.ua("Offline"),Promise.resolve())))}la(e){"Online"===this.state?this.ua("Unknown"):(this.sa++,this.sa>=1&&(this.ha(),this.ca("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ua("Offline")))}set(e){this.ha(),this.sa=0,"Online"===e&&(this._a=!1),this.ua(e)}ua(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ca(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this._a?(gc(t),this._a=!1):mc("OnlineStateTracker",t)}ha(){null!==this.oa&&(this.oa.cancel(),this.oa=null)}}const rm="RemoteStore";class sm{constructor(e,t,n,i,r){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Pa=[],this.Ta=new Map,this.Ia=new Set,this.da=[],this.Ea=r,this.Ea.xo(e=>{n.enqueueAndForget(async()=>{lm(this)&&(mc(rm,"Restarting streams for network reachability change."),await async function(e){const t=wc(e);t.Ia.add(4),await om(t),t.Aa.set("Unknown"),t.Ia.delete(4),await am(t)}(this))})}),this.Aa=new im(n,i)}}async function am(e){if(lm(e))for(const t of e.da)await t(!0)}async function om(e){for(const t of e.da)await t(!1)}function lm(e){return 0===wc(e).Ia.size}async function cm(e,t,n){if(!vu(t))throw t;e.Ia.add(1),await om(e),e.Aa.set("Offline"),n||(n=()=>Np(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{mc(rm,"Retrying IndexedDB access"),await n(),e.Ia.delete(1),await am(e)})}function um(e,t){return t().catch(n=>cm(e,n,t))}async function hm(e){const t=wc(e),n=wm(t);let i=t.Pa.length>0?t.Pa[t.Pa.length-1].batchId:xu;for(;dm(t);)try{const e=await Ip(t.localStore,i);if(null===e){0===t.Pa.length&&n.B_();break}i=e.batchId,fm(t,e)}catch(e){await cm(t,e)}pm(t)&&mm(t)}function dm(e){return lm(e)&&e.Pa.length<10}function fm(e,t){e.Pa.push(t);const n=wm(e);n.x_()&&n.Z_&&n.X_(t.mutations)}function pm(e){return lm(e)&&!wm(e).M_()&&e.Pa.length>0}function mm(e){wm(e).start()}async function gm(e){wm(e).na()}async function vm(e){const t=wm(e);for(const n of e.Pa)t.X_(n.mutations)}async function ym(e,t,n){const i=e.Pa.shift(),r=Mf.from(i,t,n);await um(e,()=>e.remoteSyncer.applySuccessfulWrite(r)),await hm(e)}async function xm(e,t){t&&wm(e).Z_&&await async function(e,t){if(function(e){return Af(e)&&e!==Sc.ABORTED}(t.code)){const n=e.Pa.shift();wm(e).N_(),await um(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await hm(e)}}(e,t),pm(e)&&mm(e)}async function bm(e,t){const n=wc(e);n.asyncQueue.verifyOperationInProgress(),mc(rm,"RemoteStore received new credentials");const i=lm(n);n.Ia.add(3),await om(n),i&&n.Aa.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ia.delete(3),await am(n)}async function _m(e,t){const n=wc(e);t?(n.Ia.delete(2),await am(n)):t||(n.Ia.add(2),await om(n),n.Aa.set("Unknown"))}function wm(e){return e.ma||(e.ma=function(e,t,n){const i=wc(e);return i.ia(),new em(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(e.datastore,e.asyncQueue,{Zo:()=>Promise.resolve(),e_:gm.bind(null,e),n_:xm.bind(null,e),ea:vm.bind(null,e),ta:ym.bind(null,e)}),e.da.push(async t=>{t?(e.ma.N_(),await hm(e)):(await e.ma.stop(),e.Pa.length>0&&(mc(rm,"Stopping write stream with ".concat(e.Pa.length," pending writes")),e.Pa=[]))})),e.ma}class Sm{constructor(e,t,n,i,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new Cc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,i,r){const s=Date.now()+n,a=new Sm(e,t,s,i,r);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Mc(Sc.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Mm(e,t){if(gc("AsyncQueue","".concat(t,": ").concat(e)),vu(e))return new Mc(Sc.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Cm{constructor(){this.queries=Em(),this.onlineState="Unknown",this.Da=new Set}terminate(){!function(e,t){const n=wc(e),i=n.queries;n.queries=Em(),i.forEach((e,n)=>{for(const i of n.wa)i.onError(t)})}(this,new Mc(Sc.ABORTED,"Firestore shutting down"))}}function Em(){return new Ld(e=>Ed(e),Cd)}function Tm(e){e.Da.forEach(e=>{e.next()})}var Am,km;(km=Am||(Am={})).Fa="default",km.Cache="cache";const Pm="SyncEngine";class Lm{constructor(e,t,n,i,r,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.hu={},this.Pu=new Ld(e=>Ed(e),Cd),this.Tu=new Map,this.Iu=new Set,this.du=new $u(Xc.comparator),this.Eu=new Map,this.Au=new vp,this.Ru={},this.Vu=new Map,this.mu=ip.ur(),this.onlineState="Unknown",this.fu=void 0}get isPrimaryClient(){return!0===this.fu}}function Dm(e,t,n){const i=wc(e);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const e=[];i.Pu.forEach((n,i)=>{const r=i.view.va(t);r.snapshot&&e.push(r.snapshot)}),function(e,t){const n=wc(e);n.onlineState=t;let i=!1;n.queries.forEach((e,n)=>{for(const r of n.wa)r.va(t)&&(i=!0)}),i&&Tm(n)}(i.eventManager,t),e.length&&i.hu.J_(e),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}async function Rm(e,t){const n=wc(e),i=t.batch.batchId;try{const e=await function(e,t){const n=wc(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const i=t.batch.keys(),r=n.Os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,i){const r=n.batch,s=r.keys();let a=mu.resolve();return s.forEach(e=>{a=a.next(()=>i.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);_c(null!==s,48541),t.version.compareTo(s)<0&&(r.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),i.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,r))}(n,e,t,r).next(()=>r.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Ud();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,i))})}(n.localStore,t);Om(n,i,null),Im(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await zm(n,e)}catch(e){await pu(e)}}async function Nm(e,t,n){const i=wc(e);try{const e=await function(e,t){const n=wc(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let i;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(_c(null!==t,37113),i=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,i,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,i)).next(()=>n.localDocuments.getDocuments(e,i))})}(i.localStore,t);Om(i,t,n),Im(i,t),i.sharedClientState.updateMutationState(t,"rejected",n),await zm(i,e)}catch(n){await pu(n)}}function Im(e,t){(e.Vu.get(t)||[]).forEach(e=>{e.resolve()}),e.Vu.delete(t)}function Om(e,t,n){const i=wc(e);let r=i.Ru[i.currentUser.toKey()];if(r){const e=r.get(t);e&&(n?e.reject(n):e.resolve(),r=r.remove(t)),i.Ru[i.currentUser.toKey()]=r}}async function zm(e,t,n){const i=wc(e),r=[],s=[],a=[];i.Pu.isEmpty()||(i.Pu.forEach((e,o)=>{a.push(i.gu(o,t,n).then(e=>{var t;if((e||n)&&i.isPrimaryClient){const r=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;i.sharedClientState.updateQueryState(o.targetId,r?"current":"not-current")}if(e){r.push(e);const t=Tp.Es(o.targetId,e);s.push(t)}}))}),await Promise.all(a),i.hu.J_(r),await async function(e,t){const n=wc(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>mu.forEach(t,t=>mu.forEach(t.Is,i=>n.persistence.referenceDelegate.addReference(e,t.targetId,i)).next(()=>mu.forEach(t.ds,i=>n.persistence.referenceDelegate.removeReference(e,t.targetId,i)))))}catch(e){if(!vu(e))throw e;mc(Pp,"Failed to update sequence numbers: "+e)}for(const i of t){const e=i.targetId;if(!i.fromCache){const t=n.Fs.get(e),i=t.snapshotVersion,r=t.withLastLimboFreeSnapshotVersion(i);n.Fs=n.Fs.insert(e,r)}}}(i.localStore,s))}async function Fm(e,t){const n=wc(e);if(!n.currentUser.isEqual(t)){mc(Pm,"User change. New user:",t.toKey());const e=await Rp(n.localStore,t);n.currentUser=t,function(e,t){e.Vu.forEach(e=>{e.forEach(e=>{e.reject(new Mc(Sc.CANCELLED,t))})}),e.Vu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await zm(n,e.Bs)}}function jm(e){const t=wc(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Rm.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Nm.bind(null,t),t}class Bm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zp(e.databaseInfo.databaseId),this.sharedClientState=this.bu(e),this.persistence=this.Du(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Cu(e,this.localStore),this.indexBackfillerScheduler=this.Fu(e,this.localStore)}Cu(e,t){return null}Fu(e,t){return null}vu(e){return Dp(this.persistence,new kp,e.initialUser,this.serializer)}Du(e){return new Sp(Cp.Vi,this.serializer)}bu(e){return new zp}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Bm.provider={build:()=>new Bm};class Vm extends Bm{constructor(e){super(),this.cacheSizeBytes=e}Cu(e,t){_c(this.persistence.referenceDelegate instanceof Ep,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new lp(n,e.asyncQueue,t)}Du(e){const t=void 0!==this.cacheSizeBytes?np.withCacheSize(this.cacheSizeBytes):np.DEFAULT;return new Sp(e=>Ep.Vi(e,t),this.serializer)}}class Um{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Dm(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Fm.bind(null,this.syncEngine),await _m(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new Cm}createDatastore(e){const t=Zp(e.databaseInfo.databaseId),n=function(e){return new Yp(e)}(e.databaseInfo);return function(e,t,n,i){return new nm(e,t,n,i)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,i,r){return new sm(e,t,n,i,r)}(this.localStore,this.datastore,e.asyncQueue,e=>Dm(this.syncEngine,e,0),Bp.C()?new Bp:new Fp)}createSyncEngine(e,t){return function(e,t,n,i,r,s,a){const o=new Lm(e,t,n,i,r,s);return a&&(o.fu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=wc(e);mc(rm,"RemoteStore shutting down."),t.Ia.add(5),await om(t),t.Ea.shutdown(),t.Aa.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}Um.provider={build:()=>new Um};const Hm="FirestoreClient";class Wm{constructor(e,t,n,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=i,this.user=hc.UNAUTHENTICATED,this.clientId=Oc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(n,async e=>{mc(Hm,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(mc(Hm,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Cc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Gg){const n=Mm(Gg,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Gm(e,t){e.asyncQueue.verifyOperationInProgress(),mc(Hm,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let i=n.initialUser;e.setCredentialChangeListener(async e=>{i.isEqual(e)||(await Rp(t.localStore,e),i=e)}),t.persistence.setDatabaseDeletedListener(()=>{vc("Terminating Firestore due to IndexedDb database deletion"),e.terminate().then(()=>{mc("Terminating Firestore due to IndexedDb database deletion completed successfully")}).catch(e=>{vc("Terminating Firestore due to IndexedDb database deletion failed",e)})}),e._offlineComponents=t}async function qm(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Xm(e);mc(Hm,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>bm(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>bm(t.remoteStore,n)),e._onlineComponents=t}async function Xm(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){mc(Hm,"Using user provided OfflineComponentProvider");try{await Gm(e,e._uninitializedComponentsProvider._offline)}catch(Gg){const n=Gg;if(!function(e){return"FirebaseError"===e.name?e.code===Sc.FAILED_PRECONDITION||e.code===Sc.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;vc("Error using user provided cache. Falling back to memory cache: "+n),await Gm(e,new Bm)}}else mc(Hm,"Using default OfflineComponentProvider"),await Gm(e,new Vm(void 0));return e._offlineComponents}async function Ym(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(mc(Hm,"Using user provided OnlineComponentProvider"),await qm(e,e._uninitializedComponentsProvider._online)):(mc(Hm,"Using default OnlineComponentProvider"),await qm(e,new Um))),e._onlineComponents}function Km(e){return Ym(e).then(e=>e.syncEngine)}function Zm(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Qm=new Map,Jm="firestore.googleapis.com",$m=!0;class eg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Mc(Sc.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jm,this.ssl=$m}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:$m;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=tp;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<sp)throw new Mc(Sc.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,i){if(!0===t&&!0===i)throw new Mc(Sc.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Zm(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Mc(Sc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Mc(Sc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Mc(Sc.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class tg{constructor(e,t,n,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Mc(Sc.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Mc(Sc.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eg(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Tc;switch(e.type){case"firstParty":return new Lc(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Mc(Sc.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Qm.get(e);t&&(mc("ComponentProvider","Removing Datastore"),Qm.delete(e),t.terminate())}(this),Promise.resolve()}}function ng(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var r;e=$c(e,tg);const s=uo(t),a=e._getSettings(),o=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),l="".concat(t,":").concat(n);s&&(async function(e){(await fetch(e,{credentials:"include"})).ok}("https://".concat(l)),po("Firestore",!0)),a.host!==Jm&&a.host!==l&&vc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c=Object.assign(Object.assign({},a),{host:l,ssl:s,emulatorOptions:i});if(!wo(c,o)&&(e._setSettings(c),i.mockUserToken)){let t,n;if("string"==typeof i.mockUserToken)t=i.mockUserToken,n=hc.MOCK_USER;else{t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",i=e.iat||0,r=e.sub||e.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:i,exp:i+3600,auth_time:i,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}}},e);return[io(JSON.stringify({alg:"none",type:"JWT"})),io(JSON.stringify(s)),""].join(".")}(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Mc(Sc.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new hc(s)}e._authCredentials=new Ac(new Ec(t,n))}}class ig{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ig(this.firestore,e,this._query)}}class rg{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new sg(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rg(this.firestore,e,this._key)}toJSON(){return{type:rg._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(tu(t,rg._jsonSchema))return new rg(e,n||null,new Xc(Wc.fromString(t.referencePath)))}}rg._jsonSchemaVersion="firestore/documentReference/1.0",rg._jsonSchema={type:eu("string",rg._jsonSchemaVersion),referencePath:eu("string")};class sg extends ig{constructor(e,t,n){super(e,t,yd(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rg(this.firestore,null,new Xc(e))}withConverter(e){return new sg(this.firestore,e,this._path)}}const ag="AsyncQueue";class og{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Zu=[],this.Xu=!1,this.ec=[],this.tc=null,this.nc=!1,this.rc=!1,this.sc=[],this.F_=new Qp(this,"async_queue_retry"),this.oc=()=>{const e=Kp();e&&mc(ag,"Visibility state changed to "+e.visibilityState),this.F_.y_()},this._c=e;const t=Kp();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.oc)}get isShuttingDown(){return this.Xu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.ac(),this.uc(e)}enterRestrictedMode(e){if(!this.Xu){this.Xu=!0,this.rc=e||!1;const t=Kp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.oc)}}enqueue(e){if(this.ac(),this.Xu)return new Promise(()=>{});const t=new Cc;return this.uc(()=>this.Xu&&this.rc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Zu.push(e),this.cc()))}async cc(){if(0!==this.Zu.length){try{await this.Zu[0](),this.Zu.shift(),this.F_.reset()}catch(Kg){if(!vu(Kg))throw Kg;mc(ag,"Operation failed with retryable error: "+Kg)}this.Zu.length>0&&this.F_.g_(()=>this.cc())}}uc(e){const t=this._c.then(()=>(this.nc=!0,e().catch(e=>{throw this.tc=e,this.nc=!1,gc("INTERNAL UNHANDLED ERROR: ",lg(e)),e}).then(e=>(this.nc=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.ac(),this.sc.indexOf(e)>-1&&(t=0);const i=Sm.createAndSchedule(this,e,t,n,e=>this.lc(e));return this.ec.push(i),i}ac(){this.tc&&xc(47125,{hc:lg(this.tc)})}verifyOperationInProgress(){}async Pc(){let e;do{e=this._c,await e}while(e!==this._c)}Tc(e){for(const t of this.ec)if(t.timerId===e)return!0;return!1}Ic(e){return this.Pc().then(()=>{this.ec.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.ec)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Pc()})}dc(e){this.sc.push(e)}lc(e){const t=this.ec.indexOf(e);this.ec.splice(t,1)}}function lg(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class cg extends tg{constructor(e,t,n,i){super(e,t,n,i),this.type="firestore",this._queue=new og,this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new og(e),this._firestoreClient=void 0,await e}}}function ug(e){if(e._terminated)throw new Mc(Sc.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||hg(e),e._firestoreClient}function hg(e){var t,n,i;const r=e._freezeSettings(),s=function(e,t,n,i){return new yh(e,t,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,Zm(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,r);e._componentsProvider||(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(e._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),e._firestoreClient=new Wm(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class dg{constructor(e){this._byteString=e}static fromBase64String(e){try{return new dg(ah.fromBase64String(e))}catch(e){throw new Mc(Sc.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new dg(ah.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:dg._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tu(e,dg._jsonSchema))return dg.fromBase64String(e.bytes)}}dg._jsonSchemaVersion="firestore/bytes/1.0",dg._jsonSchema={type:eu("string",dg._jsonSchemaVersion),bytes:eu("string")};class fg{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let i=0;i<t.length;++i)if(0===t[i].length)throw new Mc(Sc.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qc(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pg{constructor(e){this._methodName=e}}class mg{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Mc(Sc.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Mc(Sc.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return zc(this._lat,e._lat)||zc(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mg._jsonSchemaVersion}}static fromJSON(e){if(tu(e,mg._jsonSchema))return new mg(e.latitude,e.longitude)}}mg._jsonSchemaVersion="firestore/geoPoint/1.0",mg._jsonSchema={type:eu("string",mg._jsonSchemaVersion),latitude:eu("number"),longitude:eu("number")};class gg{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:gg._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tu(e,gg._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new gg(e.vectorValues);throw new Mc(Sc.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}gg._jsonSchemaVersion="firestore/vectorValue/1.0",gg._jsonSchema={type:eu("string",gg._jsonSchemaVersion),vectorValues:eu("object")};const vg=/^__.*__$/;class yg{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new vf(e,this.data,this.fieldMask,t,this.fieldTransforms):new gf(e,this.data,t,this.fieldTransforms)}}function xg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw xc(40011,{Ec:e})}}class bg{constructor(e,t,n,i,r,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Ac(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ec(){return this.settings.Ec}Rc(e){return new bg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Vc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Rc({path:n,mc:!1});return i.fc(e),i}gc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Rc({path:n,mc:!1});return i.Ac(),i}yc(e){return this.Rc({path:void 0,mc:!0})}wc(e){return Lg(e,this.settings.methodName,this.settings.Sc||!1,this.path,this.settings.bc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Ac(){if(this.path)for(let e=0;e<this.path.length;e++)this.fc(this.path.get(e))}fc(e){if(0===e.length)throw this.wc("Document fields must not be empty");if(xg(this.Ec)&&vg.test(e))throw this.wc('Document fields cannot begin and end with "__"')}}class _g{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Zp(e)}Dc(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new bg({Ec:e,methodName:t,bc:n,path:qc.emptyPath(),mc:!1,Sc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function wg(e){const t=e._freezeSettings(),n=Zp(e._databaseId);return new _g(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Sg(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Dc(s.merge||s.mergeFields?2:0,t,n,r);Tg("Data must be an object, but it was:",a,i);const o=Cg(i,a);let l,c;if(s.merge)l=new rh(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const i of s.mergeFields){const r=Ag(t,i,n);if(!a.contains(r))throw new Mc(Sc.INVALID_ARGUMENT,"Field '".concat(r,"' is specified in your field mask but missing from your input data."));Dg(e,r)||e.push(r)}l=new rh(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new yg(new Vh(o),l,c)}function Mg(e,t){if(Eg(e=Mo(e)))return Tg("Unsupported field value:",t,e),Cg(e,t);if(e instanceof pg)return function(e,t){if(!xg(t.Ec))throw t.wc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.wc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.mc&&4!==t.Ec)throw t.wc("Nested arrays are not supported");return function(e,t){const n=[];let i=0;for(const r of e){let e=Mg(r,t.yc(i));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),i++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Mo(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Xd(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ru.fromDate(e);return{timestampValue:Lf(t.serializer,n)}}if(e instanceof ru){const n=new ru(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Lf(t.serializer,n)}}if(e instanceof mg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof dg)return{bytesValue:Df(t.serializer,e._byteString)};if(e instanceof rg){const n=t.databaseId,i=e.firestore._databaseId;if(!i.isEqual(n))throw t.wc("Document reference is for database ".concat(i.projectId,"/").concat(i.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:If(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof gg)return function(e,t){return{mapValue:{fields:{[_h]:{stringValue:Mh},[Ch]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.wc("VectorValues must only contain numeric values.");return Gd(t.serializer,e)})}}}}}}(e,t);throw t.wc("Unsupported field value: ".concat(Jc(e)))}(e,t)}function Cg(e,t){const n={};return Ju(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Qu(e,(e,i)=>{const r=Mg(i,t.Vc(e));null!=r&&(n[e]=r)}),{mapValue:{fields:n}}}function Eg(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ru||e instanceof mg||e instanceof dg||e instanceof rg||e instanceof pg||e instanceof gg)}function Tg(e,t,n){if(!Eg(n)||!Qc(n)){const i=Jc(n);throw"an object"===i?t.wc(e+" a custom object"):t.wc(e+" "+i)}}function Ag(e,t,n){if((t=Mo(t))instanceof fg)return t._internalPath;if("string"==typeof t)return Pg(e,t);throw Lg("Field path arguments must be of type string or ",e,!1,void 0,n)}const kg=new RegExp("[~\\*/\\[\\]]");function Pg(e,t,n){if(t.search(kg)>=0)throw Lg("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new fg(...t.split("."))._internalPath}catch(qg){throw Lg("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Lg(e,t,n,i,r){const s=i&&!i.isEmpty(),a=void 0!==r;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(i)),a&&(l+=" in document ".concat(r)),l+=")"),new Mc(Sc.INVALID_ARGUMENT,o+e+l)}function Dg(e,t){return e.some(e=>e.isEqual(t))}class Rg{constructor(e,t,n,i,r){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new rg(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Ng(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ig("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Ng extends Rg{data(){return super.data()}}function Ig(e,t){return"string"==typeof t?Pg(e,t):t instanceof fg?t._internalPath:t._delegate._internalPath}function Og(e,t,n){let i;return i=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,i}class zg{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Fg extends Rg{constructor(e,t,n,i,r,s){super(e,t,n,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new jg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Ig("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Mc(Sc.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Fg._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}Fg._jsonSchemaVersion="firestore/documentSnapshot/1.0",Fg._jsonSchema={type:eu("string",Fg._jsonSchemaVersion),bundleSource:eu("string","DocumentSnapshot"),bundleName:eu("string"),bundle:eu("string")};class jg extends Fg{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Bg{constructor(e,t,n,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new zg(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new jg(this._firestore,this._userDataWriter,n.key,n,new zg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Mc(Sc.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const i=new jg(e._firestore,e._userDataWriter,n.doc.key,n.doc,new zg(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const i=new jg(e._firestore,e._userDataWriter,t.doc.key,t.doc,new zg(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let r=-1,s=-1;return 0!==t.type&&(r=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Vg(t.type),doc:i,oldIndex:r,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Mc(Sc.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Bg._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Oc.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],i=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),i.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Vg(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return xc(61501,{type:e})}}Bg._jsonSchemaVersion="firestore/querySnapshot/1.0",Bg._jsonSchema={type:eu("string",Bg._jsonSchemaVersion),bundleSource:eu("string","QuerySnapshot"),bundleName:eu("string"),bundle:eu("string")};function Ug(e,t){const n=$c(e.firestore,cg),i=function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=Mo(e),1===arguments.length&&(t=Oc.newId()),Yc("doc","path",t),e instanceof tg){const n=Wc.fromString(t,...i);return Kc(n),new rg(e,null,new Xc(n))}{if(!(e instanceof rg||e instanceof sg))throw new Mc(Sc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Wc.fromString(t,...i));return Kc(n),new rg(e.firestore,e instanceof sg?e.converter:null,new Xc(n))}}(e),r=Og(e.converter,t);return Hg(n,[Sg(wg(e.firestore),"addDoc",i._key,r,null!==e.converter,{}).toMutation(i._key,lf.exists(!1))]).then(()=>i)}function Hg(e,t){return function(e,t){const n=new Cc;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const i=jm(e);try{const e=await function(e,t){const n=wc(e),i=ru.now(),r=t.reduce((e,t)=>e.add(t.key),Ud());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Rd(),l=Ud();return n.Os.getEntries(e,r).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(r=>{s=r;const a=[];for(const e of t){const t=pf(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new vf(e.key,t,Uh(t.value.mapValue),lf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,i,a,t)}).next(t=>{a=t;const i=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,i)})}).then(()=>({batchId:a.batchId,changes:Od(s)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let i=e.Ru[e.currentUser.toKey()];i||(i=new $u(zc)),i=i.insert(t,n),e.Ru[e.currentUser.toKey()]=i}(i,e.batchId,n),await zm(i,e.changes),await hm(i.remoteStore)}catch(e){const t=Mm(e,"Failed to persist write");n.reject(t)}}(await Km(e),t,n)),n.promise}(ug(e),t)}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){dc=e}("11.10.0"),Nl(new Co("firestore",(e,n)=>{let{instanceIdentifier:i,options:r}=n;const s=e.getProvider("app").getImmediate(),a=new cg(new kc(e.getProvider("auth-internal")),new Rc(s,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Mc(Sc.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bh(e.options.projectId,t)}(s,i),s);return r=Object.assign({useFetchStreams:t},r),a._setSettings(r),a},"PUBLIC").setMultipleInstances(!0)),jl(cc,uc,e),jl(cc,uc,"esm2017")}();const Wg=function(e,t){const n="object"==typeof e?e:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Al;const t=Pl.get(e);if(!t&&e===Al&&lo())return Fl();if(!t)throw Ol.create("no-app",{appName:e});return t}(),i="string"==typeof e?e:t||xh,r=Il(n,"firestore").getImmediate({identifier:i});if(!r._initialized){const e=oo("firestore");e&&ng(r,...e)}return r}(Fl({apiKey:"AIzaSyCvXJDRDsd9FWCWCFuXQv_amE2BnS2wsaU",authDomain:"smash-strategy-notebook-14e22.firebaseapp.com",projectId:"smash-strategy-notebook-14e22",storageBucket:"smash-strategy-notebook-14e22.firebasestorage.app",messagingSenderId:"258363400874",appId:"1:258363400874:web:ab954df9873114c52166d3"}));var Gg=function(e,t){return e<t?-1:e>t?1:0},qg=function(e){return e.reduce(function(e,t){return e+t},0)},Xg=function(){function e(e){this.colors=e}var t=e.prototype;return t.palette=function(){return this.colors},t.map=function(e){return e},e}(),Yg=function(){function e(e,t,n){return(e<<10)+(t<<5)+n}function t(e){var t=[],n=!1;function i(){t.sort(e),n=!0}return{push:function(e){t.push(e),n=!1},peek:function(e){return n||i(),void 0===e&&(e=t.length-1),t[e]},pop:function(){return n||i(),t.pop()},size:function(){return t.length},map:function(e){return t.map(e)},debug:function(){return n||i(),t}}}function n(e,t,n,i,r,s,a){var o=this;o.r1=e,o.r2=t,o.g1=n,o.g2=i,o.b1=r,o.b2=s,o.histo=a}function i(){this.vboxes=new t(function(e,t){return Gg(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())})}function r(t,n){if(n.count()){var i=n.r2-n.r1+1,r=n.g2-n.g1+1,s=Math.max.apply(null,[i,r,n.b2-n.b1+1]);if(1==n.count())return[n.copy()];var a,o,l,c,u=0,h=[],d=[];if(s==i)for(a=n.r1;a<=n.r2;a++){for(c=0,o=n.g1;o<=n.g2;o++)for(l=n.b1;l<=n.b2;l++)c+=t[e(a,o,l)]||0;h[a]=u+=c}else if(s==r)for(a=n.g1;a<=n.g2;a++){for(c=0,o=n.r1;o<=n.r2;o++)for(l=n.b1;l<=n.b2;l++)c+=t[e(o,a,l)]||0;h[a]=u+=c}else for(a=n.b1;a<=n.b2;a++){for(c=0,o=n.r1;o<=n.r2;o++)for(l=n.g1;l<=n.g2;l++)c+=t[e(o,l,a)]||0;h[a]=u+=c}return h.forEach(function(e,t){d[t]=u-e}),function(e){var t,i,r,s,o,l=e+"1",c=e+"2",f=0;for(a=n[l];a<=n[c];a++)if(h[a]>u/2){for(r=n.copy(),s=n.copy(),o=(t=a-n[l])<=(i=n[c]-a)?Math.min(n[c]-1,~~(a+i/2)):Math.max(n[l],~~(a-1-t/2));!h[o];)o++;for(f=d[o];!f&&h[o-1];)f=d[--o];return r[c]=o,s[l]=r[c]+1,[r,s]}}(s==i?"r":s==r?"g":"b")}}return n.prototype={volume:function(e){var t=this;return t._volume&&!e||(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(t){var n=this,i=n.histo;if(!n._count_set||t){var r,s,a,o=0;for(r=n.r1;r<=n.r2;r++)for(s=n.g1;s<=n.g2;s++)for(a=n.b1;a<=n.b2;a++)o+=i[e(r,s,a)]||0;n._count=o,n._count_set=!0}return n._count},copy:function(){var e=this;return new n(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var n=this,i=n.histo;if(!n._avg||t){var r,s,a,o,l=0,c=0,u=0,h=0;if(n.r1===n.r2&&n.g1===n.g2&&n.b1===n.b2)n._avg=[n.r1<<3,n.g1<<3,n.b1<<3];else{for(s=n.r1;s<=n.r2;s++)for(a=n.g1;a<=n.g2;a++)for(o=n.b1;o<=n.b2;o++)l+=r=i[e(s,a,o)]||0,c+=r*(s+.5)*8,u+=r*(a+.5)*8,h+=r*(o+.5)*8;n._avg=l?[~~(c/l),~~(u/l),~~(h/l)]:[~~(8*(n.r1+n.r2+1)/2),~~(8*(n.g1+n.g2+1)/2),~~(8*(n.b1+n.b2+1)/2)]}}return n._avg},contains:function(e){var t=this,n=e[0]>>3;return gval=e[1]>>3,bval=e[2]>>3,n>=t.r1&&n<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},i.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map(function(e){return e.color})},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,i,r=this.vboxes,s=0;s<r.size();s++)((n=Math.sqrt(Math.pow(e[0]-r.peek(s).color[0],2)+Math.pow(e[1]-r.peek(s).color[1],2)+Math.pow(e[2]-r.peek(s).color[2],2)))<t||void 0===t)&&(t=n,i=r.peek(s).color);return i},forcebw:function(){var e=this.vboxes;e.sort(function(e,t){return Gg(qg(e.color),qg(t.color))});var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var n=e.length-1,i=e[n].color;i[0]>251&&i[1]>251&&i[2]>251&&(e[n].color=[255,255,255])}},{quantize:function(s,a){if(!Number.isInteger(a)||a<1||a>256)throw new Error("Invalid maximum color count. It must be an integer between 1 and 256.");if(!s.length||a<2||a>256)return!1;if(!s.length||a<2||a>256)return!1;for(var o=[],l=new Set,c=0;c<s.length;c++){var u=s[c],h=u.join(",");l.has(h)||(l.add(h),o.push(u))}if(o.length<=a)return new Xg(o);var d=function(t){var n,i=new Array(32768);return t.forEach(function(t){n=e(t[0]>>3,t[1]>>3,t[2]>>3),i[n]=(i[n]||0)+1}),i}(s);d.forEach(function(){});var f=function(e,t){var i,r,s,a=1e6,o=0,l=1e6,c=0,u=1e6,h=0;return e.forEach(function(e){(i=e[0]>>3)<a?a=i:i>o&&(o=i),(r=e[1]>>3)<l?l=r:r>c&&(c=r),(s=e[2]>>3)<u?u=s:s>h&&(h=s)}),new n(a,o,l,c,u,h,t)}(s,d),p=new t(function(e,t){return Gg(e.count(),t.count())});function m(e,t){for(var n,i=e.size(),s=0;s<1e3;){if(i>=t)return;if(s++>1e3)return;if((n=e.pop()).count()){var a=r(d,n),o=a[0],l=a[1];if(!o)return;e.push(o),l&&(e.push(l),i++)}else e.push(n),s++}}p.push(f),m(p,.75*a);for(var g=new t(function(e,t){return Gg(e.count()*e.volume(),t.count()*t.volume())});p.size();)g.push(p.pop());m(g,a);for(var v=new i;g.size();)v.push(g.pop());return v}}}().quantize,Kg=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.width=this.canvas.width=e.naturalWidth,this.height=this.canvas.height=e.naturalHeight,this.context.drawImage(e,0,0,this.width,this.height)};Kg.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)};var Zg=function(){};Zg.prototype.getColor=function(e,t){return void 0===t&&(t=10),this.getPalette(e,5,t)[0]},Zg.prototype.getPalette=function(e,t,n){var i=function(e){var t=e.colorCount,n=e.quality;if(void 0!==t&&Number.isInteger(t)){if(1===t)throw new Error("colorCount should be between 2 and 20. To get one color, call getColor() instead of getPalette()");t=Math.max(t,2),t=Math.min(t,20)}else t=10;return(void 0===n||!Number.isInteger(n)||n<1)&&(n=10),{colorCount:t,quality:n}}({colorCount:t,quality:n}),r=new Kg(e),s=function(e,t,n){for(var i,r,s,a,o,l=e,c=[],u=0;u<t;u+=n)r=l[0+(i=4*u)],s=l[i+1],a=l[i+2],(void 0===(o=l[i+3])||o>=125)&&(r>250&&s>250&&a>250||c.push([r,s,a]));return c}(r.getImageData().data,r.width*r.height,i.quality),a=Yg(s,i.colorCount);return a?a.palette():null},Zg.prototype.getColorFromUrl=function(e,t,n){var i=this,r=document.createElement("img");r.addEventListener("load",function(){var s=i.getPalette(r,5,n);t(s[0],e)}),r.src=e},Zg.prototype.getImageData=function(e,t){var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=function(){if(200==this.status){var e=new Uint8Array(this.response);i=e.length;for(var n=new Array(i),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);var s=n.join(""),a=window.btoa(s);t("data:image/png;base64,"+a)}},n.send()},Zg.prototype.getColorAsync=function(e,t,n){var i=this;this.getImageData(e,function(e){var r=document.createElement("img");r.addEventListener("load",function(){var e=i.getPalette(r,5,n);t(e[0],this)}),r.src=e})};const Qg=(0,t.createContext)(),Jg=()=>(0,t.useContext)(Qg),$g=()=>{const e={};for(const t in Ja)e[t]={current:0,completed:!1};return e},ev=()=>{const e=[];for(const t in $a)$a[t].unlockedByDefault&&e.push(t);return e},tv=e=>{let{children:n}=e;const[i,r]=(0,t.useState)(()=>Za("smashAppCharacters",[])),[a,o]=(0,t.useState)(()=>Za("smashAppCommands",[{id:1,name:"\u5f31\u653b\u6483",command:"A",category:"\u5730\u4e0a\u6280"}])),[l,c]=(0,t.useState)(()=>Za("smashAppCharacterData",{})),[u,h]=(0,t.useState)(()=>Za("smashAppQuizzes",[])),[d,f]=(0,t.useState)(()=>Za("smashAppTierLists",[{id:"default",title:"\u30de\u30a4\u30ad\u30e3\u30e9\u30e9\u30f3\u30af",tiers:["S","A","B","C"],characterPlacements:{S:[],A:[],B:[],C:[],unranked:[]}}])),[p,m]=(0,t.useState)(()=>Za("smashAppActiveTierListId","default")),[g,v]=(0,t.useState)(()=>Za("smashAppGoals",[])),[y,x]=(0,t.useState)(()=>Za("smashAppReplayNotes",{})),[b,_]=(0,t.useState)(()=>Za("smashAppMissionProgress",$g())),[w,S]=(0,t.useState)(()=>Za("smashAppUnlockedItems",ev()));(0,t.useEffect)(()=>{Qa("smashAppCharacters",i)},[i]),(0,t.useEffect)(()=>{Qa("smashAppCommands",a)},[a]),(0,t.useEffect)(()=>{Qa("smashAppCharacterData",l)},[l]),(0,t.useEffect)(()=>{Qa("smashAppQuizzes",u)},[u]),(0,t.useEffect)(()=>{Qa("smashAppTierLists",d)},[d]),(0,t.useEffect)(()=>{Qa("smashAppActiveTierListId",p)},[p]),(0,t.useEffect)(()=>{Qa("smashAppGoals",g)},[g]),(0,t.useEffect)(()=>{Qa("smashAppReplayNotes",y)},[y]),(0,t.useEffect)(()=>{Qa("smashAppMissionProgress",b)},[b]),(0,t.useEffect)(()=>{Qa("smashAppUnlockedItems",w)},[w]),(0,t.useEffect)(()=>{let e=!1;const t=I({},l);i.forEach(n=>{var i,r,s,a,o,l,c,u,h,d,f,p,m;t[n.id]&&null!==(i=t[n.id].records)&&void 0!==i&&i.matches||(e=!0,t[n.id]=I(I({},t[n.id]),{},{combos:(null===(r=t[n.id])||void 0===r?void 0:r.combos)||{low:[],mid:[],high:[]},gameplan:(null===(s=t[n.id])||void 0===s?void 0:s.gameplan)||{early:"",mid:"",kill:""},matchups:(null===(a=t[n.id])||void 0===a?void 0:a.matchups)||[],recovery:(null===(o=t[n.id])||void 0===o?void 0:o.recovery)||{patterns:"",edgeguarding:""},frameData:(null===(l=t[n.id])||void 0===l?void 0:l.frameData)||[],stageStrategies:(null===(c=t[n.id])||void 0===c?void 0:c.stageStrategies)||[],records:{notes:(null===(u=t[n.id])||void 0===u||null===(h=u.records)||void 0===h?void 0:h.notes)||"",matches:(null===(d=t[n.id])||void 0===d||null===(f=d.records)||void 0===f?void 0:f.matches)||[]},videoLinks:(null===(p=t[n.id])||void 0===p?void 0:p.videoLinks)||[],practiceList:(null===(m=t[n.id])||void 0===m?void 0:m.practiceList)||[]}))}),e&&c(t)},[i]);const M=(0,t.useCallback)(e=>{e&&!w.includes(e)&&S(t=>{const n=[...t,e],i=$a[e];return i&&alert("\u65b0\u3057\u3044\u30b3\u30ec\u30af\u30b7\u30e7\u30f3\u3092\u30a2\u30f3\u30ed\u30c3\u30af\u3057\u307e\u3057\u305f: ".concat(i.name)),n})},[w]),C=(0,t.useCallback)(()=>{const e=Object.values(l).reduce((e,t)=>{var n;return e+((null===(n=t.matchups)||void 0===n?void 0:n.length)||0)},0),t=Object.values(l).reduce((e,t)=>{var n;return e+((null===(n=t.records)||void 0===n?void 0:n.matches)||[]).filter(e=>"win"===e.result).length},0),n=i.length,r=d.length;_(i=>{const s=JSON.parse(JSON.stringify(i));let a=!1;for(const o in Ja){if(s[o]||(s[o]={current:0,completed:!1}),s[o].completed)continue;let i;const l=Ja[o];switch(l.type){case"NOTE_COUNT_TOTAL":i=e;break;case"WIN_COUNT_TOTAL":i=t;break;case"CHARACTER_COUNT":i=n;break;case"TIER_LIST_COUNT":i=r}void 0!==i&&s[o].current!==i&&(s[o].current=i,a=!0),s[o].current>=l.goal&&(s[o].completed=!0,M(l.reward.id),a=!0)}return a?s:i})},[l,i,d,M]);(0,t.useEffect)(()=>{C()},[l,d,i,C]);const E={characters:i,setCharacters:r,commands:a,setCommands:o,characterData:l,setCharacterData:c,quizzes:u,setQuizzes:h,tierLists:d,setTierLists:f,activeTierListId:p,setActiveTierListId:m,goals:g,addGoal:e=>{const t={id:Date.now(),text:e,completed:!1};v(e=>[...e,t])},toggleGoalStatus:e=>{v(t=>t.map(t=>t.id===e?I(I({},t),{},{completed:!t.completed}):t))},deleteGoal:e=>{v(t=>t.filter(t=>t.id!==e))},replayNotes:y,addReplay:(e,t)=>{const n={id:Date.now(),videoUrl:t,notes:[]};x(t=>I(I({},t),{},{[e]:[...t[e]||[],n]}))},deleteReplay:(e,t)=>{x(n=>{const i=(n[e]||[]).filter(e=>e.id!==t);return I(I({},n),{},{[e]:i})})},addNoteToReplay:(e,t,n)=>{x(i=>{const r=(i[e]||[]).map(e=>e.id===t?I(I({},e),{},{notes:[...e.notes,I(I({},n),{},{id:Date.now()})]}):e);return I(I({},i),{},{[e]:r})})},updateNoteInReplay:(e,t,n,i)=>{x(r=>{const s=(r[e]||[]).map(e=>{if(e.id===t){const t=e.notes.map(e=>e.id===n?I(I({},e),{},{text:i}):e);return I(I({},e),{},{notes:t})}return e});return I(I({},r),{},{[e]:s})})},deleteNoteFromReplay:(e,t,n)=>{x(i=>{const r=(i[e]||[]).map(e=>{if(e.id===t){const t=e.notes.filter(e=>e.id!==n);return I(I({},e),{},{notes:t})}return e});return I(I({},i),{},{[e]:r})})},handleAddMultipleCharacters:e=>{const t=Date.now(),n=new Set(i.map(e=>e.name)),s=e.filter(e=>!n.has(e.name)).map((e,n)=>I(I({},e),{},{id:"".concat(t,"-").concat(n)}));s.length>0&&r(e=>[...e,...s])},handleDeleteCharacter:e=>{r(t=>t.filter(t=>t.id!==e)),c(t=>{const n=I({},t);return delete n[e],n}),f(t=>t.map(t=>{const n=I({},t.characterPlacements);return Object.keys(n).forEach(t=>{n[t]=n[t].filter(t=>t!==e)}),I(I({},t),{},{characterPlacements:n})}))},handleAddCommand:e=>{o(t=>[...t,I(I({},e),{},{id:Date.now()})])},handleDeleteCommand:e=>{o(t=>t.filter(t=>t.id!==e))},handleRecalculateAllColors:async()=>{const e=new Zg,t=i.map(t=>new Promise(n=>{const i="/images/".concat(encodeURIComponent(t.icon)),r=new Image;r.crossOrigin="Anonymous",r.src=i,r.onload=()=>{try{const i=e.getColor(r),s="#".concat(i.map(e=>e.toString(16).padStart(2,"0")).join(""));n(I(I({},t),{},{color:s}))}catch(Kg){n(t)}},r.onerror=()=>{n(t)}})),n=await Promise.all(t);return r(n),!0},handleUpdateCharacter:e=>{r(t=>t.map(t=>t.id===e.id?e:t))},handleUpdateCommand:e=>{o(t=>t.map(t=>t.id===e.id?e:t))},missionProgress:b,unlockedItems:w,shareTierList:async e=>{try{const t=await Ug(function(e,t){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];if(e=Mo(e),Yc("collection","path",t),e instanceof tg){const n=Wc.fromString(t,...i);return Zc(n),new sg(e,null,n)}{if(!(e instanceof rg||e instanceof sg))throw new Mc(Sc.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Wc.fromString(t,...i));return Zc(n),new sg(e.firestore,null,n)}}(Wg,"sharedTierLists"),I(I({},e),{},{createdAt:new Date}));return t.id}catch(Kg){return console.error("Error adding document: ",Kg),alert("\u5171\u6709\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002"),null}},addMatchRecord:(e,t,n)=>{c(i=>{const r={id:Date.now(),opponent:t,result:n},s=i[e];return I(I({},i),{},{[e]:I(I({},s),{},{records:I(I({},s.records),{},{matches:[r,...s.records.matches||[]]})})})})},deleteMatchRecord:(e,t)=>{c(n=>{const i=n[e];return I(I({},n),{},{[e]:I(I({},i),{},{records:I(I({},i.records),{},{matches:(i.records.matches||[]).filter(e=>e.id!==t)})})})})},exportAllData:()=>({characters:i,commands:a,characterData:l,quizzes:u,tierLists:d,activeTierListId:p,goals:g,replayNotes:y,missionProgress:b,unlockedItems:w}),importAllData:e=>{try{if(!e||!e.characters||!e.characterData)throw new Error("\u7121\u52b9\u306a\u30c7\u30fc\u30bf\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002");return r(e.characters||[]),o(e.commands||[]),c(e.characterData||{}),h(e.quizzes||[]),f(e.tierLists||[]),m(e.activeTierListId||"default"),v(e.goals||[]),x(e.replayNotes||{}),_(e.missionProgress||$g()),S(e.unlockedItems||ev()),!0}catch(Mj){return console.error("\u30c7\u30fc\u30bf\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u306b\u5931\u6557\u3057\u307e\u3057\u305f:",Mj),!1}}};return(0,s.jsx)(Qg.Provider,{value:E,children:n})},nv=(0,t.createContext)(),iv=()=>(0,t.useContext)(nv),rv=e=>{let{children:n}=e;const[i,r]=(0,t.useState)(()=>Za("smashAppSettings",{isGuerillaEnabled:!0,guerillaFrequency:18e4}));return(0,t.useEffect)(()=>{Qa("smashAppSettings",i)},[i]),(0,s.jsx)(nv.Provider,{value:{settings:i,setSettings:r},children:n})},sv=(0,t.createContext)(),av=()=>(0,t.useContext)(sv),ov=e=>{let{children:n}=e;const[i,r]=(0,t.useState)("default"),[a,o]=(0,t.useState)("idle"),[l,c]=(0,t.useState)(null);return(0,s.jsx)(sv.Provider,{value:{cursorVariant:i,setCursorVariant:r,guerillaStep:a,setGuerillaStep:o,currentQuiz:l,setCurrentQuiz:c},children:n})},lv=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},cv=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var uv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hv=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],dv=(0,t.forwardRef)((e,n)=>{let{color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:c}=e,u=Qe(e,hv);return(0,t.createElement)("svg",I(I(I({ref:n},uv),{},{width:r,height:r,stroke:i,strokeWidth:a?24*Number(s)/Number(r):s,className:cv("lucide",o)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"}),u),[...c.map(e=>{let[n,i]=e;return(0,t.createElement)(n,i)}),...Array.isArray(l)?l:[l]])}),fv=["className"],pv=(e,n)=>{const i=(0,t.forwardRef)((i,r)=>{let{className:s}=i,a=Qe(i,fv);return(0,t.createElement)(dv,I({ref:r,iconNode:n,className:cv("lucide-".concat((o=lv(e),o.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),s)},a));var o});return i.displayName=lv(e),i},mv=pv("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),gv=e=>{let{title:t,message:n,onConfirm:i,onCancel:r}=e;return(0,s.jsx)(P,{children:(0,s.jsx)(Ka.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,s.jsxs)(Ka.div,{className:"bg-slate-800 rounded-xl p-6 w-full max-w-md border border-yellow-500/30 shadow-2xl",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},transition:{type:"spring",stiffness:200,damping:20},children:[(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"mt-1 p-2 bg-yellow-500/20 rounded-full",children:(0,s.jsx)(mv,{className:"text-yellow-400",size:24})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:t}),(0,s.jsx)("p",{className:"text-white/80 mt-1",children:n})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-6",children:[(0,s.jsx)("button",{onClick:r,className:"px-6 py-2 bg-gray-600 hover:bg-gray-700 rounded-md font-semibold",children:"\u3044\u3044\u3048"}),(0,s.jsx)("button",{onClick:i,className:"px-6 py-2 bg-red-600 hover:bg-red-700 rounded-md font-semibold",children:"\u306f\u3044"})]})]})})})},vv=(0,t.createContext)(),yv=()=>(0,t.useContext)(vv),xv=e=>{let{children:n}=e;const[i,r]=(0,t.useState)(null),a=(0,t.useCallback)((e,t)=>new Promise(n=>{r({title:e,message:t,onConfirm:()=>{r(null),n(!0)},onCancel:()=>{r(null),n(!1)}})}),[]);return(0,s.jsxs)(vv.Provider,{value:{showConfirm:a},children:[n,i&&(0,s.jsx)(gv,I({},i))]})};function bv(e){const n=b(()=>xr(e)),{isStatic:i}=(0,t.useContext)(_);if(i){const[,i]=(0,t.useState)(e);(0,t.useEffect)(()=>n.on("change",i),[])}return n}function _v(e,t){const n=bv(t()),i=()=>n.set(t());return i(),o(()=>{const t=()=>m.preRender(i,!1,!0),n=e.map(e=>e.on("change",t));return()=>{n.forEach(e=>e()),g(i)}}),n}function wv(e,t,n,i){if("function"===typeof e)return function(e){vr.current=[],e();const t=_v(vr.current,e);return vr.current=void 0,t}(e);const r="function"===typeof t?t:function(){const e=!Array.isArray(arguments.length<=0?void 0:arguments[0]),t=e?0:-1,n=0+t<0||arguments.length<=0+t?void 0:arguments[0+t],i=2+t<0||arguments.length<=2+t?void 0:arguments[2+t],r=3+t<0||arguments.length<=3+t?void 0:arguments[3+t],s=Gi(1+t<0||arguments.length<=1+t?void 0:arguments[1+t],i,I({mixer:(a=i[0],(e=>e&&"object"===typeof e&&e.mix)(a)?a.mix:void 0)},r));var a;return e?s(n):s}(t,n,i);return Array.isArray(e)?Sv(e,r):Sv([e],e=>{let[t]=e;return r(t)})}function Sv(e,t){const n=b(()=>[]);return _v(e,()=>{n.length=0;const i=e.length;for(let t=0;t<i;t++)n[t]=e[t].get();return t(n)})}const Mv=pv("sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]),Cv=pv("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Ev=pv("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Tv=pv("list",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]),Av=pv("gamepad-2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]),kv=pv("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Pv=pv("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Lv=pv("moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Dv=(0,t.createContext)(),Rv=e=>{let{children:n}=e;const[i,r]=(0,t.useState)(()=>Za("smashAppTheme","dark"));(0,t.useEffect)(()=>{Qa("smashAppTheme",i)},[i]);const a={theme:i,toggleTheme:()=>{r(e=>"dark"===e?"smash":"dark")}};return(0,s.jsx)(Dv.Provider,{value:a,children:n})},Nv=(0,t.createContext)(),Iv=()=>(0,t.useContext)(Nv),Ov={isBgmEnabled:!0,isSeEnabled:!0,bgmVolume:.3,seVolume:.5},zv={bgm_splash:"bgm_main_smash",bgm_home:"bgm_main_dark",se_click:"se_click_default"},Fv=e=>{let{children:n}=e;const[i,r]=(0,t.useState)(()=>Za("smashAppAudioSettings",Ov)),[a,o]=(0,t.useState)(()=>Za("smashAppAudioAssignments",zv));(0,t.useEffect)(()=>{Qa("smashAppAudioSettings",i)},[i]),(0,t.useEffect)(()=>{Qa("smashAppAudioAssignments",a)},[a]);const l={settings:i,setSetting:(e,t)=>r(n=>I(I({},n),{},{[e]:t})),assignments:a,setAssignment:(e,t)=>o(n=>I(I({},n),{},{[e]:t}))};return(0,s.jsx)(Nv.Provider,{value:l,children:n})},jv=[{id:"character-select",title:"\u5927\u4e71\u95d8",subtitle:"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u9078\u629e",icon:Mv,image:"/images/menu-bg-1.jpg",color:"#ef4444"},{id:"another-game",title:"\u3044\u308d\u3093\u306a\u3042\u305d\u3073",subtitle:"\u30c4\u30fc\u30eb\u30fb\u5206\u6790",icon:Cv,image:"/images/menu-bg-4.jpg",color:"#f97316"},{id:"spirits",title:"\u30b9\u30d4\u30ea\u30c3\u30c4",subtitle:"\u76ee\u6a19\u30fb\u8ab2\u984c\u30fb\u5206\u6790",icon:Ev,image:"/images/menu-bg-5.jpg",color:"#22c55e"},{id:"collection",title:"\u30b3\u30ec\u30af\u30b7\u30e7\u30f3",subtitle:"\u6226\u7e3e\u30fb\u30df\u30c3\u30b7\u30e7\u30f3",icon:Tv,image:"/images/menu-bg-2.jpg",color:"#3b82f6"},{id:"online",title:"\u30aa\u30f3\u30e9\u30a4\u30f3",subtitle:"\u30ea\u30d7\u30ec\u30a4\u5206\u6790",icon:Av,image:"/images/menu-bg-3.jpg",color:"#eab308"},{id:"settings",title:"\u8a2d\u5b9a",subtitle:"\u5404\u7a2e\u8a2d\u5b9a",icon:kv,image:"/images/menu-bg-default.jpg",color:"#a855f7"}],Bv="/images/menu-bg-default.jpg",Vv={"character-select":"rgba(220, 38, 38, 0.6)","another-game":"rgba(249, 115, 22, 0.7)",spirits:"rgba(34, 197, 94, 0.6)",collection:"rgba(59, 130, 246, 0.6)",online:"rgba(234, 179, 8, 0.7)",settings:"rgba(168, 85, 247, 0.7)"},Uv=e=>{let{theme:t,toggleTheme:n}=e;return(0,s.jsx)("div",{className:"absolute bottom-8 right-8 z-50",children:(0,s.jsx)(Ka.button,{onClick:n,className:"w-14 h-14 bg-slate-800/50 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-purple-500/50 transition-colors shadow-lg border border-white/10",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,s.jsx)(P,{mode:"wait",children:"dark"===t?(0,s.jsx)(Ka.div,{initial:{y:-20,opacity:0},animate:{y:0,opacity:1},exit:{y:20,opacity:0},children:(0,s.jsx)(Pv,{size:24})},"dark"):(0,s.jsx)(Ka.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},exit:{y:-20,opacity:0},children:(0,s.jsx)(Lv,{size:24})},"smash")})})})},Hv=e=>{let{onNavigate:n}=e;const{setCursorVariant:i}=av(),{settings:r,assignments:a}=Iv(),{isSeEnabled:o,seVolume:l}=r,c=(0,t.useRef)(null),u=(0,t.useRef)(null),h=(0,t.useCallback)((e,t)=>{const n=a[t];o&&e.current&&$a[n]&&(e.current.src=$a[n].source,e.current.volume=l,e.current.currentTime=0,e.current.play().catch(e=>{}))},[o,l,a]),d=(0,t.useCallback)(e=>{i("default");const t=u.current,r=a.se_click;if(o&&t&&$a[r]){t.src=$a[r].source,t.volume=l;const i=()=>{n(e),t.removeEventListener("ended",i)};t.addEventListener("ended",i),t.currentTime=0,t.play().catch(t=>{n(e)})}else n(e)},[n,i,o,l,a]),f=()=>(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden z-0",children:[" ",[...Array(20)].map((e,t)=>(0,s.jsx)(Ka.div,{className:"absolute bg-white rounded-full",style:{width:"".concat(3*Math.random()+1,"px"),height:"".concat(3*Math.random()+1,"px"),left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")},animate:{x:[0,500*(Math.random()-.5),0],y:[0,500*(Math.random()-.5),0],scale:[1,1.5*Math.random()+.5,1],opacity:[0,.3*Math.random()+.1,0]},transition:{duration:10*Math.random()+10,delay:-20*Math.random(),repeat:1/0,ease:"easeInOut"}},t))," "]}),p=e=>{let{item:t}=e;return(0,s.jsxs)(Ka.div,{className:"relative group cursor-pointer text-white flex flex-col items-center justify-center p-4 shadow-xl",style:{backgroundColor:"".concat(t.color,"BF"),clipPath:"polygon(10% 0%, 100% 0%, 90% 100%, 0% 100%)"},whileHover:{scale:1.05,zIndex:10,boxShadow:"0 0 30px ".concat(t.color)},transition:{type:"spring",stiffness:300},onClick:()=>d(t.id),onMouseEnter:()=>{i("hover"),h(c,"se_click")},onMouseLeave:()=>i("default"),children:[" ",(0,s.jsx)("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-all duration-300"})," ",(0,s.jsxs)("div",{className:"relative z-10 text-center flex flex-col items-center gap-1",children:[" ",(0,s.jsx)(t.icon,{size:32,className:"drop-shadow-md"})," ",(0,s.jsx)("h3",{className:"font-bold text-xl drop-shadow-md",children:t.title})," ",t.subtitle&&(0,s.jsx)("p",{className:"text-xs opacity-80",children:t.subtitle})," "]})," "]})};return(0,s.jsxs)("div",{className:"w-full h-full bg-gray-100 relative flex items-center justify-center p-8",children:[(0,s.jsx)(f,{}),(0,s.jsx)("audio",{ref:c,preload:"auto"}),(0,s.jsx)("audio",{ref:u,preload:"auto"}),(0,s.jsx)("div",{className:"w-full h-full grid grid-cols-3 grid-rows-2 gap-6 relative z-10",children:jv.map(e=>(0,s.jsx)(p,{item:e},e.id))})]})},Wv=e=>{let{onNavigate:n}=e;const{setCursorVariant:i}=av(),{settings:r,assignments:a}=Iv(),{isSeEnabled:o,seVolume:l}=r,[c,u]=(0,t.useState)(Bv),h=(0,t.useRef)(null),d=(0,t.useRef)(null),f=(0,t.useCallback)((e,t)=>{const n=a[t];o&&e.current&&$a[n]&&(e.current.src=$a[n].source,e.current.volume=l,e.current.currentTime=0,e.current.play().catch(e=>{}))},[o,l,a]),p=(0,t.useCallback)(e=>{i("default");const t=d.current,r=a.se_click;if(o&&t&&$a[r]){t.src=$a[r].source,t.volume=l;const i=()=>{n(e),t.removeEventListener("ended",i)};t.addEventListener("ended",i),t.currentTime=0,t.play().catch(t=>{n(e)})}else n(e)},[n,i,o,l,a]),m=e=>{let{item:t}=e;const{title:n,subtitle:r,icon:a}=t,o=bv(0),l=bv(0),c=wv(l,[-150,150],[10,-10]),d=wv(o,[-150,150],[-10,10]);return(0,s.jsx)(Ka.div,{className:"bg-slate-800/50 relative cursor-pointer group rounded-lg overflow-hidden backdrop-blur-sm border border-white/10",style:{transformStyle:"preserve-3d",perspective:"800px"},initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},onMouseEnter:()=>{u(t.image),i("hover"),f(h,"se_click")},onMouseLeave:()=>{o.set(0),l.set(0)},onClick:()=>p(t.id),onMouseMove:e=>{const t=e.currentTarget.getBoundingClientRect();o.set(e.clientX-t.left-t.width/2),l.set(e.clientY-t.top-t.height/2)},children:(0,s.jsxs)(Ka.div,{className:"flex flex-col items-center justify-center w-full h-full text-white p-4 transition-shadow duration-300",style:{rotateX:c,rotateY:d,"--glow-color":Vv[t.id]},whileHover:{boxShadow:"0 0 40px var(--glow-color)"},children:[(0,s.jsx)("div",{className:"absolute top-0 left-[-150%] w-full h-full bg-gradient-to-r from-transparent via-white/20 to-transparent transition-all duration-700 group-hover:left-[150%] z-0"}),(0,s.jsxs)("div",{className:"relative z-10 text-center",children:[(0,s.jsx)(a,{size:40,className:"mb-2 drop-shadow-md"}),(0,s.jsx)("h2",{className:"font-extrabold drop-shadow-md text-2xl md:text-3xl",children:n}),r&&(0,s.jsx)("p",{className:"text-sm md:text-base opacity-80",children:r})]})]})})};return(0,s.jsxs)("div",{className:"w-full h-full bg-transparent relative flex items-center justify-center p-4 sm:p-8 md:p-16",children:[(0,s.jsx)("audio",{ref:h,preload:"auto"}),(0,s.jsx)("audio",{ref:d,preload:"auto"}),(0,s.jsx)(Ka.div,{className:"grid grid-cols-2 lg:grid-cols-3 grid-rows-3 lg:grid-rows-2 w-full h-full gap-2 md:gap-4",initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.05}}},onMouseLeave:()=>{u(Bv),i("default")},children:jv.map(e=>(0,s.jsx)(m,{item:e},e.id))}),(0,s.jsx)(Ka.div,{className:"absolute top-1/2 left-1/2 w-[200px] h-[200px] sm:w-[300px] sm:h-[300px] md:w-[350px] md:h-[350px] z-10 pointer-events-none",style:{x:"-50%",y:"-50%"},initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,ease:"easeOut",delay:.5},children:(0,s.jsxs)("div",{className:"relative w-full h-full rounded-full border-4 border-white/80 shadow-2xl bg-slate-900 overflow-hidden",children:[(0,s.jsx)(P,{children:(0,s.jsx)(Ka.div,{className:"absolute inset-0 w-full h-full bg-cover bg-center",style:{backgroundImage:"url(".concat(c,")")},initial:{opacity:0,scale:1.1},animate:{opacity:1,scale:1},exit:{opacity:0,scale:1.2},transition:{duration:.4,ease:"easeInOut"}},c)}),(0,s.jsx)("div",{className:"absolute top-0 left-0 w-full h-full rounded-full ring-4 ring-inset ring-white/30"})]})})]})},Gv=e=>{let{onNavigate:n}=e;const{theme:i,toggleTheme:r}=(0,t.useContext)(Dv);return(0,s.jsxs)("div",{className:"w-screen h-screen",children:[(0,s.jsx)(P,{mode:"wait",children:(0,s.jsx)(Ka.div,{className:"w-full h-full",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.4},children:"smash"===i?(0,s.jsx)(Hv,{onNavigate:n}):(0,s.jsx)(Wv,{onNavigate:n})},i)}),(0,s.jsx)(Uv,{theme:i,toggleTheme:r})]})};function qv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xv(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}var Yv,Kv,Zv,Qv,Jv,$v,ey,ty,ny,iy,ry,sy={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ay={duration:.5,overwrite:!1,delay:0},oy=1e8,ly=1e-8,cy=2*Math.PI,uy=cy/4,hy=0,dy=Math.sqrt,fy=Math.cos,py=Math.sin,my=function(e){return"string"===typeof e},gy=function(e){return"function"===typeof e},vy=function(e){return"number"===typeof e},yy=function(e){return"undefined"===typeof e},xy=function(e){return"object"===typeof e},by=function(e){return!1!==e},_y=function(){return"undefined"!==typeof window},wy=function(e){return gy(e)||my(e)},Sy="function"===typeof ArrayBuffer&&ArrayBuffer.isView||function(){},My=Array.isArray,Cy=/(?:-?\.?\d|\.)+/gi,Ey=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Ty=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ay=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,ky=/[+-]=-?[.\d]+/,Py=/[^,'"\[\]\s]+/gi,Ly=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,Dy={},Ry={},Ny=function(e){return(Ry=ux(e,Dy))&&h_},Iy=function(e,t){return console.warn("Invalid property",e,"set to",t,"Missing plugin? gsap.registerPlugin()")},Oy=function(e,t){return!t&&console.warn(e)},zy=function(e,t){return e&&(Dy[e]=t)&&Ry&&(Ry[e]=t)||Dy},Fy=function(){return 0},jy={suppressEvents:!0,isStart:!0,kill:!1},By={suppressEvents:!0,kill:!1},Vy={suppressEvents:!0},Uy={},Hy=[],Wy={},Gy={},qy={},Xy=30,Yy=[],Ky="",Zy=function(e){var t,n,i=e[0];if(xy(i)||gy(i)||(e=[e]),!(t=(i._gsap||{}).harness)){for(n=Yy.length;n--&&!Yy[n].targetTest(i););t=Yy[n]}for(n=e.length;n--;)e[n]&&(e[n]._gsap||(e[n]._gsap=new Cb(e[n],t)))||e.splice(n,1);return e},Qy=function(e){return e._gsap||Zy(Ux(e))[0]._gsap},Jy=function(e,t,n){return(n=e[t])&&gy(n)?e[t]():yy(n)&&e.getAttribute&&e.getAttribute(t)||n},$y=function(e,t){return(e=e.split(",")).forEach(t)||e},ex=function(e){return Math.round(1e5*e)/1e5||0},tx=function(e){return Math.round(1e7*e)/1e7||0},nx=function(e,t){var n=t.charAt(0),i=parseFloat(t.substr(2));return e=parseFloat(e),"+"===n?e+i:"-"===n?e-i:"*"===n?e*i:e/i},ix=function(e,t){for(var n=t.length,i=0;e.indexOf(t[i])<0&&++i<n;);return i<n},rx=function(){var e,t,n=Hy.length,i=Hy.slice(0);for(Wy={},Hy.length=0,e=0;e<n;e++)(t=i[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},sx=function(e){return!!(e._initted||e._startAt||e.add)},ax=function(e,t,n,i){Hy.length&&!Kv&&rx(),e.render(t,n,i||!!(Kv&&t<0&&sx(e))),Hy.length&&!Kv&&rx()},ox=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(Py).length<2?t:my(e)?e.trim():e},lx=function(e){return e},cx=function(e,t){for(var n in t)n in e||(e[n]=t[n]);return e},ux=function(e,t){for(var n in t)e[n]=t[n];return e},hx=function e(t,n){for(var i in n)"__proto__"!==i&&"constructor"!==i&&"prototype"!==i&&(t[i]=xy(n[i])?e(t[i]||(t[i]={}),n[i]):n[i]);return t},dx=function(e,t){var n,i={};for(n in e)n in t||(i[n]=e[n]);return i},fx=function(e){var t,n=e.parent||Qv,i=e.keyframes?(t=My(e.keyframes),function(e,n){for(var i in n)i in e||"duration"===i&&t||"ease"===i||(e[i]=n[i])}):cx;if(by(e.inherit))for(;n;)i(e,n.vars.defaults),n=n.parent||n._dp;return e},px=function(e,t,n,i,r){void 0===n&&(n="_first"),void 0===i&&(i="_last");var s,a=e[i];if(r)for(s=t[r];a&&a[r]>s;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[n],e[n]=t),t._next?t._next._prev=t:e[i]=t,t._prev=a,t.parent=t._dp=e,t},mx=function(e,t,n,i){void 0===n&&(n="_first"),void 0===i&&(i="_last");var r=t._prev,s=t._next;r?r._next=s:e[n]===t&&(e[n]=s),s?s._prev=r:e[i]===t&&(e[i]=r),t._next=t._prev=t.parent=null},gx=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},vx=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var n=e;n;)n._dirty=1,n=n.parent;return e},yx=function(e,t,n,i){return e._startAt&&(Kv?e._startAt.revert(By):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,i))},xx=function e(t){return!t||t._ts&&e(t.parent)},bx=function(e){return e._repeat?_x(e._tTime,e=e.duration()+e._rDelay)*e:0},_x=function(e,t){var n=Math.floor(e=tx(e/t));return e&&n===e?n-1:n},wx=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},Sx=function(e){return e._end=tx(e._start+(e._tDur/Math.abs(e._ts||e._rts||ly)||0))},Mx=function(e,t){var n=e._dp;return n&&n.smoothChildTiming&&e._ts&&(e._start=tx(n._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),Sx(e),n._dirty||vx(n,e)),e},Cx=function(e,t){var n;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(n=wx(e.rawTime(),t),(!t._dur||zx(0,t.totalDuration(),n)-t._tTime>ly)&&t.render(n,!0)),vx(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(n=e;n._dp;)n.rawTime()>=0&&n.totalTime(n._tTime),n=n._dp;e._zTime=-1e-8}},Ex=function(e,t,n,i){return t.parent&&gx(t),t._start=tx((vy(n)?n:n||e!==Qv?Nx(e,n,t):e._time)+t._delay),t._end=tx(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),px(e,t,"_first","_last",e._sort?"_start":0),Px(t)||(e._recent=t),i||Cx(e,t),e._ts<0&&Mx(e,e._tTime),e},Tx=function(e,t){return(Dy.ScrollTrigger||Iy("scrollTrigger",t))&&Dy.ScrollTrigger.create(t,e)},Ax=function(e,t,n,i,r){return Rb(e,t,r),e._initted?!n&&e._pt&&!Kv&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&ny!==db.frame?(Hy.push(e),e._lazy=[r,i],1):void 0:1},kx=function e(t){var n=t.parent;return n&&n._ts&&n._initted&&!n._lock&&(n.rawTime()<0||e(n))},Px=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},Lx=function(e,t,n,i){var r=e._repeat,s=tx(t)||0,a=e._tTime/e._tDur;return a&&!i&&(e._time*=s/e._dur),e._dur=s,e._tDur=r?r<0?1e10:tx(s*(r+1)+e._rDelay*r):s,a>0&&!i&&Mx(e,e._tTime=e._tDur*a),e.parent&&Sx(e),n||vx(e.parent,e),e},Dx=function(e){return e instanceof Tb?vx(e):Lx(e,e._dur)},Rx={_start:0,endTime:Fy,totalDuration:Fy},Nx=function e(t,n,i){var r,s,a,o=t.labels,l=t._recent||Rx,c=t.duration()>=oy?l.endTime(!1):t._dur;return my(n)&&(isNaN(n)||n in o)?(s=n.charAt(0),a="%"===n.substr(-1),r=n.indexOf("="),"<"===s||">"===s?(r>=0&&(n=n.replace(/=/,"")),("<"===s?l._start:l.endTime(l._repeat>=0))+(parseFloat(n.substr(1))||0)*(a?(r<0?l:i).totalDuration()/100:1)):r<0?(n in o||(o[n]=c),o[n]):(s=parseFloat(n.charAt(r-1)+n.substr(r+1)),a&&i&&(s=s/100*(My(i)?i[0]:i).totalDuration()),r>1?e(t,n.substr(0,r-1),i)+s:c+s)):null==n?c:+n},Ix=function(e,t,n){var i,r,s=vy(t[1]),a=(s?2:1)+(e<2?0:1),o=t[a];if(s&&(o.duration=t[1]),o.parent=n,e){for(i=o,r=n;r&&!("immediateRender"in i);)i=r.vars.defaults||{},r=by(r.vars.inherit)&&r.parent;o.immediateRender=by(i.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return new Fb(t[0],o,t[a+1])},Ox=function(e,t){return e||0===e?t(e):t},zx=function(e,t,n){return n<e?e:n>t?t:n},Fx=function(e,t){return my(e)&&(t=Ly.exec(e))?t[1]:""},jx=[].slice,Bx=function(e,t){return e&&xy(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&xy(e[0]))&&!e.nodeType&&e!==Jv},Vx=function(e,t,n){return void 0===n&&(n=[]),e.forEach(function(e){var i;return my(e)&&!t||Bx(e,1)?(i=n).push.apply(i,Ux(e)):n.push(e)})||n},Ux=function(e,t,n){return Zv&&!t&&Zv.selector?Zv.selector(e):!my(e)||n||!$v&&fb()?My(e)?Vx(e,n):Bx(e)?jx.call(e,0):e?[e]:[]:jx.call((t||ey).querySelectorAll(e),0)},Hx=function(e){return e=Ux(e)[0]||Oy("Invalid scope")||{},function(t){var n=e.current||e.nativeElement||e;return Ux(t,n.querySelectorAll?n:n===e?Oy("Invalid scope")||ey.createElement("div"):e)}},Wx=function(e){return e.sort(function(){return.5-Math.random()})},Gx=function(e){if(gy(e))return e;var t=xy(e)?e:{each:e},n=bb(t.ease),i=t.from||0,r=parseFloat(t.base)||0,s={},a=i>0&&i<1,o=isNaN(i)||a,l=t.axis,c=i,u=i;return my(i)?c=u={center:.5,edges:.5,end:1}[i]||0:!a&&o&&(c=i[0],u=i[1]),function(e,a,h){var d,f,p,m,g,v,y,x,b,_=(h||t).length,w=s[_];if(!w){if(!(b="auto"===t.grid?0:(t.grid||[1,oy])[1])){for(y=-oy;y<(y=h[b++].getBoundingClientRect().left)&&b<_;);b<_&&b--}for(w=s[_]=[],d=o?Math.min(b,_)*c-.5:i%b,f=b===oy?0:o?_*u/b-.5:i/b|0,y=0,x=oy,v=0;v<_;v++)p=v%b-d,m=f-(v/b|0),w[v]=g=l?Math.abs("y"===l?m:p):dy(p*p+m*m),g>y&&(y=g),g<x&&(x=g);"random"===i&&Wx(w),w.max=y-x,w.min=x,w.v=_=(parseFloat(t.amount)||parseFloat(t.each)*(b>_?_-1:l?"y"===l?_/b:b:Math.max(b,_/b))||0)*("edges"===i?-1:1),w.b=_<0?r-_:r,w.u=Fx(t.amount||t.each)||0,n=n&&_<0?yb(n):n}return _=(w[e]-w.min)/w.max||0,tx(w.b+(n?n(_):_)*w.v)+w.u}},qx=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(n){var i=tx(Math.round(parseFloat(n)/e)*e*t);return(i-i%1)/t+(vy(n)?0:Fx(n))}},Xx=function(e,t){var n,i,r=My(e);return!r&&xy(e)&&(n=r=e.radius||oy,e.values?(e=Ux(e.values),(i=!vy(e[0]))&&(n*=n)):e=qx(e.increment)),Ox(t,r?gy(e)?function(t){return i=e(t),Math.abs(i-t)<=n?i:t}:function(t){for(var r,s,a=parseFloat(i?t.x:t),o=parseFloat(i?t.y:0),l=oy,c=0,u=e.length;u--;)(r=i?(r=e[u].x-a)*r+(s=e[u].y-o)*s:Math.abs(e[u]-a))<l&&(l=r,c=u);return c=!n||l<=n?e[c]:t,i||c===t||vy(t)?c:c+Fx(t)}:qx(e))},Yx=function(e,t,n,i){return Ox(My(e)?!t:!0===n?!!(n=0):!i,function(){return My(e)?e[~~(Math.random()*e.length)]:(n=n||1e-5)&&(i=n<1?Math.pow(10,(n+"").length-2):1)&&Math.floor(Math.round((e-n/2+Math.random()*(t-e+.99*n))/n)*n*i)/i})},Kx=function(e,t,n){return Ox(n,function(n){return e[~~t(n)]})},Zx=function(e){for(var t,n,i,r,s=0,a="";~(t=e.indexOf("random(",s));)i=e.indexOf(")",t),r="["===e.charAt(t+7),n=e.substr(t+7,i-t-7).match(r?Py:Cy),a+=e.substr(s,t-s)+Yx(r?n:+n[0],r?0:+n[1],+n[2]||1e-5),s=i+1;return a+e.substr(s,e.length-s)},Qx=function(e,t,n,i,r){var s=t-e,a=i-n;return Ox(r,function(t){return n+((t-e)/s*a||0)})},Jx=function(e,t,n){var i,r,s,a=e.labels,o=oy;for(i in a)(r=a[i]-t)<0===!!n&&r&&o>(r=Math.abs(r))&&(s=i,o=r);return s},$x=function(e,t,n){var i,r,s,a=e.vars,o=a[t],l=Zv,c=e._ctx;if(o)return i=a[t+"Params"],r=a.callbackScope||e,n&&Hy.length&&rx(),c&&(Zv=c),s=i?o.apply(r,i):o.call(r),Zv=l,s},eb=function(e){return gx(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Kv),e.progress()<1&&$x(e,"onInterrupt"),e},tb=[],nb=function(e){if(e)if(e=!e.name&&e.default||e,_y()||e.headless){var t=e.name,n=gy(e),i=t&&!n&&e.init?function(){this._props=[]}:e,r={init:Fy,render:Xb,add:Lb,kill:Kb,modifier:Yb,rawVars:0},s={targetTest:0,get:0,getSetter:Hb,aliases:{},register:0};if(fb(),e!==i){if(Gy[t])return;cx(i,cx(dx(e,r),s)),ux(i.prototype,ux(r,dx(e,s))),Gy[i.prop=t]=i,e.targetTest&&(Yy.push(i),Uy[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}zy(t,i),e.register&&e.register(h_,i,Jb)}else tb.push(e)},ib=255,rb={aqua:[0,ib,ib],lime:[0,ib,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,ib],navy:[0,0,128],white:[ib,ib,ib],olive:[128,128,0],yellow:[ib,ib,0],orange:[ib,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[ib,0,0],pink:[ib,192,203],cyan:[0,ib,ib],transparent:[ib,ib,ib,0]},sb=function(e,t,n){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(n-t)*e*6:e<.5?n:3*e<2?t+(n-t)*(2/3-e)*6:t)*ib+.5|0},ab=function(e,t,n){var i,r,s,a,o,l,c,u,h,d,f=e?vy(e)?[e>>16,e>>8&ib,e&ib]:0:rb.black;if(!f){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),rb[e])f=rb[e];else if("#"===e.charAt(0)){if(e.length<6&&(i=e.charAt(1),r=e.charAt(2),s=e.charAt(3),e="#"+i+i+r+r+s+s+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(f=parseInt(e.substr(1,6),16))>>16,f>>8&ib,f&ib,parseInt(e.substr(7),16)/255];f=[(e=parseInt(e.substr(1),16))>>16,e>>8&ib,e&ib]}else if("hsl"===e.substr(0,3))if(f=d=e.match(Cy),t){if(~e.indexOf("="))return f=e.match(Ey),n&&f.length<4&&(f[3]=1),f}else a=+f[0]%360/360,o=+f[1]/100,i=2*(l=+f[2]/100)-(r=l<=.5?l*(o+1):l+o-l*o),f.length>3&&(f[3]*=1),f[0]=sb(a+1/3,i,r),f[1]=sb(a,i,r),f[2]=sb(a-1/3,i,r);else f=e.match(Cy)||rb.transparent;f=f.map(Number)}return t&&!d&&(i=f[0]/ib,r=f[1]/ib,s=f[2]/ib,l=((c=Math.max(i,r,s))+(u=Math.min(i,r,s)))/2,c===u?a=o=0:(h=c-u,o=l>.5?h/(2-c-u):h/(c+u),a=c===i?(r-s)/h+(r<s?6:0):c===r?(s-i)/h+2:(i-r)/h+4,a*=60),f[0]=~~(a+.5),f[1]=~~(100*o+.5),f[2]=~~(100*l+.5)),n&&f.length<4&&(f[3]=1),f},ob=function(e){var t=[],n=[],i=-1;return e.split(cb).forEach(function(e){var r=e.match(Ty)||[];t.push.apply(t,r),n.push(i+=r.length+1)}),t.c=n,t},lb=function(e,t,n){var i,r,s,a,o="",l=(e+o).match(cb),c=t?"hsla(":"rgba(",u=0;if(!l)return e;if(l=l.map(function(e){return(e=ab(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),n&&(s=ob(e),(i=n.c).join(o)!==s.c.join(o)))for(a=(r=e.replace(cb,"1").split(Ty)).length-1;u<a;u++)o+=r[u]+(~i.indexOf(u)?l.shift()||c+"0,0,0,0)":(s.length?s:l.length?l:n).shift());if(!r)for(a=(r=e.split(cb)).length-1;u<a;u++)o+=r[u]+l[u];return o+r[a]},cb=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in rb)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),ub=/hsl[a]?\(/,hb=function(e){var t,n=e.join(" ");if(cb.lastIndex=0,cb.test(n))return t=ub.test(n),e[1]=lb(e[1],t),e[0]=lb(e[0],t,ob(e[1])),!0},db=function(){var e,t,n,i,r,s,a=Date.now,o=500,l=33,c=a(),u=c,h=1e3/240,d=h,f=[],p=function n(p){var m,g,v,y,x=a()-u,b=!0===p;if((x>o||x<0)&&(c+=x-l),((m=(v=(u+=x)-c)-d)>0||b)&&(y=++i.frame,r=v-1e3*i.time,i.time=v/=1e3,d+=m+(m>=h?4:h-m),g=1),b||(e=t(n)),g)for(s=0;s<f.length;s++)f[s](v,r,y,p)};return i={time:0,frame:0,tick:function(){p(!0)},deltaRatio:function(e){return r/(1e3/(e||60))},wake:function(){ty&&(!$v&&_y()&&(Jv=$v=window,ey=Jv.document||{},Dy.gsap=h_,(Jv.gsapVersions||(Jv.gsapVersions=[])).push(h_.version),Ny(Ry||Jv.GreenSockGlobals||!Jv.gsap&&Jv||{}),tb.forEach(nb)),n="undefined"!==typeof requestAnimationFrame&&requestAnimationFrame,e&&i.sleep(),t=n||function(e){return setTimeout(e,d-1e3*i.time+1|0)},ry=1,p(2))},sleep:function(){(n?cancelAnimationFrame:clearTimeout)(e),ry=0,t=Fy},lagSmoothing:function(e,t){o=e||1/0,l=Math.min(t||33,o)},fps:function(e){h=1e3/(e||240),d=1e3*i.time+h},add:function(e,t,n){var r=t?function(t,n,s,a){e(t,n,s,a),i.remove(r)}:e;return i.remove(e),f[n?"unshift":"push"](r),fb(),r},remove:function(e,t){~(t=f.indexOf(e))&&f.splice(t,1)&&s>=t&&s--},_listeners:f},i}(),fb=function(){return!ry&&db.wake()},pb={},mb=/^[\d.\-M][\d.\-,\s]/,gb=/["']/g,vb=function(e){for(var t,n,i,r={},s=e.substr(1,e.length-3).split(":"),a=s[0],o=1,l=s.length;o<l;o++)n=s[o],t=o!==l-1?n.lastIndexOf(","):n.length,i=n.substr(0,t),r[a]=isNaN(i)?i.replace(gb,"").trim():+i,a=n.substr(t+1).trim();return r},yb=function(e){return function(t){return 1-e(1-t)}},xb=function e(t,n){for(var i,r=t._first;r;)r instanceof Tb?e(r,n):!r.vars.yoyoEase||r._yoyo&&r._repeat||r._yoyo===n||(r.timeline?e(r.timeline,n):(i=r._ease,r._ease=r._yEase,r._yEase=i,r._yoyo=n)),r=r._next},bb=function(e,t){return e&&(gy(e)?e:pb[e]||function(e){var t=(e+"").split("("),n=pb[t[0]];return n&&t.length>1&&n.config?n.config.apply(null,~e.indexOf("{")?[vb(t[1])]:function(e){var t=e.indexOf("(")+1,n=e.indexOf(")"),i=e.indexOf("(",t);return e.substring(t,~i&&i<n?e.indexOf(")",n+1):n)}(e).split(",").map(ox)):pb._CE&&mb.test(e)?pb._CE("",e):n}(e))||t},_b=function(e,t,n,i){void 0===n&&(n=function(e){return 1-t(1-e)}),void 0===i&&(i=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var r,s={easeIn:t,easeOut:n,easeInOut:i};return $y(e,function(e){for(var t in pb[e]=Dy[e]=s,pb[r=e.toLowerCase()]=n,s)pb[r+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=pb[e+"."+t]=s[t]}),s},wb=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},Sb=function e(t,n,i){var r=n>=1?n:1,s=(i||(t?.3:.45))/(n<1?n:1),a=s/cy*(Math.asin(1/r)||0),o=function(e){return 1===e?1:r*Math.pow(2,-10*e)*py((e-a)*s)+1},l="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:wb(o);return s=cy/s,l.config=function(n,i){return e(t,n,i)},l},Mb=function e(t,n){void 0===n&&(n=1.70158);var i=function(e){return e?--e*e*((n+1)*e+n)+1:0},r="out"===t?i:"in"===t?function(e){return 1-i(1-e)}:wb(i);return r.config=function(n){return e(t,n)},r};$y("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var n=t<5?t+1:t;_b(e+",Power"+(n-1),t?function(e){return Math.pow(e,n)}:function(e){return e},function(e){return 1-Math.pow(1-e,n)},function(e){return e<.5?Math.pow(2*e,n)/2:1-Math.pow(2*(1-e),n)/2})}),pb.Linear.easeNone=pb.none=pb.Linear.easeIn,_b("Elastic",Sb("in"),Sb("out"),Sb()),function(e,t){var n=1/t,i=2*n,r=2.5*n,s=function(s){return s<n?e*s*s:s<i?e*Math.pow(s-1.5/t,2)+.75:s<r?e*(s-=2.25/t)*s+.9375:e*Math.pow(s-2.625/t,2)+.984375};_b("Bounce",function(e){return 1-s(1-e)},s)}(7.5625,2.75),_b("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),_b("Circ",function(e){return-(dy(1-e*e)-1)}),_b("Sine",function(e){return 1===e?1:1-fy(e*uy)}),_b("Back",Mb("in"),Mb("out"),Mb()),pb.SteppedEase=pb.steps=Dy.SteppedEase={config:function(e,t){void 0===e&&(e=1);var n=1/e,i=e+(t?0:1),r=t?1:0;return function(e){return((i*zx(0,.99999999,e)|0)+r)*n}}},ay.ease=pb["quad.out"],$y("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return Ky+=e+","+e+"Params,"});var Cb=function(e,t){this.id=hy++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:Jy,this.set=t?t.getSetter:Hb},Eb=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,Lx(this,+e.duration,1,1),this.data=e.data,Zv&&(this._ctx=Zv,Zv.data.push(this)),ry||db.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,Lx(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(fb(),!arguments.length)return this._tTime;var n=this._dp;if(n&&n.smoothChildTiming&&this._ts){for(Mx(this,e),!n._dp||n.parent||Cx(n,this);n&&n.parent;)n.parent._time!==n._start+(n._ts>=0?n._tTime/n._ts:(n.totalDuration()-n._tTime)/-n._ts)&&n.totalTime(n._tTime,!0),n=n.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&Ex(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===ly||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),ax(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+bx(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+bx(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var n=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*n,t):this._repeat?_x(this._tTime,n)+1:1},t.timeScale=function(e,t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var n=this.parent&&this._ts?wx(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(zx(-Math.abs(this._delay),this.totalDuration(),n),!1!==t),Sx(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(fb(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==ly&&(this._tTime-=ly)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&Ex(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(by(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?wx(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=Vy);var t=Kv;return Kv=e,sx(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),Kv=t,this},t.globalTime=function(e){for(var t=this,n=arguments.length?e:t.rawTime();t;)n=t._start+n/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):n},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,Dx(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,Dx(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(Nx(this,e),by(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,by(t)),this._dur||(this._zTime=-1e-8),this},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,n=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=n&&e<this.endTime(!0)-ly))},t.eventCallback=function(e,t,n){var i=this.vars;return arguments.length>1?(t?(i[e]=t,n&&(i[e+"Params"]=n),"onUpdate"===e&&(this._onUpdate=t)):delete i[e],this):i[e]},t.then=function(e){var t=this;return new Promise(function(n){var i=gy(e)?e:lx,r=function(){var e=t.then;t.then=null,gy(i)&&(i=i(t))&&(i.then||i===t)&&(t.then=e),n(i),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?r():t._prom=r})},t.kill=function(){eb(this)},e}();cx(Eb.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Tb=function(e){function t(t,n){var i;return void 0===t&&(t={}),(i=e.call(this,t)||this).labels={},i.smoothChildTiming=!!t.smoothChildTiming,i.autoRemoveChildren=!!t.autoRemoveChildren,i._sort=by(t.sortChildren),Qv&&Ex(t.parent||Qv,qv(i),n),t.reversed&&i.reverse(),t.paused&&i.paused(!0),t.scrollTrigger&&Tx(qv(i),t.scrollTrigger),i}Xv(t,e);var n=t.prototype;return n.to=function(e,t,n){return Ix(0,arguments,this),this},n.from=function(e,t,n){return Ix(1,arguments,this),this},n.fromTo=function(e,t,n,i){return Ix(2,arguments,this),this},n.set=function(e,t,n){return t.duration=0,t.parent=this,fx(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new Fb(e,t,Nx(this,n),1),this},n.call=function(e,t,n){return Ex(this,Fb.delayedCall(0,e,t),n)},n.staggerTo=function(e,t,n,i,r,s,a){return n.duration=t,n.stagger=n.stagger||i,n.onComplete=s,n.onCompleteParams=a,n.parent=this,new Fb(e,n,Nx(this,r)),this},n.staggerFrom=function(e,t,n,i,r,s,a){return n.runBackwards=1,fx(n).immediateRender=by(n.immediateRender),this.staggerTo(e,t,n,i,r,s,a)},n.staggerFromTo=function(e,t,n,i,r,s,a,o){return i.startAt=n,fx(i).immediateRender=by(i.immediateRender),this.staggerTo(e,t,i,r,s,a,o)},n.render=function(e,t,n){var i,r,s,a,o,l,c,u,h,d,f,p,m=this._time,g=this._dirty?this.totalDuration():this._tDur,v=this._dur,y=e<=0?0:tx(e),x=this._zTime<0!==e<0&&(this._initted||!v);if(this!==Qv&&y>g&&e>=0&&(y=g),y!==this._tTime||n||x){if(m!==this._time&&v&&(y+=this._time-m,e+=this._time-m),i=y,h=this._start,l=!(u=this._ts),x&&(v||(m=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(f=this._yoyo,o=v+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,n);if(i=tx(y%o),y===g?(a=this._repeat,i=v):((a=~~(d=tx(y/o)))&&a===d&&(i=v,a--),i>v&&(i=v)),d=_x(this._tTime,o),!m&&this._tTime&&d!==a&&this._tTime-d*o-this._dur<=0&&(d=a),f&&1&a&&(i=v-i,p=1),a!==d&&!this._lock){var b=f&&1&d,_=b===(f&&1&a);if(a<d&&(b=!b),m=b?0:y%v?v:y,this._lock=1,this.render(m||(p?0:tx(a*o)),t,!v)._lock=0,this._tTime=y,!t&&this.parent&&$x(this,"onRepeat"),this.vars.repeatRefresh&&!p&&(this.invalidate()._lock=1),m&&m!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(v=this._dur,g=this._tDur,_&&(this._lock=2,m=b?v:-1e-4,this.render(m,!0),this.vars.repeatRefresh&&!p&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;xb(this,p)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,n){var i;if(n>t)for(i=e._first;i&&i._start<=n;){if("isPause"===i.data&&i._start>t)return i;i=i._next}else for(i=e._last;i&&i._start>=n;){if("isPause"===i.data&&i._start<t)return i;i=i._prev}}(this,tx(m),tx(i)),c&&(y-=i-(i=c._start))),this._tTime=y,this._time=i,this._act=!u,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,m=0),!m&&y&&!t&&!d&&($x(this,"onStart"),this._tTime!==y))return this;if(i>=m&&e>=0)for(r=this._first;r;){if(s=r._next,(r._act||i>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(e,t,n);if(r.render(r._ts>0?(i-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(i-r._start)*r._ts,t,n),i!==this._time||!this._ts&&!l){c=0,s&&(y+=this._zTime=-1e-8);break}}r=s}else{r=this._last;for(var w=e<0?e:i;r;){if(s=r._prev,(r._act||w<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(e,t,n);if(r.render(r._ts>0?(w-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(w-r._start)*r._ts,t,n||Kv&&sx(r)),i!==this._time||!this._ts&&!l){c=0,s&&(y+=this._zTime=w?-1e-8:ly);break}}r=s}}if(c&&!t&&(this.pause(),c.render(i>=m?0:-1e-8)._zTime=i>=m?1:-1,this._ts))return this._start=h,Sx(this),this.render(e,t,n);this._onUpdate&&!t&&$x(this,"onUpdate",!0),(y===g&&this._tTime>=this.totalDuration()||!y&&m)&&(h!==this._start&&Math.abs(u)===Math.abs(this._ts)||this._lock||((e||!v)&&(y===g&&this._ts>0||!y&&this._ts<0)&&gx(this,1),t||e<0&&!m||!y&&!m&&g||($x(this,y===g&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<g&&this.timeScale()>0)&&this._prom())))}return this},n.add=function(e,t){var n=this;if(vy(t)||(t=Nx(this,t,e)),!(e instanceof Eb)){if(My(e))return e.forEach(function(e){return n.add(e,t)}),this;if(my(e))return this.addLabel(e,t);if(!gy(e))return this;e=Fb.delayedCall(0,e)}return this!==e?Ex(this,e,t):this},n.getChildren=function(e,t,n,i){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===n&&(n=!0),void 0===i&&(i=-oy);for(var r=[],s=this._first;s;)s._start>=i&&(s instanceof Fb?t&&r.push(s):(n&&r.push(s),e&&r.push.apply(r,s.getChildren(!0,t,n)))),s=s._next;return r},n.getById=function(e){for(var t=this.getChildren(1,1,1),n=t.length;n--;)if(t[n].vars.id===e)return t[n]},n.remove=function(e){return my(e)?this.removeLabel(e):gy(e)?this.killTweensOf(e):(e.parent===this&&mx(this,e),e===this._recent&&(this._recent=this._last),vx(this))},n.totalTime=function(t,n){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=tx(db.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,n),this._forcing=0,this):this._tTime},n.addLabel=function(e,t){return this.labels[e]=Nx(this,t),this},n.removeLabel=function(e){return delete this.labels[e],this},n.addPause=function(e,t,n){var i=Fb.delayedCall(0,t||Fy,n);return i.data="isPause",this._hasPause=1,Ex(this,i,Nx(this,e))},n.removePause=function(e){var t=this._first;for(e=Nx(this,e);t;)t._start===e&&"isPause"===t.data&&gx(t),t=t._next},n.killTweensOf=function(e,t,n){for(var i=this.getTweensOf(e,n),r=i.length;r--;)Ab!==i[r]&&i[r].kill(e,t);return this},n.getTweensOf=function(e,t){for(var n,i=[],r=Ux(e),s=this._first,a=vy(t);s;)s instanceof Fb?ix(s._targets,r)&&(a?(!Ab||s._initted&&s._ts)&&s.globalTime(0)<=t&&s.globalTime(s.totalDuration())>t:!t||s.isActive())&&i.push(s):(n=s.getTweensOf(r,t)).length&&i.push.apply(i,n),s=s._next;return i},n.tweenTo=function(e,t){t=t||{};var n,i=this,r=Nx(i,e),s=t,a=s.startAt,o=s.onStart,l=s.onStartParams,c=s.immediateRender,u=Fb.to(i,cx({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:r,overwrite:"auto",duration:t.duration||Math.abs((r-(a&&"time"in a?a.time:i._time))/i.timeScale())||ly,onStart:function(){if(i.pause(),!n){var e=t.duration||Math.abs((r-(a&&"time"in a?a.time:i._time))/i.timeScale());u._dur!==e&&Lx(u,e,0,1).render(u._time,!0,!0),n=1}o&&o.apply(u,l||[])}},t));return c?u.render(0):u},n.tweenFromTo=function(e,t,n){return this.tweenTo(t,cx({startAt:{time:Nx(this,e)}},n))},n.recent=function(){return this._recent},n.nextLabel=function(e){return void 0===e&&(e=this._time),Jx(this,Nx(this,e))},n.previousLabel=function(e){return void 0===e&&(e=this._time),Jx(this,Nx(this,e),1)},n.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+ly)},n.shiftChildren=function(e,t,n){void 0===n&&(n=0);for(var i,r=this._first,s=this.labels;r;)r._start>=n&&(r._start+=e,r._end+=e),r=r._next;if(t)for(i in s)s[i]>=n&&(s[i]+=e);return vx(this)},n.invalidate=function(t){var n=this._first;for(this._lock=0;n;)n.invalidate(t),n=n._next;return e.prototype.invalidate.call(this,t)},n.clear=function(e){void 0===e&&(e=!0);for(var t,n=this._first;n;)t=n._next,this.remove(n),n=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),vx(this)},n.totalDuration=function(e){var t,n,i,r=0,s=this,a=s._last,o=oy;if(arguments.length)return s.timeScale((s._repeat<0?s.duration():s.totalDuration())/(s.reversed()?-e:e));if(s._dirty){for(i=s.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(n=a._start)>o&&s._sort&&a._ts&&!s._lock?(s._lock=1,Ex(s,a,n-a._delay,1)._lock=0):o=n,n<0&&a._ts&&(r-=n,(!i&&!s._dp||i&&i.smoothChildTiming)&&(s._start+=n/s._ts,s._time-=n,s._tTime-=n),s.shiftChildren(-n,!1,-Infinity),o=0),a._end>r&&a._ts&&(r=a._end),a=t;Lx(s,s===Qv&&s._time>r?s._time:r,1,1),s._dirty=0}return s._tDur},t.updateRoot=function(e){if(Qv._ts&&(ax(Qv,wx(e,Qv)),ny=db.frame),db.frame>=Xy){Xy+=sy.autoSleep||120;var t=Qv._first;if((!t||!t._ts)&&sy.autoSleep&&db._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||db.sleep()}}},t}(Eb);cx(Tb.prototype,{_lock:0,_hasPause:0,_forcing:0});var Ab,kb,Pb=function(e,t,n,i,r,s,a){var o,l,c,u,h,d,f,p,m=new Jb(this._pt,e,t,0,1,qb,null,r),g=0,v=0;for(m.b=n,m.e=i,n+="",(f=~(i+="").indexOf("random("))&&(i=Zx(i)),s&&(s(p=[n,i],e,t),n=p[0],i=p[1]),l=n.match(Ay)||[];o=Ay.exec(i);)u=o[0],h=i.substring(g,o.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),u!==l[v++]&&(d=parseFloat(l[v-1])||0,m._pt={_next:m._pt,p:h||1===v?h:",",s:d,c:"="===u.charAt(1)?nx(d,u)-d:parseFloat(u)-d,m:c&&c<4?Math.round:0},g=Ay.lastIndex);return m.c=g<i.length?i.substring(g,i.length):"",m.fp=a,(ky.test(i)||f)&&(m.e=0),this._pt=m,m},Lb=function(e,t,n,i,r,s,a,o,l,c){gy(i)&&(i=i(r||0,e,s));var u,h=e[t],d="get"!==n?n:gy(h)?l?e[t.indexOf("set")||!gy(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():h,f=gy(h)?l?Vb:Bb:jb;if(my(i)&&(~i.indexOf("random(")&&(i=Zx(i)),"="===i.charAt(1)&&((u=nx(d,i)+(Fx(d)||0))||0===u)&&(i=u)),!c||d!==i||kb)return isNaN(d*i)||""===i?(!h&&!(t in e)&&Iy(t,i),Pb.call(this,e,t,d,i,f,o||sy.stringFilter,l)):(u=new Jb(this._pt,e,t,+d||0,i-(d||0),"boolean"===typeof h?Gb:Wb,0,f),l&&(u.fp=l),a&&u.modifier(a,this,e),this._pt=u)},Db=function(e,t,n,i,r,s){var a,o,l,c;if(Gy[e]&&!1!==(a=new Gy[e]).init(r,a.rawVars?t[e]:function(e,t,n,i,r){if(gy(e)&&(e=Ib(e,r,t,n,i)),!xy(e)||e.style&&e.nodeType||My(e)||Sy(e))return my(e)?Ib(e,r,t,n,i):e;var s,a={};for(s in e)a[s]=Ib(e[s],r,t,n,i);return a}(t[e],i,r,s,n),n,i,s)&&(n._pt=o=new Jb(n._pt,r,e,0,1,a.render,a,0,a.priority),n!==iy))for(l=n._ptLookup[n._targets.indexOf(r)],c=a._props.length;c--;)l[a._props[c]]=o;return a},Rb=function e(t,n,i){var r,s,a,o,l,c,u,h,d,f,p,m,g,v=t.vars,y=v.ease,x=v.startAt,b=v.immediateRender,_=v.lazy,w=v.onUpdate,S=v.runBackwards,M=v.yoyoEase,C=v.keyframes,E=v.autoRevert,T=t._dur,A=t._startAt,k=t._targets,P=t.parent,L=P&&"nested"===P.data?P.vars.targets:k,D="auto"===t._overwrite&&!Yv,R=t.timeline;if(R&&(!C||!y)&&(y="none"),t._ease=bb(y,ay.ease),t._yEase=M?yb(bb(!0===M?y:M,ay.ease)):0,M&&t._yoyo&&!t._repeat&&(M=t._yEase,t._yEase=t._ease,t._ease=M),t._from=!R&&!!v.runBackwards,!R||C&&!v.stagger){if(m=(h=k[0]?Qy(k[0]).harness:0)&&v[h.prop],r=dx(v,Uy),A&&(A._zTime<0&&A.progress(1),n<0&&S&&b&&!E?A.render(-1,!0):A.revert(S&&T?By:jy),A._lazy=0),x){if(gx(t._startAt=Fb.set(k,cx({data:"isStart",overwrite:!1,parent:P,immediateRender:!0,lazy:!A&&by(_),startAt:null,delay:0,onUpdate:w&&function(){return $x(t,"onUpdate")},stagger:0},x))),t._startAt._dp=0,t._startAt._sat=t,n<0&&(Kv||!b&&!E)&&t._startAt.revert(By),b&&T&&n<=0&&i<=0)return void(n&&(t._zTime=n))}else if(S&&T&&!A)if(n&&(b=!1),a=cx({overwrite:!1,data:"isFromStart",lazy:b&&!A&&by(_),immediateRender:b,stagger:0,parent:P},r),m&&(a[h.prop]=m),gx(t._startAt=Fb.set(k,a)),t._startAt._dp=0,t._startAt._sat=t,n<0&&(Kv?t._startAt.revert(By):t._startAt.render(-1,!0)),t._zTime=n,b){if(!n)return}else e(t._startAt,ly,ly);for(t._pt=t._ptCache=0,_=T&&by(_)||_&&!T,s=0;s<k.length;s++){if(u=(l=k[s])._gsap||Zy(k)[s]._gsap,t._ptLookup[s]=f={},Wy[u.id]&&Hy.length&&rx(),p=L===k?s:L.indexOf(l),h&&!1!==(d=new h).init(l,m||r,t,p,L)&&(t._pt=o=new Jb(t._pt,l,d.name,0,1,d.render,d,0,d.priority),d._props.forEach(function(e){f[e]=o}),d.priority&&(c=1)),!h||m)for(a in r)Gy[a]&&(d=Db(a,r,t,p,l,L))?d.priority&&(c=1):f[a]=o=Lb.call(t,l,a,"get",r[a],p,L,0,v.stringFilter);t._op&&t._op[s]&&t.kill(l,t._op[s]),D&&t._pt&&(Ab=t,Qv.killTweensOf(l,f,t.globalTime(n)),g=!t.parent,Ab=0),t._pt&&_&&(Wy[u.id]=1)}c&&Qb(t),t._onInit&&t._onInit(t)}t._onUpdate=w,t._initted=(!t._op||t._pt)&&!g,C&&n<=0&&R.render(oy,!0,!0)},Nb=function(e,t,n,i){var r,s,a=t.ease||i||"power1.inOut";if(My(t))s=n[e]||(n[e]=[]),t.forEach(function(e,n){return s.push({t:n/(t.length-1)*100,v:e,e:a})});else for(r in t)s=n[r]||(n[r]=[]),"ease"===r||s.push({t:parseFloat(e),v:t[r],e:a})},Ib=function(e,t,n,i,r){return gy(e)?e.call(t,n,i,r):my(e)&&~e.indexOf("random(")?Zx(e):e},Ob=Ky+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",zb={};$y(Ob+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return zb[e]=1});var Fb=function(e){function t(t,n,i,r){var s;"number"===typeof n&&(i.duration=n,n=i,i=null);var a,o,l,c,u,h,d,f,p=(s=e.call(this,r?n:fx(n))||this).vars,m=p.duration,g=p.delay,v=p.immediateRender,y=p.stagger,x=p.overwrite,b=p.keyframes,_=p.defaults,w=p.scrollTrigger,S=p.yoyoEase,M=n.parent||Qv,C=(My(t)||Sy(t)?vy(t[0]):"length"in n)?[t]:Ux(t);if(s._targets=C.length?Zy(C):Oy("GSAP target "+t+" not found. https://gsap.com",!sy.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=x,b||y||wy(m)||wy(g)){if(n=s.vars,(a=s.timeline=new Tb({data:"nested",defaults:_||{},targets:M&&"nested"===M.data?M.vars.targets:C})).kill(),a.parent=a._dp=qv(s),a._start=0,y||wy(m)||wy(g)){if(c=C.length,d=y&&Gx(y),xy(y))for(u in y)~Ob.indexOf(u)&&(f||(f={}),f[u]=y[u]);for(o=0;o<c;o++)(l=dx(n,zb)).stagger=0,S&&(l.yoyoEase=S),f&&ux(l,f),h=C[o],l.duration=+Ib(m,qv(s),o,h,C),l.delay=(+Ib(g,qv(s),o,h,C)||0)-s._delay,!y&&1===c&&l.delay&&(s._delay=g=l.delay,s._start+=g,l.delay=0),a.to(h,l,d?d(o,h,C):0),a._ease=pb.none;a.duration()?m=g=0:s.timeline=0}else if(b){fx(cx(a.vars.defaults,{ease:"none"})),a._ease=bb(b.ease||n.ease||"none");var E,T,A,k=0;if(My(b))b.forEach(function(e){return a.to(C,e,">")}),a.duration();else{for(u in l={},b)"ease"===u||"easeEach"===u||Nb(u,b[u],l,b.easeEach);for(u in l)for(E=l[u].sort(function(e,t){return e.t-t.t}),k=0,o=0;o<E.length;o++)(A={ease:(T=E[o]).e,duration:(T.t-(o?E[o-1].t:0))/100*m})[u]=T.v,a.to(C,A,k),k+=A.duration;a.duration()<m&&a.to({},{duration:m-a.duration()})}}m||s.duration(m=a.duration())}else s.timeline=0;return!0!==x||Yv||(Ab=qv(s),Qv.killTweensOf(C),Ab=0),Ex(M,qv(s),i),n.reversed&&s.reverse(),n.paused&&s.paused(!0),(v||!m&&!b&&s._start===tx(M._time)&&by(v)&&xx(qv(s))&&"nested"!==M.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-g)||0)),w&&Tx(qv(s),w),s}Xv(t,e);var n=t.prototype;return n.render=function(e,t,n){var i,r,s,a,o,l,c,u,h,d=this._time,f=this._tDur,p=this._dur,m=e<0,g=e>f-ly&&!m?f:e<ly?0:e;if(p){if(g!==this._tTime||!e||n||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==m||this._lazy){if(i=g,u=this.timeline,this._repeat){if(a=p+this._rDelay,this._repeat<-1&&m)return this.totalTime(100*a+e,t,n);if(i=tx(g%a),g===f?(s=this._repeat,i=p):(s=~~(o=tx(g/a)))&&s===o?(i=p,s--):i>p&&(i=p),(l=this._yoyo&&1&s)&&(h=this._yEase,i=p-i),o=_x(this._tTime,a),i===d&&!n&&this._initted&&s===o)return this._tTime=g,this;s!==o&&(u&&this._yEase&&xb(u,l),this.vars.repeatRefresh&&!l&&!this._lock&&i!==a&&this._initted&&(this._lock=n=1,this.render(tx(a*s),!0).invalidate()._lock=0))}if(!this._initted){if(Ax(this,m?e:i,n,t,g))return this._tTime=0,this;if(d!==this._time&&(!n||!this.vars.repeatRefresh||s===o))return this;if(p!==this._dur)return this.render(e,t,n)}if(this._tTime=g,this._time=i,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(i/p),this._from&&(this.ratio=c=1-c),!d&&g&&!t&&!o&&($x(this,"onStart"),this._tTime!==g))return this;for(r=this._pt;r;)r.r(c,r.d),r=r._next;u&&u.render(e<0?e:u._dur*u._ease(i/this._dur),t,n)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(m&&yx(this,e,0,n),$x(this,"onUpdate")),this._repeat&&s!==o&&this.vars.onRepeat&&!t&&this.parent&&$x(this,"onRepeat"),g!==this._tDur&&g||this._tTime!==g||(m&&!this._onUpdate&&yx(this,e,0,!0),(e||!p)&&(g===this._tDur&&this._ts>0||!g&&this._ts<0)&&gx(this,1),t||m&&!d||!(g||d||l)||($x(this,g===f?"onComplete":"onReverseComplete",!0),this._prom&&!(g<f&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,n,i){var r,s,a,o=e.ratio,l=t<0||!t&&(!e._start&&kx(e)&&(e._initted||!Px(e))||(e._ts<0||e._dp._ts<0)&&!Px(e))?0:1,c=e._rDelay,u=0;if(c&&e._repeat&&(u=zx(0,e._tDur,t),s=_x(u,c),e._yoyo&&1&s&&(l=1-l),s!==_x(e._tTime,c)&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||Kv||i||e._zTime===ly||!t&&e._zTime){if(!e._initted&&Ax(e,t,i,n,u))return;for(a=e._zTime,e._zTime=t||(n?ly:0),n||(n=t&&!a),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=u,r=e._pt;r;)r.r(l,r.d),r=r._next;t<0&&yx(e,t,0,!0),e._onUpdate&&!n&&$x(e,"onUpdate"),u&&e._repeat&&!n&&e.parent&&$x(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&gx(e,1),n||Kv||($x(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,n);return this},n.targets=function(){return this._targets},n.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},n.resetTo=function(e,t,n,i,r){ry||db.wake(),this._ts||this.play();var s=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||Rb(this,s),function(e,t,n,i,r,s,a,o){var l,c,u,h,d=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!d)for(d=e._ptCache[t]=[],u=e._ptLookup,h=e._targets.length;h--;){if((l=u[h][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return kb=1,e.vars[t]="+=0",Rb(e,a),kb=0,o?Oy(t+" not eligible for reset"):1;d.push(l)}for(h=d.length;h--;)(l=(c=d[h])._pt||c).s=!i&&0!==i||r?l.s+(i||0)+s*l.c:i,l.c=n-l.s,c.e&&(c.e=ex(n)+Fx(c.e)),c.b&&(c.b=l.s+Fx(c.b))}(this,e,t,n,i,this._ease(s/this._dur),s,r)?this.resetTo(e,t,n,i,1):(Mx(this,0),this.parent||px(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},n.kill=function(e,t){if(void 0===t&&(t="all"),!e&&(!t||"all"===t))return this._lazy=this._pt=0,this.parent?eb(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Kv),this;if(this.timeline){var n=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,Ab&&!0!==Ab.vars.overwrite)._first||eb(this),this.parent&&n!==this.timeline.totalDuration()&&Lx(this,this._dur*this.timeline._tDur/n,0,1),this}var i,r,s,a,o,l,c,u=this._targets,h=e?Ux(e):u,d=this._ptLookup,f=this._pt;if((!t||"all"===t)&&function(e,t){for(var n=e.length,i=n===t.length;i&&n--&&e[n]===t[n];);return n<0}(u,h))return"all"===t&&(this._pt=0),eb(this);for(i=this._op=this._op||[],"all"!==t&&(my(t)&&(o={},$y(t,function(e){return o[e]=1}),t=o),t=function(e,t){var n,i,r,s,a=e[0]?Qy(e[0]).harness:0,o=a&&a.aliases;if(!o)return t;for(i in n=ux({},t),o)if(i in n)for(r=(s=o[i].split(",")).length;r--;)n[s[r]]=n[i];return n}(u,t)),c=u.length;c--;)if(~h.indexOf(u[c]))for(o in r=d[c],"all"===t?(i[c]=t,a=r,s={}):(s=i[c]=i[c]||{},a=t),a)(l=r&&r[o])&&("kill"in l.d&&!0!==l.d.kill(o)||mx(this,l,"_pt"),delete r[o]),"all"!==s&&(s[o]=1);return this._initted&&!this._pt&&f&&eb(this),this},t.to=function(e,n){return new t(e,n,arguments[2])},t.from=function(e,t){return Ix(1,arguments)},t.delayedCall=function(e,n,i,r){return new t(n,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:n,onReverseComplete:n,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:r})},t.fromTo=function(e,t,n){return Ix(2,arguments)},t.set=function(e,n){return n.duration=0,n.repeatDelay||(n.repeat=0),new t(e,n)},t.killTweensOf=function(e,t,n){return Qv.killTweensOf(e,t,n)},t}(Eb);cx(Fb.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),$y("staggerTo,staggerFrom,staggerFromTo",function(e){Fb[e]=function(){var t=new Tb,n=jx.call(arguments,0);return n.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,n)}});var jb=function(e,t,n){return e[t]=n},Bb=function(e,t,n){return e[t](n)},Vb=function(e,t,n,i){return e[t](i.fp,n)},Ub=function(e,t,n){return e.setAttribute(t,n)},Hb=function(e,t){return gy(e[t])?Bb:yy(e[t])&&e.setAttribute?Ub:jb},Wb=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},Gb=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},qb=function(e,t){var n=t._pt,i="";if(!e&&t.b)i=t.b;else if(1===e&&t.e)i=t.e;else{for(;n;)i=n.p+(n.m?n.m(n.s+n.c*e):Math.round(1e4*(n.s+n.c*e))/1e4)+i,n=n._next;i+=t.c}t.set(t.t,t.p,i,t)},Xb=function(e,t){for(var n=t._pt;n;)n.r(e,n.d),n=n._next},Yb=function(e,t,n,i){for(var r,s=this._pt;s;)r=s._next,s.p===i&&s.modifier(e,t,n),s=r},Kb=function(e){for(var t,n,i=this._pt;i;)n=i._next,i.p===e&&!i.op||i.op===e?mx(this,i,"_pt"):i.dep||(t=1),i=n;return!t},Zb=function(e,t,n,i){i.mSet(e,t,i.m.call(i.tween,n,i.mt),i)},Qb=function(e){for(var t,n,i,r,s=e._pt;s;){for(t=s._next,n=i;n&&n.pr>s.pr;)n=n._next;(s._prev=n?n._prev:r)?s._prev._next=s:i=s,(s._next=n)?n._prev=s:r=s,s=t}e._pt=i},Jb=function(){function e(e,t,n,i,r,s,a,o,l){this.t=t,this.s=i,this.c=r,this.p=n,this.r=s||Wb,this.d=a||this,this.set=o||jb,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,n){this.mSet=this.mSet||this.set,this.set=Zb,this.m=e,this.mt=n,this.tween=t},e}();$y(Ky+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return Uy[e]=1}),Dy.TweenMax=Dy.TweenLite=Fb,Dy.TimelineLite=Dy.TimelineMax=Tb,Qv=new Tb({sortChildren:!1,defaults:ay,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),sy.stringFilter=hb;var $b=[],e_={},t_=[],n_=0,i_=0,r_=function(e){return(e_[e]||t_).map(function(e){return e()})},s_=function(){var e=Date.now(),t=[];e-n_>2&&(r_("matchMediaInit"),$b.forEach(function(e){var n,i,r,s,a=e.queries,o=e.conditions;for(i in a)(n=Jv.matchMedia(a[i]).matches)&&(r=1),n!==o[i]&&(o[i]=n,s=1);s&&(e.revert(),r&&t.push(e))}),r_("matchMediaRevert"),t.forEach(function(e){return e.onMatch(e,function(t){return e.add(null,t)})}),n_=e,r_("matchMedia"))},a_=function(){function e(e,t){this.selector=t&&Hx(t),this.data=[],this._r=[],this.isReverted=!1,this.id=i_++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,n){gy(e)&&(n=t,t=e,e=gy);var i=this,r=function(){var e,r=Zv,s=i.selector;return r&&r!==i&&r.data.push(i),n&&(i.selector=Hx(n)),Zv=i,e=t.apply(i,arguments),gy(e)&&i._r.push(e),Zv=r,i.selector=s,i.isReverted=!1,e};return i.last=r,e===gy?r(i,function(e){return i.add(null,e)}):e?i[e]=r:r},t.ignore=function(e){var t=Zv;Zv=null,e(this),Zv=t},t.getTweens=function(){var t=[];return this.data.forEach(function(n){return n instanceof e?t.push.apply(t,n.getTweens()):n instanceof Fb&&!(n.parent&&"nested"===n.parent.data)&&t.push(n)}),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var n=this;if(e?function(){for(var t,i=n.getTweens(),r=n.data.length;r--;)"isFlip"===(t=n.data[r]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach(function(e){return i.splice(i.indexOf(e),1)}));for(i.map(function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}}).sort(function(e,t){return t.g-e.g||-1/0}).forEach(function(t){return t.t.revert(e)}),r=n.data.length;r--;)(t=n.data[r])instanceof Tb?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof Fb)&&t.revert&&t.revert(e);n._r.forEach(function(t){return t(e,n)}),n.isReverted=!0}():this.data.forEach(function(e){return e.kill&&e.kill()}),this.clear(),t)for(var i=$b.length;i--;)$b[i].id===this.id&&$b.splice(i,1)},t.revert=function(e){this.kill(e||{})},e}(),o_=function(){function e(e){this.contexts=[],this.scope=e,Zv&&Zv.data.push(this)}var t=e.prototype;return t.add=function(e,t,n){xy(e)||(e={matches:e});var i,r,s,a=new a_(0,n||this.scope),o=a.conditions={};for(r in Zv&&!a.selector&&(a.selector=Zv.selector),this.contexts.push(a),t=a.add("onMatch",t),a.queries=e,e)"all"===r?s=1:(i=Jv.matchMedia(e[r]))&&($b.indexOf(a)<0&&$b.push(a),(o[r]=i.matches)&&(s=1),i.addListener?i.addListener(s_):i.addEventListener("change",s_));return s&&t(a,function(e){return a.add(null,e)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(t){return t.kill(e,!0)})},e}(),l_={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];t.forEach(function(e){return nb(e)})},timeline:function(e){return new Tb(e)},getTweensOf:function(e,t){return Qv.getTweensOf(e,t)},getProperty:function(e,t,n,i){my(e)&&(e=Ux(e)[0]);var r=Qy(e||{}).get,s=n?lx:ox;return"native"===n&&(n=""),e?t?s((Gy[t]&&Gy[t].get||r)(e,t,n,i)):function(t,n,i){return s((Gy[t]&&Gy[t].get||r)(e,t,n,i))}:e},quickSetter:function(e,t,n){if((e=Ux(e)).length>1){var i=e.map(function(e){return h_.quickSetter(e,t,n)}),r=i.length;return function(e){for(var t=r;t--;)i[t](e)}}e=e[0]||{};var s=Gy[t],a=Qy(e),o=a.harness&&(a.harness.aliases||{})[t]||t,l=s?function(t){var i=new s;iy._pt=0,i.init(e,n?t+n:t,iy,0,[e]),i.render(1,i),iy._pt&&Xb(1,iy)}:a.set(e,o);return s?l:function(t){return l(e,o,n?t+n:t,a,1)}},quickTo:function(e,t,n){var i,r=h_.to(e,cx(((i={})[t]="+=0.1",i.paused=!0,i.stagger=0,i),n||{})),s=function(e,n,i){return r.resetTo(t,e,n,i)};return s.tween=r,s},isTweening:function(e){return Qv.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=bb(e.ease,ay.ease)),hx(ay,e||{})},config:function(e){return hx(sy,e||{})},registerEffect:function(e){var t=e.name,n=e.effect,i=e.plugins,r=e.defaults,s=e.extendTimeline;(i||"").split(",").forEach(function(e){return e&&!Gy[e]&&!Dy[e]&&Oy(t+" effect requires "+e+" plugin.")}),qy[t]=function(e,t,i){return n(Ux(e),cx(t||{},r),i)},s&&(Tb.prototype[t]=function(e,n,i){return this.add(qy[t](e,xy(n)?n:(i=n)&&{},this),i)})},registerEase:function(e,t){pb[e]=bb(t)},parseEase:function(e,t){return arguments.length?bb(e,t):pb},getById:function(e){return Qv.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var n,i,r=new Tb(e);for(r.smoothChildTiming=by(e.smoothChildTiming),Qv.remove(r),r._dp=0,r._time=r._tTime=Qv._time,n=Qv._first;n;)i=n._next,!t&&!n._dur&&n instanceof Fb&&n.vars.onComplete===n._targets[0]||Ex(r,n,n._start-n._delay),n=i;return Ex(Qv,r,0),r},context:function(e,t){return e?new a_(e,t):Zv},matchMedia:function(e){return new o_(e)},matchMediaRefresh:function(){return $b.forEach(function(e){var t,n,i=e.conditions;for(n in i)i[n]&&(i[n]=!1,t=1);t&&e.revert()})||s_()},addEventListener:function(e,t){var n=e_[e]||(e_[e]=[]);~n.indexOf(t)||n.push(t)},removeEventListener:function(e,t){var n=e_[e],i=n&&n.indexOf(t);i>=0&&n.splice(i,1)},utils:{wrap:function e(t,n,i){var r=n-t;return My(t)?Kx(t,e(0,t.length),n):Ox(i,function(e){return(r+(e-t)%r)%r+t})},wrapYoyo:function e(t,n,i){var r=n-t,s=2*r;return My(t)?Kx(t,e(0,t.length-1),n):Ox(i,function(e){return t+((e=(s+(e-t)%s)%s||0)>r?s-e:e)})},distribute:Gx,random:Yx,snap:Xx,normalize:function(e,t,n){return Qx(e,t,0,1,n)},getUnit:Fx,clamp:function(e,t,n){return Ox(n,function(n){return zx(e,t,n)})},splitColor:ab,toArray:Ux,selector:Hx,mapRange:Qx,pipe:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return t.reduce(function(e,t){return t(e)},e)}},unitize:function(e,t){return function(n){return e(parseFloat(n))+(t||Fx(n))}},interpolate:function e(t,n,i,r){var s=isNaN(t+n)?0:function(e){return(1-e)*t+e*n};if(!s){var a,o,l,c,u,h=my(t),d={};if(!0===i&&(r=1)&&(i=null),h)t={p:t},n={p:n};else if(My(t)&&!My(n)){for(l=[],c=t.length,u=c-2,o=1;o<c;o++)l.push(e(t[o-1],t[o]));c--,s=function(e){e*=c;var t=Math.min(u,~~e);return l[t](e-t)},i=n}else r||(t=ux(My(t)?[]:{},t));if(!l){for(a in n)Lb.call(d,t,a,"get",n[a]);s=function(e){return Xb(e,d)||(h?t.p:t)}}}return Ox(i,s)},shuffle:Wx},install:Ny,effects:qy,ticker:db,updateRoot:Tb.updateRoot,plugins:Gy,globalTimeline:Qv,core:{PropTween:Jb,globals:zy,Tween:Fb,Timeline:Tb,Animation:Eb,getCache:Qy,_removeLinkedListItem:mx,reverting:function(){return Kv},context:function(e){return e&&Zv&&(Zv.data.push(e),e._ctx=Zv),Zv},suppressOverwrites:function(e){return Yv=e}}};$y("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return l_[e]=Fb[e]}),db.add(Tb.updateRoot),iy=l_.to({},{duration:0});var c_=function(e,t){for(var n=e._pt;n&&n.p!==t&&n.op!==t&&n.fp!==t;)n=n._next;return n},u_=function(e,t){return{name:e,headless:1,rawVars:1,init:function(e,n,i){i._onInit=function(e){var i,r;if(my(n)&&(i={},$y(n,function(e){return i[e]=1}),n=i),t){for(r in i={},n)i[r]=t(n[r]);n=i}!function(e,t){var n,i,r,s=e._targets;for(n in t)for(i=s.length;i--;)(r=e._ptLookup[i][n])&&(r=r.d)&&(r._pt&&(r=c_(r,n)),r&&r.modifier&&r.modifier(t[n],e,s[i],n))}(e,n)}}}},h_=l_.registerPlugin({name:"attr",init:function(e,t,n,i,r){var s,a,o;for(s in this.tween=n,t)o=e.getAttribute(s)||"",(a=this.add(e,"setAttribute",(o||0)+"",t[s],i,r,0,0,s)).op=s,a.b=o,this._props.push(s)},render:function(e,t){for(var n=t._pt;n;)Kv?n.set(n.t,n.p,n.b,n):n.r(e,n.d),n=n._next}},{name:"endArray",headless:1,init:function(e,t){for(var n=t.length;n--;)this.add(e,n,e[n]||0,t[n],0,0,0,0,0,1)}},u_("roundProps",qx),u_("modifiers"),u_("snap",Xx))||l_;Fb.version=Tb.version=h_.version="3.13.0",ty=1,_y()&&fb();pb.Power0,pb.Power1,pb.Power2,pb.Power3;var d_,f_,p_,m_,g_,v_,y_,x_,b_=pb.Power4,__=(pb.Linear,pb.Quad,pb.Cubic,pb.Quart,pb.Quint,pb.Strong,pb.Elastic,pb.Back,pb.SteppedEase,pb.Bounce,pb.Sine,pb.Expo,pb.Circ,{}),w_=180/Math.PI,S_=Math.PI/180,M_=Math.atan2,C_=/([A-Z])/g,E_=/(left|right|width|margin|padding|x)/i,T_=/[\s,\(]\S/,A_={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},k_=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},P_=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},L_=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},D_=function(e,t){var n=t.s+t.c*e;t.set(t.t,t.p,~~(n+(n<0?-.5:.5))+t.u,t)},R_=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},N_=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},I_=function(e,t,n){return e.style[t]=n},O_=function(e,t,n){return e.style.setProperty(t,n)},z_=function(e,t,n){return e._gsap[t]=n},F_=function(e,t,n){return e._gsap.scaleX=e._gsap.scaleY=n},j_=function(e,t,n,i,r){var s=e._gsap;s.scaleX=s.scaleY=n,s.renderTransform(r,s)},B_=function(e,t,n,i,r){var s=e._gsap;s[t]=n,s.renderTransform(r,s)},V_="transform",U_=V_+"Origin",H_=function e(t,n){var i=this,r=this.target,s=r.style,a=r._gsap;if(t in __&&s){if(this.tfm=this.tfm||{},"transform"===t)return A_.transform.split(",").forEach(function(t){return e.call(i,t,n)});if(~(t=A_[t]||t).indexOf(",")?t.split(",").forEach(function(e){return i.tfm[e]=ow(r,e)}):this.tfm[t]=a.x?a[t]:ow(r,t),t===U_&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(V_)>=0)return;a.svg&&(this.svgo=r.getAttribute("data-svg-origin"),this.props.push(U_,n,"")),t=V_}(s||n)&&this.props.push(t,n,s[t])},W_=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},G_=function(){var e,t,n=this.props,i=this.target,r=i.style,s=i._gsap;for(e=0;e<n.length;e+=3)n[e+1]?2===n[e+1]?i[n[e]](n[e+2]):i[n[e]]=n[e+2]:n[e+2]?r[n[e]]=n[e+2]:r.removeProperty("--"===n[e].substr(0,2)?n[e]:n[e].replace(C_,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)s[t]=this.tfm[t];s.svg&&(s.renderTransform(),i.setAttribute("data-svg-origin",this.svgo||"")),(e=y_())&&e.isStart||r[V_]||(W_(r),s.zOrigin&&r[U_]&&(r[U_]+=" "+s.zOrigin+"px",s.zOrigin=0,s.renderTransform()),s.uncache=1)}},q_=function(e,t){var n={target:e,props:[],revert:G_,save:H_};return e._gsap||h_.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(e){return n.save(e)}),n},X_=function(e,t){var n=f_.createElementNS?f_.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):f_.createElement(e);return n&&n.style?n:f_.createElement(e)},Y_=function e(t,n,i){var r=getComputedStyle(t);return r[n]||r.getPropertyValue(n.replace(C_,"-$1").toLowerCase())||r.getPropertyValue(n)||!i&&e(t,Z_(n)||n,1)||""},K_="O,Moz,ms,Ms,Webkit".split(","),Z_=function(e,t,n){var i=(t||g_).style,r=5;if(e in i&&!n)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);r--&&!(K_[r]+e in i););return r<0?null:(3===r?"ms":r>=0?K_[r]:"")+e},Q_=function(){"undefined"!==typeof window&&window.document&&(d_=window,f_=d_.document,p_=f_.documentElement,g_=X_("div")||{style:{}},X_("div"),V_=Z_(V_),U_=V_+"Origin",g_.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",x_=!!Z_("perspective"),y_=h_.core.reverting,m_=1)},J_=function(e){var t,n=e.ownerSVGElement,i=X_("svg",n&&n.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=e.cloneNode(!0);r.style.display="block",i.appendChild(r),p_.appendChild(i);try{t=r.getBBox()}catch(Kg){}return i.removeChild(r),p_.removeChild(i),t},$_=function(e,t){for(var n=t.length;n--;)if(e.hasAttribute(t[n]))return e.getAttribute(t[n])},ew=function(e){var t,n;try{t=e.getBBox()}catch(Mj){t=J_(e),n=1}return t&&(t.width||t.height)||n||(t=J_(e)),!t||t.width||t.x||t.y?t:{x:+$_(e,["x","cx","x1"])||0,y:+$_(e,["y","cy","y1"])||0,width:0,height:0}},tw=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!ew(e))},nw=function(e,t){if(t){var n,i=e.style;t in __&&t!==U_&&(t=V_),i.removeProperty?("ms"!==(n=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),i.removeProperty("--"===n?t:t.replace(C_,"-$1").toLowerCase())):i.removeAttribute(t)}},iw=function(e,t,n,i,r,s){var a=new Jb(e._pt,t,n,0,1,s?N_:R_);return e._pt=a,a.b=i,a.e=r,e._props.push(n),a},rw={deg:1,rad:1,turn:1},sw={grid:1,flex:1},aw=function e(t,n,i,r){var s,a,o,l,c=parseFloat(i)||0,u=(i+"").trim().substr((c+"").length)||"px",h=g_.style,d=E_.test(n),f="svg"===t.tagName.toLowerCase(),p=(f?"client":"offset")+(d?"Width":"Height"),m=100,g="px"===r,v="%"===r;if(r===u||!c||rw[r]||rw[u])return c;if("px"!==u&&!g&&(c=e(t,n,i,"px")),l=t.getCTM&&tw(t),(v||"%"===u)&&(__[n]||~n.indexOf("adius")))return s=l?t.getBBox()[d?"width":"height"]:t[p],ex(v?c/s*m:c/100*s);if(h[d?"width":"height"]=m+(g?u:r),a="rem"!==r&&~n.indexOf("adius")||"em"===r&&t.appendChild&&!f?t:t.parentNode,l&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==f_&&a.appendChild||(a=f_.body),(o=a._gsap)&&v&&o.width&&d&&o.time===db.time&&!o.uncache)return ex(c/o.width*m);if(!v||"height"!==n&&"width"!==n)(v||"%"===u)&&!sw[Y_(a,"display")]&&(h.position=Y_(t,"position")),a===t&&(h.position="static"),a.appendChild(g_),s=g_[p],a.removeChild(g_),h.position="absolute";else{var y=t.style[n];t.style[n]=m+r,s=t[p],y?t.style[n]=y:nw(t,n)}return d&&v&&((o=Qy(a)).time=db.time,o.width=a[p]),ex(g?s*c/m:s&&c?m/s*c:0)},ow=function(e,t,n,i){var r;return m_||Q_(),t in A_&&"transform"!==t&&~(t=A_[t]).indexOf(",")&&(t=t.split(",")[0]),__[t]&&"transform"!==t?(r=xw(e,i),r="transformOrigin"!==t?r[t]:r.svg?r.origin:bw(Y_(e,U_))+" "+r.zOrigin+"px"):(!(r=e.style[t])||"auto"===r||i||~(r+"").indexOf("calc("))&&(r=dw[t]&&dw[t](e,t,n)||Y_(e,t)||Jy(e,t)||("opacity"===t?1:0)),n&&!~(r+"").trim().indexOf(" ")?aw(e,t,r,n)+n:r},lw=function(e,t,n,i){if(!n||"none"===n){var r=Z_(t,e,1),s=r&&Y_(e,r,1);s&&s!==n?(t=r,n=s):"borderColor"===t&&(n=Y_(e,"borderTopColor"))}var a,o,l,c,u,h,d,f,p,m,g,v=new Jb(this._pt,e.style,t,0,1,qb),y=0,x=0;if(v.b=n,v.e=i,n+="","var(--"===(i+="").substring(0,6)&&(i=Y_(e,i.substring(4,i.indexOf(")")))),"auto"===i&&(h=e.style[t],e.style[t]=i,i=Y_(e,t)||i,h?e.style[t]=h:nw(e,t)),hb(a=[n,i]),i=a[1],l=(n=a[0]).match(Ty)||[],(i.match(Ty)||[]).length){for(;o=Ty.exec(i);)d=o[0],p=i.substring(y,o.index),u?u=(u+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(u=1),d!==(h=l[x++]||"")&&(c=parseFloat(h)||0,g=h.substr((c+"").length),"="===d.charAt(1)&&(d=nx(c,d)+g),f=parseFloat(d),m=d.substr((f+"").length),y=Ty.lastIndex-m.length,m||(m=m||sy.units[t]||g,y===i.length&&(i+=m,v.e+=m)),g!==m&&(c=aw(e,t,h,m)||0),v._pt={_next:v._pt,p:p||1===x?p:",",s:c,c:f-c,m:u&&u<4||"zIndex"===t?Math.round:0});v.c=y<i.length?i.substring(y,i.length):""}else v.r="display"===t&&"none"===i?N_:R_;return ky.test(i)&&(v.e=0),this._pt=v,v},cw={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},uw=function(e){var t=e.split(" "),n=t[0],i=t[1]||"50%";return"top"!==n&&"bottom"!==n&&"left"!==i&&"right"!==i||(e=n,n=i,i=e),t[0]=cw[n]||n,t[1]=cw[i]||i,t.join(" ")},hw=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var n,i,r,s=t.t,a=s.style,o=t.u,l=s._gsap;if("all"===o||!0===o)a.cssText="",i=1;else for(r=(o=o.split(",")).length;--r>-1;)n=o[r],__[n]&&(i=1,n="transformOrigin"===n?U_:V_),nw(s,n);i&&(nw(s,V_),l&&(l.svg&&s.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",xw(s,1),l.uncache=1,W_(a)))}},dw={clearProps:function(e,t,n,i,r){if("isFromStart"!==r.data){var s=e._pt=new Jb(e._pt,t,n,0,0,hw);return s.u=i,s.pr=-10,s.tween=r,e._props.push(n),1}}},fw=[1,0,0,1,0,0],pw={},mw=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},gw=function(e){var t=Y_(e,V_);return mw(t)?fw:t.substr(7).match(Ey).map(ex)},vw=function(e,t){var n,i,r,s,a=e._gsap||Qy(e),o=e.style,l=gw(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(r=e.transform.baseVal.consolidate().matrix).a,r.b,r.c,r.d,r.e,r.f]).join(",")?fw:l:(l!==fw||e.offsetParent||e===p_||a.svg||(r=o.display,o.display="block",(n=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(s=1,i=e.nextElementSibling,p_.appendChild(e)),l=gw(e),r?o.display=r:nw(e,"display"),s&&(i?n.insertBefore(e,i):n?n.appendChild(e):p_.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},yw=function(e,t,n,i,r,s){var a,o,l,c=e._gsap,u=r||vw(e,!0),h=c.xOrigin||0,d=c.yOrigin||0,f=c.xOffset||0,p=c.yOffset||0,m=u[0],g=u[1],v=u[2],y=u[3],x=u[4],b=u[5],_=t.split(" "),w=parseFloat(_[0])||0,S=parseFloat(_[1])||0;n?u!==fw&&(o=m*y-g*v)&&(l=w*(-g/o)+S*(m/o)-(m*b-g*x)/o,w=w*(y/o)+S*(-v/o)+(v*b-y*x)/o,S=l):(w=(a=ew(e)).x+(~_[0].indexOf("%")?w/100*a.width:w),S=a.y+(~(_[1]||_[0]).indexOf("%")?S/100*a.height:S)),i||!1!==i&&c.smooth?(x=w-h,b=S-d,c.xOffset=f+(x*m+b*v)-x,c.yOffset=p+(x*g+b*y)-b):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=S,c.smooth=!!i,c.origin=t,c.originIsAbsolute=!!n,e.style[U_]="0px 0px",s&&(iw(s,c,"xOrigin",h,w),iw(s,c,"yOrigin",d,S),iw(s,c,"xOffset",f,c.xOffset),iw(s,c,"yOffset",p,c.yOffset)),e.setAttribute("data-svg-origin",w+" "+S)},xw=function(e,t){var n=e._gsap||new Cb(e);if("x"in n&&!t&&!n.uncache)return n;var i,r,s,a,o,l,c,u,h,d,f,p,m,g,v,y,x,b,_,w,S,M,C,E,T,A,k,P,L,D,R,N,I=e.style,O=n.scaleX<0,z="px",F="deg",j=getComputedStyle(e),B=Y_(e,U_)||"0";return i=r=s=l=c=u=h=d=f=0,a=o=1,n.svg=!(!e.getCTM||!tw(e)),j.translate&&("none"===j.translate&&"none"===j.scale&&"none"===j.rotate||(I[V_]=("none"!==j.translate?"translate3d("+(j.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==j.rotate?"rotate("+j.rotate+") ":"")+("none"!==j.scale?"scale("+j.scale.split(" ").join(",")+") ":"")+("none"!==j[V_]?j[V_]:"")),I.scale=I.rotate=I.translate="none"),g=vw(e,n.svg),n.svg&&(n.uncache?(T=e.getBBox(),B=n.xOrigin-T.x+"px "+(n.yOrigin-T.y)+"px",E=""):E=!t&&e.getAttribute("data-svg-origin"),yw(e,E||B,!!E||n.originIsAbsolute,!1!==n.smooth,g)),p=n.xOrigin||0,m=n.yOrigin||0,g!==fw&&(b=g[0],_=g[1],w=g[2],S=g[3],i=M=g[4],r=C=g[5],6===g.length?(a=Math.sqrt(b*b+_*_),o=Math.sqrt(S*S+w*w),l=b||_?M_(_,b)*w_:0,(h=w||S?M_(w,S)*w_+l:0)&&(o*=Math.abs(Math.cos(h*S_))),n.svg&&(i-=p-(p*b+m*w),r-=m-(p*_+m*S))):(N=g[6],D=g[7],k=g[8],P=g[9],L=g[10],R=g[11],i=g[12],r=g[13],s=g[14],c=(v=M_(N,L))*w_,v&&(E=M*(y=Math.cos(-v))+k*(x=Math.sin(-v)),T=C*y+P*x,A=N*y+L*x,k=M*-x+k*y,P=C*-x+P*y,L=N*-x+L*y,R=D*-x+R*y,M=E,C=T,N=A),u=(v=M_(-w,L))*w_,v&&(y=Math.cos(-v),R=S*(x=Math.sin(-v))+R*y,b=E=b*y-k*x,_=T=_*y-P*x,w=A=w*y-L*x),l=(v=M_(_,b))*w_,v&&(E=b*(y=Math.cos(v))+_*(x=Math.sin(v)),T=M*y+C*x,_=_*y-b*x,C=C*y-M*x,b=E,M=T),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,u=180-u),a=ex(Math.sqrt(b*b+_*_+w*w)),o=ex(Math.sqrt(C*C+N*N)),v=M_(M,C),h=Math.abs(v)>2e-4?v*w_:0,f=R?1/(R<0?-R:R):0),n.svg&&(E=e.getAttribute("transform"),n.forceCSS=e.setAttribute("transform","")||!mw(Y_(e,V_)),E&&e.setAttribute("transform",E))),Math.abs(h)>90&&Math.abs(h)<270&&(O?(a*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,h+=h<=0?180:-180)),t=t||n.uncache,n.x=i-((n.xPercent=i&&(!t&&n.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-i)?-50:0)))?e.offsetWidth*n.xPercent/100:0)+z,n.y=r-((n.yPercent=r&&(!t&&n.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-r)?-50:0)))?e.offsetHeight*n.yPercent/100:0)+z,n.z=s+z,n.scaleX=ex(a),n.scaleY=ex(o),n.rotation=ex(l)+F,n.rotationX=ex(c)+F,n.rotationY=ex(u)+F,n.skewX=h+F,n.skewY=d+F,n.transformPerspective=f+z,(n.zOrigin=parseFloat(B.split(" ")[2])||!t&&n.zOrigin||0)&&(I[U_]=bw(B)),n.xOffset=n.yOffset=0,n.force3D=sy.force3D,n.renderTransform=n.svg?Tw:x_?Ew:ww,n.uncache=0,n},bw=function(e){return(e=e.split(" "))[0]+" "+e[1]},_w=function(e,t,n){var i=Fx(t);return ex(parseFloat(t)+parseFloat(aw(e,"x",n+"px",i)))+i},ww=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,Ew(e,t)},Sw="0deg",Mw="0px",Cw=") ",Ew=function(e,t){var n=t||this,i=n.xPercent,r=n.yPercent,s=n.x,a=n.y,o=n.z,l=n.rotation,c=n.rotationY,u=n.rotationX,h=n.skewX,d=n.skewY,f=n.scaleX,p=n.scaleY,m=n.transformPerspective,g=n.force3D,v=n.target,y=n.zOrigin,x="",b="auto"===g&&e&&1!==e||!0===g;if(y&&(u!==Sw||c!==Sw)){var _,w=parseFloat(c)*S_,S=Math.sin(w),M=Math.cos(w);w=parseFloat(u)*S_,_=Math.cos(w),s=_w(v,s,S*_*-y),a=_w(v,a,-Math.sin(w)*-y),o=_w(v,o,M*_*-y+y)}m!==Mw&&(x+="perspective("+m+Cw),(i||r)&&(x+="translate("+i+"%, "+r+"%) "),(b||s!==Mw||a!==Mw||o!==Mw)&&(x+=o!==Mw||b?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+Cw),l!==Sw&&(x+="rotate("+l+Cw),c!==Sw&&(x+="rotateY("+c+Cw),u!==Sw&&(x+="rotateX("+u+Cw),h===Sw&&d===Sw||(x+="skew("+h+", "+d+Cw),1===f&&1===p||(x+="scale("+f+", "+p+Cw),v.style[V_]=x||"translate(0, 0)"},Tw=function(e,t){var n,i,r,s,a,o=t||this,l=o.xPercent,c=o.yPercent,u=o.x,h=o.y,d=o.rotation,f=o.skewX,p=o.skewY,m=o.scaleX,g=o.scaleY,v=o.target,y=o.xOrigin,x=o.yOrigin,b=o.xOffset,_=o.yOffset,w=o.forceCSS,S=parseFloat(u),M=parseFloat(h);d=parseFloat(d),f=parseFloat(f),(p=parseFloat(p))&&(f+=p=parseFloat(p),d+=p),d||f?(d*=S_,f*=S_,n=Math.cos(d)*m,i=Math.sin(d)*m,r=Math.sin(d-f)*-g,s=Math.cos(d-f)*g,f&&(p*=S_,a=Math.tan(f-p),r*=a=Math.sqrt(1+a*a),s*=a,p&&(a=Math.tan(p),n*=a=Math.sqrt(1+a*a),i*=a)),n=ex(n),i=ex(i),r=ex(r),s=ex(s)):(n=m,s=g,i=r=0),(S&&!~(u+"").indexOf("px")||M&&!~(h+"").indexOf("px"))&&(S=aw(v,"x",u,"px"),M=aw(v,"y",h,"px")),(y||x||b||_)&&(S=ex(S+y-(y*n+x*r)+b),M=ex(M+x-(y*i+x*s)+_)),(l||c)&&(a=v.getBBox(),S=ex(S+l/100*a.width),M=ex(M+c/100*a.height)),a="matrix("+n+","+i+","+r+","+s+","+S+","+M+")",v.setAttribute("transform",a),w&&(v.style[V_]=a)},Aw=function(e,t,n,i,r){var s,a,o=360,l=my(r),c=parseFloat(r)*(l&&~r.indexOf("rad")?w_:1)-i,u=i+c+"deg";return l&&("short"===(s=r.split("_")[1])&&(c%=o)!==c%180&&(c+=c<0?o:-360),"cw"===s&&c<0?c=(c+36e9)%o-~~(c/o)*o:"ccw"===s&&c>0&&(c=(c-36e9)%o-~~(c/o)*o)),e._pt=a=new Jb(e._pt,t,n,i,c,P_),a.e=u,a.u="deg",e._props.push(n),a},kw=function(e,t){for(var n in t)e[n]=t[n];return e},Pw=function(e,t,n){var i,r,s,a,o,l,c,u=kw({},n._gsap),h=n.style;for(r in u.svg?(s=n.getAttribute("transform"),n.setAttribute("transform",""),h[V_]=t,i=xw(n,1),nw(n,V_),n.setAttribute("transform",s)):(s=getComputedStyle(n)[V_],h[V_]=t,i=xw(n,1),h[V_]=s),__)(s=u[r])!==(a=i[r])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(r)<0&&(o=Fx(s)!==(c=Fx(a))?aw(n,r,s,c):parseFloat(s),l=parseFloat(a),e._pt=new Jb(e._pt,i,r,o,l-o,k_),e._pt.u=c||0,e._props.push(r));kw(i,u)};$y("padding,margin,Width,Radius",function(e,t){var n="Top",i="Right",r="Bottom",s="Left",a=(t<3?[n,i,r,s]:[n+s,n+i,r+i,r+s]).map(function(n){return t<2?e+n:"border"+n+e});dw[t>1?"border"+e:e]=function(e,t,n,i,r){var s,o;if(arguments.length<4)return s=a.map(function(t){return ow(e,t,n)}),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(i+"").split(" "),o={},a.forEach(function(e,t){return o[e]=s[t]=s[t]||s[(t-1)/2|0]}),e.init(t,o,r)}});var Lw={name:"css",register:Q_,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,n,i,r){var s,a,o,l,c,u,h,d,f,p,m,g,v,y,x,b,_=this._props,w=e.style,S=n.vars.startAt;for(h in m_||Q_(),this.styles=this.styles||q_(e),b=this.styles.props,this.tween=n,t)if("autoRound"!==h&&(a=t[h],!Gy[h]||!Db(h,t,n,i,e,r)))if(c=typeof a,u=dw[h],"function"===c&&(c=typeof(a=a.call(n,i,e,r))),"string"===c&&~a.indexOf("random(")&&(a=Zx(a)),u)u(this,e,h,a,n)&&(x=1);else if("--"===h.substr(0,2))s=(getComputedStyle(e).getPropertyValue(h)+"").trim(),a+="",cb.lastIndex=0,cb.test(s)||(d=Fx(s),f=Fx(a)),f?d!==f&&(s=aw(e,h,s,f)+f):d&&(a+=d),this.add(w,"setProperty",s,a,i,r,0,0,h),_.push(h),b.push(h,0,w[h]);else if("undefined"!==c){if(S&&h in S?(s="function"===typeof S[h]?S[h].call(n,i,e,r):S[h],my(s)&&~s.indexOf("random(")&&(s=Zx(s)),Fx(s+"")||"auto"===s||(s+=sy.units[h]||Fx(ow(e,h))||""),"="===(s+"").charAt(1)&&(s=ow(e,h))):s=ow(e,h),l=parseFloat(s),(p="string"===c&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),h in A_&&("autoAlpha"===h&&(1===l&&"hidden"===ow(e,"visibility")&&o&&(l=0),b.push("visibility",0,w.visibility),iw(this,w,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==h&&"transform"!==h&&~(h=A_[h]).indexOf(",")&&(h=h.split(",")[0])),m=h in __)if(this.styles.save(h),"string"===c&&"var(--"===a.substring(0,6)&&(a=Y_(e,a.substring(4,a.indexOf(")"))),o=parseFloat(a)),g||((v=e._gsap).renderTransform&&!t.parseTransform||xw(e,t.parseTransform),y=!1!==t.smoothOrigin&&v.smooth,(g=this._pt=new Jb(this._pt,w,V_,0,1,v.renderTransform,v,0,-1)).dep=1),"scale"===h)this._pt=new Jb(this._pt,v,"scaleY",v.scaleY,(p?nx(v.scaleY,p+o):o)-v.scaleY||0,k_),this._pt.u=0,_.push("scaleY",h),h+="X";else{if("transformOrigin"===h){b.push(U_,0,w[U_]),a=uw(a),v.svg?yw(e,a,0,y,0,this):((f=parseFloat(a.split(" ")[2])||0)!==v.zOrigin&&iw(this,v,"zOrigin",v.zOrigin,f),iw(this,w,h,bw(s),bw(a)));continue}if("svgOrigin"===h){yw(e,a,1,y,0,this);continue}if(h in pw){Aw(this,v,h,l,p?nx(l,p+a):a);continue}if("smoothOrigin"===h){iw(this,v,"smooth",v.smooth,a);continue}if("force3D"===h){v[h]=a;continue}if("transform"===h){Pw(this,a,e);continue}}else h in w||(h=Z_(h)||h);if(m||(o||0===o)&&(l||0===l)&&!T_.test(a)&&h in w)o||(o=0),(d=(s+"").substr((l+"").length))!==(f=Fx(a)||(h in sy.units?sy.units[h]:d))&&(l=aw(e,h,s,f)),this._pt=new Jb(this._pt,m?v:w,h,l,(p?nx(l,p+o):o)-l,m||"px"!==f&&"zIndex"!==h||!1===t.autoRound?k_:D_),this._pt.u=f||0,d!==f&&"%"!==f&&(this._pt.b=s,this._pt.r=L_);else if(h in w)lw.call(this,e,h,s,p?p+a:a);else if(h in e)this.add(e,h,s||e[h],p?p+a:a,i,r);else if("parseTransform"!==h){Iy(h,a);continue}m||(h in w?b.push(h,0,w[h]):"function"===typeof e[h]?b.push(h,2,e[h]()):b.push(h,1,s||e[h])),_.push(h)}x&&Qb(this)},render:function(e,t){if(t.tween._time||!y_())for(var n=t._pt;n;)n.r(e,n.d),n=n._next;else t.styles.revert()},get:ow,aliases:A_,getSetter:function(e,t,n){var i=A_[t];return i&&i.indexOf(",")<0&&(t=i),t in __&&t!==U_&&(e._gsap.x||ow(e,"x"))?n&&v_===n?"scale"===t?F_:z_:(v_=n||{})&&("scale"===t?j_:B_):e.style&&!yy(e.style[t])?I_:~t.indexOf("-")?O_:Hb(e,t)},core:{_removeProperty:nw,_getMatrix:vw}};h_.utils.checkPrefix=Z_,h_.core.getStyleSaver=q_,function(e,t){var n=$y(e+","+t+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){__[e]=1});$y(t,function(e){sy.units[e]="deg",pw[e]=1}),A_[n[13]]=e+","+t,$y("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){var t=e.split(":");A_[t[1]]=n[t[0]]})}("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY"),$y("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){sy.units[e]="px"}),h_.registerPlugin(Lw);var Dw=h_.registerPlugin(Lw)||h_;Dw.core.Tween;const Rw=t.forwardRef((e,t)=>(0,s.jsx)("figure",{ref:t,className:"splash-figure",onClick:e.onClick,children:(0,s.jsxs)("svg",{viewBox:"0 0 97 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"splash-svg",children:[(0,s.jsx)("path",{d:"M90.6572 1.58203L90.7881 1.36035L91.1025 0.826172L96.3164 1.19531L92.2266 6.90625L92.0469 11.2344H87.291L87.377 6.76465L86.8428 5.37891L86.834 4.86719C86.7718 4.86966 86.7096 4.87066 86.6475 4.87305L86.0908 3.42871L86.2129 1.77344C86.0645 1.6875 85.9004 1.61523 85.7207 1.55664C85.5936 1.51519 85.4631 1.48284 85.3301 1.45508L85.3125 1.40918L90.5049 0.757812L90.6572 1.58203ZM90.1621 4.39844L89.6934 1.86719L86.7051 2.24219L88.3809 6.58984L88.3105 10.2344H91.0879L91.2402 6.56641L94.4629 2.06641L91.6504 1.86719L90.1621 4.39844Z"}),(0,s.jsx)("path",{d:"M84.0566 0.328125C84.2552 0.328125 84.4622 0.336981 84.6768 0.354492L84.6758 0.355469C84.8938 0.369553 85.1098 0.397281 85.3242 0.436523L85.3252 0.43457C85.5656 0.473817 85.8009 0.530695 86.0303 0.605469C86.2698 0.68357 86.4991 0.783889 86.7139 0.908203L87.2559 1.22168L87.21 1.84668L87.1846 2.18164L86.7051 2.24219L87.1045 3.2793L87.0625 3.85645L87.3232 3.84668L87.8398 5.18652L87.9043 8.78711L87.9102 9.14648L87.6865 9.42773C87.4287 9.75144 87.1172 10.0248 86.7627 10.251C86.4308 10.4626 86.0764 10.637 85.7021 10.7744C85.3391 10.9077 84.9662 11.0063 84.585 11.0713L84.5859 11.0723C84.2102 11.1402 83.8418 11.1758 83.4824 11.1758C82.7939 11.1758 82.1371 11.0517 81.5254 10.791C80.9331 10.5385 80.4102 10.1858 79.9668 9.73242L79.959 9.72461C79.7074 9.46157 79.4899 9.17258 79.3037 8.86133C79.3082 8.77794 79.3118 8.69457 79.3164 8.61133C79.3438 8.18555 79.3691 7.75781 79.3926 7.32812H78.6982C78.6346 7.03155 78.5967 6.72803 78.585 6.41797L78.7246 6.41406L78.8535 4.59766H78.7871C78.8615 4.3098 78.9534 4.03065 79.0645 3.76074L79.6504 3.73047C79.6816 3.36328 79.707 3 79.7266 2.64062C79.728 2.61461 79.729 2.58856 79.7305 2.5625C79.7626 2.51786 79.7937 2.47241 79.8271 2.42871L80.0557 2.14844C80.3764 1.77583 80.7425 1.45393 81.1514 1.18457C81.5657 0.911618 82.0162 0.701614 82.498 0.553711C82.9955 0.401065 83.5169 0.328125 84.0566 0.328125ZM79.5801 6.20312C79.5801 6.76172 79.6777 7.2832 79.873 7.76758C80.0684 8.25195 80.3379 8.67383 80.6816 9.0332C81.0293 9.38867 81.4414 9.66797 81.918 9.87109C82.3945 10.0742 82.916 10.1758 83.4824 10.1758C83.7754 10.1758 84.084 10.1465 84.4082 10.0879C84.7324 10.0332 85.0488 9.94922 85.3574 9.83594C85.666 9.72266 85.9551 9.58008 86.2246 9.4082C86.4941 9.23633 86.7207 9.03516 86.9043 8.80469L86.834 4.86719C86.2441 4.89062 85.6582 4.91016 85.0762 4.92578C84.4941 4.9375 83.9121 4.95312 83.3301 4.97266L83.2598 6.73047L84.666 6.75391L84.6426 7.21094C84.5293 7.30469 84.3926 7.37109 84.2324 7.41016C84.0762 7.44922 83.9238 7.46875 83.7754 7.46875C83.5566 7.46875 83.3633 7.42383 83.1953 7.33398C83.0312 7.24414 82.8926 7.12695 82.7793 6.98242C82.6699 6.83398 82.5879 6.66602 82.5332 6.47852C82.4785 6.28711 82.4512 6.08984 82.4512 5.88672C82.4512 5.5625 82.5098 5.27148 82.627 5.01367C82.7441 4.75586 82.9023 4.53711 83.1016 4.35742C83.3047 4.17773 83.541 4.04102 83.8105 3.94727C84.084 3.84961 84.377 3.80078 84.6895 3.80078C84.9121 3.80078 85.1387 3.81641 85.3691 3.84766C85.6035 3.875 85.8301 3.92969 86.0488 4.01172L86.2129 1.77344C86.0645 1.6875 85.9004 1.61523 85.7207 1.55664C85.541 1.49805 85.3555 1.45312 85.1641 1.42188C84.9766 1.38672 84.7871 1.36328 84.5957 1.35156C84.4043 1.33594 84.2246 1.32812 84.0566 1.32812C83.6074 1.32812 83.1855 1.38867 82.791 1.50977C82.3965 1.63086 82.0332 1.80078 81.7012 2.01953C81.3691 2.23828 81.0723 2.5 80.8105 2.80469C80.5488 3.10547 80.3262 3.4375 80.1426 3.80078C79.9629 4.16016 79.8242 4.54492 79.7266 4.95508C79.6289 5.36133 79.5801 5.77734 79.5801 6.20312Z"}),(0,s.jsx)("path",{d:"M80.8564 0.550781L80.7891 1.61426C80.7658 1.97837 80.744 2.33915 80.7246 2.69531C80.7204 2.77265 80.7147 2.85007 80.71 2.92773C80.492 3.19573 80.3018 3.4858 80.1426 3.80078C79.9629 4.16016 79.8242 4.54492 79.7266 4.95508C79.6289 5.36133 79.5801 5.77734 79.5801 6.20312C79.5801 6.76172 79.6777 7.2832 79.873 7.76758C79.9935 8.06618 80.1425 8.3407 80.3193 8.5918C80.3176 8.61967 80.3162 8.64792 80.3145 8.67578C80.2914 9.09145 80.2702 9.50914 80.251 9.92871L80.208 10.8613L73.1777 11.0244L73.3301 4.12598L73.8613 4.10547L73.9199 1.62109L73.3857 1.62207L73.3887 1.52832L73.4102 0.550781H80.8564ZM74.3887 1.55078L74.2012 10L79.252 9.88281C79.2715 9.45703 79.293 9.0332 79.3164 8.61133C79.3438 8.18555 79.3691 7.75781 79.3926 7.32812H76.9082L76.9668 6.47266L78.7246 6.41406L78.8535 4.59766H77.1074L77.166 3.85938L79.6504 3.73047C79.6816 3.36328 79.707 3 79.7266 2.64062C79.7461 2.28125 79.7676 1.91797 79.791 1.55078H74.3887Z"}),(0,s.jsx)("path",{d:"M74.9219 1.55078H74.3887L74.3096 5.08789L73.041 5.13867L72.5967 10.6836L68.1953 10.9131L68.1973 9.85742V9.50781L68.2949 9.49609L68.1982 9.16309L68.2061 5.36035L67.5166 5.39746L67.1133 5.41797L66.4902 3.26953L66.5586 0.634766L74.9434 0.619141L74.9219 1.55078ZM67.5332 1.63281L67.4629 4.39844L69.209 4.30469L69.1973 9.85938L71.6699 9.73047L72.1152 4.17578L73.8613 4.10547L73.9199 1.62109L67.5332 1.63281Z"}),(0,s.jsx)("path",{d:"M67.4941 3.13965L67.4629 4.39844L67.8525 4.37695L69.1982 9.02148L69.1973 9.85938L69.4375 9.84668L69.5801 10.3389L64.6475 10.9746L64.4219 10.1279L64.3965 10.0322L64.3848 10.0869L64.1934 10.9531L59.1143 10.4551L59.3564 9.64355L60.4648 9.42676L60.4199 9.57812L63.4082 9.87109L63.7012 8.54688H65.0371L65.3887 9.87109L68.2949 9.49609L66.0098 1.60938L62.752 1.77344L60.4678 9.41699L59.7861 8.2041L61.9961 0.810547L66.75 0.571289L67.4941 3.13965ZM64.8262 6.75391H63.9473L64.3809 4.71484L64.8262 6.75391Z"}),(0,s.jsx)("path",{d:"M60.4961 4.35156C60.4961 3.86328 60.3984 3.43555 60.2031 3.06836C60.0117 2.70117 59.7559 2.39453 59.4355 2.14844C59.1152 1.90234 58.7461 1.71875 58.3281 1.59766C57.9141 1.47266 57.4844 1.41016 57.0391 1.41016C56.75 1.41016 56.4668 1.41797 56.1895 1.43359C55.916 1.44531 55.6445 1.4707 55.375 1.50977C55.1094 1.54492 54.8438 1.5957 54.5781 1.66211C54.3125 1.72852 54.043 1.8125 53.7695 1.91406C53.7461 2.36328 53.7305 2.80859 53.7227 3.25C53.7148 3.69141 53.707 4.13672 53.6992 4.58594C53.6758 5.47656 53.6543 6.36328 53.6348 7.24609C53.6191 8.12891 53.6016 9.01562 53.582 9.90625H56.1016L56.207 7.46875L56.9336 7.44531L57.8359 9.94141L60.4648 9.42676L60.4199 9.57812L61.7793 9.71094L62.0215 10.1416L57.1865 11.0869L57.0654 10.7529L57.0596 10.9062H52.5596L52.582 9.88477C52.6015 8.99558 52.6192 8.10987 52.6348 7.22852V7.22363C52.6543 6.33952 52.6757 5.45147 52.6992 4.55957C52.7017 4.41496 52.7035 4.27075 52.7061 4.12695L53.248 4.10547L53.3066 1.62109H52.7822L52.8047 1.20508L53.4209 0.976562C53.7267 0.862981 54.0323 0.768296 54.3359 0.692383C54.6332 0.618071 54.9318 0.561626 55.2314 0.521484L55.2334 0.520508C55.2369 0.52004 55.2406 0.519017 55.2441 0.518555C55.5431 0.475654 55.8438 0.447549 56.1465 0.43457C56.439 0.418343 56.7366 0.410156 57.0391 0.410156C57.5754 0.410156 58.0984 0.486795 58.6055 0.638672L58.6064 0.636719C59.1349 0.789821 59.6183 1.02769 60.0449 1.35547C60.4814 1.69083 60.8293 2.10891 61.0859 2.59863C61.3705 3.13365 61.4961 3.72804 61.4961 4.35156C61.4961 4.71046 61.4633 5.05643 61.3926 5.38477C61.323 5.72176 61.2088 6.04419 61.0449 6.34375C60.8813 6.64269 60.6733 6.91213 60.4277 7.15234C60.4097 7.17003 60.3896 7.1857 60.3711 7.20312L60.8662 8.08398L60.4678 9.41699L59.0781 6.94141C59.332 6.78125 59.5488 6.61328 59.7285 6.4375C59.9082 6.26172 60.0547 6.07031 60.168 5.86328C60.2812 5.65625 60.3633 5.42969 60.4141 5.18359C60.4688 4.93359 60.4961 4.65625 60.4961 4.35156ZM56.8164 3.41406C56.9922 3.41406 57.1445 3.44336 57.2734 3.50195C57.4062 3.55664 57.5156 3.63477 57.6016 3.73633C57.6914 3.83398 57.7578 3.95117 57.8008 4.08789C57.8477 4.22461 57.8711 4.375 57.8711 4.53906C57.8711 4.73438 57.8262 4.90234 57.7363 5.04297C57.6504 5.18359 57.5371 5.29883 57.3965 5.38867C57.2598 5.47852 57.1035 5.54492 56.9277 5.58789C56.7559 5.63086 56.5859 5.65234 56.418 5.65234H56.2773L56.3711 3.47266C56.4414 3.45312 56.5137 3.43945 56.5879 3.43164C56.6621 3.41992 56.7383 3.41406 56.8164 3.41406Z"}),(0,s.jsx)("path",{d:"M54.3066 1.64453L54.3037 1.73926C54.1276 1.79078 53.949 1.84739 53.7695 1.91406C53.7461 2.36328 53.7305 2.80859 53.7227 3.25C53.7148 3.69141 53.707 4.13672 53.6992 4.58594C53.6948 4.75339 53.6908 4.92071 53.6865 5.08789L53.2881 5.10449L52.4277 5.13867L51.9834 10.6836L47.582 10.9131L47.5928 5.36035L46.9033 5.39746L46.3984 5.42383C46.3788 5.4005 46.3607 5.3758 46.3398 5.35352C46.1981 5.19886 46.0289 5.07096 45.834 4.9668L45.8496 4.37305L45.8574 4.0293C45.9695 4.06056 46.0799 4.09251 46.1875 4.12891L46.4102 1.75C46.2551 1.67601 46.0918 1.61424 45.9209 1.5625L45.9453 0.634766L54.3301 0.619141L54.3066 1.64453ZM46.9199 1.63281L46.8496 4.39844L48.5957 4.30469L48.584 9.85938L51.0566 9.73047L51.502 4.17578L53.248 4.10547L53.3066 1.62109L46.9199 1.63281Z"}),(0,s.jsx)("path",{d:"M39.7383 4.28125C39.7383 3.68453 39.858 3.11442 40.1211 2.59375L40.123 2.58984C40.3709 2.10456 40.7042 1.68462 41.1221 1.34082C41.5323 1.00261 41.9979 0.747834 42.5088 0.574219C43.0158 0.402015 43.5404 0.316406 44.0781 0.316406C44.2967 0.316406 44.52 0.32531 44.7471 0.342773L44.7461 0.34375C44.9804 0.35797 45.2128 0.385239 45.4434 0.425781C45.6802 0.466779 45.9129 0.518237 46.1396 0.583008C46.3822 0.652309 46.6165 0.740578 46.8408 0.847656L47.4707 1.14844L47.4258 1.63184L46.9199 1.63281L46.8496 4.39844L47.168 4.38086L47.1338 4.74316C47.3799 5.02512 47.563 5.34889 47.6846 5.70312H47.6826C47.817 6.07955 47.8789 6.4759 47.8789 6.88281C47.8789 7.53286 47.7641 8.14907 47.5049 8.70703L47.5059 8.70801C47.2628 9.2354 46.9181 9.68832 46.4736 10.0537L46.4746 10.0547C46.0438 10.4119 45.5465 10.6709 44.998 10.8389L44.9971 10.8379C44.4633 11.0025 43.9013 11.082 43.3164 11.082C43.0383 11.082 42.7541 11.0453 42.4688 10.9824L42.4648 10.9814C42.2087 10.924 41.9506 10.8539 41.6904 10.7715L41.6836 10.7695L41.6758 10.7666C41.4258 10.6833 41.1829 10.5955 40.9473 10.5029L40.9365 10.499L40.9268 10.4951C40.7027 10.4014 40.4988 10.3114 40.3164 10.2266L39.668 9.92578L40.0996 5.87695C40.0515 5.77971 40.0081 5.67961 39.9688 5.57715L39.9668 5.57227C39.8112 5.16079 39.7383 4.7274 39.7383 4.28125ZM40.7383 4.28125C40.7383 4.61719 40.793 4.92969 40.9023 5.21875C41.0117 5.50391 41.1641 5.75195 41.3594 5.96289C41.5586 6.16992 41.7949 6.33203 42.0684 6.44922C42.3457 6.56641 42.6523 6.625 42.9883 6.625H43.1758C43.2539 6.625 43.3379 6.62891 43.4277 6.63672C43.5176 6.64453 43.6094 6.6582 43.7031 6.67773C43.7969 6.69336 43.8809 6.71875 43.9551 6.75391C44.0293 6.78516 44.0898 6.82812 44.1367 6.88281C44.1836 6.93359 44.207 6.99609 44.207 7.07031C44.207 7.17969 44.1738 7.26367 44.1074 7.32227C44.041 7.38086 43.959 7.42578 43.8613 7.45703C43.7676 7.48438 43.668 7.50195 43.5625 7.50977C43.457 7.51367 43.3672 7.51562 43.293 7.51562C42.9023 7.51562 42.5039 7.46484 42.0977 7.36328C41.6953 7.25781 41.3281 7.10547 40.9961 6.90625L40.7383 9.32031C40.9062 9.39844 41.0977 9.48242 41.3125 9.57227C41.5312 9.6582 41.7578 9.74023 41.9922 9.81836C42.2266 9.89258 42.457 9.95508 42.6836 10.0059C42.9141 10.0566 43.125 10.082 43.3164 10.082C43.8125 10.082 44.2754 10.0156 44.7051 9.88281C45.1387 9.75 45.5156 9.55078 45.8359 9.28516C46.1602 9.01953 46.4141 8.6875 46.5977 8.28906C46.7852 7.88672 46.8789 7.41797 46.8789 6.88281C46.8789 6.57031 46.832 6.28516 46.7383 6.02734C46.6484 5.76562 46.5156 5.54102 46.3398 5.35352C46.168 5.16602 45.957 5.01562 45.707 4.90234C45.457 4.78906 45.1758 4.72266 44.8633 4.70312C44.8008 4.69531 44.7207 4.69336 44.623 4.69727H44.3066C44.1934 4.69336 44.0781 4.68555 43.9609 4.67383C43.8477 4.66211 43.7422 4.64258 43.6445 4.61523C43.5508 4.58398 43.4727 4.54297 43.4102 4.49219C43.3516 4.4375 43.3203 4.36719 43.3164 4.28125C43.3125 4.20703 43.332 4.14258 43.375 4.08789C43.418 4.0332 43.4746 3.99023 43.5449 3.95898C43.6152 3.92383 43.6953 3.89648 43.7852 3.87695C43.875 3.85742 43.9629 3.84375 44.0488 3.83594C44.1387 3.82422 44.2227 3.81836 44.3008 3.81836C44.3828 3.81445 44.4492 3.8125 44.5 3.8125C44.7773 3.8125 45.0605 3.84375 45.3496 3.90625C45.6426 3.96484 45.9219 4.03906 46.1875 4.12891L46.4102 1.75C46.2383 1.66797 46.0566 1.59961 45.8652 1.54492C45.6738 1.49023 45.4766 1.44531 45.2734 1.41016C45.0742 1.375 44.873 1.35156 44.6699 1.33984C44.4668 1.32422 44.2695 1.31641 44.0781 1.31641C43.6484 1.31641 43.2324 1.38477 42.8301 1.52148C42.4277 1.6582 42.0703 1.85547 41.7578 2.11328C41.4492 2.36719 41.2012 2.67773 41.0137 3.04492C40.8301 3.4082 40.7383 3.82031 40.7383 4.28125Z"}),(0,s.jsx)("path",{d:"M38.7695 0.669922L39 10.9521L34.0576 11.1895L34.0557 11H29.9434L30 8.88379C30.1431 8.70515 30.2664 8.50769 30.3672 8.28906C30.5547 7.88672 30.6484 7.41797 30.6484 6.88281C30.6484 6.57031 30.6016 6.28516 30.5078 6.02734C30.418 5.76562 30.2852 5.54102 30.1094 5.35352C30.105 5.34877 30.1001 5.34454 30.0957 5.33984L30.2217 0.71582L34.0283 0.891602L34.1201 0.896484L34.1221 0.547852L38.7695 0.669922ZM35.1074 6.09766H33.8066L33.9824 1.89062L31.1934 1.76172L30.9707 10H33.5957L33.6777 7.43359H35.0254L35.0488 10.1406L37.9785 10L37.791 1.64453L35.1191 1.57422L35.1074 6.09766Z"}),(0,s.jsx)("path",{d:"M27.7246 6.75391C27.7988 6.78516 27.8594 6.82812 27.9062 6.88281C27.9531 6.93359 27.9766 6.99609 27.9766 7.07031C27.9766 7.17969 27.9434 7.26367 27.877 7.32227C27.8105 7.38086 27.7285 7.42578 27.6309 7.45703C27.5371 7.48438 27.4375 7.50195 27.332 7.50977C27.2266 7.51367 27.1367 7.51562 27.0625 7.51562C26.6719 7.51562 26.2734 7.46484 25.8672 7.36328C25.4648 7.25781 25.0977 7.10547 24.7656 6.90625L24.5078 9.32031L24.4863 9.36426L23.7637 6.86816L23.7715 6.7998L23.8691 5.87695C23.821 5.77971 23.7776 5.67961 23.7383 5.57715L23.7363 5.57227C23.5807 5.16079 23.5078 4.7274 23.5078 4.28125C23.5078 3.68453 23.6275 3.11442 23.8906 2.59375L23.8926 2.58984C24.1404 2.10456 24.4738 1.68462 24.8916 1.34082C25.3018 1.00261 25.7674 0.747834 26.2783 0.574219C26.7853 0.402015 27.31 0.316406 27.8477 0.316406C28.0662 0.316406 28.2896 0.32531 28.5166 0.342773L28.5156 0.34375C28.7499 0.35797 28.9823 0.385239 29.2129 0.425781C29.4498 0.466779 29.6824 0.518237 29.9092 0.583008C30.1517 0.652309 30.386 0.740578 30.6104 0.847656L31.2402 1.14844L30.9531 4.22168L30.9033 4.74316C30.9762 4.82665 31.0438 4.91331 31.1055 5.00391L30.9912 9.21777C30.7855 9.53213 30.5368 9.81232 30.2432 10.0537L30.2441 10.0547C29.8133 10.4119 29.316 10.6709 28.7676 10.8389L28.7666 10.8379C28.2328 11.0025 27.6708 11.082 27.0859 11.082C26.8078 11.082 26.5237 11.0453 26.2383 10.9824L26.2344 10.9814C25.9782 10.924 25.7201 10.8539 25.46 10.7715L25.4531 10.7695L25.4453 10.7666C25.1954 10.6833 24.9525 10.5955 24.7168 10.5029L24.7061 10.499L24.6963 10.4951C24.4723 10.4014 24.2683 10.3114 24.0859 10.2266L23.4375 9.92578L23.4688 9.63184L24.5254 9.49609L24.4863 9.36426L24.5078 9.32031C24.6758 9.39844 24.8672 9.48242 25.082 9.57227C25.3008 9.6582 25.5273 9.74023 25.7617 9.81836C25.9961 9.89258 26.2266 9.95508 26.4531 10.0059C26.6836 10.0566 26.8945 10.082 27.0859 10.082C27.582 10.082 28.0449 10.0156 28.4746 9.88281C28.9082 9.75 29.2852 9.55078 29.6055 9.28516C29.9297 9.01953 30.1836 8.6875 30.3672 8.28906C30.5547 7.88672 30.6484 7.41797 30.6484 6.88281C30.6484 6.57031 30.6016 6.28516 30.5078 6.02734C30.418 5.76562 30.2852 5.54102 30.1094 5.35352C29.9375 5.16602 29.7266 5.01562 29.4766 4.90234C29.2266 4.78906 28.9453 4.72266 28.6328 4.70312C28.5703 4.69531 28.4902 4.69336 28.3926 4.69727H28.0762C27.9629 4.69336 27.8477 4.68555 27.7305 4.67383C27.6172 4.66211 27.5117 4.64258 27.4141 4.61523C27.3203 4.58398 27.2422 4.54297 27.1797 4.49219C27.1211 4.4375 27.0898 4.36719 27.0859 4.28125C27.082 4.20703 27.1016 4.14258 27.1445 4.08789C27.1875 4.0332 27.2441 3.99023 27.3145 3.95898C27.3848 3.92383 27.4648 3.89648 27.5547 3.87695C27.6445 3.85742 27.7324 3.84375 27.8184 3.83594C27.9082 3.82422 27.9922 3.81836 28.0703 3.81836C28.1523 3.81445 28.2188 3.8125 28.2695 3.8125C28.5469 3.8125 28.8301 3.84375 29.1191 3.90625C29.4121 3.96484 29.6914 4.03906 29.957 4.12891L30.1797 1.75C30.0078 1.66797 29.8262 1.59961 29.6348 1.54492C29.4434 1.49023 29.2461 1.44531 29.043 1.41016C28.8438 1.375 28.6426 1.35156 28.4395 1.33984C28.2363 1.32422 28.0391 1.31641 27.8477 1.31641C27.418 1.31641 27.002 1.38477 26.5996 1.52148C26.1973 1.6582 25.8398 1.85547 25.5273 2.11328C25.2188 2.36719 24.9707 2.67773 24.7832 3.04492C24.5996 3.4082 24.5078 3.82031 24.5078 4.28125C24.5078 4.61719 24.5625 4.92969 24.6719 5.21875C24.7812 5.50391 24.9336 5.75195 25.1289 5.96289C25.3281 6.16992 25.5645 6.33203 25.8379 6.44922C26.1152 6.56641 26.4219 6.625 26.7578 6.625H26.9453C27.0234 6.625 27.1074 6.62891 27.1973 6.63672C27.2871 6.64453 27.3789 6.6582 27.4727 6.67773C27.5664 6.69336 27.6504 6.71875 27.7246 6.75391Z"}),(0,s.jsx)("path",{d:"M24.8262 6.93945C24.8062 6.92795 24.7853 6.91808 24.7656 6.90625L24.5078 9.32031C24.6758 9.39844 24.8672 9.48242 25.082 9.57227C25.2652 9.64422 25.4543 9.71185 25.6484 9.77832L25.8105 10.3389L20.8779 10.9746L20.6523 10.1279L20.627 10.0322L20.6152 10.0869L20.4238 10.9531L15.3447 10.4551L15.4521 10.0938L16.2695 10.0586L16.4834 6.64355L18.2266 0.810547L22.9805 0.571289L24.8262 6.93945ZM18.9824 1.77344L16.6504 9.57812L19.6387 9.87109L19.9316 8.54688H21.2676L21.6191 9.87109L24.5254 9.49609L22.2402 1.60938L18.9824 1.77344ZM21.0566 6.75391H20.1777L20.6113 4.71484L21.0566 6.75391Z"}),(0,s.jsx)("path",{d:"M17.873 0.457031L17.4736 6.81934L16.6504 9.57812L17.2969 9.64062L17.2676 10.1211L17.2109 11.0186L12.5918 11.2207L12.5967 10.2969H11.4443L11.4424 10.7949L6.72363 10.9375L6.75293 8.85156C6.88492 8.68148 6.99912 8.49443 7.09375 8.28906C7.28125 7.88672 7.375 7.41797 7.375 6.88281C7.375 6.57031 7.32812 6.28516 7.23438 6.02734C7.14453 5.76562 7.01172 5.54102 6.83594 5.35352C6.82583 5.34249 6.81409 5.33304 6.80371 5.32227L6.84668 2.38281L6.90625 1.75C6.88969 1.7421 6.87221 1.73616 6.85547 1.72852L6.86914 0.84668L11.5967 0.662109L12.1699 2.52246L12.9717 0.457031H17.873ZM13.6562 1.45703L12.0625 5.57031L10.8672 1.69141L7.85547 1.80859L7.73828 9.90625L10.4453 9.82422L10.457 6.02734L11.3828 9.29688H12.4141L13.6211 5.64062L13.5977 10.1758L16.2695 10.0586L16.8086 1.45703H13.6562Z"}),(0,s.jsx)("path",{d:"M0.234375 4.28125C0.234375 3.68453 0.354052 3.11442 0.617188 2.59375L0.619141 2.58984C0.866984 2.10456 1.20034 1.68462 1.61816 1.34082C2.02835 1.00261 2.49396 0.747834 3.00488 0.574219C3.51185 0.402015 4.03653 0.316406 4.57422 0.316406C4.79279 0.316406 5.01614 0.32531 5.24316 0.342773L5.24219 0.34375C5.47649 0.35797 5.7089 0.385239 5.93945 0.425781C6.17633 0.466779 6.40899 0.518237 6.63574 0.583008C6.8783 0.652309 7.11256 0.740578 7.33691 0.847656L7.9668 1.14844L7.90527 1.80566L7.85547 1.80859L7.8457 2.44141L7.67969 4.22168L7.62988 4.74316C7.69404 4.81667 7.75412 4.89263 7.80957 4.97168L7.74805 9.16992C7.53665 9.50367 7.27812 9.8002 6.96973 10.0537L6.9707 10.0547C6.5399 10.4119 6.04261 10.6709 5.49414 10.8389L5.49316 10.8379C4.9594 11.0025 4.39741 11.082 3.8125 11.082C3.5344 11.082 3.25022 11.0453 2.96484 10.9824L2.96094 10.9814C2.7048 10.924 2.44665 10.8539 2.18652 10.7715L2.17969 10.7695L2.17188 10.7666C1.92193 10.6833 1.67903 10.5955 1.44336 10.5029L1.43262 10.499L1.42285 10.4951C1.19884 10.4014 0.994889 10.3114 0.8125 10.2266L0.164062 9.92578L0.595703 5.87695C0.547555 5.77971 0.504154 5.67961 0.464844 5.57715L0.462891 5.57227C0.307257 5.16079 0.234375 4.7274 0.234375 4.28125ZM1.23438 4.28125C1.23438 4.61719 1.28906 4.92969 1.39844 5.21875C1.50781 5.50391 1.66016 5.75195 1.85547 5.96289C2.05469 6.16992 2.29102 6.33203 2.56445 6.44922C2.8418 6.56641 3.14844 6.625 3.48438 6.625H3.67188C3.75 6.625 3.83398 6.62891 3.92383 6.63672C4.01367 6.64453 4.10547 6.6582 4.19922 6.67773C4.29297 6.69336 4.37695 6.71875 4.45117 6.75391C4.52539 6.78516 4.58594 6.82812 4.63281 6.88281C4.67969 6.93359 4.70312 6.99609 4.70312 7.07031C4.70312 7.17969 4.66992 7.26367 4.60352 7.32227C4.53711 7.38086 4.45508 7.42578 4.35742 7.45703C4.26367 7.48438 4.16406 7.50195 4.05859 7.50977C3.95312 7.51367 3.86328 7.51562 3.78906 7.51562C3.39844 7.51562 3 7.46484 2.59375 7.36328C2.19141 7.25781 1.82422 7.10547 1.49219 6.90625L1.23438 9.32031C1.40234 9.39844 1.59375 9.48242 1.80859 9.57227C2.02734 9.6582 2.25391 9.74023 2.48828 9.81836C2.72266 9.89258 2.95312 9.95508 3.17969 10.0059C3.41016 10.0566 3.62109 10.082 3.8125 10.082C4.30859 10.082 4.77148 10.0156 5.20117 9.88281C5.63477 9.75 6.01172 9.55078 6.33203 9.28516C6.65625 9.01953 6.91016 8.6875 7.09375 8.28906C7.28125 7.88672 7.375 7.41797 7.375 6.88281C7.375 6.57031 7.32812 6.28516 7.23438 6.02734C7.14453 5.76562 7.01172 5.54102 6.83594 5.35352C6.66406 5.16602 6.45312 5.01562 6.20312 4.90234C5.95312 4.78906 5.67188 4.72266 5.35938 4.70312C5.29688 4.69531 5.2168 4.69336 5.11914 4.69727H4.80273C4.68945 4.69336 4.57422 4.68555 4.45703 4.67383C4.34375 4.66211 4.23828 4.64258 4.14062 4.61523C4.04688 4.58398 3.96875 4.54297 3.90625 4.49219C3.84766 4.4375 3.81641 4.36719 3.8125 4.28125C3.80859 4.20703 3.82812 4.14258 3.87109 4.08789C3.91406 4.0332 3.9707 3.99023 4.04102 3.95898C4.11133 3.92383 4.19141 3.89648 4.28125 3.87695C4.37109 3.85742 4.45898 3.84375 4.54492 3.83594C4.63477 3.82422 4.71875 3.81836 4.79688 3.81836C4.87891 3.81445 4.94531 3.8125 4.99609 3.8125C5.27344 3.8125 5.55664 3.84375 5.8457 3.90625C6.13867 3.96484 6.41797 4.03906 6.68359 4.12891L6.90625 1.75C6.73438 1.66797 6.55273 1.59961 6.36133 1.54492C6.16992 1.49023 5.97266 1.44531 5.76953 1.41016C5.57031 1.375 5.36914 1.35156 5.16602 1.33984C4.96289 1.32422 4.76562 1.31641 4.57422 1.31641C4.14453 1.31641 3.72852 1.38477 3.32617 1.52148C2.92383 1.6582 2.56641 1.85547 2.25391 2.11328C1.94531 2.36719 1.69727 2.67773 1.50977 3.04492C1.32617 3.4082 1.23438 3.82031 1.23438 4.28125Z"})]})})),Nw=e=>{let{onAnimationComplete:n}=e;const i=(0,t.useRef)(null);return(0,t.useEffect)(()=>{if(!i.current)return;const e=i.current,t=Dw.timeline({onComplete:()=>{Dw.to(e,{duration:.8,autoAlpha:0,delay:2,ease:"power2.inOut",onComplete:n})}}),r=e.querySelectorAll("svg > *"),s=(e,t)=>Math.random()*(t-e)+e;return Dw.set(r,{x:()=>s(-500,500),y:()=>s(-500,500),rotation:()=>s(-720,720),scale:0,opacity:0}),t.to(r,{duration:1.5,x:0,y:0,opacity:1,scale:1,rotation:0,ease:b_.easeInOut,stagger:.015}),()=>{t.kill()}},[n]),(0,s.jsx)(Rw,{ref:i})},Iw=function(){const e=1/1048576;function t(t,n,i,r){let s,a,o,l,c,u,h,d,f,p,m=t[n][0],g=t[n][1],v=t[i][0],y=t[i][1],x=t[r][0],b=t[r][1],_=Math.abs(g-y),w=Math.abs(y-b);return _<e&&w<e?null:(_<e?(l=-(x-v)/(b-y),h=(v+x)/2,d=(y+b)/2,s=(v+m)/2,a=l*(s-h)+d):w<e?(o=-(v-m)/(y-g),c=(m+v)/2,u=(g+y)/2,s=(x+v)/2,a=o*(s-c)+u):(o=-(v-m)/(y-g),l=-(x-v)/(b-y),c=(m+v)/2,u=(g+y)/2,h=(v+x)/2,d=(y+b)/2,s=(o*c-l*h+d-u)/(o-l),a=_>w?o*(s-c)+u:l*(s-h)+d),f=v-s,p=y-a,{i:n,j:i,k:r,x:s,y:a,r:f*f+p*p})}function n(e){let t,n,i,r,s,a;for(n=e.length;n;)for(r=e[--n],i=e[--n],t=n;t;)if(a=e[--t],s=e[--t],i===s&&r===a||i===a&&r===s){e.splice(n,2),e.splice(t,2);break}}return{triangulate:function(i,r){let s,a,o,l,c,u,h,d,f,p,m,g,v=i.length;if(v<3)return[];if(i=i.slice(0),r)for(s=v;s--;)i[s]=i[s][r];for(o=new Array(v),s=v;s--;)o[s]=s;for(o.sort(function(e,t){return i[t][0]-i[e][0]}),l=function(e){let t,n,i,r,s,a,o=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,c=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY;for(t=e.length;t--;)e[t][0]<o&&(o=e[t][0]),e[t][0]>c&&(c=e[t][0]),e[t][1]<l&&(l=e[t][1]),e[t][1]>u&&(u=e[t][1]);return n=c-o,i=u-l,r=Math.max(n,i),s=o+.5*n,a=l+.5*i,[[s-20*r,a-r],[s,a+20*r],[s+20*r,a-r]]}(i),i.push(l[0],l[1],l[2]),c=[t(i,v+0,v+1,v+2)],u=[],h=[],s=o.length;s--;h.length=0){for(g=o[s],a=c.length;a--;)d=i[g][0]-c[a].x,d>0&&d*d>c[a].r?(u.push(c[a]),c.splice(a,1)):(f=i[g][1]-c[a].y,d*d+f*f-c[a].r>e||(h.push(c[a].i,c[a].j,c[a].j,c[a].k,c[a].k,c[a].i),c.splice(a,1)));for(n(h),a=h.length;a;)m=h[--a],p=h[--a],c.push(t(i,p,m,g))}for(s=c.length;s--;)c[s].i<v&&c[s].j<v&&c[s].k<v&&u.push(c[s]);const y=[];for(s=u.length;s--;)y.push(u[s].i,u[s].j,u[s].k);return y}}}(),Ow=Iw,zw=e=>{let{onTransitionEnd:n}=e;const i=(0,t.useRef)(null),r=(0,t.useRef)(null),[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(!1),[u,h]=(0,t.useState)(null);return(0,s.jsxs)("div",{ref:i,className:"relative w-screen h-screen bg-black flex items-center justify-center overflow-hidden",onClick:a&&!l?e=>{if(l||!r.current)return;const t=i.current,s=r.current;c(!0);const a=s.getBoundingClientRect(),o=t.getBoundingClientRect(),u=a.width,h=a.height,d=a.left-o.left,f=a.top-o.top,p=e.clientX-a.left,m=e.clientY-a.top;let g=[];const v=(e,t)=>e+(t-e)*Math.random();for(let n=0;n<400;n++)g.push([v(0,u),v(0,h)]);g.push([p,m],[0,0],[u,0],[0,h],[u,h]);const y=Ow.triangulate(g),x=[];for(let n=0;n<y.length;n+=3){const e=g[y[n]],i=g[y[n+1]],r=g[y[n+2]];if(!e||!i||!r)continue;const a=document.createElement("canvas"),o={x:Math.min(e[0],i[0],r[0]),y:Math.min(e[1],i[1],r[1]),w:Math.max(e[0],i[0],r[0])-Math.min(e[0],i[0],r[0]),h:Math.max(e[1],i[1],r[1])-Math.min(e[1],i[1],r[1])};if(0===o.w||0===o.h)continue;a.width=o.w,a.height=o.h,a.style.cssText="position:absolute; left:".concat(d+o.x,"px; top:").concat(f+o.y,"px; width:").concat(o.w,"px; height:").concat(o.h,"px; opacity: 1;");const l=a.getContext("2d");l.translate(-o.x,-o.y),l.beginPath(),l.moveTo(e[0],e[1]),l.lineTo(i[0],i[1]),l.lineTo(r[0],r[1]),l.closePath(),l.clip(),l.drawImage(s,0,0,u,h),x.push(a),t.appendChild(a)}Dw.to(x,{duration:1.5,x:(e,t)=>{const n=u/2;return(parseFloat(t.style.left)+parseFloat(t.style.width)/2-d-n)*v(1.2,2)},y:(e,t)=>{const n=h/2;return(parseFloat(t.style.top)+parseFloat(t.style.height)/2-f-n)*v(1.2,2)},rotation:()=>v(-1080,1080),scale:()=>v(.8,1.5),autoAlpha:0,ease:"expo.out",stagger:0,onComplete:()=>{x.forEach(e=>{t.contains(e)&&t.removeChild(e)}),n()}})}:void 0,children:[u&&(0,s.jsx)("div",{className:"absolute z-10 text-red-500 bg-black/50 p-2",children:u}),(0,s.jsx)(Ka.img,{ref:r,src:"/images/shatter-image.jpg",alt:"Shatter Target",className:"w-full h-full object-contain cursor-pointer",style:{opacity:a&&!l?1:0},onLoad:()=>o(!0),onError:()=>h("\u753b\u50cf\u8aad\u307f\u8fbc\u307f\u5931\u6557: public/images/shatter-image.jpg \u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002")})]})},Fw=()=>{const{cursorVariant:e}=av(),n=(0,t.useRef)(null);(0,t.useEffect)(()=>{const e=e=>{n.current&&(n.current.style.setProperty("--mouse-x","".concat(e.clientX,"px")),n.current.style.setProperty("--mouse-y","".concat(e.clientY,"px")))};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[]);return(0,s.jsx)(Ka.div,{ref:n,className:"pointer-events-none fixed z-[9999]",style:{top:"var(--mouse-y, 0px)",left:"var(--mouse-x, 0px)",translateX:"-10px",translateY:"-10px"},variants:{default:{opacity:1,scale:1,rotate:-45},hover:{opacity:1,scale:1.2,rotate:0}},animate:e,transition:{type:"spring",stiffness:800,damping:40},children:(0,s.jsx)("svg",{width:"48",height:"48",viewBox:"0 0 48 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 0 8px rgba(107, 209, 251, 0.7))"},children:(0,s.jsx)("path",{d:"M17.8995 17.8995L33.9411 14.0589L30.1005 30.1005L24 24L17.8995 17.8995Z",stroke:"#6BD1FB",strokeWidth:"2",strokeLinejoin:"round",fill:"#1D2B3A",fillOpacity:"0.8"})})})},jw="150",Bw={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Vw={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Uw=0,Hw=1,Ww=2,Gw=3,qw=0,Xw=1,Yw=2,Kw=3,Zw=0,Qw=1,Jw=2,$w=2,eS=0,tS=1,nS=2,iS=3,rS=4,sS=5,aS=100,oS=101,lS=102,cS=103,uS=104,hS=200,dS=201,fS=202,pS=203,mS=204,gS=205,vS=206,yS=207,xS=208,bS=209,_S=210,wS=0,SS=1,MS=2,CS=3,ES=4,TS=5,AS=6,kS=7,PS=0,LS=1,DS=2,RS=0,NS=1,IS=2,OS=3,zS=4,FS=5,jS=300,BS=301,VS=302,US=303,HS=304,WS=306,GS=1e3,qS=1001,XS=1002,YS=1003,KS=1004,ZS=1004,QS=1005,JS=1005,$S=1006,eM=1007,tM=1007,nM=1008,iM=1008,rM=1009,sM=1010,aM=1011,oM=1012,lM=1013,cM=1014,uM=1015,hM=1016,dM=1017,fM=1018,pM=1020,mM=1021,gM=1023,vM=1024,yM=1025,xM=1026,bM=1027,_M=1028,wM=1029,SM=1030,MM=1031,CM=1033,EM=33776,TM=33777,AM=33778,kM=33779,PM=35840,LM=35841,DM=35842,RM=35843,NM=36196,IM=37492,OM=37496,zM=37808,FM=37809,jM=37810,BM=37811,VM=37812,UM=37813,HM=37814,WM=37815,GM=37816,qM=37817,XM=37818,YM=37819,KM=37820,ZM=37821,QM=36492,JM=36283,$M=36284,eC=36285,tC=36286,nC=2200,iC=2201,rC=2202,sC=2300,aC=2301,oC=2302,lC=2400,cC=2401,uC=2402,hC=2500,dC=2501,fC=0,pC=1,mC=2,gC=3e3,vC=3001,yC=3200,xC=3201,bC=0,_C=1,wC="",SC="srgb",MC="srgb-linear",CC="display-p3",EC=0,TC=7680,AC=7681,kC=7682,PC=7683,LC=34055,DC=34056,RC=5386,NC=512,IC=513,OC=514,zC=515,FC=516,jC=517,BC=518,VC=519,UC=35044,HC=35048,WC=35040,GC=35045,qC=35049,XC=35041,YC=35046,KC=35050,ZC=35042,QC="100",JC="300 es",$C=1035;class eE{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,i=n.length;t<i;t++)n[t].call(this,e);e.target=null}}}const tE=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let nE=1234567;const iE=Math.PI/180,rE=180/Math.PI;function sE(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0;return(tE[255&e]+tE[e>>8&255]+tE[e>>16&255]+tE[e>>24&255]+"-"+tE[255&t]+tE[t>>8&255]+"-"+tE[t>>16&15|64]+tE[t>>24&255]+"-"+tE[63&n|128]+tE[n>>8&255]+"-"+tE[n>>16&255]+tE[n>>24&255]+tE[255&i]+tE[i>>8&255]+tE[i>>16&255]+tE[i>>24&255]).toLowerCase()}function aE(e,t,n){return Math.max(t,Math.min(n,e))}function oE(e,t){return(e%t+t)%t}function lE(e,t,n){return(1-n)*e+n*t}function cE(e){return 0===(e&e-1)&&0!==e}function uE(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function hE(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function dE(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function fE(e,t){switch(t.constructor){case Float32Array:return e;case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const pE={DEG2RAD:iE,RAD2DEG:rE,generateUUID:sE,clamp:aE,euclideanModulo:oE,mapLinear:function(e,t,n,i,r){return i+(e-t)*(r-i)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:lE,damp:function(e,t,n,i){return lE(e,t,1-Math.exp(-n*i))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(oE(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(nE=e);let t=nE+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*iE},radToDeg:function(e){return e*rE},isPowerOfTwo:cE,ceilPowerOfTwo:uE,floorPowerOfTwo:hE,setQuaternionFromProperEuler:function(e,t,n,i,r){const s=Math.cos,a=Math.sin,o=s(n/2),l=a(n/2),c=s((t+i)/2),u=a((t+i)/2),h=s((t-i)/2),d=a((t-i)/2),f=s((i-t)/2),p=a((i-t)/2);switch(r){case"XYX":e.set(o*u,l*h,l*d,o*c);break;case"YZY":e.set(l*d,o*u,l*h,o*c);break;case"ZXZ":e.set(l*h,l*d,o*u,o*c);break;case"XZX":e.set(o*u,l*p,l*f,o*c);break;case"YXY":e.set(l*f,o*u,l*p,o*c);break;case"ZYZ":e.set(l*p,l*f,o*u,o*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}},normalize:fE,denormalize:dE};class mE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;mE.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6],this.y=i[1]*t+i[4]*n+i[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),i=Math.sin(t),r=this.x-e.x,s=this.y-e.y;return this.x=r*n-s*i+e.x,this.y=r*i+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class gE{constructor(){gE.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1]}set(e,t,n,i,r,s,a,o,l){const c=this.elements;return c[0]=e,c[1]=i,c[2]=a,c[3]=t,c[4]=r,c[5]=o,c[6]=n,c[7]=s,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[3],o=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=i[0],m=i[3],g=i[6],v=i[1],y=i[4],x=i[7],b=i[2],_=i[5],w=i[8];return r[0]=s*p+a*v+o*b,r[3]=s*m+a*y+o*_,r[6]=s*g+a*x+o*w,r[1]=l*p+c*v+u*b,r[4]=l*m+c*y+u*_,r[7]=l*g+c*x+u*w,r[2]=h*p+d*v+f*b,r[5]=h*m+d*y+f*_,r[8]=h*g+d*x+f*w,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8];return t*s*c-t*a*l-n*r*c+n*a*o+i*r*l-i*s*o}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=c*s-a*l,h=a*o-c*r,d=l*r-s*o,f=t*u+n*h+i*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(i*l-c*n)*p,e[2]=(a*n-i*s)*p,e[3]=h*p,e[4]=(c*t-i*o)*p,e[5]=(i*r-a*t)*p,e[6]=d*p,e[7]=(n*o-l*t)*p,e[8]=(s*t-n*r)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,i,r,s,a){const o=Math.cos(r),l=Math.sin(r);return this.set(n*o,n*l,-n*(o*s+l*a)+s+e,-i*l,i*o,-i*(-l*s+o*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(vE.makeScale(e,t)),this}rotate(e){return this.premultiply(vE.makeRotation(-e)),this}translate(e,t){return this.premultiply(vE.makeTranslation(e,t)),this}makeTranslation(e,t){return this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<9;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const vE=new gE;function yE(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const xE={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function bE(e,t){return new xE[e](t)}function _E(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}class wE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=i}static slerpFlat(e,t,n,i,r,s,a){let o=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[s+0],d=r[s+1],f=r[s+2],p=r[s+3];if(0===a)return e[t+0]=o,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(u!==p||o!==h||l!==d||c!==f){let e=1-a;const t=o*h+l*d+c*f+u*p,n=t>=0?1:-1,i=1-t*t;if(i>Number.EPSILON){const r=Math.sqrt(i),s=Math.atan2(r,t*n);e=Math.sin(e*s)/r,a=Math.sin(a*s)/r}const r=a*n;if(o=o*e+h*r,l=l*e+d*r,c=c*e+f*r,u=u*e+p*r,e===1-a){const e=1/Math.sqrt(o*o+l*l+c*c+u*u);o*=e,l*=e,c*=e,u*=e}}e[t]=o,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,i,r,s){const a=n[i],o=n[i+1],l=n[i+2],c=n[i+3],u=r[s],h=r[s+1],d=r[s+2],f=r[s+3];return e[t]=a*f+c*u+o*d-l*h,e[t+1]=o*f+c*h+l*u-a*d,e[t+2]=l*f+c*d+a*h-o*u,e[t+3]=c*f-a*u-o*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,i){return this._x=e,this._y=t,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const n=e._x,i=e._y,r=e._z,s=e._order,a=Math.cos,o=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=o(n/2),d=o(i/2),f=o(r/2);switch(s){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!1!==t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,i=Math.sin(n);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],i=t[4],r=t[8],s=t[1],a=t[5],o=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-o)*e,this._y=(r-l)*e,this._z=(s-i)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-o)/e,this._x=.25*e,this._y=(i+s)/e,this._z=(r+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(r-l)/e,this._x=(i+s)/e,this._y=.25*e,this._z=(o+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(s-i)/e,this._x=(r+l)/e,this._y=(o+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(aE(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const i=Math.min(1,t/n);return this.slerp(e,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,i=e._y,r=e._z,s=e._w,a=t._x,o=t._y,l=t._z,c=t._w;return this._x=n*c+s*a+i*l-r*o,this._y=i*c+s*o+r*a-n*l,this._z=r*c+s*l+n*o-i*a,this._w=s*c-n*a-i*o-r*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,i=this._y,r=this._z,s=this._w;let a=s*e._w+n*e._x+i*e._y+r*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=s,this._x=n,this._y=i,this._z=r,this;const o=1-a*a;if(o<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*i+t*this._y,this._z=e*r+t*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(o),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=s*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=Math.random(),t=Math.sqrt(1-e),n=Math.sqrt(e),i=2*Math.PI*Math.random(),r=2*Math.PI*Math.random();return this.set(t*Math.cos(i),n*Math.sin(r),n*Math.cos(r),t*Math.sin(i))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class SE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;SE.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(CE.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(CE.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6]*i,this.y=r[1]*t+r[4]*n+r[7]*i,this.z=r[2]*t+r[5]*n+r[8]*i,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=e.elements,s=1/(r[3]*t+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*t+r[4]*n+r[8]*i+r[12])*s,this.y=(r[1]*t+r[5]*n+r[9]*i+r[13])*s,this.z=(r[2]*t+r[6]*n+r[10]*i+r[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,i=this.z,r=e.x,s=e.y,a=e.z,o=e.w,l=o*t+s*i-a*n,c=o*n+a*t-r*i,u=o*i+r*n-s*t,h=-r*t-s*n-a*i;return this.x=l*o+h*-r+c*-a-u*-s,this.y=c*o+h*-s+u*-r-l*-a,this.z=u*o+h*-a+l*-s-c*-r,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,i=this.z,r=e.elements;return this.x=r[0]*t+r[4]*n+r[8]*i,this.y=r[1]*t+r[5]*n+r[9]*i,this.z=r[2]*t+r[6]*n+r[10]*i,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,i=e.y,r=e.z,s=t.x,a=t.y,o=t.z;return this.x=i*o-r*a,this.y=r*s-n*o,this.z=n*a-i*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return ME.copy(this).projectOnVector(e),this.sub(ME)}reflect(e){return this.sub(ME.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(aE(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,i=this.z-e.z;return t*t+n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const i=Math.sin(t)*e;return this.x=i*Math.sin(n),this.y=Math.cos(t)*e,this.z=i*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),i=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=i,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=2*(Math.random()-.5),t=Math.random()*Math.PI*2,n=Math.sqrt(1-e**2);return this.x=n*Math.cos(t),this.y=n*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const ME=new SE,CE=new wE;function EE(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function TE(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}const AE=(new gE).fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),kE=(new gE).fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]),PE=new SE;const LE={[MC]:e=>e,[SC]:e=>e.convertSRGBToLinear(),[CC]:function(e){return e.convertSRGBToLinear(),PE.set(e.r,e.g,e.b).applyMatrix3(kE),e.setRGB(PE.x,PE.y,PE.z)}},DE={[MC]:e=>e,[SC]:e=>e.convertLinearToSRGB(),[CC]:function(e){return PE.set(e.r,e.g,e.b).applyMatrix3(AE),e.setRGB(PE.x,PE.y,PE.z).convertLinearToSRGB()}},RE={enabled:!1,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(e){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!e},get workingColorSpace(){return MC},set workingColorSpace(e){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const i=LE[t],r=DE[n];if(void 0===i||void 0===r)throw new Error('Unsupported color space conversion, "'.concat(t,'" to "').concat(n,'".'));return r(i(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this.workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this.workingColorSpace)}};let NE;class IE{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===NE&&(NE=_E("canvas")),NE.width=e.width,NE.height=e.height;const n=NE.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=NE}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=_E("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const i=n.getImageData(0,0,e.width,e.height),r=i.data;for(let e=0;e<r.length;e++)r[e]=255*EE(r[e]/255);return n.putImageData(i,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*EE(t[e]/255)):t[e]=EE(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}class OE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,this.uuid=sE(),this.data=e,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},i=this.data;if(null!==i){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push(zE(i[t].image)):e.push(zE(i[t]))}else e=zE(i);n.url=e}return t||(e.images[this.uuid]=n),n}}function zE(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?IE.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let FE=0;class jE extends eE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jE.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:jE.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:qS,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:qS,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:$S,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:nM,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:gM,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:rM,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:jE.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:gC;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:FE++}),this.uuid=sE(),this.name="",this.source=new OE(e),this.mipmaps=[],this.mapping=t,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=s,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=o,this.offset=new mE(0,0),this.repeat=new mE(1,1),this.center=new mE(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new gE,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==jS)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case GS:e.x=e.x-Math.floor(e.x);break;case qS:e.x=e.x<0?0:1;break;case XS:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case GS:e.y=e.y-Math.floor(e.y);break;case qS:e.y=e.y<0?0:1;break;case XS:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}}jE.DEFAULT_IMAGE=null,jE.DEFAULT_MAPPING=jS,jE.DEFAULT_ANISOTROPY=1;class BE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;BE.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=i}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,i){return this.x=e,this.y=t,this.z=n,this.w=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,i=this.z,r=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*i+s[12]*r,this.y=s[1]*t+s[5]*n+s[9]*i+s[13]*r,this.z=s[2]*t+s[6]*n+s[10]*i+s[14]*r,this.w=s[3]*t+s[7]*n+s[11]*i+s[15]*r,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,i,r;const s=.01,a=.1,o=e.elements,l=o[0],c=o[4],u=o[8],h=o[1],d=o[5],f=o[9],p=o[2],m=o[6],g=o[10];if(Math.abs(c-h)<s&&Math.abs(u-p)<s&&Math.abs(f-m)<s){if(Math.abs(c+h)<a&&Math.abs(u+p)<a&&Math.abs(f+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,o=(d+1)/2,v=(g+1)/2,y=(c+h)/4,x=(u+p)/4,b=(f+m)/4;return e>o&&e>v?e<s?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(e),i=y/n,r=x/n):o>v?o<s?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(o),n=y/i,r=b/i):v<s?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(v),n=x/r,i=b/r),this.set(n,i,r,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class VE extends eE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new BE(0,0,e,t),this.scissorTest=!1,this.viewport=new BE(0,0,e,t);const i={width:e,height:t,depth:1};this.texture=new jE(i,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.internalFormat=void 0!==n.internalFormat?n.internalFormat:null,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:$S,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null,this.samples=void 0!==n.samples?n.samples:0}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.width===e&&this.height===t&&this.depth===n||(this.width=e,this.height=t,this.depth=n,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=n,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new OE(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class UE extends jE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=YS,this.minFilter=YS,this.wrapR=qS,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class HE extends VE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new UE(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class WE extends jE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:i},this.magFilter=YS,this.minFilter=YS,this.wrapR=qS,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class GE extends VE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new WE(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class qE extends VE{constructor(){let e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLMultipleRenderTargets=!0;const t=this.texture;this.texture=[];for(let n=0;n<e;n++)this.texture[n]=t.clone(),this.texture[n].isRenderTargetTexture=!0}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=e,this.texture[i].image.height=t,this.texture[i].image.depth=n;this.dispose()}return this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,n=e.texture.length;t<n;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class XE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SE(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){let t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.length;o<l;o+=3){const l=e[o],c=e[o+1],u=e[o+2];l<t&&(t=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>s&&(s=c),u>a&&(a=u)}return this.min.set(t,n,i),this.max.set(r,s,a),this}setFromBufferAttribute(e){let t=1/0,n=1/0,i=1/0,r=-1/0,s=-1/0,a=-1/0;for(let o=0,l=e.count;o<l;o++){const l=e.getX(o),c=e.getY(o),u=e.getZ(o);l<t&&(t=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>s&&(s=c),u>a&&(a=u)}return this.min.set(t,n,i),this.max.set(r,s,a),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=KE.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n)if(t&&void 0!=n.attributes&&void 0!==n.attributes.position){const t=n.attributes.position;for(let n=0,i=t.count;n<i;n++)KE.fromBufferAttribute(t,n).applyMatrix4(e.matrixWorld),this.expandByPoint(KE)}else null===n.boundingBox&&n.computeBoundingBox(),ZE.copy(n.boundingBox),ZE.applyMatrix4(e.matrixWorld),this.union(ZE);const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,KE),KE.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(iT),rT.subVectors(this.max,iT),QE.subVectors(e.a,iT),JE.subVectors(e.b,iT),$E.subVectors(e.c,iT),eT.subVectors(JE,QE),tT.subVectors($E,JE),nT.subVectors(QE,$E);let t=[0,-eT.z,eT.y,0,-tT.z,tT.y,0,-nT.z,nT.y,eT.z,0,-eT.x,tT.z,0,-tT.x,nT.z,0,-nT.x,-eT.y,eT.x,0,-tT.y,tT.x,0,-nT.y,nT.x,0];return!!oT(t,QE,JE,$E,rT)&&(t=[1,0,0,0,1,0,0,0,1],!!oT(t,QE,JE,$E,rT)&&(sT.crossVectors(eT,tT),t=[sT.x,sT.y,sT.z],oT(t,QE,JE,$E,rT)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,KE).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(KE).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(YE[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),YE[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),YE[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),YE[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),YE[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),YE[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),YE[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),YE[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(YE)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const YE=[new SE,new SE,new SE,new SE,new SE,new SE,new SE,new SE],KE=new SE,ZE=new XE,QE=new SE,JE=new SE,$E=new SE,eT=new SE,tT=new SE,nT=new SE,iT=new SE,rT=new SE,sT=new SE,aT=new SE;function oT(e,t,n,i,r){for(let s=0,a=e.length-3;s<=a;s+=3){aT.fromArray(e,s);const a=r.x*Math.abs(aT.x)+r.y*Math.abs(aT.y)+r.z*Math.abs(aT.z),o=t.dot(aT),l=n.dot(aT),c=i.dot(aT);if(Math.max(-Math.max(o,l,c),Math.min(o,l,c))>a)return!1}return!0}const lT=new XE,cT=new SE,uT=new SE;class hT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):lT.setFromPoints(e).getCenter(n);let i=0;for(let r=0,s=e.length;r<s;r++)i=Math.max(i,n.distanceToSquared(e[r]));return this.radius=Math.sqrt(i),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;cT.subVectors(e,this.center);const t=cT.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(cT,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(uT.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(cT.copy(e.center).add(uT)),this.expandByPoint(cT.copy(e.center).sub(uT))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const dT=new SE,fT=new SE,pT=new SE,mT=new SE,gT=new SE,vT=new SE,yT=new SE;class xT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,dT)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=dT.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(dT.copy(this.origin).addScaledVector(this.direction,t),dT.distanceToSquared(e))}distanceSqToSegment(e,t,n,i){fT.copy(e).add(t).multiplyScalar(.5),pT.copy(t).sub(e).normalize(),mT.copy(this.origin).sub(fT);const r=.5*e.distanceTo(t),s=-this.direction.dot(pT),a=mT.dot(this.direction),o=-mT.dot(pT),l=mT.lengthSq(),c=Math.abs(1-s*s);let u,h,d,f;if(c>0)if(u=s*o-a,h=s*a-o,f=r*c,u>=0)if(h>=-f)if(h<=f){const e=1/c;u*=e,h*=e,d=u*(u+s*h+2*a)+h*(s*u+h+2*o)+l}else h=r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;else h=-r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;else h<=-f?(u=Math.max(0,-(-s*r+a)),h=u>0?-r:Math.min(Math.max(-r,-o),r),d=-u*u+h*(h+2*o)+l):h<=f?(u=0,h=Math.min(Math.max(-r,-o),r),d=h*(h+2*o)+l):(u=Math.max(0,-(s*r+a)),h=u>0?r:Math.min(Math.max(-r,-o),r),d=-u*u+h*(h+2*o)+l);else h=s>0?-r:r,u=Math.max(0,-(s*h+a)),d=-u*u+h*(h+2*o)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),i&&i.copy(fT).addScaledVector(pT,h),d}intersectSphere(e,t){dT.subVectors(e.center,this.origin);const n=dT.dot(this.direction),i=dT.dot(dT)-n*n,r=e.radius*e.radius;if(i>r)return null;const s=Math.sqrt(r-i),a=n-s,o=n+s;return o<0?null:a<0?this.at(o,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,i,r,s,a,o;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,i=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,i=(e.min.x-h.x)*l),c>=0?(r=(e.min.y-h.y)*c,s=(e.max.y-h.y)*c):(r=(e.max.y-h.y)*c,s=(e.min.y-h.y)*c),n>s||r>i?null:((r>n||isNaN(n))&&(n=r),(s<i||isNaN(i))&&(i=s),u>=0?(a=(e.min.z-h.z)*u,o=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,o=(e.min.z-h.z)*u),n>o||a>i?null:((a>n||n!==n)&&(n=a),(o<i||i!==i)&&(i=o),i<0?null:this.at(n>=0?n:i,t)))}intersectsBox(e){return null!==this.intersectBox(e,dT)}intersectTriangle(e,t,n,i,r){gT.subVectors(t,e),vT.subVectors(n,e),yT.crossVectors(gT,vT);let s,a=this.direction.dot(yT);if(a>0){if(i)return null;s=1}else{if(!(a<0))return null;s=-1,a=-a}mT.subVectors(this.origin,e);const o=s*this.direction.dot(vT.crossVectors(mT,vT));if(o<0)return null;const l=s*this.direction.dot(gT.cross(mT));if(l<0)return null;if(o+l>a)return null;const c=-s*mT.dot(yT);return c<0?null:this.at(c/a,r)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class bT{constructor(){bT.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}set(e,t,n,i,r,s,a,o,l,c,u,h,d,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=i,g[1]=r,g[5]=s,g[9]=a,g[13]=o,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new bT).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,i=1/_T.setFromMatrixColumn(e,0).length(),r=1/_T.setFromMatrixColumn(e,1).length(),s=1/_T.setFromMatrixColumn(e,2).length();return t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t[3]=0,t[4]=n[4]*r,t[5]=n[5]*r,t[6]=n[6]*r,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,i=e.y,r=e.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===e.order){const e=s*c,n=s*u,i=a*c,r=a*u;t[0]=o*c,t[4]=-o*u,t[8]=l,t[1]=n+i*l,t[5]=e-r*l,t[9]=-a*o,t[2]=r-e*l,t[6]=i+n*l,t[10]=s*o}else if("YXZ"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e+r*a,t[4]=i*a-n,t[8]=s*l,t[1]=s*u,t[5]=s*c,t[9]=-a,t[2]=n*a-i,t[6]=r+e*a,t[10]=s*o}else if("ZXY"===e.order){const e=o*c,n=o*u,i=l*c,r=l*u;t[0]=e-r*a,t[4]=-s*u,t[8]=i+n*a,t[1]=n+i*a,t[5]=s*c,t[9]=r-e*a,t[2]=-s*l,t[6]=a,t[10]=s*o}else if("ZYX"===e.order){const e=s*c,n=s*u,i=a*c,r=a*u;t[0]=o*c,t[4]=i*l-n,t[8]=e*l+r,t[1]=o*u,t[5]=r*l+e,t[9]=n*l-i,t[2]=-l,t[6]=a*o,t[10]=s*o}else if("YZX"===e.order){const e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*c,t[4]=r-e*u,t[8]=i*u+n,t[1]=u,t[5]=s*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+i,t[10]=e-r*u}else if("XZY"===e.order){const e=s*o,n=s*l,i=a*o,r=a*l;t[0]=o*c,t[4]=-u,t[8]=l*c,t[1]=e*u+r,t[5]=s*c,t[9]=n*u-i,t[2]=i*u-n,t[6]=a*c,t[10]=r*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(ST,e,MT)}lookAt(e,t,n){const i=this.elements;return TT.subVectors(e,t),0===TT.lengthSq()&&(TT.z=1),TT.normalize(),CT.crossVectors(n,TT),0===CT.lengthSq()&&(1===Math.abs(n.z)?TT.x+=1e-4:TT.z+=1e-4,TT.normalize(),CT.crossVectors(n,TT)),CT.normalize(),ET.crossVectors(TT,CT),i[0]=CT.x,i[4]=ET.x,i[8]=TT.x,i[1]=CT.y,i[5]=ET.y,i[9]=TT.y,i[2]=CT.z,i[6]=ET.z,i[10]=TT.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,i=t.elements,r=this.elements,s=n[0],a=n[4],o=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],x=n[11],b=n[15],_=i[0],w=i[4],S=i[8],M=i[12],C=i[1],E=i[5],T=i[9],A=i[13],k=i[2],P=i[6],L=i[10],D=i[14],R=i[3],N=i[7],I=i[11],O=i[15];return r[0]=s*_+a*C+o*k+l*R,r[4]=s*w+a*E+o*P+l*N,r[8]=s*S+a*T+o*L+l*I,r[12]=s*M+a*A+o*D+l*O,r[1]=c*_+u*C+h*k+d*R,r[5]=c*w+u*E+h*P+d*N,r[9]=c*S+u*T+h*L+d*I,r[13]=c*M+u*A+h*D+d*O,r[2]=f*_+p*C+m*k+g*R,r[6]=f*w+p*E+m*P+g*N,r[10]=f*S+p*T+m*L+g*I,r[14]=f*M+p*A+m*D+g*O,r[3]=v*_+y*C+x*k+b*R,r[7]=v*w+y*E+x*P+b*N,r[11]=v*S+y*T+x*L+b*I,r[15]=v*M+y*A+x*D+b*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],i=e[8],r=e[12],s=e[1],a=e[5],o=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+r*o*u-i*l*u-r*a*h+n*l*h+i*a*d-n*o*d)+e[7]*(+t*o*d-t*l*h+r*s*h-i*s*d+i*l*c-r*o*c)+e[11]*(+t*l*u-t*a*d-r*s*u+n*s*d+r*a*c-n*l*c)+e[15]*(-i*a*c-t*o*u+t*a*h+i*s*u-n*s*h+n*o*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const i=this.elements;return e.isVector3?(i[12]=e.x,i[13]=e.y,i[14]=e.z):(i[12]=e,i[13]=t,i[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],i=e[2],r=e[3],s=e[4],a=e[5],o=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*h*l+p*o*d-a*m*d-u*o*g+a*h*g,y=f*h*l-c*m*l-f*o*d+s*m*d+c*o*g-s*h*g,x=c*p*l-f*u*l+f*a*d-s*p*d-c*a*g+s*u*g,b=f*u*o-c*p*o-f*a*h+s*p*h+c*a*m-s*u*m,_=t*v+n*y+i*x+r*b;if(0===_)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/_;return e[0]=v*w,e[1]=(p*h*r-u*m*r-p*i*d+n*m*d+u*i*g-n*h*g)*w,e[2]=(a*m*r-p*o*r+p*i*l-n*m*l-a*i*g+n*o*g)*w,e[3]=(u*o*r-a*h*r-u*i*l+n*h*l+a*i*d-n*o*d)*w,e[4]=y*w,e[5]=(c*m*r-f*h*r+f*i*d-t*m*d-c*i*g+t*h*g)*w,e[6]=(f*o*r-s*m*r-f*i*l+t*m*l+s*i*g-t*o*g)*w,e[7]=(s*h*r-c*o*r+c*i*l-t*h*l-s*i*d+t*o*d)*w,e[8]=x*w,e[9]=(f*u*r-c*p*r-f*n*d+t*p*d+c*n*g-t*u*g)*w,e[10]=(s*p*r-f*a*r+f*n*l-t*p*l-s*n*g+t*a*g)*w,e[11]=(c*a*r-s*u*r-c*n*l+t*u*l+s*n*d-t*a*d)*w,e[12]=b*w,e[13]=(c*p*i-f*u*i+f*n*h-t*p*h-c*n*m+t*u*m)*w,e[14]=(f*a*i-s*p*i-f*n*o+t*p*o+s*n*m-t*a*m)*w,e[15]=(s*u*i-c*a*i+c*n*o-t*u*o-s*n*h+t*a*h)*w,this}scale(e){const t=this.elements,n=e.x,i=e.y,r=e.z;return t[0]*=n,t[4]*=i,t[8]*=r,t[1]*=n,t[5]*=i,t[9]*=r,t[2]*=n,t[6]*=i,t[10]*=r,t[3]*=n,t[7]*=i,t[11]*=r,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],i=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,i))}makeTranslation(e,t,n){return this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),i=Math.sin(t),r=1-n,s=e.x,a=e.y,o=e.z,l=r*s,c=r*a;return this.set(l*s+n,l*a-i*o,l*o+i*a,0,l*a+i*o,c*a+n,c*o-i*s,0,l*o-i*a,c*o+i*s,r*o*o+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,i,r,s){return this.set(1,n,r,0,e,1,s,0,t,i,1,0,0,0,0,1),this}compose(e,t,n){const i=this.elements,r=t._x,s=t._y,a=t._z,o=t._w,l=r+r,c=s+s,u=a+a,h=r*l,d=r*c,f=r*u,p=s*c,m=s*u,g=a*u,v=o*l,y=o*c,x=o*u,b=n.x,_=n.y,w=n.z;return i[0]=(1-(p+g))*b,i[1]=(d+x)*b,i[2]=(f-y)*b,i[3]=0,i[4]=(d-x)*_,i[5]=(1-(h+g))*_,i[6]=(m+v)*_,i[7]=0,i[8]=(f+y)*w,i[9]=(m-v)*w,i[10]=(1-(h+p))*w,i[11]=0,i[12]=e.x,i[13]=e.y,i[14]=e.z,i[15]=1,this}decompose(e,t,n){const i=this.elements;let r=_T.set(i[0],i[1],i[2]).length();const s=_T.set(i[4],i[5],i[6]).length(),a=_T.set(i[8],i[9],i[10]).length();this.determinant()<0&&(r=-r),e.x=i[12],e.y=i[13],e.z=i[14],wT.copy(this);const o=1/r,l=1/s,c=1/a;return wT.elements[0]*=o,wT.elements[1]*=o,wT.elements[2]*=o,wT.elements[4]*=l,wT.elements[5]*=l,wT.elements[6]*=l,wT.elements[8]*=c,wT.elements[9]*=c,wT.elements[10]*=c,t.setFromRotationMatrix(wT),n.x=r,n.y=s,n.z=a,this}makePerspective(e,t,n,i,r,s){const a=this.elements,o=2*r/(t-e),l=2*r/(n-i),c=(t+e)/(t-e),u=(n+i)/(n-i),h=-(s+r)/(s-r),d=-2*s*r/(s-r);return a[0]=o,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,i,r,s){const a=this.elements,o=1/(t-e),l=1/(n-i),c=1/(s-r),u=(t+e)*o,h=(n+i)*l,d=(s+r)*c;return a[0]=2*o,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let i=0;i<16;i++)if(t[i]!==n[i])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const _T=new SE,wT=new bT,ST=new SE(0,0,0),MT=new SE(1,1,1),CT=new SE,ET=new SE,TT=new SE,AT=new bT,kT=new wE;class PT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:PT.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=i}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=e.elements,r=i[0],s=i[4],a=i[8],o=i[1],l=i[5],c=i[9],u=i[2],h=i[6],d=i[10];switch(t){case"XYZ":this._y=Math.asin(aE(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-s,r)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-aE(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(o,l)):(this._y=Math.atan2(-u,r),this._z=0);break;case"ZXY":this._x=Math.asin(aE(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-s,l)):(this._y=0,this._z=Math.atan2(o,r));break;case"ZYX":this._y=Math.asin(-aE(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(o,r)):(this._x=0,this._z=Math.atan2(-s,l));break;case"YZX":this._z=Math.asin(aE(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,r)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-aE(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,r)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return AT.makeRotationFromQuaternion(e),this.setFromRotationMatrix(AT,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return kT.setFromEuler(this),this.setFromQuaternion(kT,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}PT.DEFAULT_ORDER="XYZ";class LT{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let DT=0;const RT=new SE,NT=new wE,IT=new bT,OT=new SE,zT=new SE,FT=new SE,jT=new wE,BT=new SE(1,0,0),VT=new SE(0,1,0),UT=new SE(0,0,1),HT={type:"added"},WT={type:"removed"};class GT extends eE{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:DT++}),this.uuid=sE(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=GT.DEFAULT_UP.clone();const e=new SE,t=new PT,n=new wE,i=new SE(1,1,1);t._onChange(function(){n.setFromEuler(t,!1)}),n._onChange(function(){t.setFromQuaternion(n,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new bT},normalMatrix:{value:new gE}}),this.matrix=new bT,this.matrixWorld=new bT,this.matrixAutoUpdate=GT.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=GT.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new LT,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return NT.setFromAxisAngle(e,t),this.quaternion.multiply(NT),this}rotateOnWorldAxis(e,t){return NT.setFromAxisAngle(e,t),this.quaternion.premultiply(NT),this}rotateX(e){return this.rotateOnAxis(BT,e)}rotateY(e){return this.rotateOnAxis(VT,e)}rotateZ(e){return this.rotateOnAxis(UT,e)}translateOnAxis(e,t){return RT.copy(e).applyQuaternion(this.quaternion),this.position.add(RT.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(BT,e)}translateY(e){return this.translateOnAxis(VT,e)}translateZ(e){return this.translateOnAxis(UT,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(IT.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?OT.copy(e):OT.set(e,t,n);const i=this.parent;this.updateWorldMatrix(!0,!1),zT.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?IT.lookAt(zT,OT,this.up):IT.lookAt(OT,zT,this.up),this.quaternion.setFromRotationMatrix(IT),i&&(IT.extractRotation(i.matrixWorld),NT.setFromRotationMatrix(IT),this.quaternion.premultiply(NT.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(HT)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(WT)),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(WT)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),IT.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),IT.multiply(e.parent.matrixWorld)),e.applyMatrix4(IT),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n].getObjectByProperty(e,t);if(void 0!==i)return i}}getObjectsByProperty(e,t){let n=[];this[e]===t&&n.push(this);for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectsByProperty(e,t);r.length>0&&(n=n.concat(r))}return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zT,e,FT),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(zT,jT,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,i=t.length;n<i;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,i=t.length;n<i;n++){const i=t[n];!0!==i.matrixWorldAutoUpdate&&!0!==e||i.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(i.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?i.background=this.background.toJSON():this.background.isTexture&&(i.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(i.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){i.geometry=r(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const i=n[t];r(e.shapes,i)}else r(e.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(e.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,i=this.material.length;n<i;n++)t.push(r(e.materials,this.material[n]));i.material=t}else i.material=r(e.materials,this.material);if(this.children.length>0){i.children=[];for(let t=0;t<this.children.length;t++)i.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){i.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];i.animations.push(r(e.animations,n))}}if(t){const t=s(e.geometries),i=s(e.materials),r=s(e.textures),a=s(e.images),o=s(e.shapes),l=s(e.skeletons),c=s(e.animations),u=s(e.nodes);t.length>0&&(n.geometries=t),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),o.length>0&&(n.shapes=o),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=i,n;function s(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}GT.DEFAULT_UP=new SE(0,1,0),GT.DEFAULT_MATRIX_AUTO_UPDATE=!0,GT.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const qT=new SE,XT=new SE,YT=new SE,KT=new SE,ZT=new SE,QT=new SE,JT=new SE,$T=new SE,eA=new SE,tA=new SE;class nA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new SE;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,i){i.subVectors(n,t),qT.subVectors(e,t),i.cross(qT);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(e,t,n,i,r){qT.subVectors(i,t),XT.subVectors(n,t),YT.subVectors(e,t);const s=qT.dot(qT),a=qT.dot(XT),o=qT.dot(YT),l=XT.dot(XT),c=XT.dot(YT),u=s*l-a*a;if(0===u)return r.set(-2,-1,-1);const h=1/u,d=(l*o-a*c)*h,f=(s*c-a*o)*h;return r.set(1-d-f,f,d)}static containsPoint(e,t,n,i){return this.getBarycoord(e,t,n,i,KT),KT.x>=0&&KT.y>=0&&KT.x+KT.y<=1}static getUV(e,t,n,i,r,s,a,o){return this.getBarycoord(e,t,n,i,KT),o.set(0,0),o.addScaledVector(r,KT.x),o.addScaledVector(s,KT.y),o.addScaledVector(a,KT.z),o}static isFrontFacing(e,t,n,i){return qT.subVectors(n,t),XT.subVectors(e,t),qT.cross(XT).dot(i)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,i){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[i]),this}setFromAttributeAndIndices(e,t,n,i){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,i),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return qT.subVectors(this.c,this.b),XT.subVectors(this.a,this.b),.5*qT.cross(XT).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return nA.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return nA.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,n,i,r){return nA.getUV(e,this.a,this.b,this.c,t,n,i,r)}containsPoint(e){return nA.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return nA.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,i=this.b,r=this.c;let s,a;ZT.subVectors(i,n),QT.subVectors(r,n),$T.subVectors(e,n);const o=ZT.dot($T),l=QT.dot($T);if(o<=0&&l<=0)return t.copy(n);eA.subVectors(e,i);const c=ZT.dot(eA),u=QT.dot(eA);if(c>=0&&u<=c)return t.copy(i);const h=o*u-c*l;if(h<=0&&o>=0&&c<=0)return s=o/(o-c),t.copy(n).addScaledVector(ZT,s);tA.subVectors(e,r);const d=ZT.dot(tA),f=QT.dot(tA);if(f>=0&&d<=f)return t.copy(r);const p=d*l-o*f;if(p<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(n).addScaledVector(QT,a);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return JT.subVectors(r,i),a=(u-c)/(u-c+(d-f)),t.copy(i).addScaledVector(JT,a);const g=1/(m+p+h);return s=p*g,a=h*g,t.copy(n).addScaledVector(ZT,s).addScaledVector(QT,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let iA=0;class rA extends eE{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iA++}),this.uuid=sE(),this.name="",this.type="Material",this.blending=tS,this.side=Zw,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=mS,this.blendDst=gS,this.blendEquation=aS,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=CS,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=VC,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=TC,this.stencilZFail=TC,this.stencilZPass=TC,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn("THREE.Material: '"+t+"' parameter is undefined.");continue}const i=this[t];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[t]=n:console.warn("THREE."+this.type+": '"+t+"' is not a property of this material.")}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(e){const t=[];for(const n in e){const i=e[n];delete i.metadata,t.push(i)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==tS&&(n.blending=this.blending),this.side!==Zw&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.colorWrite=this.colorWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(n.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.forceSinglePass&&(n.forceSinglePass=this.forceSinglePass),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=this.flatShading),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=i(e.textures),r=i(e.images);t.length>0&&(n.textures=t),r.length>0&&(n.images=r)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let i=0;i!==e;++i)n[i]=t[i].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}const sA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},aA={h:0,s:0,l:0},oA={h:0,s:0,l:0};function lA(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class cA{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,void 0===t&&void 0===n?this.set(e):this.setRGB(e,t,n)}set(e){return e&&e.isColor?this.copy(e):"number"===typeof e?this.setHex(e):"string"===typeof e&&this.setStyle(e),this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SC;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,RE.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:RE.workingColorSpace;return this.r=e,this.g=t,this.b=n,RE.toWorkingColorSpace(this,i),this}setHSL(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:RE.workingColorSpace;if(e=oE(e,1),t=aE(t,0,1),n=aE(n,0,1),0===t)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+t):n+t-n*t,r=2*n-i;this.r=lA(r,i,e+1/3),this.g=lA(r,i,e),this.b=lA(r,i,e-1/3)}return RE.toWorkingColorSpace(this,i),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SC;function i(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let r;const s=t[1],a=t[2];switch(s){case"rgb":case"rgba":if(r=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(255,parseInt(r[1],10))/255,this.g=Math.min(255,parseInt(r[2],10))/255,this.b=Math.min(255,parseInt(r[3],10))/255,RE.toWorkingColorSpace(this,n),i(r[4]),this;if(r=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return this.r=Math.min(100,parseInt(r[1],10))/100,this.g=Math.min(100,parseInt(r[2],10))/100,this.b=Math.min(100,parseInt(r[3],10))/100,RE.toWorkingColorSpace(this,n),i(r[4]),this;break;case"hsl":case"hsla":if(r=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a)){const e=parseFloat(r[1])/360,t=parseFloat(r[2])/100,s=parseFloat(r[3])/100;return i(r[4]),this.setHSL(e,t,s,n)}break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const i=t[1],r=i.length;if(3===r)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,RE.toWorkingColorSpace(this,n),this;if(6===r)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,RE.toWorkingColorSpace(this,n),this;console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SC;const n=sA[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=EE(e.r),this.g=EE(e.g),this.b=EE(e.b),this}copyLinearToSRGB(e){return this.r=TE(e.r),this.g=TE(e.g),this.b=TE(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SC;return RE.fromWorkingColorSpace(uA.copy(this),e),aE(255*uA.r,0,255)<<16^aE(255*uA.g,0,255)<<8^aE(255*uA.b,0,255)}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SC;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RE.workingColorSpace;RE.fromWorkingColorSpace(uA.copy(this),t);const n=uA.r,i=uA.g,r=uA.b,s=Math.max(n,i,r),a=Math.min(n,i,r);let o,l;const c=(a+s)/2;if(a===s)o=0,l=0;else{const e=s-a;switch(l=c<=.5?e/(s+a):e/(2-s-a),s){case n:o=(i-r)/e+(i<r?6:0);break;case i:o=(r-n)/e+2;break;case r:o=(n-i)/e+4}o/=6}return e.h=o,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:RE.workingColorSpace;return RE.fromWorkingColorSpace(uA.copy(this),t),e.r=uA.r,e.g=uA.g,e.b=uA.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:SC;RE.fromWorkingColorSpace(uA.copy(this),e);const t=uA.r,n=uA.g,i=uA.b;return e!==SC?"color(".concat(e," ").concat(t.toFixed(3)," ").concat(n.toFixed(3)," ").concat(i.toFixed(3),")"):"rgb(".concat(255*t|0,",").concat(255*n|0,",").concat(255*i|0,")")}offsetHSL(e,t,n){return this.getHSL(aA),aA.h+=e,aA.s+=t,aA.l+=n,this.setHSL(aA.h,aA.s,aA.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(aA),e.getHSL(oA);const n=lE(aA.h,oA.h,t),i=lE(aA.s,oA.s,t),r=lE(aA.l,oA.l,t);return this.setHSL(n,i,r),this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const uA=new cA;cA.NAMES=sA;class hA extends rA{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new cA(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=PS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const dA=new SE,fA=new mE;class pA{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=UC,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[e+i]=t.array[n+i];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)fA.fromBufferAttribute(this,t),fA.applyMatrix3(e),this.setXY(t,fA.x,fA.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)dA.fromBufferAttribute(this,t),dA.applyMatrix3(e),this.setXYZ(t,dA.x,dA.y,dA.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)dA.fromBufferAttribute(this,t),dA.applyMatrix4(e),this.setXYZ(t,dA.x,dA.y,dA.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)dA.fromBufferAttribute(this,t),dA.applyNormalMatrix(e),this.setXYZ(t,dA.x,dA.y,dA.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)dA.fromBufferAttribute(this,t),dA.transformDirection(e),this.setXYZ(t,dA.x,dA.y,dA.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=dE(t,this.array)),t}setX(e,t){return this.normalized&&(t=fE(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=dE(t,this.array)),t}setY(e,t){return this.normalized&&(t=fE(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=dE(t,this.array)),t}setZ(e,t){return this.normalized&&(t=fE(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=dE(t,this.array)),t}setW(e,t){return this.normalized&&(t=fE(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=fE(t,this.array),n=fE(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,i){return e*=this.itemSize,this.normalized&&(t=fE(t,this.array),n=fE(n,this.array),i=fE(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e*=this.itemSize,this.normalized&&(t=fE(t,this.array),n=fE(n,this.array),i=fE(i,this.array),r=fE(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=i,this.array[e+3]=r,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==UC&&(e.usage=this.usage),0===this.updateRange.offset&&-1===this.updateRange.count||(e.updateRange=this.updateRange),e}copyColorsArray(){console.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){console.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){console.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){console.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class mA extends pA{constructor(e,t,n){super(new Int8Array(e),t,n)}}class gA extends pA{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class vA extends pA{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class yA extends pA{constructor(e,t,n){super(new Int16Array(e),t,n)}}class xA extends pA{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class bA extends pA{constructor(e,t,n){super(new Int32Array(e),t,n)}}class _A extends pA{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class wA extends pA{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}}class SA extends pA{constructor(e,t,n){super(new Float32Array(e),t,n)}}class MA extends pA{constructor(e,t,n){super(new Float64Array(e),t,n)}}let CA=0;const EA=new bT,TA=new GT,AA=new SE,kA=new XE,PA=new XE,LA=new SE;class DA extends eE{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:CA++}),this.uuid=sE(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(yE(e)?_A:xA)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new gE).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(e),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return EA.makeRotationFromQuaternion(e),this.applyMatrix4(EA),this}rotateX(e){return EA.makeRotationX(e),this.applyMatrix4(EA),this}rotateY(e){return EA.makeRotationY(e),this.applyMatrix4(EA),this}rotateZ(e){return EA.makeRotationZ(e),this.applyMatrix4(EA),this}translate(e,t,n){return EA.makeTranslation(e,t,n),this.applyMatrix4(EA),this}scale(e,t,n){return EA.makeScale(e,t,n),this.applyMatrix4(EA),this}lookAt(e){return TA.lookAt(e),TA.updateMatrix(),this.applyMatrix4(TA.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(AA).negate(),this.translate(AA.x,AA.y,AA.z),this}setFromPoints(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n];t.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new SA(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new XE);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new SE(-1/0,-1/0,-1/0),new SE(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,i=t.length;n<i;n++){const e=t[n];kA.setFromBufferAttribute(e),this.morphTargetsRelative?(LA.addVectors(this.boundingBox.min,kA.min),this.boundingBox.expandByPoint(LA),LA.addVectors(this.boundingBox.max,kA.max),this.boundingBox.expandByPoint(LA)):(this.boundingBox.expandByPoint(kA.min),this.boundingBox.expandByPoint(kA.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new hT);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new SE,1/0);if(e){const n=this.boundingSphere.center;if(kA.setFromBufferAttribute(e),t)for(let e=0,r=t.length;e<r;e++){const n=t[e];PA.setFromBufferAttribute(n),this.morphTargetsRelative?(LA.addVectors(kA.min,PA.min),kA.expandByPoint(LA),LA.addVectors(kA.max,PA.max),kA.expandByPoint(LA)):(kA.expandByPoint(PA.min),kA.expandByPoint(PA.max))}kA.getCenter(n);let i=0;for(let t=0,r=e.count;t<r;t++)LA.fromBufferAttribute(e,t),i=Math.max(i,n.distanceToSquared(LA));if(t)for(let r=0,s=t.length;r<s;r++){const s=t[r],a=this.morphTargetsRelative;for(let t=0,r=s.count;t<r;t++)LA.fromBufferAttribute(s,t),a&&(AA.fromBufferAttribute(e,t),LA.add(AA)),i=Math.max(i,n.distanceToSquared(LA))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=e.array,i=t.position.array,r=t.normal.array,s=t.uv.array,a=i.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new pA(new Float32Array(4*a),4));const o=this.getAttribute("tangent").array,l=[],c=[];for(let C=0;C<a;C++)l[C]=new SE,c[C]=new SE;const u=new SE,h=new SE,d=new SE,f=new mE,p=new mE,m=new mE,g=new SE,v=new SE;function y(e,t,n){u.fromArray(i,3*e),h.fromArray(i,3*t),d.fromArray(i,3*n),f.fromArray(s,2*e),p.fromArray(s,2*t),m.fromArray(s,2*n),h.sub(u),d.sub(u),p.sub(f),m.sub(f);const r=1/(p.x*m.y-m.x*p.y);isFinite(r)&&(g.copy(h).multiplyScalar(m.y).addScaledVector(d,-p.y).multiplyScalar(r),v.copy(d).multiplyScalar(p.x).addScaledVector(h,-m.x).multiplyScalar(r),l[e].add(g),l[t].add(g),l[n].add(g),c[e].add(v),c[t].add(v),c[n].add(v))}let x=this.groups;0===x.length&&(x=[{start:0,count:n.length}]);for(let C=0,E=x.length;C<E;++C){const e=x[C],t=e.start;for(let i=t,r=t+e.count;i<r;i+=3)y(n[i+0],n[i+1],n[i+2])}const b=new SE,_=new SE,w=new SE,S=new SE;function M(e){w.fromArray(r,3*e),S.copy(w);const t=l[e];b.copy(t),b.sub(w.multiplyScalar(w.dot(t))).normalize(),_.crossVectors(S,t);const n=_.dot(c[e])<0?-1:1;o[4*e]=b.x,o[4*e+1]=b.y,o[4*e+2]=b.z,o[4*e+3]=n}for(let C=0,E=x.length;C<E;++C){const e=x[C],t=e.start;for(let i=t,r=t+e.count;i<r;i+=3)M(n[i+0]),M(n[i+1]),M(n[i+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new pA(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const i=new SE,r=new SE,s=new SE,a=new SE,o=new SE,l=new SE,c=new SE,u=new SE;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),f=e.getX(h+1),p=e.getX(h+2);i.fromBufferAttribute(t,d),r.fromBufferAttribute(t,f),s.fromBufferAttribute(t,p),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,d),o.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),a.add(c),o.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,o.x,o.y,o.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)i.fromBufferAttribute(t,e+0),r.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),c.subVectors(s,r),u.subVectors(i,r),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}merge(){return console.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeBufferGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)LA.fromBufferAttribute(e,t),LA.normalize(),e.setXYZ(t,LA.x,LA.y,LA.z)}toNonIndexed(){function e(e,t){const n=e.array,i=e.itemSize,r=e.normalized,s=new n.constructor(t.length*i);let a=0,o=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*i;for(let e=0;e<i;e++)s[o++]=n[a++]}return new pA(s,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new DA,n=this.index.array,i=this.attributes;for(const a in i){const r=e(i[a],n);t.setAttribute(a,r)}const r=this.morphAttributes;for(const a in r){const i=[],s=r[a];for(let t=0,r=s.length;t<r;t++){const r=e(s[t],n);i.push(r)}t.morphAttributes[a]=i}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let a=0,o=s.length;a<o;a++){const e=s[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const o in n){const t=n[o];e.data.attributes[o]=t.toJSON(e.data)}const i={};let r=!1;for(const o in this.morphAttributes){const t=this.morphAttributes[o],n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];n.push(r.toJSON(e.data))}n.length>0&&(i[o]=n,r=!0)}r&&(e.data.morphAttributes=i,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const i=e.attributes;for(const l in i){const e=i[l];this.setAttribute(l,e.clone(t))}const r=e.morphAttributes;for(const l in r){const e=[],n=r[l];for(let i=0,r=n.length;i<r;i++)e.push(n[i].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let l=0,c=s.length;l<c;l++){const e=s[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const o=e.boundingSphere;return null!==o&&(this.boundingSphere=o.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const RA=new bT,NA=new xT,IA=new hT,OA=new SE,zA=new SE,FA=new SE,jA=new SE,BA=new SE,VA=new SE,UA=new mE,HA=new mE,WA=new mE,GA=new SE,qA=new SE;class XA extends GT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new DA,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new hA;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,i=n.attributes.position,r=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(i,e);const a=this.morphTargetInfluences;if(r&&a){VA.set(0,0,0);for(let n=0,i=r.length;n<i;n++){const i=a[n],o=r[n];0!==i&&(BA.fromBufferAttribute(o,e),s?VA.addScaledVector(BA,i):VA.addScaledVector(BA.sub(t),i))}t.add(VA)}return this.isSkinnedMesh&&this.boneTransform(e,t),t}raycast(e,t){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),IA.copy(n.boundingSphere),IA.applyMatrix4(r),NA.copy(e.ray).recast(e.near),!1===IA.containsPoint(NA.origin)){if(null===NA.intersectSphere(IA,OA))return;if(NA.origin.distanceToSquared(OA)>(e.far-e.near)**2)return}if(RA.copy(r).invert(),NA.copy(e.ray).applyMatrix4(RA),null!==n.boundingBox&&!1===NA.intersectsBox(n.boundingBox))return;let s;const a=n.index,o=n.attributes.position,l=n.attributes.uv,c=n.attributes.uv2,u=n.groups,h=n.drawRange;if(null!==a)if(Array.isArray(i))for(let d=0,f=u.length;d<f;d++){const n=u[d],r=i[n.materialIndex];for(let i=Math.max(n.start,h.start),o=Math.min(a.count,Math.min(n.start+n.count,h.start+h.count));i<o;i+=3){const o=a.getX(i),u=a.getX(i+1),h=a.getX(i+2);s=YA(this,r,e,NA,l,c,o,u,h),s&&(s.faceIndex=Math.floor(i/3),s.face.materialIndex=n.materialIndex,t.push(s))}}else{for(let n=Math.max(0,h.start),r=Math.min(a.count,h.start+h.count);n<r;n+=3){const r=a.getX(n),o=a.getX(n+1),u=a.getX(n+2);s=YA(this,i,e,NA,l,c,r,o,u),s&&(s.faceIndex=Math.floor(n/3),t.push(s))}}else if(void 0!==o)if(Array.isArray(i))for(let d=0,f=u.length;d<f;d++){const n=u[d],r=i[n.materialIndex];for(let i=Math.max(n.start,h.start),a=Math.min(o.count,Math.min(n.start+n.count,h.start+h.count));i<a;i+=3){s=YA(this,r,e,NA,l,c,i,i+1,i+2),s&&(s.faceIndex=Math.floor(i/3),s.face.materialIndex=n.materialIndex,t.push(s))}}else{for(let n=Math.max(0,h.start),r=Math.min(o.count,h.start+h.count);n<r;n+=3){s=YA(this,i,e,NA,l,c,n,n+1,n+2),s&&(s.faceIndex=Math.floor(n/3),t.push(s))}}}}function YA(e,t,n,i,r,s,a,o,l){e.getVertexPosition(a,zA),e.getVertexPosition(o,FA),e.getVertexPosition(l,jA);const c=function(e,t,n,i,r,s,a,o){let l;if(l=t.side===Qw?i.intersectTriangle(a,s,r,!0,o):i.intersectTriangle(r,s,a,t.side===Zw,o),null===l)return null;qA.copy(o),qA.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(qA);return c<n.near||c>n.far?null:{distance:c,point:qA.clone(),object:e}}(e,t,n,i,zA,FA,jA,GA);if(c){r&&(UA.fromBufferAttribute(r,a),HA.fromBufferAttribute(r,o),WA.fromBufferAttribute(r,l),c.uv=nA.getUV(GA,zA,FA,jA,UA,HA,WA,new mE)),s&&(UA.fromBufferAttribute(s,a),HA.fromBufferAttribute(s,o),WA.fromBufferAttribute(s,l),c.uv2=nA.getUV(GA,zA,FA,jA,UA,HA,WA,new mE));const e={a:a,b:o,c:l,normal:new SE,materialIndex:0};nA.getNormal(zA,FA,jA,e.normal),c.face=e}return c}class KA extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:i,heightSegments:r,depthSegments:s};const a=this;i=Math.floor(i),r=Math.floor(r),s=Math.floor(s);const o=[],l=[],c=[],u=[];let h=0,d=0;function f(e,t,n,i,r,s,f,p,m,g,v){const y=s/m,x=f/g,b=s/2,_=f/2,w=p/2,S=m+1,M=g+1;let C=0,E=0;const T=new SE;for(let a=0;a<M;a++){const s=a*x-_;for(let o=0;o<S;o++){const h=o*y-b;T[e]=h*i,T[t]=s*r,T[n]=w,l.push(T.x,T.y,T.z),T[e]=0,T[t]=0,T[n]=p>0?1:-1,c.push(T.x,T.y,T.z),u.push(o/m),u.push(1-a/g),C+=1}}for(let a=0;a<g;a++)for(let e=0;e<m;e++){const t=h+e+S*a,n=h+e+S*(a+1),i=h+(e+1)+S*(a+1),r=h+(e+1)+S*a;o.push(t,n,r),o.push(n,i,r),E+=6}a.addGroup(d,E,v),d+=E,h+=C}f("z","y","x",-1,-1,n,t,e,s,r,0),f("z","y","x",1,-1,n,t,-e,s,r,1),f("x","z","y",1,1,e,n,t,i,s,2),f("x","z","y",1,-1,e,n,-t,i,s,3),f("x","y","z",1,-1,e,t,n,i,r,4),f("x","y","z",-1,-1,e,t,-n,i,r,5),this.setIndex(o),this.setAttribute("position",new SA(l,3)),this.setAttribute("normal",new SA(c,3)),this.setAttribute("uv",new SA(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new KA(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ZA(e){const t={};for(const n in e){t[n]={};for(const i in e[n]){const r=e[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?t[n][i]=r.clone():Array.isArray(r)?t[n][i]=r.slice():t[n][i]=r}}return t}function QA(e){const t={};for(let n=0;n<e.length;n++){const i=ZA(e[n]);for(const e in i)t[e]=i[e]}return t}function JA(e){return null===e.getRenderTarget()&&e.outputEncoding===vC?SC:MC}const $A={clone:ZA,merge:QA};class ek extends rA{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ZA(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i].value;n&&n.isTexture?t.uniforms[i]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[i]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[i]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[i]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[i]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[i]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[i]={type:"m4",value:n.toArray()}:t.uniforms[i]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class tk extends GT{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new bT,this.projectionMatrix=new bT,this.projectionMatrixInverse=new bT}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}class nk extends tk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*rE*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*iE*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*rE*Math.atan(Math.tan(.5*iE*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,n,i,r,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*iE*this.fov)/this.zoom,n=2*t,i=this.aspect*n,r=-.5*i;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,a=s.fullHeight;r+=s.offsetX*i/e,t-=s.offsetY*n/a,i*=s.width/e,n*=s.height/a}const a=this.filmOffset;0!==a&&(r+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,t,t-n,e,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ik=-90;class rk extends GT{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n;const i=new nk(ik,1,e,t);i.layers=this.layers,i.up.set(0,1,0),i.lookAt(1,0,0),this.add(i);const r=new nk(ik,1,e,t);r.layers=this.layers,r.up.set(0,1,0),r.lookAt(-1,0,0),this.add(r);const s=new nk(ik,1,e,t);s.layers=this.layers,s.up.set(0,0,-1),s.lookAt(0,1,0),this.add(s);const a=new nk(ik,1,e,t);a.layers=this.layers,a.up.set(0,0,1),a.lookAt(0,-1,0),this.add(a);const o=new nk(ik,1,e,t);o.layers=this.layers,o.up.set(0,1,0),o.lookAt(0,0,1),this.add(o);const l=new nk(ik,1,e,t);l.layers=this.layers,l.up.set(0,1,0),l.lookAt(0,0,-1),this.add(l)}update(e,t){null===this.parent&&this.updateMatrixWorld();const n=this.renderTarget,[i,r,s,a,o,l]=this.children,c=e.getRenderTarget(),u=e.toneMapping,h=e.xr.enabled;e.toneMapping=RS,e.xr.enabled=!1;const d=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0),e.render(t,i),e.setRenderTarget(n,1),e.render(t,r),e.setRenderTarget(n,2),e.render(t,s),e.setRenderTarget(n,3),e.render(t,a),e.setRenderTarget(n,4),e.render(t,o),n.texture.generateMipmaps=d,e.setRenderTarget(n,5),e.render(t,l),e.setRenderTarget(c),e.toneMapping=u,e.xr.enabled=h,n.texture.needsPMREMUpdate=!0}}class sk extends jE{constructor(e,t,n,i,r,s,a,o,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:BS,n,i,r,s,a,o,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ak extends VE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},i=[n,n,n,n,n,n];this.texture=new sk(i,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:$S}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.encoding=t.encoding,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={tEquirect:{value:null}},i="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",r="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new KA(5,5,5),a=new ek({name:"CubemapFromEquirect",uniforms:ZA(n),vertexShader:i,fragmentShader:r,side:Qw,blending:eS});a.uniforms.tEquirect.value=t;const o=new XA(s,a),l=t.minFilter;t.minFilter===nM&&(t.minFilter=$S);return new rk(1,10,this).update(e,o),t.minFilter=l,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,i){const r=e.getRenderTarget();for(let s=0;s<6;s++)e.setRenderTarget(this,s),e.clear(t,n,i);e.setRenderTarget(r)}}const ok=new SE,lk=new SE,ck=new gE;class uk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SE(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,i){return this.normal.set(e,t,n),this.constant=i,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const i=ok.subVectors(n,t).cross(lk.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(i,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(ok),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const r=-(e.start.dot(this.normal)+this.constant)/i;return r<0||r>1?null:t.copy(e.start).addScaledVector(n,r)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||ck.getNormalMatrix(e),i=this.coplanarPoint(ok).applyMatrix4(e),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const hk=new hT,dk=new SE;class fk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new uk,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new uk,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new uk,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new uk,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new uk,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new uk;this.planes=[e,t,n,i,r,s]}set(e,t,n,i,r,s){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){const t=this.planes,n=e.elements,i=n[0],r=n[1],s=n[2],a=n[3],o=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],f=n[10],p=n[11],m=n[12],g=n[13],v=n[14],y=n[15];return t[0].setComponents(a-i,u-o,p-h,y-m).normalize(),t[1].setComponents(a+i,u+o,p+h,y+m).normalize(),t[2].setComponents(a+r,u+l,p+d,y+g).normalize(),t[3].setComponents(a-r,u-l,p-d,y-g).normalize(),t[4].setComponents(a-s,u-c,p-f,y-v).normalize(),t[5].setComponents(a+s,u+c,p+f,y+v).normalize(),this}intersectsObject(e){const t=e.geometry;return null===t.boundingSphere&&t.computeBoundingSphere(),hk.copy(t.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(hk)}intersectsSprite(e){return hk.center.set(0,0,0),hk.radius=.7071067811865476,hk.applyMatrix4(e.matrixWorld),this.intersectsSphere(hk)}intersectsSphere(e){const t=this.planes,n=e.center,i=-e.radius;for(let r=0;r<6;r++){if(t[r].distanceToPoint(n)<i)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const i=t[n];if(dk.x=i.normal.x>0?e.max.x:e.min.x,dk.y=i.normal.y>0?e.max.y:e.min.y,dk.z=i.normal.z>0?e.max.z:e.min.z,i.distanceToPoint(dk)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function pk(){let e=null,t=!1,n=null,i=null;function r(t,s){n(t,s),i=e.requestAnimationFrame(r)}return{start:function(){!0!==t&&null!==n&&(i=e.requestAnimationFrame(r),t=!0)},stop:function(){e.cancelAnimationFrame(i),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function mk(e,t){const n=t.isWebGL2,i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);n&&(e.deleteBuffer(n.buffer),i.delete(t))},update:function(t,r){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const s=i.get(t);void 0===s?i.set(t,function(t,i){const r=t.array,s=t.usage,a=e.createBuffer();let o;if(e.bindBuffer(i,a),e.bufferData(i,r,s),t.onUploadCallback(),r instanceof Float32Array)o=5126;else if(r instanceof Uint16Array)if(t.isFloat16BufferAttribute){if(!n)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");o=5131}else o=5123;else if(r instanceof Int16Array)o=5122;else if(r instanceof Uint32Array)o=5125;else if(r instanceof Int32Array)o=5124;else if(r instanceof Int8Array)o=5120;else if(r instanceof Uint8Array)o=5121;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);o=5121}return{buffer:a,type:o,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version}}(t,r)):s.version<t.version&&(!function(t,i,r){const s=i.array,a=i.updateRange;e.bindBuffer(r,t),-1===a.count?e.bufferSubData(r,0,s):(n?e.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s,a.offset,a.count):e.bufferSubData(r,a.offset*s.BYTES_PER_ELEMENT,s.subarray(a.offset,a.offset+a.count)),a.count=-1),i.onUploadCallback()}(s.buffer,t,r),s.version=t.version)}}}class gk extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:i};const r=e/2,s=t/2,a=Math.floor(n),o=Math.floor(i),l=a+1,c=o+1,u=e/a,h=t/o,d=[],f=[],p=[],m=[];for(let g=0;g<c;g++){const e=g*h-s;for(let t=0;t<l;t++){const n=t*u-r;f.push(n,-e,0),p.push(0,0,1),m.push(t/a),m.push(1-g/o)}}for(let g=0;g<o;g++)for(let e=0;e<a;e++){const t=e+l*g,n=e+l*(g+1),i=e+1+l*(g+1),r=e+1+l*g;d.push(t,n,r),d.push(n,i,r)}this.setIndex(d),this.setAttribute("position",new SA(f,3)),this.setAttribute("normal",new SA(p,3)),this.setAttribute("uv",new SA(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gk(e.width,e.height,e.widthSegments,e.heightSegments)}}const vk={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\n#ifdef USE_IRIDESCENCE\n\tvec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = mix( F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\t return vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat R21 = R12;\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = dFdx( surf_pos.xyz );\n\t\tvec3 vSigmaY = dFdy( surf_pos.xyz );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_v0 0.339\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_v1 0.276\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_v4 0.046\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_v5 0.016\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_v6 0.0038\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( LEGACY_LIGHTS )\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#else\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );\n\t#else\n\t\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometry.viewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmission.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, vec2 fullSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\t\n\t\tvec2 lodFudge = pow( 1.95, lod ) / fullSize;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec2 fullSize = vec2( textureSize( sampler, 0 ) );\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), fullSize, floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), fullSize, ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},yk={common:{diffuse:{value:new cA(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new gE},uv2Transform:{value:new gE},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new mE(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new cA(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new cA(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new gE}},sprite:{diffuse:{value:new cA(16777215)},opacity:{value:1},center:{value:new mE(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new gE}}},xk={basic:{uniforms:QA([yk.common,yk.specularmap,yk.envmap,yk.aomap,yk.lightmap,yk.fog]),vertexShader:vk.meshbasic_vert,fragmentShader:vk.meshbasic_frag},lambert:{uniforms:QA([yk.common,yk.specularmap,yk.envmap,yk.aomap,yk.lightmap,yk.emissivemap,yk.bumpmap,yk.normalmap,yk.displacementmap,yk.fog,yk.lights,{emissive:{value:new cA(0)}}]),vertexShader:vk.meshlambert_vert,fragmentShader:vk.meshlambert_frag},phong:{uniforms:QA([yk.common,yk.specularmap,yk.envmap,yk.aomap,yk.lightmap,yk.emissivemap,yk.bumpmap,yk.normalmap,yk.displacementmap,yk.fog,yk.lights,{emissive:{value:new cA(0)},specular:{value:new cA(1118481)},shininess:{value:30}}]),vertexShader:vk.meshphong_vert,fragmentShader:vk.meshphong_frag},standard:{uniforms:QA([yk.common,yk.envmap,yk.aomap,yk.lightmap,yk.emissivemap,yk.bumpmap,yk.normalmap,yk.displacementmap,yk.roughnessmap,yk.metalnessmap,yk.fog,yk.lights,{emissive:{value:new cA(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:vk.meshphysical_vert,fragmentShader:vk.meshphysical_frag},toon:{uniforms:QA([yk.common,yk.aomap,yk.lightmap,yk.emissivemap,yk.bumpmap,yk.normalmap,yk.displacementmap,yk.gradientmap,yk.fog,yk.lights,{emissive:{value:new cA(0)}}]),vertexShader:vk.meshtoon_vert,fragmentShader:vk.meshtoon_frag},matcap:{uniforms:QA([yk.common,yk.bumpmap,yk.normalmap,yk.displacementmap,yk.fog,{matcap:{value:null}}]),vertexShader:vk.meshmatcap_vert,fragmentShader:vk.meshmatcap_frag},points:{uniforms:QA([yk.points,yk.fog]),vertexShader:vk.points_vert,fragmentShader:vk.points_frag},dashed:{uniforms:QA([yk.common,yk.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:vk.linedashed_vert,fragmentShader:vk.linedashed_frag},depth:{uniforms:QA([yk.common,yk.displacementmap]),vertexShader:vk.depth_vert,fragmentShader:vk.depth_frag},normal:{uniforms:QA([yk.common,yk.bumpmap,yk.normalmap,yk.displacementmap,{opacity:{value:1}}]),vertexShader:vk.meshnormal_vert,fragmentShader:vk.meshnormal_frag},sprite:{uniforms:QA([yk.sprite,yk.fog]),vertexShader:vk.sprite_vert,fragmentShader:vk.sprite_frag},background:{uniforms:{uvTransform:{value:new gE},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:vk.background_vert,fragmentShader:vk.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:vk.backgroundCube_vert,fragmentShader:vk.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:vk.cube_vert,fragmentShader:vk.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:vk.equirect_vert,fragmentShader:vk.equirect_frag},distanceRGBA:{uniforms:QA([yk.common,yk.displacementmap,{referencePosition:{value:new SE},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:vk.distanceRGBA_vert,fragmentShader:vk.distanceRGBA_frag},shadow:{uniforms:QA([yk.lights,yk.fog,{color:{value:new cA(0)},opacity:{value:1}}]),vertexShader:vk.shadow_vert,fragmentShader:vk.shadow_frag}};xk.physical={uniforms:QA([xk.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new mE(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new cA(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new mE},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new cA(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new cA(1,1,1)},specularColorMap:{value:null}}]),vertexShader:vk.meshphysical_vert,fragmentShader:vk.meshphysical_frag};const bk={r:0,b:0,g:0};function _k(e,t,n,i,r,s,a){const o=new cA(0);let l,c,u=!0===s?0:1,h=null,d=0,f=null;function p(t,n){t.getRGB(bk,JA(e)),i.buffers.color.setClear(bk.r,bk.g,bk.b,n,a)}return{getClearColor:function(){return o},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;o.set(e),u=t,p(o,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,p(o,u)},render:function(i,s){let a=!1,m=!0===s.isScene?s.background:null;if(m&&m.isTexture){m=(s.backgroundBlurriness>0?n:t).get(m)}const g=e.xr,v=g.getSession&&g.getSession();v&&"additive"===v.environmentBlendMode&&(m=null),null===m?p(o,u):m&&m.isColor&&(p(m,1),a=!0),(e.autoClear||a)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),m&&(m.isCubeTexture||m.mapping===WS)?(void 0===c&&(c=new XA(new KA(1,1,1),new ek({name:"BackgroundCubeMaterial",uniforms:ZA(xk.backgroundCube.uniforms),vertexShader:xk.backgroundCube.vertexShader,fragmentShader:xk.backgroundCube.fragmentShader,side:Qw,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),c.material.uniforms.envMap.value=m,c.material.uniforms.flipEnvMap.value=m.isCubeTexture&&!1===m.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=s.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=s.backgroundIntensity,c.material.toneMapped=m.encoding!==vC,h===m&&d===m.version&&f===e.toneMapping||(c.material.needsUpdate=!0,h=m,d=m.version,f=e.toneMapping),c.layers.enableAll(),i.unshift(c,c.geometry,c.material,0,0,null)):m&&m.isTexture&&(void 0===l&&(l=new XA(new gk(2,2),new ek({name:"BackgroundMaterial",uniforms:ZA(xk.background.uniforms),vertexShader:xk.background.vertexShader,fragmentShader:xk.background.fragmentShader,side:Zw,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=m,l.material.uniforms.backgroundIntensity.value=s.backgroundIntensity,l.material.toneMapped=m.encoding!==vC,!0===m.matrixAutoUpdate&&m.updateMatrix(),l.material.uniforms.uvTransform.value.copy(m.matrix),h===m&&d===m.version&&f===e.toneMapping||(l.material.needsUpdate=!0,h=m,d=m.version,f=e.toneMapping),l.layers.enableAll(),i.unshift(l,l.geometry,l.material,0,0,null))}}}function wk(e,t,n,i){const r=e.getParameter(34921),s=i.isWebGL2?null:t.get("OES_vertex_array_object"),a=i.isWebGL2||null!==s,o={},l=f(null);let c=l,u=!1;function h(t){return i.isWebGL2?e.bindVertexArray(t):s.bindVertexArrayOES(t)}function d(t){return i.isWebGL2?e.deleteVertexArray(t):s.deleteVertexArrayOES(t)}function f(e){const t=[],n=[],i=[];for(let s=0;s<r;s++)t[s]=0,n[s]=0,i[s]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:n,attributeDivisors:i,object:e,attributes:{},index:null}}function p(){const e=c.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function m(e){g(e,0)}function g(n,r){const s=c.newAttributes,a=c.enabledAttributes,o=c.attributeDivisors;if(s[n]=1,0===a[n]&&(e.enableVertexAttribArray(n),a[n]=1),o[n]!==r){(i.isWebGL2?e:t.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),o[n]=r}}function v(){const t=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==t[i]&&(e.disableVertexAttribArray(i),n[i]=0)}function y(t,n,r,s,a,o){!0!==i.isWebGL2||5124!==r&&5125!==r?e.vertexAttribPointer(t,n,r,s,a,o):e.vertexAttribIPointer(t,n,r,a,o)}function x(){b(),u=!0,c!==l&&(c=l,h(c.object))}function b(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:function(r,l,d,x,b){let _=!1;if(a){const t=function(t,n,r){const a=!0===r.wireframe;let l=o[t.id];void 0===l&&(l={},o[t.id]=l);let c=l[n.id];void 0===c&&(c={},l[n.id]=c);let u=c[a];void 0===u&&(u=f(i.isWebGL2?e.createVertexArray():s.createVertexArrayOES()),c[a]=u);return u}(x,d,l);c!==t&&(c=t,h(c.object)),_=function(e,t,n,i){const r=c.attributes,s=t.attributes;let a=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){const t=r[l];let n=s[l];if(void 0===n&&("instanceMatrix"===l&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;a++}}return c.attributesNum!==a||c.index!==i}(r,x,d,b),_&&function(e,t,n,i){const r={},s=t.attributes;let a=0;const o=n.getAttributes();for(const l in o){if(o[l].location>=0){let t=s[l];void 0===t&&("instanceMatrix"===l&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===l&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),r[l]=n,a++}}c.attributes=r,c.attributesNum=a,c.index=i}(r,x,d,b)}else{const e=!0===l.wireframe;c.geometry===x.id&&c.program===d.id&&c.wireframe===e||(c.geometry=x.id,c.program=d.id,c.wireframe=e,_=!0)}null!==b&&n.update(b,34963),(_||u)&&(u=!1,function(r,s,a,o){if(!1===i.isWebGL2&&(r.isInstancedMesh||o.isInstancedBufferGeometry)&&null===t.get("ANGLE_instanced_arrays"))return;p();const l=o.attributes,c=a.getAttributes(),u=s.defaultAttributeValues;for(const t in c){const i=c[t];if(i.location>=0){let s=l[t];if(void 0===s&&("instanceMatrix"===t&&r.instanceMatrix&&(s=r.instanceMatrix),"instanceColor"===t&&r.instanceColor&&(s=r.instanceColor)),void 0!==s){const t=s.normalized,a=s.itemSize,l=n.get(s);if(void 0===l)continue;const c=l.buffer,u=l.type,h=l.bytesPerElement;if(s.isInterleavedBufferAttribute){const n=s.data,l=n.stride,d=s.offset;if(n.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)g(i.location+e,n.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=n.meshPerAttribute*n.count)}else for(let e=0;e<i.locationSize;e++)m(i.location+e);e.bindBuffer(34962,c);for(let e=0;e<i.locationSize;e++)y(i.location+e,a/i.locationSize,u,t,l*h,(d+a/i.locationSize*e)*h)}else{if(s.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)g(i.location+e,s.meshPerAttribute);!0!==r.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=s.meshPerAttribute*s.count)}else for(let e=0;e<i.locationSize;e++)m(i.location+e);e.bindBuffer(34962,c);for(let e=0;e<i.locationSize;e++)y(i.location+e,a/i.locationSize,u,t,a*h,a/i.locationSize*e*h)}}else if(void 0!==u){const n=u[t];if(void 0!==n)switch(n.length){case 2:e.vertexAttrib2fv(i.location,n);break;case 3:e.vertexAttrib3fv(i.location,n);break;case 4:e.vertexAttrib4fv(i.location,n);break;default:e.vertexAttrib1fv(i.location,n)}}}}v()}(r,l,d,x),null!==b&&e.bindBuffer(34963,n.get(b).buffer))},reset:x,resetDefaultState:b,dispose:function(){x();for(const e in o){const t=o[e];for(const e in t){const n=t[e];for(const e in n)d(n[e].object),delete n[e];delete t[e]}delete o[e]}},releaseStatesOfGeometry:function(e){if(void 0===o[e.id])return;const t=o[e.id];for(const n in t){const e=t[n];for(const t in e)d(e[t].object),delete e[t];delete t[n]}delete o[e.id]},releaseStatesOfProgram:function(e){for(const t in o){const n=o[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)d(i[e].object),delete i[e];delete n[e.id]}},initAttributes:p,enableAttribute:m,disableUnusedAttributes:v}}function Sk(e,t,n,i){const r=i.isWebGL2;let s;this.setMode=function(e){s=e},this.render=function(t,i){e.drawArrays(s,t,i),n.update(i,s,1)},this.renderInstances=function(i,a,o){if(0===o)return;let l,c;if(r)l=e,c="drawArraysInstanced";else if(l=t.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](s,i,a,o),n.update(a,s,o)}}function Mk(e,t,n){let i;function r(t){if("highp"===t){if(e.getShaderPrecisionFormat(35633,36338).precision>0&&e.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(35633,36337).precision>0&&e.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const s="undefined"!==typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext;let a=void 0!==n.precision?n.precision:"highp";const o=r(a);o!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",o,"instead."),a=o);const l=s||t.has("WEBGL_draw_buffers"),c=!0===n.logarithmicDepthBuffer,u=e.getParameter(34930),h=e.getParameter(35660),d=e.getParameter(3379),f=e.getParameter(34076),p=e.getParameter(34921),m=e.getParameter(36347),g=e.getParameter(36348),v=e.getParameter(36349),y=h>0,x=s||t.has("OES_texture_float");return{isWebGL2:s,drawBuffers:l,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:r,precision:a,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:f,maxAttributes:p,maxVertexUniforms:m,maxVaryings:g,maxFragmentUniforms:v,vertexTextures:y,floatFragmentTextures:x,floatVertexTextures:y&&x,maxSamples:s?e.getParameter(36183):0}}function Ck(e){const t=this;let n=null,i=0,r=!1,s=!1;const a=new uk,o=new gE,l={value:null,needsUpdate:!1};function c(e,n,i,r){const s=null!==e?e.length:0;let c=null;if(0!==s){if(c=l.value,!0!==r||null===c){const t=i+4*s,r=n.matrixWorldInverse;o.getNormalMatrix(r),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=i;n!==s;++n,l+=4)a.copy(e[n]).applyMatrix4(r,o),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==i||r;return r=t,i=e.length,n},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,o,u){const h=a.clippingPlanes,d=a.clipIntersection,f=a.clipShadows,p=e.get(a);if(!r||null===h||0===h.length||s&&!f)s?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=i>0);t.numPlanes=i,t.numIntersection=0}();else{const e=s?0:i,t=4*e;let r=p.clippingState||null;l.value=r,r=c(h,o,t,u);for(let i=0;i!==t;++i)r[i]=n[i];p.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Ek(e){let t=new WeakMap;function n(e,t){return t===US?e.mapping=BS:t===HS&&(e.mapping=VS),e}function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture&&!1===r.isRenderTargetTexture){const s=r.mapping;if(s===US||s===HS){if(t.has(r)){return n(t.get(r).texture,r.mapping)}{const s=r.image;if(s&&s.height>0){const a=new ak(s.height/2);return a.fromEquirectangularTexture(e,r),t.set(r,a),r.addEventListener("dispose",i),n(a.texture,r.mapping)}return null}}}return r},dispose:function(){t=new WeakMap}}}class Tk extends tk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=i,this.near=r,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,i,r,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-e,s=n+e,a=i+t,o=i-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=e*this.view.offsetX,s=r+e*this.view.width,a-=t*this.view.offsetY,o=a-t*this.view.height}this.projectionMatrix.makeOrthographic(r,s,a,o,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Ak=[.125,.215,.35,.446,.526,.582],kk=20,Pk=new Tk,Lk=new cA;let Dk=null;const Rk=(1+Math.sqrt(5))/2,Nk=1/Rk,Ik=[new SE(1,1,1),new SE(-1,1,1),new SE(1,1,-1),new SE(-1,1,-1),new SE(0,Rk,Nk),new SE(0,Rk,-Nk),new SE(Nk,0,Rk),new SE(-Nk,0,Rk),new SE(Rk,Nk,0),new SE(-Rk,Nk,0)];class Ok{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Dk=this._renderer.getRenderTarget(),this._setSize(256);const r=this._allocateTargets();return r.depthBuffer=!0,this._sceneToCubeUV(e,n,i,r),t>0&&this._blur(r,0,0,t),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Bk(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=jk(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Dk),e.scissorTest=!1,Fk(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===BS||e.mapping===VS?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Dk=this._renderer.getRenderTarget();const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:$S,minFilter:$S,generateMipmaps:!1,type:hM,format:gM,encoding:gC,depthBuffer:!1},i=zk(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=zk(e,t,n);const{_lodMax:i}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],i=[];let r=e;const s=e-4+1+Ak.length;for(let a=0;a<s;a++){const s=Math.pow(2,r);n.push(s);let o=1/s;a>e-4?o=Ak[a-e+4-1]:0===a&&(o=0),i.push(o);const l=1/(s-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*d),y=new Float32Array(m*f*d),x=new Float32Array(g*f*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,i=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(i,p*f*e),y.set(h,m*f*e);const r=[e,e,e,e,e,e];x.set(r,g*f*e)}const b=new DA;b.setAttribute("position",new pA(v,p)),b.setAttribute("uv",new pA(y,m)),b.setAttribute("faceIndex",new pA(x,g)),t.push(b),r>4&&r--}return{lodPlanes:t,sizeLods:n,sigmas:i}}(i)),this._blurMaterial=function(e,t,n){const i=new Float32Array(kk),r=new SE(0,1,0),s=new ek({name:"SphericalGaussianBlur",defines:{n:kk,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:"".concat(e,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:eS,depthTest:!1,depthWrite:!1});return s}(i,e,t)}return i}_compileMaterial(e){const t=new XA(this._lodPlanes[0],e);this._renderer.compile(t,Pk)}_sceneToCubeUV(e,t,n,i){const r=new nk(90,1,t,n),s=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],o=this._renderer,l=o.autoClear,c=o.toneMapping;o.getClearColor(Lk),o.toneMapping=RS,o.autoClear=!1;const u=new hA({name:"PMREM.Background",side:Qw,depthWrite:!1,depthTest:!1}),h=new XA(new KA,u);let d=!1;const f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,d=!0):(u.color.copy(Lk),d=!0);for(let p=0;p<6;p++){const t=p%3;0===t?(r.up.set(0,s[p],0),r.lookAt(a[p],0,0)):1===t?(r.up.set(0,0,s[p]),r.lookAt(0,a[p],0)):(r.up.set(0,s[p],0),r.lookAt(0,0,a[p]));const n=this._cubeSize;Fk(i,t*n,p>2?n:0,n,n),o.setRenderTarget(i),d&&o.render(h,r),o.render(e,r)}h.geometry.dispose(),h.material.dispose(),o.toneMapping=c,o.autoClear=l,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,i=e.mapping===BS||e.mapping===VS;i?(null===this._cubemapMaterial&&(this._cubemapMaterial=Bk()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=jk());const r=i?this._cubemapMaterial:this._equirectMaterial,s=new XA(this._lodPlanes[0],r);r.uniforms.envMap.value=e;const a=this._cubeSize;Fk(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(s,Pk)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;for(let i=1;i<this._lodPlanes.length;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=Ik[(i-1)%Ik.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,i,r){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,i,"latitudinal",r),this._halfBlur(s,e,n,n,i,"longitudinal",r)}_halfBlur(e,t,n,i,r,s,a){const o=this._renderer,l=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new XA(this._lodPlanes[i],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(r)?Math.PI/(2*h):2*Math.PI/39,f=r/d,p=isFinite(r)?1+Math.floor(3*f):kk;p>kk&&console.warn("sigmaRadians, ".concat(r,", is too large and will clip, as it requested ").concat(p," samples when the maximum is set to ").concat(kk));const m=[];let g=0;for(let x=0;x<kk;++x){const e=x/f,t=Math.exp(-e*e/2);m.push(t),0===x?g+=t:x<p&&(g+=2*t)}for(let x=0;x<m.length;x++)m[x]=m[x]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===s,a&&(u.poleAxis.value=a);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-n;const y=this._sizeLods[i];Fk(t,3*y*(i>v-4?i-v+4:0),4*(this._cubeSize-y),3*y,2*y),o.setRenderTarget(t),o.render(c,Pk)}}function zk(e,t,n){const i=new VE(e,t,n);return i.texture.mapping=WS,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Fk(e,t,n,i,r){e.viewport.set(t,n,i,r),e.scissor.set(t,n,i,r)}function jk(){return new ek({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:eS,depthTest:!1,depthWrite:!1})}function Bk(){return new ek({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:eS,depthTest:!1,depthWrite:!1})}function Vk(e){let t=new WeakMap,n=null;function i(e){const n=e.target;n.removeEventListener("dispose",i);const r=t.get(n);void 0!==r&&(t.delete(n),r.dispose())}return{get:function(r){if(r&&r.isTexture){const s=r.mapping,a=s===US||s===HS,o=s===BS||s===VS;if(a||o){if(r.isRenderTargetTexture&&!0===r.needsPMREMUpdate){r.needsPMREMUpdate=!1;let i=t.get(r);return null===n&&(n=new Ok(e)),i=a?n.fromEquirectangular(r,i):n.fromCubemap(r,i),t.set(r,i),i.texture}if(t.has(r))return t.get(r).texture;{const s=r.image;if(a&&s&&s.height>0||o&&s&&function(e){let t=0;const n=6;for(let i=0;i<n;i++)void 0!==e[i]&&t++;return t===n}(s)){null===n&&(n=new Ok(e));const s=a?n.fromEquirectangular(r):n.fromCubemap(r);return t.set(r,s),r.addEventListener("dispose",i),s.texture}return null}}}return r},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Uk(e){const t={};function n(n){if(void 0!==t[n])return t[n];let i;switch(n){case"WEBGL_depth_texture":i=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=e.getExtension(n)}return t[n]=i,i}return{has:function(e){return null!==n(e)},init:function(e){e.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture")},get:function(e){const t=n(e);return null===t&&console.warn("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Hk(e,t,n,i){const r={},s=new WeakMap;function a(e){const o=e.target;null!==o.index&&t.remove(o.index);for(const n in o.attributes)t.remove(o.attributes[n]);o.removeEventListener("dispose",a),delete r[o.id];const l=s.get(o);l&&(t.remove(l),s.delete(o)),i.releaseStatesOfGeometry(o),!0===o.isInstancedBufferGeometry&&delete o._maxInstanceCount,n.memory.geometries--}function o(e){const n=[],i=e.index,r=e.attributes.position;let a=0;if(null!==i){const e=i.array;a=i.version;for(let t=0,i=e.length;t<i;t+=3){const i=e[t+0],r=e[t+1],s=e[t+2];n.push(i,r,r,s,s,i)}}else{const e=r.array;a=r.version;for(let t=0,i=e.length/3-1;t<i;t+=3){const e=t+0,i=t+1,r=t+2;n.push(e,i,i,r,r,e)}}const o=new(yE(n)?_A:xA)(n,1);o.version=a;const l=s.get(e);l&&t.remove(l),s.set(e,o)}return{get:function(e,t){return!0===r[t.id]||(t.addEventListener("dispose",a),r[t.id]=!0,n.memory.geometries++),t},update:function(e){const n=e.attributes;for(const r in n)t.update(n[r],34962);const i=e.morphAttributes;for(const r in i){const e=i[r];for(let n=0,i=e.length;n<i;n++)t.update(e[n],34962)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&o(e)}else o(e);return s.get(e)}}}function Wk(e,t,n,i){const r=i.isWebGL2;let s,a,o;this.setMode=function(e){s=e},this.setIndex=function(e){a=e.type,o=e.bytesPerElement},this.render=function(t,i){e.drawElements(s,i,a,t*o),n.update(i,s,1)},this.renderInstances=function(i,l,c){if(0===c)return;let u,h;if(r)u=e,h="drawElementsInstanced";else if(u=t.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](s,l,a,i*o,c),n.update(l,s,c)}}function Gk(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(e,n,i){switch(t.calls++,n){case 4:t.triangles+=i*(e/3);break;case 1:t.lines+=i*(e/2);break;case 3:t.lines+=i*(e-1);break;case 2:t.lines+=i*e;break;case 0:t.points+=i*e;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function qk(e,t){return e[0]-t[0]}function Xk(e,t){return Math.abs(t[1])-Math.abs(e[1])}function Yk(e,t,n){const i={},r=new Float32Array(8),s=new WeakMap,a=new BE,o=[];for(let l=0;l<8;l++)o[l]=[l,0];return{update:function(l,c,u){const h=l.morphTargetInfluences;if(!0===t.isWebGL2){const d=c.morphAttributes.position||c.morphAttributes.normal||c.morphAttributes.color,f=void 0!==d?d.length:0;let p=s.get(c);if(void 0===p||p.count!==f){void 0!==p&&p.texture.dispose();const v=void 0!==c.morphAttributes.position,y=void 0!==c.morphAttributes.normal,x=void 0!==c.morphAttributes.color,b=c.morphAttributes.position||[],_=c.morphAttributes.normal||[],w=c.morphAttributes.color||[];let S=0;!0===v&&(S=1),!0===y&&(S=2),!0===x&&(S=3);let M=c.attributes.position.count*S,C=1;M>t.maxTextureSize&&(C=Math.ceil(M/t.maxTextureSize),M=t.maxTextureSize);const E=new Float32Array(M*C*4*f),T=new UE(E,M,C,f);T.type=uM,T.needsUpdate=!0;const A=4*S;for(let P=0;P<f;P++){const L=b[P],D=_[P],R=w[P],N=M*C*4*P;for(let I=0;I<L.count;I++){const O=I*A;!0===v&&(a.fromBufferAttribute(L,I),E[N+O+0]=a.x,E[N+O+1]=a.y,E[N+O+2]=a.z,E[N+O+3]=0),!0===y&&(a.fromBufferAttribute(D,I),E[N+O+4]=a.x,E[N+O+5]=a.y,E[N+O+6]=a.z,E[N+O+7]=0),!0===x&&(a.fromBufferAttribute(R,I),E[N+O+8]=a.x,E[N+O+9]=a.y,E[N+O+10]=a.z,E[N+O+11]=4===R.itemSize?a.w:1)}}function k(){T.dispose(),s.delete(c),c.removeEventListener("dispose",k)}p={count:f,texture:T,size:new mE(M,C)},s.set(c,p),c.addEventListener("dispose",k)}let m=0;for(let z=0;z<h.length;z++)m+=h[z];const g=c.morphTargetsRelative?1:1-m;u.getUniforms().setValue(e,"morphTargetBaseInfluence",g),u.getUniforms().setValue(e,"morphTargetInfluences",h),u.getUniforms().setValue(e,"morphTargetsTexture",p.texture,n),u.getUniforms().setValue(e,"morphTargetsTextureSize",p.size)}else{const F=void 0===h?0:h.length;let j=i[c.id];if(void 0===j||j.length!==F){j=[];for(let W=0;W<F;W++)j[W]=[W,0];i[c.id]=j}for(let G=0;G<F;G++){const q=j[G];q[0]=G,q[1]=h[G]}j.sort(Xk);for(let X=0;X<8;X++)X<F&&j[X][1]?(o[X][0]=j[X][0],o[X][1]=j[X][1]):(o[X][0]=Number.MAX_SAFE_INTEGER,o[X][1]=0);o.sort(qk);const B=c.morphAttributes.position,V=c.morphAttributes.normal;let U=0;for(let Y=0;Y<8;Y++){const K=o[Y],Z=K[0],Q=K[1];Z!==Number.MAX_SAFE_INTEGER&&Q?(B&&c.getAttribute("morphTarget"+Y)!==B[Z]&&c.setAttribute("morphTarget"+Y,B[Z]),V&&c.getAttribute("morphNormal"+Y)!==V[Z]&&c.setAttribute("morphNormal"+Y,V[Z]),r[Y]=Q,U+=Q):(B&&!0===c.hasAttribute("morphTarget"+Y)&&c.deleteAttribute("morphTarget"+Y),V&&!0===c.hasAttribute("morphNormal"+Y)&&c.deleteAttribute("morphNormal"+Y),r[Y]=0)}const H=c.morphTargetsRelative?1:1-U;u.getUniforms().setValue(e,"morphTargetBaseInfluence",H),u.getUniforms().setValue(e,"morphTargetInfluences",r)}}}}function Kk(e,t,n,i){let r=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(e){const a=i.render.frame,o=e.geometry,l=t.get(e,o);return r.get(l)!==a&&(t.update(l),r.set(l,a)),e.isInstancedMesh&&(!1===e.hasEventListener("dispose",s)&&e.addEventListener("dispose",s),n.update(e.instanceMatrix,34962),null!==e.instanceColor&&n.update(e.instanceColor,34962)),l},dispose:function(){r=new WeakMap}}}const Zk=new jE,Qk=new UE,Jk=new WE,$k=new sk,eP=[],tP=[],nP=new Float32Array(16),iP=new Float32Array(9),rP=new Float32Array(4);function sP(e,t,n){const i=e[0];if(i<=0||i>0)return e;const r=t*n;let s=eP[r];if(void 0===s&&(s=new Float32Array(r),eP[r]=s),0!==t){i.toArray(s,0);for(let i=1,r=0;i!==t;++i)r+=n,e[i].toArray(s,r)}return s}function aP(e,t){if(e.length!==t.length)return!1;for(let n=0,i=e.length;n<i;n++)if(e[n]!==t[n])return!1;return!0}function oP(e,t){for(let n=0,i=t.length;n<i;n++)e[n]=t[n]}function lP(e,t){let n=tP[t];void 0===n&&(n=new Int32Array(t),tP[t]=n);for(let i=0;i!==t;++i)n[i]=e.allocateTextureUnit();return n}function cP(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function uP(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(aP(n,t))return;e.uniform2fv(this.addr,t),oP(n,t)}}function hP(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(aP(n,t))return;e.uniform3fv(this.addr,t),oP(n,t)}}function dP(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(aP(n,t))return;e.uniform4fv(this.addr,t),oP(n,t)}}function fP(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(aP(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),oP(n,t)}else{if(aP(n,i))return;rP.set(i),e.uniformMatrix2fv(this.addr,!1,rP),oP(n,i)}}function pP(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(aP(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),oP(n,t)}else{if(aP(n,i))return;iP.set(i),e.uniformMatrix3fv(this.addr,!1,iP),oP(n,i)}}function mP(e,t){const n=this.cache,i=t.elements;if(void 0===i){if(aP(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),oP(n,t)}else{if(aP(n,i))return;nP.set(i),e.uniformMatrix4fv(this.addr,!1,nP),oP(n,i)}}function gP(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function vP(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(aP(n,t))return;e.uniform2iv(this.addr,t),oP(n,t)}}function yP(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(aP(n,t))return;e.uniform3iv(this.addr,t),oP(n,t)}}function xP(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(aP(n,t))return;e.uniform4iv(this.addr,t),oP(n,t)}}function bP(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function _P(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(aP(n,t))return;e.uniform2uiv(this.addr,t),oP(n,t)}}function wP(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(aP(n,t))return;e.uniform3uiv(this.addr,t),oP(n,t)}}function SP(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(aP(n,t))return;e.uniform4uiv(this.addr,t),oP(n,t)}}function MP(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2D(t||Zk,r)}function CP(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(t||Jk,r)}function EP(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(t||$k,r)}function TP(e,t,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(e.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(t||Qk,r)}function AP(e,t){e.uniform1fv(this.addr,t)}function kP(e,t){const n=sP(t,this.size,2);e.uniform2fv(this.addr,n)}function PP(e,t){const n=sP(t,this.size,3);e.uniform3fv(this.addr,n)}function LP(e,t){const n=sP(t,this.size,4);e.uniform4fv(this.addr,n)}function DP(e,t){const n=sP(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function RP(e,t){const n=sP(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function NP(e,t){const n=sP(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function IP(e,t){e.uniform1iv(this.addr,t)}function OP(e,t){e.uniform2iv(this.addr,t)}function zP(e,t){e.uniform3iv(this.addr,t)}function FP(e,t){e.uniform4iv(this.addr,t)}function jP(e,t){e.uniform1uiv(this.addr,t)}function BP(e,t){e.uniform2uiv(this.addr,t)}function VP(e,t){e.uniform3uiv(this.addr,t)}function UP(e,t){e.uniform4uiv(this.addr,t)}function HP(e,t,n){const i=this.cache,r=t.length,s=lP(n,r);aP(i,s)||(e.uniform1iv(this.addr,s),oP(i,s));for(let a=0;a!==r;++a)n.setTexture2D(t[a]||Zk,s[a])}function WP(e,t,n){const i=this.cache,r=t.length,s=lP(n,r);aP(i,s)||(e.uniform1iv(this.addr,s),oP(i,s));for(let a=0;a!==r;++a)n.setTexture3D(t[a]||Jk,s[a])}function GP(e,t,n){const i=this.cache,r=t.length,s=lP(n,r);aP(i,s)||(e.uniform1iv(this.addr,s),oP(i,s));for(let a=0;a!==r;++a)n.setTextureCube(t[a]||$k,s[a])}function qP(e,t,n){const i=this.cache,r=t.length,s=lP(n,r);aP(i,s)||(e.uniform1iv(this.addr,s),oP(i,s));for(let a=0;a!==r;++a)n.setTexture2DArray(t[a]||Qk,s[a])}class XP{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.setValue=function(e){switch(e){case 5126:return cP;case 35664:return uP;case 35665:return hP;case 35666:return dP;case 35674:return fP;case 35675:return pP;case 35676:return mP;case 5124:case 35670:return gP;case 35667:case 35671:return vP;case 35668:case 35672:return yP;case 35669:case 35673:return xP;case 5125:return bP;case 36294:return _P;case 36295:return wP;case 36296:return SP;case 35678:case 36198:case 36298:case 36306:case 35682:return MP;case 35679:case 36299:case 36307:return CP;case 35680:case 36300:case 36308:case 36293:return EP;case 36289:case 36303:case 36311:case 36292:return TP}}(t.type)}}class YP{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.size=t.size,this.setValue=function(e){switch(e){case 5126:return AP;case 35664:return kP;case 35665:return PP;case 35666:return LP;case 35674:return DP;case 35675:return RP;case 35676:return NP;case 5124:case 35670:return IP;case 35667:case 35671:return OP;case 35668:case 35672:return zP;case 35669:case 35673:return FP;case 5125:return jP;case 36294:return BP;case 36295:return VP;case 36296:return UP;case 35678:case 36198:case 36298:case 36306:case 35682:return HP;case 35679:case 36299:case 36307:return WP;case 35680:case 36300:case 36308:case 36293:return GP;case 36289:case 36303:case 36311:case 36292:return qP}}(t.type)}}class KP{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const i=this.seq;for(let r=0,s=i.length;r!==s;++r){const s=i[r];s.setValue(e,t[s.id],n)}}}const ZP=/(\w+)(\])?(\[|\.)?/g;function QP(e,t){e.seq.push(t),e.map[t.id]=t}function JP(e,t,n){const i=e.name,r=i.length;for(ZP.lastIndex=0;;){const s=ZP.exec(i),a=ZP.lastIndex;let o=s[1];const l="]"===s[2],c=s[3];if(l&&(o|=0),void 0===c||"["===c&&a+2===r){QP(n,void 0===c?new XP(o,e,t):new YP(o,e,t));break}{let e=n.map[o];void 0===e&&(e=new KP(o),QP(n,e)),n=e}}}class $P{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,35718);for(let i=0;i<n;++i){const n=e.getActiveUniform(t,i);JP(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,i){const r=this.map[t];void 0!==r&&r.setValue(e,n,i)}setOptional(e,t,n){const i=t[n];void 0!==i&&this.setValue(e,n,i)}static upload(e,t,n,i){for(let r=0,s=t.length;r!==s;++r){const s=t[r],a=n[s.id];!1!==a.needsUpdate&&s.setValue(e,a.value,i)}}static seqWithValue(e,t){const n=[];for(let i=0,r=e.length;i!==r;++i){const r=e[i];r.id in t&&n.push(r)}return n}}function eL(e,t,n){const i=e.createShader(t);return e.shaderSource(i,n),e.compileShader(i),i}let tL=0;function nL(e,t,n){const i=e.getShaderParameter(t,35713),r=e.getShaderInfoLog(t).trim();if(i&&""===r)return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const i=parseInt(s[1]);return n.toUpperCase()+"\n\n"+r+"\n\n"+function(e,t){const n=e.split("\n"),i=[],r=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let a=r;a<s;a++){const e=a+1;i.push("".concat(e===t?">":" "," ").concat(e,": ").concat(n[a]))}return i.join("\n")}(e.getShaderSource(t),i)}return r}function iL(e,t){const n=function(e){switch(e){case gC:return["Linear","( value )"];case vC:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",e),["Linear","( value )"]}}(t);return"vec4 "+e+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function rL(e,t){let n;switch(t){case NS:n="Linear";break;case IS:n="Reinhard";break;case OS:n="OptimizedCineon";break;case zS:n="ACESFilmic";break;case FS:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function sL(e){return""!==e}function aL(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function oL(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const lL=/^[ \t]*#include +<([\w\d./]+)>/gm;function cL(e){return e.replace(lL,uL)}function uL(e,t){const n=vk[t];if(void 0===n)throw new Error("Can not resolve #include <"+t+">");return cL(n)}const hL=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function dL(e){return e.replace(hL,fL)}function fL(e,t,n,i){let r="";for(let s=parseInt(t);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function pL(e){let t="precision "+e.precision+" float;\nprecision "+e.precision+" int;";return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function mL(e,t,n,i){const r=e.getContext(),s=n.defines;let a=n.vertexShader,o=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===Xw?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===Yw?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Kw&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case BS:case VS:t="ENVMAP_TYPE_CUBE";break;case WS:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===VS&&(t="ENVMAP_MODE_REFRACTION");return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case PS:t="ENVMAP_BLENDING_MULTIPLY";break;case LS:t="ENVMAP_BLENDING_MIX";break;case DS:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,i=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:i,maxMip:n}}(n),f=n.isWebGL2?"":function(e){return[e.extensionDerivatives||e.envMapCubeUVHeight||e.bumpMap||e.tangentSpaceNormalMap||e.clearcoatNormalMap||e.flatShading||"physical"===e.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(e.extensionFragDepth||e.logarithmicDepthBuffer)&&e.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",e.extensionDrawBuffers&&e.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(e.extensionShaderTextureLOD||e.envMap||e.transmission)&&e.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(sL).join("\n")}(n),p=function(e){const t=[];for(const n in e){const i=e[n];!1!==i&&t.push("#define "+n+" "+i)}return t.join("\n")}(s),m=r.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=[p].filter(sL).join("\n"),g.length>0&&(g+="\n"),v=[f,p].filter(sL).join("\n"),v.length>0&&(v+="\n")):(g=[pL(n),"#define SHADER_NAME "+n.shaderName,p,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors&&n.isWebGL2?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0&&n.isWebGL2?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(sL).join("\n"),v=[f,pL(n),"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",n.specularColorMap?"#define USE_SPECULARCOLORMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEENCOLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.useLegacyLights?"#define LEGACY_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==RS?"#define TONE_MAPPING":"",n.toneMapping!==RS?vk.tonemapping_pars_fragment:"",n.toneMapping!==RS?rL("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",vk.encodings_pars_fragment,iL("linearToOutputTexel",n.outputEncoding),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(sL).join("\n")),a=cL(a),a=aL(a,n),a=oL(a,n),o=cL(o),o=aL(o,n),o=oL(o,n),a=dL(a),o=dL(o),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===JC?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===JC?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const x=y+v+o,b=eL(r,35633,y+g+a),_=eL(r,35632,x);if(r.attachShader(m,b),r.attachShader(m,_),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),e.debug.checkShaderErrors){const e=r.getProgramInfoLog(m).trim(),t=r.getShaderInfoLog(b).trim(),n=r.getShaderInfoLog(_).trim();let i=!0,s=!0;if(!1===r.getProgramParameter(m,35714)){i=!1;const t=nL(r,b,"vertex"),n=nL(r,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(m,35715)+"\n\nProgram Info Log: "+e+"\n"+t+"\n"+n)}else""!==e?console.warn("THREE.WebGLProgram: Program Info Log:",e):""!==t&&""!==n||(s=!1);s&&(this.diagnostics={runnable:i,programLog:e,vertexShader:{log:t,prefix:g},fragmentShader:{log:n,prefix:v}})}let w,S;return r.deleteShader(b),r.deleteShader(_),this.getUniforms=function(){return void 0===w&&(w=new $P(r,m)),w},this.getAttributes=function(){return void 0===S&&(S=function(e,t){const n={},i=e.getProgramParameter(t,35721);for(let r=0;r<i;r++){const i=e.getActiveAttrib(t,r),s=i.name;let a=1;35674===i.type&&(a=2),35675===i.type&&(a=3),35676===i.type&&(a=4),n[s]={type:i.type,location:e.getAttribLocation(t,s),locationSize:a}}return n}(r,m)),S},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=tL++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=b,this.fragmentShader=_,this}let gL=0;class vL{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,i=this._getShaderStage(t),r=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(i)&&(s.add(i),i.usedTimes++),!1===s.has(r)&&(s.add(r),r.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new yL(e),t.set(e,n)),n}}class yL{constructor(e){this.id=gL++,this.code=e,this.usedTimes=0}}function xL(e,t,n,i,r,s,a){const o=new LT,l=new vL,c=[],u=r.isWebGL2,h=r.logarithmicDepthBuffer,d=r.vertexTextures;let f=r.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function(s,o,c,m,g){const v=m.fog,y=g.geometry,x=s.isMeshStandardMaterial?m.environment:null,b=(s.isMeshStandardMaterial?n:t).get(s.envMap||x),_=b&&b.mapping===WS?b.image.height:null,w=p[s.type];null!==s.precision&&(f=r.getMaxPrecision(s.precision),f!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",f,"instead."));const S=y.morphAttributes.position||y.morphAttributes.normal||y.morphAttributes.color,M=void 0!==S?S.length:0;let C,E,T,A,k=0;if(void 0!==y.morphAttributes.position&&(k=1),void 0!==y.morphAttributes.normal&&(k=2),void 0!==y.morphAttributes.color&&(k=3),w){const e=xk[w];C=e.vertexShader,E=e.fragmentShader}else C=s.vertexShader,E=s.fragmentShader,l.update(s),T=l.getVertexShaderID(s),A=l.getFragmentShaderID(s);const P=e.getRenderTarget(),L=s.alphaTest>0,D=s.clearcoat>0,R=s.iridescence>0;return{isWebGL2:u,shaderID:w,shaderName:s.type,vertexShader:C,fragmentShader:E,defines:s.defines,customVertexShaderID:T,customFragmentShaderID:A,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:f,instancing:!0===g.isInstancedMesh,instancingColor:!0===g.isInstancedMesh&&null!==g.instanceColor,supportsVertexTextures:d,outputEncoding:null===P?e.outputEncoding:!0===P.isXRRenderTarget?P.texture.encoding:gC,map:!!s.map,matcap:!!s.matcap,envMap:!!b,envMapMode:b&&b.mapping,envMapCubeUVHeight:_,lightMap:!!s.lightMap,aoMap:!!s.aoMap,emissiveMap:!!s.emissiveMap,bumpMap:!!s.bumpMap,normalMap:!!s.normalMap,objectSpaceNormalMap:s.normalMapType===_C,tangentSpaceNormalMap:s.normalMapType===bC,decodeVideoTexture:!!s.map&&!0===s.map.isVideoTexture&&s.map.encoding===vC,clearcoat:D,clearcoatMap:D&&!!s.clearcoatMap,clearcoatRoughnessMap:D&&!!s.clearcoatRoughnessMap,clearcoatNormalMap:D&&!!s.clearcoatNormalMap,iridescence:R,iridescenceMap:R&&!!s.iridescenceMap,iridescenceThicknessMap:R&&!!s.iridescenceThicknessMap,displacementMap:!!s.displacementMap,roughnessMap:!!s.roughnessMap,metalnessMap:!!s.metalnessMap,specularMap:!!s.specularMap,specularIntensityMap:!!s.specularIntensityMap,specularColorMap:!!s.specularColorMap,opaque:!1===s.transparent&&s.blending===tS,alphaMap:!!s.alphaMap,alphaTest:L,gradientMap:!!s.gradientMap,sheen:s.sheen>0,sheenColorMap:!!s.sheenColorMap,sheenRoughnessMap:!!s.sheenRoughnessMap,transmission:s.transmission>0,transmissionMap:!!s.transmissionMap,thicknessMap:!!s.thicknessMap,combine:s.combine,vertexTangents:!!s.normalMap&&!!y.attributes.tangent,vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!y.attributes.color&&4===y.attributes.color.itemSize,vertexUvs:!!s.map||!!s.bumpMap||!!s.normalMap||!!s.specularMap||!!s.alphaMap||!!s.emissiveMap||!!s.roughnessMap||!!s.metalnessMap||!!s.clearcoatMap||!!s.clearcoatRoughnessMap||!!s.clearcoatNormalMap||!!s.iridescenceMap||!!s.iridescenceThicknessMap||!!s.displacementMap||!!s.transmissionMap||!!s.thicknessMap||!!s.specularIntensityMap||!!s.specularColorMap||!!s.sheenColorMap||!!s.sheenRoughnessMap,uvsVertexOnly:!(s.map||s.bumpMap||s.normalMap||s.specularMap||s.alphaMap||s.emissiveMap||s.roughnessMap||s.metalnessMap||s.clearcoatNormalMap||s.iridescenceMap||s.iridescenceThicknessMap||s.transmission>0||s.transmissionMap||s.thicknessMap||s.specularIntensityMap||s.specularColorMap||s.sheen>0||s.sheenColorMap||s.sheenRoughnessMap)&&!!s.displacementMap,fog:!!v,useFog:!0===s.fog,fogExp2:v&&v.isFogExp2,flatShading:!!s.flatShading,sizeAttenuation:s.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===g.isSkinnedMesh,morphTargets:void 0!==y.morphAttributes.position,morphNormals:void 0!==y.morphAttributes.normal,morphColors:void 0!==y.morphAttributes.color,morphTargetsCount:M,morphTextureStride:k,numDirLights:o.directional.length,numPointLights:o.point.length,numSpotLights:o.spot.length,numSpotLightMaps:o.spotLightMap.length,numRectAreaLights:o.rectArea.length,numHemiLights:o.hemi.length,numDirLightShadows:o.directionalShadowMap.length,numPointLightShadows:o.pointShadowMap.length,numSpotLightShadows:o.spotShadowMap.length,numSpotLightShadowsWithMaps:o.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.length>0,shadowMapType:e.shadowMap.type,toneMapping:s.toneMapped?e.toneMapping:RS,useLegacyLights:e.useLegacyLights,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===Jw,flipSided:s.side===Qw,useDepthPacking:!!s.depthPacking,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionDerivatives:s.extensions&&s.extensions.derivatives,extensionFragDepth:s.extensions&&s.extensions.fragDepth,extensionDrawBuffers:s.extensions&&s.extensions.drawBuffers,extensionShaderTextureLOD:s.extensions&&s.extensions.shaderTextureLOD,rendererExtensionFragDepth:u||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:u||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:u||i.has("EXT_shader_texture_lod"),customProgramCacheKey:s.customProgramCacheKey()}},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputEncoding),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.combine),e.push(t.vertexUvs),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){o.disableAll(),t.isWebGL2&&o.enable(0);t.supportsVertexTextures&&o.enable(1);t.instancing&&o.enable(2);t.instancingColor&&o.enable(3);t.map&&o.enable(4);t.matcap&&o.enable(5);t.envMap&&o.enable(6);t.lightMap&&o.enable(7);t.aoMap&&o.enable(8);t.emissiveMap&&o.enable(9);t.bumpMap&&o.enable(10);t.normalMap&&o.enable(11);t.objectSpaceNormalMap&&o.enable(12);t.tangentSpaceNormalMap&&o.enable(13);t.clearcoat&&o.enable(14);t.clearcoatMap&&o.enable(15);t.clearcoatRoughnessMap&&o.enable(16);t.clearcoatNormalMap&&o.enable(17);t.iridescence&&o.enable(18);t.iridescenceMap&&o.enable(19);t.iridescenceThicknessMap&&o.enable(20);t.displacementMap&&o.enable(21);t.specularMap&&o.enable(22);t.roughnessMap&&o.enable(23);t.metalnessMap&&o.enable(24);t.gradientMap&&o.enable(25);t.alphaMap&&o.enable(26);t.alphaTest&&o.enable(27);t.vertexColors&&o.enable(28);t.vertexAlphas&&o.enable(29);t.vertexUvs&&o.enable(30);t.vertexTangents&&o.enable(31);t.uvsVertexOnly&&o.enable(32);e.push(o.mask),o.disableAll(),t.fog&&o.enable(0);t.useFog&&o.enable(1);t.flatShading&&o.enable(2);t.logarithmicDepthBuffer&&o.enable(3);t.skinning&&o.enable(4);t.morphTargets&&o.enable(5);t.morphNormals&&o.enable(6);t.morphColors&&o.enable(7);t.premultipliedAlpha&&o.enable(8);t.shadowMapEnabled&&o.enable(9);t.useLegacyLights&&o.enable(10);t.doubleSided&&o.enable(11);t.flipSided&&o.enable(12);t.useDepthPacking&&o.enable(13);t.dithering&&o.enable(14);t.specularIntensityMap&&o.enable(15);t.specularColorMap&&o.enable(16);t.transmission&&o.enable(17);t.transmissionMap&&o.enable(18);t.thicknessMap&&o.enable(19);t.sheen&&o.enable(20);t.sheenColorMap&&o.enable(21);t.sheenRoughnessMap&&o.enable(22);t.decodeVideoTexture&&o.enable(23);t.opaque&&o.enable(24);e.push(o.mask)}(n,t),n.push(e.outputEncoding)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=xk[t];n=$A.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let i;for(let e=0,r=c.length;e<r;e++){const t=c[e];if(t.cacheKey===n){i=t,++i.usedTimes;break}}return void 0===i&&(i=new mL(e,n,t,s),c.push(i)),i},releaseProgram:function(e){if(0===--e.usedTimes){const t=c.indexOf(e);c[t]=c[c.length-1],c.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:c,dispose:function(){l.dispose()}}}function bL(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,i){e.get(t)[n]=i},dispose:function(){e=new WeakMap}}}function _L(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function wL(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function SL(){const e=[];let t=0;const n=[],i=[],r=[];function s(n,i,r,s,a,o){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:i,material:r,groupOrder:s,renderOrder:n.renderOrder,z:a,group:o},e[t]=l):(l.id=n.id,l.object=n,l.geometry=i,l.material=r,l.groupOrder=s,l.renderOrder=n.renderOrder,l.z=a,l.group=o),t++,l}return{opaque:n,transmissive:i,transparent:r,init:function(){t=0,n.length=0,i.length=0,r.length=0},push:function(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?i.push(u):!0===a.transparent?r.push(u):n.push(u)},unshift:function(e,t,a,o,l,c){const u=s(e,t,a,o,l,c);a.transmission>0?i.unshift(u):!0===a.transparent?r.unshift(u):n.unshift(u)},finish:function(){for(let n=t,i=e.length;n<i;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||_L),i.length>1&&i.sort(t||wL),r.length>1&&r.sort(t||wL)}}}function ML(){let e=new WeakMap;return{get:function(t,n){const i=e.get(t);let r;return void 0===i?(r=new SL,e.set(t,[r])):n>=i.length?(r=new SL,i.push(r)):r=i[n],r},dispose:function(){e=new WeakMap}}}function CL(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new SE,color:new cA};break;case"SpotLight":n={position:new SE,direction:new SE,color:new cA,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new SE,color:new cA,distance:0,decay:0};break;case"HemisphereLight":n={direction:new SE,skyColor:new cA,groundColor:new cA};break;case"RectAreaLight":n={color:new cA,position:new SE,halfWidth:new SE,halfHeight:new SE}}return e[t.id]=n,n}}}let EL=0;function TL(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function AL(e,t){const n=new CL,i=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mE};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new mE,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let l=0;l<9;l++)r.probe.push(new SE);const s=new SE,a=new bT,o=new bT;return{setup:function(s,a){let o=0,l=0,c=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=0,y=0,x=0;s.sort(TL);const b=!0===a?Math.PI:1;for(let e=0,t=s.length;e<t;e++){const t=s[e],a=t.color,_=t.intensity,w=t.distance,S=t.shadow&&t.shadow.map?t.shadow.map.texture:null;if(t.isAmbientLight)o+=a.r*_*b,l+=a.g*_*b,c+=a.b*_*b;else if(t.isLightProbe)for(let e=0;e<9;e++)r.probe[e].addScaledVector(t.sh.coefficients[e],_);else if(t.isDirectionalLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,r.directionalShadow[u]=n,r.directionalShadowMap[u]=S,r.directionalShadowMatrix[u]=t.shadow.matrix,m++}r.directional[u]=e,u++}else if(t.isSpotLight){const e=n.get(t);e.position.setFromMatrixPosition(t.matrixWorld),e.color.copy(a).multiplyScalar(_*b),e.distance=w,e.coneCos=Math.cos(t.angle),e.penumbraCos=Math.cos(t.angle*(1-t.penumbra)),e.decay=t.decay,r.spot[d]=e;const s=t.shadow;if(t.map&&(r.spotLightMap[y]=t.map,y++,s.updateMatrices(t),t.castShadow&&x++),r.spotLightMatrix[d]=s.matrix,t.castShadow){const e=i.get(t);e.shadowBias=s.bias,e.shadowNormalBias=s.normalBias,e.shadowRadius=s.radius,e.shadowMapSize=s.mapSize,r.spotShadow[d]=e,r.spotShadowMap[d]=S,v++}d++}else if(t.isRectAreaLight){const e=n.get(t);e.color.copy(a).multiplyScalar(_),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),r.rectArea[f]=e,f++}else if(t.isPointLight){const e=n.get(t);if(e.color.copy(t.color).multiplyScalar(t.intensity*b),e.distance=t.distance,e.decay=t.decay,t.castShadow){const e=t.shadow,n=i.get(t);n.shadowBias=e.bias,n.shadowNormalBias=e.normalBias,n.shadowRadius=e.radius,n.shadowMapSize=e.mapSize,n.shadowCameraNear=e.camera.near,n.shadowCameraFar=e.camera.far,r.pointShadow[h]=n,r.pointShadowMap[h]=S,r.pointShadowMatrix[h]=t.shadow.matrix,g++}r.point[h]=e,h++}else if(t.isHemisphereLight){const e=n.get(t);e.skyColor.copy(t.color).multiplyScalar(_*b),e.groundColor.copy(t.groundColor).multiplyScalar(_*b),r.hemi[p]=e,p++}}f>0&&(t.isWebGL2||!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=yk.LTC_FLOAT_1,r.rectAreaLTC2=yk.LTC_FLOAT_2):!0===e.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=yk.LTC_HALF_1,r.rectAreaLTC2=yk.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=o,r.ambient[1]=l,r.ambient[2]=c;const _=r.hash;_.directionalLength===u&&_.pointLength===h&&_.spotLength===d&&_.rectAreaLength===f&&_.hemiLength===p&&_.numDirectionalShadows===m&&_.numPointShadows===g&&_.numSpotShadows===v&&_.numSpotMaps===y||(r.directional.length=u,r.spot.length=d,r.rectArea.length=f,r.point.length=h,r.hemi.length=p,r.directionalShadow.length=m,r.directionalShadowMap.length=m,r.pointShadow.length=g,r.pointShadowMap.length=g,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=m,r.pointShadowMatrix.length=g,r.spotLightMatrix.length=v+y-x,r.spotLightMap.length=y,r.numSpotLightShadowsWithMaps=x,_.directionalLength=u,_.pointLength=h,_.spotLength=d,_.rectAreaLength=f,_.hemiLength=p,_.numDirectionalShadows=m,_.numPointShadows=g,_.numSpotShadows=v,_.numSpotMaps=y,r.version=EL++)},setupView:function(e,t){let n=0,i=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let d=0,f=e.length;d<f;d++){const t=e[d];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),s.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(s),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),o.identity(),a.copy(t.matrixWorld),a.premultiply(h),o.extractRotation(a),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),c++}else if(t.isPointLight){const e=r.point[i];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),i++}else if(t.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),u++}}},state:r}}function kL(e,t){const n=new AL(e,t),i=[],r=[];return{init:function(){i.length=0,r.length=0},state:{lightsArray:i,shadowsArray:r,lights:n},setupLights:function(e){n.setup(i,e)},setupLightsView:function(e){n.setupView(i,e)},pushLight:function(e){i.push(e)},pushShadow:function(e){r.push(e)}}}function PL(e,t){let n=new WeakMap;return{get:function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=n.get(i);let a;return void 0===s?(a=new kL(e,t),n.set(i,[a])):r>=s.length?(a=new kL(e,t),s.push(a)):a=s[r],a},dispose:function(){n=new WeakMap}}}class LL extends rA{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=yC,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class DL extends rA{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new SE,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const RL="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",NL="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}";function IL(e,t,n){let i=new fk;const r=new mE,s=new mE,a=new BE,o=new LL({depthPacking:xC}),l=new DL,c={},u=n.maxTextureSize,h={[Zw]:Qw,[Qw]:Zw,[Jw]:Jw},d=new ek({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new mE},radius:{value:4}},vertexShader:RL,fragmentShader:NL}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new DA;p.setAttribute("position",new pA(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new XA(p,d),g=this;function v(n,i){const s=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new VE(r.x,r.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(i,null,s,d,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(i,null,s,f,m,null)}function y(t,n,i,r,s,a){let u=null;const d=!0===i.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==d)u=d;else if(u=!0===i.isPointLight?l:o,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=u.uuid,t=n.uuid;let i=c[e];void 0===i&&(i={},c[e]=i);let r=i[t];void 0===r&&(r=u.clone(),i[t]=r),u=r}return u.visible=n.visible,u.wireframe=n.wireframe,u.side=a===Kw?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],u.alphaMap=n.alphaMap,u.alphaTest=n.alphaTest,u.map=n.map,u.clipShadows=n.clipShadows,u.clippingPlanes=n.clippingPlanes,u.clipIntersection=n.clipIntersection,u.displacementMap=n.displacementMap,u.displacementScale=n.displacementScale,u.displacementBias=n.displacementBias,u.wireframeLinewidth=n.wireframeLinewidth,u.linewidth=n.linewidth,!0===i.isPointLight&&!0===u.isMeshDistanceMaterial&&(u.referencePosition.setFromMatrixPosition(i.matrixWorld),u.nearDistance=r,u.farDistance=s),u}function x(n,r,s,a,o){if(!1===n.visible)return;if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&o===Kw)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const i=t.update(n),r=n.material;if(Array.isArray(r)){const t=i.groups;for(let l=0,c=t.length;l<c;l++){const c=t[l],u=r[c.materialIndex];if(u&&u.visible){const t=y(n,u,a,s.near,s.far,o);e.renderBufferDirect(s,null,i,t,n,c)}}}else if(r.visible){const t=y(n,r,a,s.near,s.far,o);e.renderBufferDirect(s,null,i,t,n,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)x(l[e],r,s,a,o)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Xw,this.render=function(t,n,o){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(eS),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let f=0,p=t.length;f<p;f++){const l=t[f],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;r.copy(c.mapSize);const h=c.getFrameExtents();if(r.multiply(h),s.copy(c.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/h.x),r.x=s.x*h.x,c.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/h.y),r.y=s.y*h.y,c.mapSize.y=s.y)),null===c.map){const e=this.type!==Kw?{minFilter:YS,magFilter:YS}:{};c.map=new VE(r.x,r.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const p=c.getViewportCount();for(let e=0;e<p;e++){const t=c.getViewport(e);a.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),d.viewport(a),c.updateMatrices(l,e),i=c.getFrustum(),x(n,o,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===Kw&&v(c,o),c.needsUpdate=!1}g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}function OL(e,t,n){const i=n.isWebGL2;const r=new function(){let t=!1;const n=new BE;let i=null;const r=new BE(0,0,0,0);return{setMask:function(n){i===n||t||(e.colorMask(n,n,n,n),i=n)},setLocked:function(e){t=e},setClear:function(t,i,s,a,o){!0===o&&(t*=a,i*=a,s*=a),n.set(t,i,s,a),!1===r.equals(n)&&(e.clearColor(t,i,s,a),r.copy(n))},reset:function(){t=!1,i=null,r.set(-1,0,0,0)}}},s=new function(){let t=!1,n=null,i=null,r=null;return{setTest:function(e){e?B(2929):V(2929)},setMask:function(i){n===i||t||(e.depthMask(i),n=i)},setFunc:function(t){if(i!==t){switch(t){case wS:e.depthFunc(512);break;case SS:e.depthFunc(519);break;case MS:e.depthFunc(513);break;case CS:e.depthFunc(515);break;case ES:e.depthFunc(514);break;case TS:e.depthFunc(518);break;case AS:e.depthFunc(516);break;case kS:e.depthFunc(517);break;default:e.depthFunc(515)}i=t}},setLocked:function(e){t=e},setClear:function(t){r!==t&&(e.clearDepth(t),r=t)},reset:function(){t=!1,n=null,i=null,r=null}}},a=new function(){let t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null;return{setTest:function(e){t||(e?B(2960):V(2960))},setMask:function(i){n===i||t||(e.stencilMask(i),n=i)},setFunc:function(t,n,a){i===t&&r===n&&s===a||(e.stencilFunc(t,n,a),i=t,r=n,s=a)},setOp:function(t,n,i){a===t&&o===n&&l===i||(e.stencilOp(t,n,i),a=t,o=n,l=i)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,i=null,r=null,s=null,a=null,o=null,l=null,c=null}}},o=new WeakMap,l=new WeakMap;let c={},u={},h=new WeakMap,d=[],f=null,p=!1,m=null,g=null,v=null,y=null,x=null,b=null,_=null,w=!1,S=null,M=null,C=null,E=null,T=null;const A=e.getParameter(35661);let k=!1,P=0;const L=e.getParameter(7938);-1!==L.indexOf("WebGL")?(P=parseFloat(/^WebGL (\d)/.exec(L)[1]),k=P>=1):-1!==L.indexOf("OpenGL ES")&&(P=parseFloat(/^OpenGL ES (\d)/.exec(L)[1]),k=P>=2);let D=null,R={};const N=e.getParameter(3088),I=e.getParameter(2978),O=(new BE).fromArray(N),z=(new BE).fromArray(I);function F(t,n,i){const r=new Uint8Array(4),s=e.createTexture();e.bindTexture(t,s),e.texParameteri(t,10241,9728),e.texParameteri(t,10240,9728);for(let a=0;a<i;a++)e.texImage2D(n+a,0,6408,1,1,0,6408,5121,r);return s}const j={};function B(t){!0!==c[t]&&(e.enable(t),c[t]=!0)}function V(t){!1!==c[t]&&(e.disable(t),c[t]=!1)}j[3553]=F(3553,3553,1),j[34067]=F(34067,34069,6),r.setClear(0,0,0,1),s.setClear(1),a.setClear(0),B(2929),s.setFunc(CS),G(!1),q(Hw),B(2884),W(eS);const U={[aS]:32774,[oS]:32778,[lS]:32779};if(i)U[cS]=32775,U[uS]=32776;else{const e=t.get("EXT_blend_minmax");null!==e&&(U[cS]=e.MIN_EXT,U[uS]=e.MAX_EXT)}const H={[hS]:0,[dS]:1,[fS]:768,[mS]:770,[_S]:776,[xS]:774,[vS]:772,[pS]:769,[gS]:771,[bS]:775,[yS]:773};function W(t,n,i,r,s,a,o,l){if(t!==eS){if(!1===p&&(B(3042),p=!0),t===sS)s=s||n,a=a||i,o=o||r,n===g&&s===x||(e.blendEquationSeparate(U[n],U[s]),g=n,x=s),i===v&&r===y&&a===b&&o===_||(e.blendFuncSeparate(H[i],H[r],H[a],H[o]),v=i,y=r,b=a,_=o),m=t,w=!1;else if(t!==m||l!==w){if(g===aS&&x===aS||(e.blendEquation(32774),g=aS,x=aS),l)switch(t){case tS:e.blendFuncSeparate(1,771,1,771);break;case nS:e.blendFunc(1,1);break;case iS:e.blendFuncSeparate(0,769,0,1);break;case rS:e.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case tS:e.blendFuncSeparate(770,771,1,771);break;case nS:e.blendFunc(770,1);break;case iS:e.blendFuncSeparate(0,769,0,1);break;case rS:e.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}v=null,y=null,b=null,_=null,m=t,w=l}}else!0===p&&(V(3042),p=!1)}function G(t){S!==t&&(t?e.frontFace(2304):e.frontFace(2305),S=t)}function q(t){t!==Uw?(B(2884),t!==M&&(t===Hw?e.cullFace(1029):t===Ww?e.cullFace(1028):e.cullFace(1032))):V(2884),M=t}function X(t,n,i){t?(B(32823),E===n&&T===i||(e.polygonOffset(n,i),E=n,T=i)):V(32823)}return{buffers:{color:r,depth:s,stencil:a},enable:B,disable:V,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,i&&(36009===t&&(u[36160]=n),36160===t&&(u[36009]=n)),!0)},drawBuffers:function(i,r){let s=d,a=!1;if(i)if(s=h.get(r),void 0===s&&(s=[],h.set(r,s)),i.isWebGLMultipleRenderTargets){const e=i.texture;if(s.length!==e.length||36064!==s[0]){for(let t=0,n=e.length;t<n;t++)s[t]=36064+t;s.length=e.length,a=!0}}else 36064!==s[0]&&(s[0]=36064,a=!0);else 1029!==s[0]&&(s[0]=1029,a=!0);a&&(n.isWebGL2?e.drawBuffers(s):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(s))},useProgram:function(t){return f!==t&&(e.useProgram(t),f=t,!0)},setBlending:W,setMaterial:function(e,t){e.side===Jw?V(2884):B(2884);let n=e.side===Qw;t&&(n=!n),G(n),e.blending===tS&&!1===e.transparent?W(eS):W(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),r.setMask(e.colorWrite);const i=e.stencilWrite;a.setTest(i),i&&(a.setMask(e.stencilWriteMask),a.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),a.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),X(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?B(32926):V(32926)},setFlipSided:G,setCullFace:q,setLineWidth:function(t){t!==C&&(k&&e.lineWidth(t),C=t)},setPolygonOffset:X,setScissorTest:function(e){e?B(3089):V(3089)},activeTexture:function(t){void 0===t&&(t=33984+A-1),D!==t&&(e.activeTexture(t),D=t)},bindTexture:function(t,n,i){void 0===i&&(i=null===D?33984+A-1:D);let r=R[i];void 0===r&&(r={type:void 0,texture:void 0},R[i]=r),r.type===t&&r.texture===n||(D!==i&&(e.activeTexture(i),D=i),e.bindTexture(t,n||j[t]),r.type=t,r.texture=n)},unbindTexture:function(){const t=R[D];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(Mj){console.error("THREE.WebGLState:",Mj)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(Mj){console.error("THREE.WebGLState:",Mj)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(Mj){console.error("THREE.WebGLState:",Mj)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(Mj){console.error("THREE.WebGLState:",Mj)}},updateUBOMapping:function(t,n){let i=l.get(n);void 0===i&&(i=new WeakMap,l.set(n,i));let r=i.get(t);void 0===r&&(r=e.getUniformBlockIndex(n,t.name),i.set(t,r))},uniformBlockBinding:function(t,n){const i=l.get(n).get(t);o.get(n)!==i&&(e.uniformBlockBinding(n,i,t.__bindingPointIndex),o.set(n,i))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(Mj){console.error("THREE.WebGLState:",Mj)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(Mj){console.error("THREE.WebGLState:",Mj)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(Mj){console.error("THREE.WebGLState:",Mj)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(Mj){console.error("THREE.WebGLState:",Mj)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(Mj){console.error("THREE.WebGLState:",Mj)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(Mj){console.error("THREE.WebGLState:",Mj)}},scissor:function(t){!1===O.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),O.copy(t))},viewport:function(t){!1===z.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),z.copy(t))},reset:function(){e.disable(3042),e.disable(2884),e.disable(2929),e.disable(32823),e.disable(3089),e.disable(2960),e.disable(32926),e.blendEquation(32774),e.blendFunc(1,0),e.blendFuncSeparate(1,0,1,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(513),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(519,0,4294967295),e.stencilOp(7680,7680,7680),e.clearStencil(0),e.cullFace(1029),e.frontFace(2305),e.polygonOffset(0,0),e.activeTexture(33984),e.bindFramebuffer(36160,null),!0===i&&(e.bindFramebuffer(36009,null),e.bindFramebuffer(36008,null)),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),c={},D=null,R={},u={},h=new WeakMap,d=[],f=null,p=!1,m=null,g=null,v=null,y=null,x=null,b=null,_=null,w=!1,S=null,M=null,C=null,E=null,T=null,O.set(0,0,e.canvas.width,e.canvas.height),z.set(0,0,e.canvas.width,e.canvas.height),r.reset(),s.reset(),a.reset()}}}function zL(e,t,n,i,r,s,a){const o=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,f="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),p=new WeakMap;let m;const g=new WeakMap;let v=!1;try{v="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(U){}function y(e,t){return v?new OffscreenCanvas(e,t):_E("canvas")}function x(e,t,n,i){let r=1;if((e.width>i||e.height>i)&&(r=i/Math.max(e.width,e.height)),r<1||!0===t){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const i=t?hE:Math.floor,s=i(r*e.width),a=i(r*e.height);void 0===m&&(m=y(s,a));const o=n?y(s,a):m;o.width=s,o.height=a;return o.getContext("2d").drawImage(e,0,0,s,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+e.width+"x"+e.height+") to ("+s+"x"+a+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+e.width+"x"+e.height+")."),e}return e}function b(e){return cE(e.width)&&cE(e.height)}function _(e,t){return e.generateMipmaps&&t&&e.minFilter!==YS&&e.minFilter!==$S}function w(t){e.generateMipmap(t)}function S(n,i,r,s){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===o)return i;if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let l=i;return 6403===i&&(5126===r&&(l=33326),5131===r&&(l=33325),5121===r&&(l=33321)),33319===i&&(5126===r&&(l=33328),5131===r&&(l=33327),5121===r&&(l=33323)),6408===i&&(5126===r&&(l=34836),5131===r&&(l=34842),5121===r&&(l=s===vC&&!1===a?35907:32856),32819===r&&(l=32854),32820===r&&(l=32855)),33325!==l&&33326!==l&&33327!==l&&33328!==l&&34842!==l&&34836!==l||t.get("EXT_color_buffer_float"),l}function M(e,t,n){return!0===_(e,n)||e.isFramebufferTexture&&e.minFilter!==YS&&e.minFilter!==$S?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function C(e){return e===YS||e===KS||e===QS?9728:9729}function E(e){const t=e.target;t.removeEventListener("dispose",E),function(e){const t=i.get(e);if(void 0===t.__webglInit)return;const n=e.source,r=g.get(n);if(r){const i=r[t.__cacheKey];i.usedTimes--,0===i.usedTimes&&A(e),0===Object.keys(r).length&&g.delete(n)}i.remove(e)}(t),t.isVideoTexture&&p.delete(t)}function T(t){const n=t.target;n.removeEventListener("dispose",T),function(t){const n=t.texture,r=i.get(t),s=i.get(n);void 0!==s.__webglTexture&&(e.deleteTexture(s.__webglTexture),a.memory.textures--);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let i=0;i<6;i++)e.deleteFramebuffer(r.__webglFramebuffer[i]),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer[i]);else{if(e.deleteFramebuffer(r.__webglFramebuffer),r.__webglDepthbuffer&&e.deleteRenderbuffer(r.__webglDepthbuffer),r.__webglMultisampledFramebuffer&&e.deleteFramebuffer(r.__webglMultisampledFramebuffer),r.__webglColorRenderbuffer)for(let t=0;t<r.__webglColorRenderbuffer.length;t++)r.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(r.__webglColorRenderbuffer[t]);r.__webglDepthRenderbuffer&&e.deleteRenderbuffer(r.__webglDepthRenderbuffer)}if(t.isWebGLMultipleRenderTargets)for(let o=0,l=n.length;o<l;o++){const t=i.get(n[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),i.remove(n[o])}i.remove(n),i.remove(t)}(n)}function A(t){const n=i.get(t);e.deleteTexture(n.__webglTexture);const r=t.source;delete g.get(r)[n.__cacheKey],a.memory.textures--}let k=0;function P(e,t){const r=i.get(e);if(e.isVideoTexture&&function(e){const t=a.render.frame;p.get(e)!==t&&(p.set(e,t),e.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&r.__version!==e.version){const n=e.image;if(null===n)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==n.complete)return void I(r,e,t);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(3553,r.__webglTexture,33984+t)}const L={[GS]:10497,[qS]:33071,[XS]:33648},D={[YS]:9728,[KS]:9984,[QS]:9986,[$S]:9729,[eM]:9985,[nM]:9987};function R(n,s,a){if(a?(e.texParameteri(n,10242,L[s.wrapS]),e.texParameteri(n,10243,L[s.wrapT]),32879!==n&&35866!==n||e.texParameteri(n,32882,L[s.wrapR]),e.texParameteri(n,10240,D[s.magFilter]),e.texParameteri(n,10241,D[s.minFilter])):(e.texParameteri(n,10242,33071),e.texParameteri(n,10243,33071),32879!==n&&35866!==n||e.texParameteri(n,32882,33071),s.wrapS===qS&&s.wrapT===qS||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),e.texParameteri(n,10240,C(s.magFilter)),e.texParameteri(n,10241,C(s.minFilter)),s.minFilter!==YS&&s.minFilter!==$S&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===t.has("EXT_texture_filter_anisotropic")){const a=t.get("EXT_texture_filter_anisotropic");if(s.magFilter===YS)return;if(s.minFilter!==QS&&s.minFilter!==nM)return;if(s.type===uM&&!1===t.has("OES_texture_float_linear"))return;if(!1===o&&s.type===hM&&!1===t.has("OES_texture_half_float_linear"))return;(s.anisotropy>1||i.get(s).__currentAnisotropy)&&(e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,r.getMaxAnisotropy())),i.get(s).__currentAnisotropy=s.anisotropy)}}function N(t,n){let i=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",E));const r=n.source;let s=g.get(r);void 0===s&&(s={},g.set(r,s));const o=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.encoding),t.join()}(n);if(o!==t.__cacheKey){void 0===s[o]&&(s[o]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,i=!0),s[o].usedTimes++;const r=s[t.__cacheKey];void 0!==r&&(s[t.__cacheKey].usedTimes--,0===r.usedTimes&&A(n)),t.__cacheKey=o,t.__webglTexture=s[o].texture}return i}function I(t,r,a){let l=3553;(r.isDataArrayTexture||r.isCompressedArrayTexture)&&(l=35866),r.isData3DTexture&&(l=32879);const c=N(t,r),h=r.source;n.bindTexture(l,t.__webglTexture,33984+a);const d=i.get(h);if(h.version!==d.__version||!0===c){n.activeTexture(33984+a),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=function(e){return!o&&(e.wrapS!==qS||e.wrapT!==qS||e.minFilter!==YS&&e.minFilter!==$S)}(r)&&!1===b(r.image);let i=x(r.image,t,!1,u);i=V(r,i);const f=b(i)||o,p=s.convert(r.format,r.encoding);let m,g=s.convert(r.type),v=S(r.internalFormat,p,g,r.encoding,r.isVideoTexture);R(l,r,f);const y=r.mipmaps,C=o&&!0!==r.isVideoTexture,E=void 0===d.__version||!0===c,T=M(r,i,f);if(r.isDepthTexture)v=6402,o?v=r.type===uM?36012:r.type===cM?33190:r.type===pM?35056:33189:r.type===uM&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),r.format===xM&&6402===v&&r.type!==oM&&r.type!==cM&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),r.type=cM,g=s.convert(r.type)),r.format===bM&&6402===v&&(v=34041,r.type!==pM&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),r.type=pM,g=s.convert(r.type))),E&&(C?n.texStorage2D(3553,1,v,i.width,i.height):n.texImage2D(3553,0,v,i.width,i.height,0,p,g,null));else if(r.isDataTexture)if(y.length>0&&f){C&&E&&n.texStorage2D(3553,T,v,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)m=y[e],C?n.texSubImage2D(3553,e,0,0,m.width,m.height,p,g,m.data):n.texImage2D(3553,e,v,m.width,m.height,0,p,g,m.data);r.generateMipmaps=!1}else C?(E&&n.texStorage2D(3553,T,v,i.width,i.height),n.texSubImage2D(3553,0,0,0,i.width,i.height,p,g,i.data)):n.texImage2D(3553,0,v,i.width,i.height,0,p,g,i.data);else if(r.isCompressedTexture)if(r.isCompressedArrayTexture){C&&E&&n.texStorage3D(35866,T,v,y[0].width,y[0].height,i.depth);for(let e=0,t=y.length;e<t;e++)m=y[e],r.format!==gM?null!==p?C?n.compressedTexSubImage3D(35866,e,0,0,0,m.width,m.height,i.depth,p,m.data,0,0):n.compressedTexImage3D(35866,e,v,m.width,m.height,i.depth,0,m.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage3D(35866,e,0,0,0,m.width,m.height,i.depth,p,g,m.data):n.texImage3D(35866,e,v,m.width,m.height,i.depth,0,p,g,m.data)}else{C&&E&&n.texStorage2D(3553,T,v,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)m=y[e],r.format!==gM?null!==p?C?n.compressedTexSubImage2D(3553,e,0,0,m.width,m.height,p,m.data):n.compressedTexImage2D(3553,e,v,m.width,m.height,0,m.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):C?n.texSubImage2D(3553,e,0,0,m.width,m.height,p,g,m.data):n.texImage2D(3553,e,v,m.width,m.height,0,p,g,m.data)}else if(r.isDataArrayTexture)C?(E&&n.texStorage3D(35866,T,v,i.width,i.height,i.depth),n.texSubImage3D(35866,0,0,0,0,i.width,i.height,i.depth,p,g,i.data)):n.texImage3D(35866,0,v,i.width,i.height,i.depth,0,p,g,i.data);else if(r.isData3DTexture)C?(E&&n.texStorage3D(32879,T,v,i.width,i.height,i.depth),n.texSubImage3D(32879,0,0,0,0,i.width,i.height,i.depth,p,g,i.data)):n.texImage3D(32879,0,v,i.width,i.height,i.depth,0,p,g,i.data);else if(r.isFramebufferTexture){if(E)if(C)n.texStorage2D(3553,T,v,i.width,i.height);else{let e=i.width,t=i.height;for(let i=0;i<T;i++)n.texImage2D(3553,i,v,e,t,0,p,g,null),e>>=1,t>>=1}}else if(y.length>0&&f){C&&E&&n.texStorage2D(3553,T,v,y[0].width,y[0].height);for(let e=0,t=y.length;e<t;e++)m=y[e],C?n.texSubImage2D(3553,e,0,0,p,g,m):n.texImage2D(3553,e,v,p,g,m);r.generateMipmaps=!1}else C?(E&&n.texStorage2D(3553,T,v,i.width,i.height),n.texSubImage2D(3553,0,0,0,p,g,i)):n.texImage2D(3553,0,v,p,g,i);_(r,f)&&w(l),d.__version=h.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}function O(t,r,a,o,l){const c=s.convert(a.format,a.encoding),u=s.convert(a.type),h=S(a.internalFormat,c,u,a.encoding);i.get(r).__hasExternalTextures||(32879===l||35866===l?n.texImage3D(l,0,h,r.width,r.height,r.depth,0,c,u,null):n.texImage2D(l,0,h,r.width,r.height,0,c,u,null)),n.bindFramebuffer(36160,t),B(r)?d.framebufferTexture2DMultisampleEXT(36160,o,l,i.get(a).__webglTexture,0,j(r)):(3553===l||l>=34069&&l<=34074)&&e.framebufferTexture2D(36160,o,l,i.get(a).__webglTexture,0),n.bindFramebuffer(36160,null)}function z(t,n,i){if(e.bindRenderbuffer(36161,t),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i||B(n)){const t=n.depthTexture;t&&t.isDepthTexture&&(t.type===uM?r=36012:t.type===cM&&(r=33190));const i=j(n);B(n)?d.renderbufferStorageMultisampleEXT(36161,i,r,n.width,n.height):e.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else e.renderbufferStorage(36161,r,n.width,n.height);e.framebufferRenderbuffer(36160,36096,36161,t)}else if(n.depthBuffer&&n.stencilBuffer){const r=j(n);i&&!1===B(n)?e.renderbufferStorageMultisample(36161,r,35056,n.width,n.height):B(n)?d.renderbufferStorageMultisampleEXT(36161,r,35056,n.width,n.height):e.renderbufferStorage(36161,34041,n.width,n.height),e.framebufferRenderbuffer(36160,33306,36161,t)}else{const t=!0===n.isWebGLMultipleRenderTargets?n.texture:[n.texture];for(let r=0;r<t.length;r++){const a=t[r],o=s.convert(a.format,a.encoding),l=s.convert(a.type),c=S(a.internalFormat,o,l,a.encoding),u=j(n);i&&!1===B(n)?e.renderbufferStorageMultisample(36161,u,c,n.width,n.height):B(n)?d.renderbufferStorageMultisampleEXT(36161,u,c,n.width,n.height):e.renderbufferStorage(36161,c,n.width,n.height)}}e.bindRenderbuffer(36161,null)}function F(t){const r=i.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!r.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,r){if(r&&r.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(36160,t),!r.depthTexture||!r.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(r.depthTexture).__webglTexture&&r.depthTexture.image.width===r.width&&r.depthTexture.image.height===r.height||(r.depthTexture.image.width=r.width,r.depthTexture.image.height=r.height,r.depthTexture.needsUpdate=!0),P(r.depthTexture,0);const s=i.get(r.depthTexture).__webglTexture,a=j(r);if(r.depthTexture.format===xM)B(r)?d.framebufferTexture2DMultisampleEXT(36160,36096,3553,s,0,a):e.framebufferTexture2D(36160,36096,3553,s,0);else{if(r.depthTexture.format!==bM)throw new Error("Unknown depthTexture format");B(r)?d.framebufferTexture2DMultisampleEXT(36160,33306,3553,s,0,a):e.framebufferTexture2D(36160,33306,3553,s,0)}}(r.__webglFramebuffer,t)}else if(s){r.__webglDepthbuffer=[];for(let i=0;i<6;i++)n.bindFramebuffer(36160,r.__webglFramebuffer[i]),r.__webglDepthbuffer[i]=e.createRenderbuffer(),z(r.__webglDepthbuffer[i],t,!1)}else n.bindFramebuffer(36160,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),z(r.__webglDepthbuffer,t,!1);n.bindFramebuffer(36160,null)}function j(e){return Math.min(h,e.samples)}function B(e){const n=i.get(e);return o&&e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function V(e,n){const i=e.encoding,r=e.format,s=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||e.format===$C||i!==gC&&(i===vC?!1===o?!0===t.has("EXT_sRGB")&&r===gM?(e.format=$C,e.minFilter=$S,e.generateMipmaps=!1):n=IE.sRGBToLinear(n):r===gM&&s===rM||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",i)),n}this.allocateTextureUnit=function(){const e=k;return e>=l&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+l),k+=1,e},this.resetTextureUnits=function(){k=0},this.setTexture2D=P,this.setTexture2DArray=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?I(r,e,t):n.bindTexture(35866,r.__webglTexture,33984+t)},this.setTexture3D=function(e,t){const r=i.get(e);e.version>0&&r.__version!==e.version?I(r,e,t):n.bindTexture(32879,r.__webglTexture,33984+t)},this.setTextureCube=function(t,r){const a=i.get(t);t.version>0&&a.__version!==t.version?function(t,r,a){if(6!==r.image.length)return;const l=N(t,r),u=r.source;n.bindTexture(34067,t.__webglTexture,33984+a);const h=i.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(33984+a),e.pixelStorei(37440,r.flipY),e.pixelStorei(37441,r.premultiplyAlpha),e.pixelStorei(3317,r.unpackAlignment),e.pixelStorei(37443,0);const t=r.isCompressedTexture||r.image[0].isCompressedTexture,i=r.image[0]&&r.image[0].isDataTexture,d=[];for(let e=0;e<6;e++)d[e]=t||i?i?r.image[e].image:r.image[e]:x(r.image[e],!1,!0,c),d[e]=V(r,d[e]);const f=d[0],p=b(f)||o,m=s.convert(r.format,r.encoding),g=s.convert(r.type),v=S(r.internalFormat,m,g,r.encoding),y=o&&!0!==r.isVideoTexture,C=void 0===h.__version||!0===l;let E,T=M(r,f,p);if(R(34067,r,p),t){y&&C&&n.texStorage2D(34067,T,v,f.width,f.height);for(let e=0;e<6;e++){E=d[e].mipmaps;for(let t=0;t<E.length;t++){const i=E[t];r.format!==gM?null!==m?y?n.compressedTexSubImage2D(34069+e,t,0,0,i.width,i.height,m,i.data):n.compressedTexImage2D(34069+e,t,v,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):y?n.texSubImage2D(34069+e,t,0,0,i.width,i.height,m,g,i.data):n.texImage2D(34069+e,t,v,i.width,i.height,0,m,g,i.data)}}}else{E=r.mipmaps,y&&C&&(E.length>0&&T++,n.texStorage2D(34067,T,v,d[0].width,d[0].height));for(let e=0;e<6;e++)if(i){y?n.texSubImage2D(34069+e,0,0,0,d[e].width,d[e].height,m,g,d[e].data):n.texImage2D(34069+e,0,v,d[e].width,d[e].height,0,m,g,d[e].data);for(let t=0;t<E.length;t++){const i=E[t].image[e].image;y?n.texSubImage2D(34069+e,t+1,0,0,i.width,i.height,m,g,i.data):n.texImage2D(34069+e,t+1,v,i.width,i.height,0,m,g,i.data)}}else{y?n.texSubImage2D(34069+e,0,0,0,m,g,d[e]):n.texImage2D(34069+e,0,v,m,g,d[e]);for(let t=0;t<E.length;t++){const i=E[t];y?n.texSubImage2D(34069+e,t+1,0,0,m,g,i.image[e]):n.texImage2D(34069+e,t+1,v,m,g,i.image[e])}}}_(r,p)&&w(34067),h.__version=u.version,r.onUpdate&&r.onUpdate(r)}t.__version=r.version}(a,t,r):n.bindTexture(34067,a.__webglTexture,33984+r)},this.rebindTextures=function(e,t,n){const r=i.get(e);void 0!==t&&O(r.__webglFramebuffer,e,e.texture,36064,3553),void 0!==n&&F(e)},this.setupRenderTarget=function(t){const l=t.texture,c=i.get(t),u=i.get(l);t.addEventListener("dispose",T),!0!==t.isWebGLMultipleRenderTargets&&(void 0===u.__webglTexture&&(u.__webglTexture=e.createTexture()),u.__version=l.version,a.memory.textures++);const h=!0===t.isWebGLCubeRenderTarget,d=!0===t.isWebGLMultipleRenderTargets,f=b(t)||o;if(h){c.__webglFramebuffer=[];for(let t=0;t<6;t++)c.__webglFramebuffer[t]=e.createFramebuffer()}else{if(c.__webglFramebuffer=e.createFramebuffer(),d)if(r.drawBuffers){const n=t.texture;for(let t=0,r=n.length;t<r;t++){const r=i.get(n[t]);void 0===r.__webglTexture&&(r.__webglTexture=e.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(o&&t.samples>0&&!1===B(t)){const i=d?l:[l];c.__webglMultisampledFramebuffer=e.createFramebuffer(),c.__webglColorRenderbuffer=[],n.bindFramebuffer(36160,c.__webglMultisampledFramebuffer);for(let n=0;n<i.length;n++){const r=i[n];c.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(36161,c.__webglColorRenderbuffer[n]);const a=s.convert(r.format,r.encoding),o=s.convert(r.type),l=S(r.internalFormat,a,o,r.encoding,!0===t.isXRRenderTarget),u=j(t);e.renderbufferStorageMultisample(36161,u,l,t.width,t.height),e.framebufferRenderbuffer(36160,36064+n,36161,c.__webglColorRenderbuffer[n])}e.bindRenderbuffer(36161,null),t.depthBuffer&&(c.__webglDepthRenderbuffer=e.createRenderbuffer(),z(c.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(36160,null)}}if(h){n.bindTexture(34067,u.__webglTexture),R(34067,l,f);for(let e=0;e<6;e++)O(c.__webglFramebuffer[e],t,l,36064,34069+e);_(l,f)&&w(34067),n.unbindTexture()}else if(d){const e=t.texture;for(let r=0,s=e.length;r<s;r++){const s=e[r],a=i.get(s);n.bindTexture(3553,a.__webglTexture),R(3553,s,f),O(c.__webglFramebuffer,t,s,36064+r,3553),_(s,f)&&w(3553)}n.unbindTexture()}else{let e=3553;(t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(o?e=t.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),n.bindTexture(e,u.__webglTexture),R(e,l,f),O(c.__webglFramebuffer,t,l,36064,e),_(l,f)&&w(e),n.unbindTexture()}t.depthBuffer&&F(t)},this.updateRenderTargetMipmap=function(e){const t=b(e)||o,r=!0===e.isWebGLMultipleRenderTargets?e.texture:[e.texture];for(let s=0,a=r.length;s<a;s++){const a=r[s];if(_(a,t)){const t=e.isWebGLCubeRenderTarget?34067:3553,r=i.get(a).__webglTexture;n.bindTexture(t,r),w(t),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(o&&t.samples>0&&!1===B(t)){const r=t.isWebGLMultipleRenderTargets?t.texture:[t.texture],s=t.width,a=t.height;let o=16384;const l=[],c=t.stencilBuffer?33306:36096,u=i.get(t),h=!0===t.isWebGLMultipleRenderTargets;if(h)for(let t=0;t<r.length;t++)n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,null),n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,null,0);n.bindFramebuffer(36008,u.__webglMultisampledFramebuffer),n.bindFramebuffer(36009,u.__webglFramebuffer);for(let n=0;n<r.length;n++){l.push(36064+n),t.depthBuffer&&l.push(c);const d=void 0!==u.__ignoreDepthValues&&u.__ignoreDepthValues;if(!1===d&&(t.depthBuffer&&(o|=256),t.stencilBuffer&&(o|=1024)),h&&e.framebufferRenderbuffer(36008,36064,36161,u.__webglColorRenderbuffer[n]),!0===d&&(e.invalidateFramebuffer(36008,[c]),e.invalidateFramebuffer(36009,[c])),h){const t=i.get(r[n]).__webglTexture;e.framebufferTexture2D(36009,36064,3553,t,0)}e.blitFramebuffer(0,0,s,a,0,0,s,a,o,9728),f&&e.invalidateFramebuffer(36008,l)}if(n.bindFramebuffer(36008,null),n.bindFramebuffer(36009,null),h)for(let t=0;t<r.length;t++){n.bindFramebuffer(36160,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(36160,36064+t,36161,u.__webglColorRenderbuffer[t]);const s=i.get(r[t]).__webglTexture;n.bindFramebuffer(36160,u.__webglFramebuffer),e.framebufferTexture2D(36009,36064+t,3553,s,0)}n.bindFramebuffer(36009,u.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=F,this.setupFrameBufferTexture=O,this.useMultisampledRTT=B}function FL(e,t,n){const i=n.isWebGL2;return{convert:function(n){let r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(n===rM)return 5121;if(n===dM)return 32819;if(n===fM)return 32820;if(n===sM)return 5120;if(n===aM)return 5122;if(n===oM)return 5123;if(n===lM)return 5124;if(n===cM)return 5125;if(n===uM)return 5126;if(n===hM)return i?5131:(r=t.get("OES_texture_half_float"),null!==r?r.HALF_FLOAT_OES:null);if(n===mM)return 6406;if(n===gM)return 6408;if(n===vM)return 6409;if(n===yM)return 6410;if(n===xM)return 6402;if(n===bM)return 34041;if(n===$C)return r=t.get("EXT_sRGB"),null!==r?r.SRGB_ALPHA_EXT:null;if(n===_M)return 6403;if(n===wM)return 36244;if(n===SM)return 33319;if(n===MM)return 33320;if(n===CM)return 36249;if(n===EM||n===TM||n===AM||n===kM)if(s===vC){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===EM)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===TM)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===AM)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===kM)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===EM)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===TM)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===AM)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===kM)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===PM||n===LM||n===DM||n===RM){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===PM)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===LM)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===DM)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===RM)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===NM)return r=t.get("WEBGL_compressed_texture_etc1"),null!==r?r.COMPRESSED_RGB_ETC1_WEBGL:null;if(n===IM||n===OM){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===IM)return s===vC?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===OM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===zM||n===FM||n===jM||n===BM||n===VM||n===UM||n===HM||n===WM||n===GM||n===qM||n===XM||n===YM||n===KM||n===ZM){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===zM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===FM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===jM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===BM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===VM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===UM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===HM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===WM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===GM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===qM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===XM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===YM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===KM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ZM)return s===vC?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===QM){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===QM)return s===vC?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT}if(n===JM||n===$M||n===eC||n===tC){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===QM)return r.COMPRESSED_RED_RGTC1_EXT;if(n===$M)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===eC)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===tC)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===pM?i?34042:(r=t.get("WEBGL_depth_texture"),null!==r?r.UNSIGNED_INT_24_8_WEBGL:null):void 0!==e[n]?e[n]:null}}}class jL extends nk{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class BL extends GT{constructor(){super(),this.isGroup=!0,this.type="Group"}}const VL={type:"move"};class UL{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new BL,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new BL,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new SE,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new SE),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new BL,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new SE,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new SE),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let i=null,r=null,s=null;const a=this._targetRay,o=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){s=!0;for(const s of e.hand.values()){const e=t.getJointPose(s,n),i=this._getHandJoint(l,s);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=e.radius),i.visible=null!==e}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),o=.02,c=.005;l.inputState.pinching&&a>o+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=o-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==o&&e.gripSpace&&(r=t.getPose(e.gripSpace,n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1));null!==a&&(i=t.getPose(e.targetRaySpace,n),null===i&&null!==r&&(i=r),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(VL)))}return null!==a&&(a.visible=null!==i),null!==o&&(o.visible=null!==r),null!==l&&(l.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new BL;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class HL extends jE{constructor(e,t,n,i,r,s,a,o,l,c){if((c=void 0!==c?c:xM)!==xM&&c!==bM)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===xM&&(n=cM),void 0===n&&c===bM&&(n=pM),super(null,i,r,s,a,o,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:YS,this.minFilter=void 0!==o?o:YS,this.flipY=!1,this.generateMipmaps=!1}}class WL extends eE{constructor(e,t){super();const n=this;let i=null,r=1,s=null,a="local-floor",o=1,l=null,c=null,u=null,h=null,d=null,f=null;const p=t.getContextAttributes();let m=null,g=null;const v=[],y=[],x=new Set,b=new Map,_=new nk;_.layers.enable(1),_.viewport=new BE;const w=new nk;w.layers.enable(2),w.viewport=new BE;const S=[_,w],M=new jL;M.layers.enable(1),M.layers.enable(2);let C=null,E=null;function T(e){const t=y.indexOf(e.inputSource);if(-1===t)return;const n=v[t];void 0!==n&&n.dispatchEvent({type:e.type,data:e.inputSource})}function A(){i.removeEventListener("select",T),i.removeEventListener("selectstart",T),i.removeEventListener("selectend",T),i.removeEventListener("squeeze",T),i.removeEventListener("squeezestart",T),i.removeEventListener("squeezeend",T),i.removeEventListener("end",A),i.removeEventListener("inputsourceschange",k);for(let e=0;e<v.length;e++){const t=y[e];null!==t&&(y[e]=null,v[e].disconnect(t))}C=null,E=null,e.setRenderTarget(m),d=null,h=null,u=null,i=null,g=null,N.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function k(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],i=y.indexOf(n);i>=0&&(y[i]=null,v[i].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let i=y.indexOf(n);if(-1===i){for(let e=0;e<v.length;e++){if(e>=y.length){y.push(n),i=e;break}if(null===y[e]){y[e]=n,i=e;break}}if(-1===i)break}const r=v[i];r&&r.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=v[e];return void 0===t&&(t=new UL,v[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=v[e];return void 0===t&&(t=new UL,v[e]=t),t.getGripSpace()},this.getHand=function(e){let t=v[e];return void 0===t&&(t=new UL,v[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){r=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return i},this.setSession=async function(c){if(i=c,null!==i){if(m=e.getRenderTarget(),i.addEventListener("select",T),i.addEventListener("selectstart",T),i.addEventListener("selectend",T),i.addEventListener("squeeze",T),i.addEventListener("squeezestart",T),i.addEventListener("squeezeend",T),i.addEventListener("end",A),i.addEventListener("inputsourceschange",k),!0!==p.xrCompatible&&await t.makeXRCompatible(),void 0===i.renderState.layers||!1===e.capabilities.isWebGL2){const n={antialias:void 0!==i.renderState.layers||p.antialias,alpha:p.alpha,depth:p.depth,stencil:p.stencil,framebufferScaleFactor:r};d=new XRWebGLLayer(i,t,n),i.updateRenderState({baseLayer:d}),g=new VE(d.framebufferWidth,d.framebufferHeight,{format:gM,type:rM,encoding:e.outputEncoding,stencilBuffer:p.stencil})}else{let n=null,s=null,a=null;p.depth&&(a=p.stencil?35056:33190,n=p.stencil?bM:xM,s=p.stencil?pM:cM);const o={colorFormat:32856,depthFormat:a,scaleFactor:r};u=new XRWebGLBinding(i,t),h=u.createProjectionLayer(o),i.updateRenderState({layers:[h]}),g=new VE(h.textureWidth,h.textureHeight,{format:gM,type:rM,depthTexture:new HL(h.textureWidth,h.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:p.stencil,encoding:e.outputEncoding,samples:p.antialias?4:0});e.properties.get(g).__ignoreDepthValues=h.ignoreDepthValues}g.isXRRenderTarget=!0,this.setFoveation(o),l=null,s=await i.requestReferenceSpace(a),N.setContext(i),N.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const P=new SE,L=new SE;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===i)return;M.near=w.near=_.near=e.near,M.far=w.far=_.far=e.far,C===M.near&&E===M.far||(i.updateRenderState({depthNear:M.near,depthFar:M.far}),C=M.near,E=M.far);const t=e.parent,n=M.cameras;D(M,t);for(let i=0;i<n.length;i++)D(n[i],t);M.matrixWorld.decompose(M.position,M.quaternion,M.scale),e.matrix.copy(M.matrix),e.matrix.decompose(e.position,e.quaternion,e.scale);const r=e.children;for(let i=0,s=r.length;i<s;i++)r[i].updateMatrixWorld(!0);2===n.length?function(e,t,n){P.setFromMatrixPosition(t.matrixWorld),L.setFromMatrixPosition(n.matrixWorld);const i=P.distanceTo(L),r=t.projectionMatrix.elements,s=n.projectionMatrix.elements,a=r[14]/(r[10]-1),o=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(s[8]+1)/s[0],d=a*u,f=a*h,p=i/(-u+h),m=p*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=a+p,v=o+p,y=d-m,x=f+(i-m),b=l*o/v*g,_=c*o/v*g;e.projectionMatrix.makePerspective(y,x,b,_,g,v)}(M,_,w):M.projectionMatrix.copy(_.projectionMatrix)},this.getCamera=function(){return M},this.getFoveation=function(){if(null!==h||null!==d)return o},this.setFoveation=function(e){o=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.getPlanes=function(){return x};let R=null;const N=new pk;N.setAnimationLoop(function(t,i){if(c=i.getViewerPose(l||s),f=i,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(g,d.framebuffer),e.setRenderTarget(g));let n=!1;t.length!==M.cameras.length&&(M.cameras.length=0,n=!0);for(let i=0;i<t.length;i++){const r=t[i];let s=null;if(null!==d)s=d.getViewport(r);else{const t=u.getViewSubImage(h,r);s=t.viewport,0===i&&(e.setRenderTargetTextures(g,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(g))}let a=S[i];void 0===a&&(a=new nk,a.layers.enable(i),a.viewport=new BE,S[i]=a),a.matrix.fromArray(r.transform.matrix),a.projectionMatrix.fromArray(r.projectionMatrix),a.viewport.set(s.x,s.y,s.width,s.height),0===i&&M.matrix.copy(a.matrix),!0===n&&M.cameras.push(a)}}for(let e=0;e<v.length;e++){const t=y[e],n=v[e];null!==t&&void 0!==n&&n.update(t,i,l||s)}if(R&&R(t,i),i.detectedPlanes){n.dispatchEvent({type:"planesdetected",data:i.detectedPlanes});let e=null;for(const t of x)i.detectedPlanes.has(t)||(null===e&&(e=[]),e.push(t));if(null!==e)for(const t of e)x.delete(t),b.delete(t),n.dispatchEvent({type:"planeremoved",data:t});for(const t of i.detectedPlanes)if(x.has(t)){const e=b.get(t);t.lastChangedTime>e&&(b.set(t,t.lastChangedTime),n.dispatchEvent({type:"planechanged",data:t}))}else x.add(t),b.set(t,i.lastChangedTime),n.dispatchEvent({type:"planeadded",data:t})}f=null}),this.setAnimationLoop=function(e){R=e},this.dispose=function(){}}}function GL(e,t){function n(n,i){n.opacity.value=i.opacity,i.color&&n.diffuse.value.copy(i.color),i.emissive&&n.emissive.value.copy(i.emissive).multiplyScalar(i.emissiveIntensity),i.map&&(n.map.value=i.map),i.alphaMap&&(n.alphaMap.value=i.alphaMap),i.bumpMap&&(n.bumpMap.value=i.bumpMap,n.bumpScale.value=i.bumpScale,i.side===Qw&&(n.bumpScale.value*=-1)),i.displacementMap&&(n.displacementMap.value=i.displacementMap,n.displacementScale.value=i.displacementScale,n.displacementBias.value=i.displacementBias),i.emissiveMap&&(n.emissiveMap.value=i.emissiveMap),i.normalMap&&(n.normalMap.value=i.normalMap,n.normalScale.value.copy(i.normalScale),i.side===Qw&&n.normalScale.value.negate()),i.specularMap&&(n.specularMap.value=i.specularMap),i.alphaTest>0&&(n.alphaTest.value=i.alphaTest);const r=t.get(i).envMap;if(r&&(n.envMap.value=r,n.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,n.reflectivity.value=i.reflectivity,n.ior.value=i.ior,n.refractionRatio.value=i.refractionRatio),i.lightMap){n.lightMap.value=i.lightMap;const t=!0===e.useLegacyLights?Math.PI:1;n.lightMapIntensity.value=i.lightMapIntensity*t}let s,a;i.aoMap&&(n.aoMap.value=i.aoMap,n.aoMapIntensity.value=i.aoMapIntensity),i.map?s=i.map:i.specularMap?s=i.specularMap:i.displacementMap?s=i.displacementMap:i.normalMap?s=i.normalMap:i.bumpMap?s=i.bumpMap:i.roughnessMap?s=i.roughnessMap:i.metalnessMap?s=i.metalnessMap:i.alphaMap?s=i.alphaMap:i.emissiveMap?s=i.emissiveMap:i.clearcoatMap?s=i.clearcoatMap:i.clearcoatNormalMap?s=i.clearcoatNormalMap:i.clearcoatRoughnessMap?s=i.clearcoatRoughnessMap:i.iridescenceMap?s=i.iridescenceMap:i.iridescenceThicknessMap?s=i.iridescenceThicknessMap:i.specularIntensityMap?s=i.specularIntensityMap:i.specularColorMap?s=i.specularColorMap:i.transmissionMap?s=i.transmissionMap:i.thicknessMap?s=i.thicknessMap:i.sheenColorMap?s=i.sheenColorMap:i.sheenRoughnessMap&&(s=i.sheenRoughnessMap),void 0!==s&&(s.isWebGLRenderTarget&&(s=s.texture),!0===s.matrixAutoUpdate&&s.updateMatrix(),n.uvTransform.value.copy(s.matrix)),i.aoMap?a=i.aoMap:i.lightMap&&(a=i.lightMap),void 0!==a&&(a.isWebGLRenderTarget&&(a=a.texture),!0===a.matrixAutoUpdate&&a.updateMatrix(),n.uv2Transform.value.copy(a.matrix))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,JA(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,r,s,a){i.isMeshBasicMaterial||i.isMeshLambertMaterial?n(e,i):i.isMeshToonMaterial?(n(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(n(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(n(e,i),function(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap);n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap);const i=t.get(n).envMap;i&&(e.envMapIntensity.value=n.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,n){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap),t.clearcoatNormalMap&&(e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),e.clearcoatNormalMap.value=t.clearcoatNormalMap,t.side===Qw&&e.clearcoatNormalScale.value.negate()));t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=n.texture,e.transmissionSamplerSize.value.set(n.width,n.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap);t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap)}(e,i,a)):i.isMeshMatcapMaterial?(n(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?n(e,i):i.isMeshDistanceMaterial?(n(e,i),function(e,t){e.referencePosition.value.copy(t.referencePosition),e.nearDistance.value=t.nearDistance,e.farDistance.value=t.farDistance}(e,i)):i.isMeshNormalMaterial?n(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,n,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*n,e.scale.value=.5*i,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let r;t.map?r=t.map:t.alphaMap&&(r=t.alphaMap);void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix))}(e,i,r,s):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map);t.alphaMap&&(e.alphaMap.value=t.alphaMap);t.alphaTest>0&&(e.alphaTest.value=t.alphaTest);let n;t.map?n=t.map:t.alphaMap&&(n=t.alphaMap);void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),e.uvTransform.value.copy(n.matrix))}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function qL(e,t,n,i){let r={},s={},a=[];const o=n.isWebGL2?e.getParameter(35375):0;function l(e,t,n){const i=e.value;if(void 0===n[t]){if("number"===typeof i)n[t]=i;else{const e=Array.isArray(i)?i:[i],r=[];for(let t=0;t<e.length;t++)r.push(e[t].clone());n[t]=r}return!0}if("number"===typeof i){if(n[t]!==i)return n[t]=i,!0}else{const e=Array.isArray(n[t])?n[t]:[n[t]],r=Array.isArray(i)?i:[i];for(let t=0;t<e.length;t++){const n=e[t];if(!1===n.equals(r[t]))return n.copy(r[t]),!0}}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const i=a.indexOf(n.__bindingPointIndex);a.splice(i,1),e.deleteBuffer(r[n.id]),delete r[n.id],delete s[n.id]}return{bind:function(e,t){const n=t.program;i.uniformBlockBinding(e,n)},update:function(n,h){let d=r[n.id];void 0===d&&(!function(e){const t=e.uniforms;let n=0;const i=16;let r=0;for(let s=0,a=t.length;s<a;s++){const e=t[s],a={boundary:0,storage:0},o=Array.isArray(e.value)?e.value:[e.value];for(let t=0,n=o.length;t<n;t++){const e=c(o[t]);a.boundary+=e.boundary,a.storage+=e.storage}if(e.__data=new Float32Array(a.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=n,s>0){r=n%i;0!==r&&i-r-a.boundary<0&&(n+=i-r,e.__offset=n)}n+=a.storage}r=n%i,r>0&&(n+=i-r);e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<o;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const i=e.createBuffer(),r=t.__size,s=t.usage;return e.bindBuffer(35345,i),e.bufferData(35345,r,s),e.bindBuffer(35345,null),e.bindBufferBase(35345,n,i),i}(n),r[n.id]=d,n.addEventListener("dispose",u));const f=h.program;i.updateUBOMapping(n,f);const p=t.render.frame;s[n.id]!==p&&(!function(t){const n=r[t.id],i=t.uniforms,s=t.__cache;e.bindBuffer(35345,n);for(let r=0,a=i.length;r<a;r++){const t=i[r];if(!0===l(t,r,s)){const n=t.__offset,i=Array.isArray(t.value)?t.value:[t.value];let r=0;for(let s=0;s<i.length;s++){const a=i[s],o=c(a);"number"===typeof a?(t.__data[0]=a,e.bufferSubData(35345,n+r,t.__data)):a.isMatrix3?(t.__data[0]=a.elements[0],t.__data[1]=a.elements[1],t.__data[2]=a.elements[2],t.__data[3]=a.elements[0],t.__data[4]=a.elements[3],t.__data[5]=a.elements[4],t.__data[6]=a.elements[5],t.__data[7]=a.elements[0],t.__data[8]=a.elements[6],t.__data[9]=a.elements[7],t.__data[10]=a.elements[8],t.__data[11]=a.elements[0]):(a.toArray(t.__data,r),r+=o.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(35345,n,t.__data)}}e.bindBuffer(35345,null)}(n),s[n.id]=p)},dispose:function(){for(const t in r)e.deleteBuffer(r[t]);a=[],r={},s={}}}}function XL(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.isWebGLRenderer=!0;const t=void 0!==e.canvas?e.canvas:function(){const e=_E("canvas");return e.style.display="block",e}(),n=void 0!==e.context?e.context:null,i=void 0===e.depth||e.depth,r=void 0===e.stencil||e.stencil,s=void 0!==e.antialias&&e.antialias,a=void 0===e.premultipliedAlpha||e.premultipliedAlpha,o=void 0!==e.preserveDrawingBuffer&&e.preserveDrawingBuffer,l=void 0!==e.powerPreference?e.powerPreference:"default",c=void 0!==e.failIfMajorPerformanceCaveat&&e.failIfMajorPerformanceCaveat;let u;u=null!==n?n.getContextAttributes().alpha:void 0!==e.alpha&&e.alpha;let h=null,d=null;const f=[],p=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=gC,this.useLegacyLights=!0,this.toneMapping=RS,this.toneMappingExposure=1;const m=this;let g=!1,v=0,y=0,x=null,b=-1,_=null;const w=new BE,S=new BE;let M=null,C=t.width,E=t.height,T=1,A=null,k=null;const P=new BE(0,0,C,E),L=new BE(0,0,C,E);let D=!1;const R=new fk;let N=!1,I=!1,O=null;const z=new bT,F=new SE,j={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function B(){return null===x?T:1}let V,U,H,W,G,q,X,Y,K,Z,Q,J,$,ee,te,ne,ie,re,se,ae,oe,le,ce,ue,he=n;function de(e,n){for(let i=0;i<e.length;i++){const r=e[i],s=t.getContext(r,n);if(null!==s)return s}return null}try{const e={alpha:!0,depth:i,stencil:r,antialias:s,premultipliedAlpha:a,preserveDrawingBuffer:o,powerPreference:l,failIfMajorPerformanceCaveat:c};if("setAttribute"in t&&t.setAttribute("data-engine","three.js r".concat(jw)),t.addEventListener("webglcontextlost",me,!1),t.addEventListener("webglcontextrestored",ge,!1),t.addEventListener("webglcontextcreationerror",ve,!1),null===he){const t=["webgl2","webgl","experimental-webgl"];if(!0===m.isWebGL1Renderer&&t.shift(),he=de(t,e),null===he)throw de(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===he.getShaderPrecisionFormat&&(he.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Mj){throw console.error("THREE.WebGLRenderer: "+Mj.message),Mj}function fe(){V=new Uk(he),U=new Mk(he,V,e),V.init(U),le=new FL(he,V,U),H=new OL(he,V,U),W=new Gk,G=new bL,q=new zL(he,V,H,G,U,le,W),X=new Ek(m),Y=new Vk(m),K=new mk(he,U),ce=new wk(he,V,K,U),Z=new Hk(he,K,W,ce),Q=new Kk(he,Z,K,W),se=new Yk(he,U,q),ne=new Ck(G),J=new xL(m,X,Y,V,U,ce,ne),$=new GL(m,G),ee=new ML,te=new PL(V,U),re=new _k(m,X,Y,H,Q,u,a),ie=new IL(m,Q,U),ue=new qL(he,W,U,H),ae=new Sk(he,V,W,U),oe=new Wk(he,V,W,U),W.programs=J.programs,m.capabilities=U,m.extensions=V,m.properties=G,m.renderLists=ee,m.shadowMap=ie,m.state=H,m.info=W}fe();const pe=new WL(m,he);function me(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),g=!0}function ge(){console.log("THREE.WebGLRenderer: Context Restored."),g=!1;const e=W.autoReset,t=ie.enabled,n=ie.autoUpdate,i=ie.needsUpdate,r=ie.type;fe(),W.autoReset=e,ie.enabled=t,ie.autoUpdate=n,ie.needsUpdate=i,ie.type=r}function ve(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function ye(e){const t=e.target;t.removeEventListener("dispose",ye),function(e){(function(e){const t=G.get(e).programs;void 0!==t&&(t.forEach(function(e){J.releaseProgram(e)}),e.isShaderMaterial&&J.releaseShaderCache(e))})(e),G.remove(e)}(t)}this.xr=pe,this.getContext=function(){return he},this.getContextAttributes=function(){return he.getContextAttributes()},this.forceContextLoss=function(){const e=V.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=V.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return T},this.setPixelRatio=function(e){void 0!==e&&(T=e,this.setSize(C,E,!1))},this.getSize=function(e){return e.set(C,E)},this.setSize=function(e,n){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];pe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(C=e,E=n,t.width=Math.floor(e*T),t.height=Math.floor(n*T),!0===i&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(C*T,E*T).floor()},this.setDrawingBufferSize=function(e,n,i){C=e,E=n,T=i,t.width=Math.floor(e*i),t.height=Math.floor(n*i),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(w)},this.getViewport=function(e){return e.copy(P)},this.setViewport=function(e,t,n,i){e.isVector4?P.set(e.x,e.y,e.z,e.w):P.set(e,t,n,i),H.viewport(w.copy(P).multiplyScalar(T).floor())},this.getScissor=function(e){return e.copy(L)},this.setScissor=function(e,t,n,i){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,i),H.scissor(S.copy(L).multiplyScalar(T).floor())},this.getScissorTest=function(){return D},this.setScissorTest=function(e){H.setScissorTest(D=e)},this.setOpaqueSort=function(e){A=e},this.setTransparentSort=function(e){k=e},this.getClearColor=function(e){return e.copy(re.getClearColor())},this.setClearColor=function(){re.setClearColor.apply(re,arguments)},this.getClearAlpha=function(){return re.getClearAlpha()},this.setClearAlpha=function(){re.setClearAlpha.apply(re,arguments)},this.clear=function(){let e=0;(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(e|=16384),(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(e|=256),(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])&&(e|=1024),he.clear(e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",me,!1),t.removeEventListener("webglcontextrestored",ge,!1),t.removeEventListener("webglcontextcreationerror",ve,!1),ee.dispose(),te.dispose(),G.dispose(),X.dispose(),Y.dispose(),Q.dispose(),ce.dispose(),ue.dispose(),J.dispose(),pe.dispose(),pe.removeEventListener("sessionstart",be),pe.removeEventListener("sessionend",_e),O&&(O.dispose(),O=null),we.stop()},this.renderBufferDirect=function(e,t,n,i,r,s){null===t&&(t=j);const a=r.isMesh&&r.matrixWorld.determinant()<0,o=function(e,t,n,i,r){!0!==t.isScene&&(t=j);q.resetTextureUnits();const s=t.fog,a=i.isMeshStandardMaterial?t.environment:null,o=null===x?m.outputEncoding:!0===x.isXRRenderTarget?x.texture.encoding:gC,l=(i.isMeshStandardMaterial?Y:X).get(i.envMap||a),c=!0===i.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!i.normalMap&&!!n.attributes.tangent,h=!!n.morphAttributes.position,f=!!n.morphAttributes.normal,p=!!n.morphAttributes.color,g=i.toneMapped?m.toneMapping:RS,v=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,y=void 0!==v?v.length:0,w=G.get(i),S=d.state.lights;if(!0===N&&(!0===I||e!==_)){const t=e===_&&i.id===b;ne.setState(i,e,t)}let M=!1;i.version===w.__version?w.needsLights&&w.lightsStateVersion!==S.state.version||w.outputEncoding!==o||r.isInstancedMesh&&!1===w.instancing?M=!0:r.isInstancedMesh||!0!==w.instancing?r.isSkinnedMesh&&!1===w.skinning?M=!0:r.isSkinnedMesh||!0!==w.skinning?w.envMap!==l||!0===i.fog&&w.fog!==s?M=!0:void 0===w.numClippingPlanes||w.numClippingPlanes===ne.numPlanes&&w.numIntersection===ne.numIntersection?(w.vertexAlphas!==c||w.vertexTangents!==u||w.morphTargets!==h||w.morphNormals!==f||w.morphColors!==p||w.toneMapping!==g||!0===U.isWebGL2&&w.morphTargetsCount!==y)&&(M=!0):M=!0:M=!0:M=!0:(M=!0,w.__version=i.version);let C=w.currentProgram;!0===M&&(C=Te(i,t,r));let A=!1,k=!1,P=!1;const L=C.getUniforms(),D=w.uniforms;H.useProgram(C.program)&&(A=!0,k=!0,P=!0);i.id!==b&&(b=i.id,k=!0);if(A||_!==e){if(L.setValue(he,"projectionMatrix",e.projectionMatrix),U.logarithmicDepthBuffer&&L.setValue(he,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),_!==e&&(_=e,k=!0,P=!0),i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshStandardMaterial||i.envMap){const t=L.map.cameraPosition;void 0!==t&&t.setValue(he,F.setFromMatrixPosition(e.matrixWorld))}(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial)&&L.setValue(he,"isOrthographic",!0===e.isOrthographicCamera),(i.isMeshPhongMaterial||i.isMeshToonMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.isShadowMaterial||r.isSkinnedMesh)&&L.setValue(he,"viewMatrix",e.matrixWorldInverse)}if(r.isSkinnedMesh){L.setOptional(he,r,"bindMatrix"),L.setOptional(he,r,"bindMatrixInverse");const e=r.skeleton;e&&(U.floatVertexTextures?(null===e.boneTexture&&e.computeBoneTexture(),L.setValue(he,"boneTexture",e.boneTexture,q),L.setValue(he,"boneTextureSize",e.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const R=n.morphAttributes;(void 0!==R.position||void 0!==R.normal||void 0!==R.color&&!0===U.isWebGL2)&&se.update(r,n,C);(k||w.receiveShadow!==r.receiveShadow)&&(w.receiveShadow=r.receiveShadow,L.setValue(he,"receiveShadow",r.receiveShadow));i.isMeshGouraudMaterial&&null!==i.envMap&&(D.envMap.value=l,D.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);k&&(L.setValue(he,"toneMappingExposure",m.toneMappingExposure),w.needsLights&&(B=P,(z=D).ambientLightColor.needsUpdate=B,z.lightProbe.needsUpdate=B,z.directionalLights.needsUpdate=B,z.directionalLightShadows.needsUpdate=B,z.pointLights.needsUpdate=B,z.pointLightShadows.needsUpdate=B,z.spotLights.needsUpdate=B,z.spotLightShadows.needsUpdate=B,z.rectAreaLights.needsUpdate=B,z.hemisphereLights.needsUpdate=B),s&&!0===i.fog&&$.refreshFogUniforms(D,s),$.refreshMaterialUniforms(D,i,T,E,O),$P.upload(he,w.uniformsList,D,q));var z,B;i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&($P.upload(he,w.uniformsList,D,q),i.uniformsNeedUpdate=!1);i.isSpriteMaterial&&L.setValue(he,"center",r.center);if(L.setValue(he,"modelViewMatrix",r.modelViewMatrix),L.setValue(he,"normalMatrix",r.normalMatrix),L.setValue(he,"modelMatrix",r.matrixWorld),i.isShaderMaterial||i.isRawShaderMaterial){const e=i.uniformsGroups;for(let t=0,n=e.length;t<n;t++)if(U.isWebGL2){const n=e[t];ue.update(n,C),ue.bind(n,C)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return C}(e,t,n,i,r);H.setMaterial(i,a);let l=n.index,c=1;!0===i.wireframe&&(l=Z.getWireframeAttribute(n),c=2);const u=n.drawRange,h=n.attributes.position;let f=u.start*c,p=(u.start+u.count)*c;null!==s&&(f=Math.max(f,s.start*c),p=Math.min(p,(s.start+s.count)*c)),null!==l?(f=Math.max(f,0),p=Math.min(p,l.count)):void 0!==h&&null!==h&&(f=Math.max(f,0),p=Math.min(p,h.count));const g=p-f;if(g<0||g===1/0)return;let v;ce.setup(r,i,o,n,l);let y=ae;if(null!==l&&(v=K.get(l),y=oe,y.setIndex(v)),r.isMesh)!0===i.wireframe?(H.setLineWidth(i.wireframeLinewidth*B()),y.setMode(1)):y.setMode(4);else if(r.isLine){let e=i.linewidth;void 0===e&&(e=1),H.setLineWidth(e*B()),r.isLineSegments?y.setMode(1):r.isLineLoop?y.setMode(2):y.setMode(3)}else r.isPoints?y.setMode(0):r.isSprite&&y.setMode(4);if(r.isInstancedMesh)y.renderInstances(f,g,r.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);y.renderInstances(f,g,t)}else y.render(f,g)},this.compile=function(e,t){function n(e,t,n){!0===e.transparent&&e.side===Jw&&!1===e.forceSinglePass?(e.side=Qw,e.needsUpdate=!0,Te(e,t,n),e.side=Zw,e.needsUpdate=!0,Te(e,t,n),e.side=Jw):Te(e,t,n)}d=te.get(e),d.init(),p.push(d),e.traverseVisible(function(e){e.isLight&&e.layers.test(t.layers)&&(d.pushLight(e),e.castShadow&&d.pushShadow(e))}),d.setupLights(m.useLegacyLights),e.traverse(function(t){const i=t.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++){n(i[r],e,t)}else n(i,e,t)}),p.pop(),d=null};let xe=null;function be(){we.stop()}function _e(){we.start()}const we=new pk;function Se(e,t,n,i){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)d.pushLight(e),e.castShadow&&d.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||R.intersectsSprite(e)){i&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=Q.update(e),r=e.material;r.visible&&h.push(e,t,r,n,F.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.frame!==W.render.frame&&(e.skeleton.update(),e.skeleton.frame=W.render.frame),!e.frustumCulled||R.intersectsObject(e))){i&&F.setFromMatrixPosition(e.matrixWorld).applyMatrix4(z);const t=Q.update(e),r=e.material;if(Array.isArray(r)){const i=t.groups;for(let s=0,a=i.length;s<a;s++){const a=i[s],o=r[a.materialIndex];o&&o.visible&&h.push(e,t,o,n,F.z,a)}}else r.visible&&h.push(e,t,r,n,F.z,null)}const r=e.children;for(let s=0,a=r.length;s<a;s++)Se(r[s],t,n,i)}function Me(e,t,n,i){const r=e.opaque,a=e.transmissive,o=e.transparent;d.setupLightsView(n),!0===N&&ne.setGlobalState(m.clippingPlanes,n),a.length>0&&function(e,t,n){const i=U.isWebGL2;null===O&&(O=new VE(1024,1024,{generateMipmaps:!0,type:V.has("EXT_color_buffer_half_float")?hM:rM,minFilter:nM,samples:i&&!0===s?4:0}));const r=m.getRenderTarget();m.setRenderTarget(O),m.clear();const a=m.toneMapping;m.toneMapping=RS,Ce(e,t,n),m.toneMapping=a,q.updateMultisampleRenderTarget(O),q.updateRenderTargetMipmap(O),m.setRenderTarget(r)}(r,t,n),i&&H.viewport(w.copy(i)),r.length>0&&Ce(r,t,n),a.length>0&&Ce(a,t,n),o.length>0&&Ce(o,t,n),H.buffers.depth.setTest(!0),H.buffers.depth.setMask(!0),H.buffers.color.setMask(!0),H.setPolygonOffset(!1)}function Ce(e,t,n){const i=!0===t.isScene?t.overrideMaterial:null;for(let r=0,s=e.length;r<s;r++){const s=e[r],a=s.object,o=s.geometry,l=null===i?s.material:i,c=s.group;a.layers.test(n.layers)&&Ee(a,t,n,o,l,c)}}function Ee(e,t,n,i,r,s){e.onBeforeRender(m,t,n,i,r,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),r.onBeforeRender(m,t,n,i,e,s),!0===r.transparent&&r.side===Jw&&!1===r.forceSinglePass?(r.side=Qw,r.needsUpdate=!0,m.renderBufferDirect(n,t,i,r,e,s),r.side=Zw,r.needsUpdate=!0,m.renderBufferDirect(n,t,i,r,e,s),r.side=Jw):m.renderBufferDirect(n,t,i,r,e,s),e.onAfterRender(m,t,n,i,r,s)}function Te(e,t,n){!0!==t.isScene&&(t=j);const i=G.get(e),r=d.state.lights,s=d.state.shadowsArray,a=r.state.version,o=J.getParameters(e,r.state,s,t,n),l=J.getProgramCacheKey(o);let c=i.programs;i.environment=e.isMeshStandardMaterial?t.environment:null,i.fog=t.fog,i.envMap=(e.isMeshStandardMaterial?Y:X).get(e.envMap||i.environment),void 0===c&&(e.addEventListener("dispose",ye),c=new Map,i.programs=c);let u=c.get(l);if(void 0!==u){if(i.currentProgram===u&&i.lightsStateVersion===a)return Ae(e,o),u}else o.uniforms=J.getUniforms(e),e.onBuild(n,o,m),e.onBeforeCompile(o,m),u=J.acquireProgram(o,l),c.set(l,u),i.uniforms=o.uniforms;const h=i.uniforms;(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=ne.uniform),Ae(e,o),i.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),i.lightsStateVersion=a,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotLightMatrix.value=r.state.spotLightMatrix,h.spotLightMap.value=r.state.spotLightMap,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const f=u.getUniforms(),p=$P.seqWithValue(f.seq,h);return i.currentProgram=u,i.uniformsList=p,u}function Ae(e,t){const n=G.get(e);n.outputEncoding=t.outputEncoding,n.instancing=t.instancing,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}we.setAnimationLoop(function(e){xe&&xe(e)}),"undefined"!==typeof self&&we.setContext(self),this.setAnimationLoop=function(e){xe=e,pe.setAnimationLoop(e),null===e?we.stop():we.start()},pe.addEventListener("sessionstart",be),pe.addEventListener("sessionend",_e),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===g)return;!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===pe.enabled&&!0===pe.isPresenting&&(!0===pe.cameraAutoUpdate&&pe.updateCamera(t),t=pe.getCamera()),!0===e.isScene&&e.onBeforeRender(m,e,t,x),d=te.get(e,p.length),d.init(),p.push(d),z.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),R.setFromProjectionMatrix(z),I=this.localClippingEnabled,N=ne.init(this.clippingPlanes,I),h=ee.get(e,f.length),h.init(),f.push(h),Se(e,t,0,m.sortObjects),h.finish(),!0===m.sortObjects&&h.sort(A,k),!0===N&&ne.beginShadows();const n=d.state.shadowsArray;if(ie.render(n,e,t),!0===N&&ne.endShadows(),!0===this.info.autoReset&&this.info.reset(),re.render(h,e),d.setupLights(m.useLegacyLights),t.isArrayCamera){const n=t.cameras;for(let t=0,i=n.length;t<i;t++){const i=n[t];Me(h,e,i,i.viewport)}}else Me(h,e,t);null!==x&&(q.updateMultisampleRenderTarget(x),q.updateRenderTargetMipmap(x)),!0===e.isScene&&e.onAfterRender(m,e,t),ce.resetDefaultState(),b=-1,_=null,p.pop(),d=p.length>0?p[p.length-1]:null,f.pop(),h=f.length>0?f[f.length-1]:null},this.getActiveCubeFace=function(){return v},this.getActiveMipmapLevel=function(){return y},this.getRenderTarget=function(){return x},this.setRenderTargetTextures=function(e,t,n){G.get(e.texture).__webglTexture=t,G.get(e.depthTexture).__webglTexture=n;const i=G.get(e);i.__hasExternalTextures=!0,i.__hasExternalTextures&&(i.__autoAllocateDepthBuffer=void 0===n,i.__autoAllocateDepthBuffer||!0===V.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),i.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(e,t){const n=G.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;x=e,v=t,y=n;let i=!0,r=null,s=!1,a=!1;if(e){const n=G.get(e);void 0!==n.__useDefaultFramebuffer?(H.bindFramebuffer(36160,null),i=!1):void 0===n.__webglFramebuffer?q.setupRenderTarget(e):n.__hasExternalTextures&&q.rebindTextures(e,G.get(e.texture).__webglTexture,G.get(e.depthTexture).__webglTexture);const o=e.texture;(o.isData3DTexture||o.isDataArrayTexture||o.isCompressedArrayTexture)&&(a=!0);const l=G.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(r=l[t],s=!0):r=U.isWebGL2&&e.samples>0&&!1===q.useMultisampledRTT(e)?G.get(e).__webglMultisampledFramebuffer:l,w.copy(e.viewport),S.copy(e.scissor),M=e.scissorTest}else w.copy(P).multiplyScalar(T).floor(),S.copy(L).multiplyScalar(T).floor(),M=D;if(H.bindFramebuffer(36160,r)&&U.drawBuffers&&i&&H.drawBuffers(e,r),H.viewport(w),H.scissor(S),H.setScissorTest(M),s){const i=G.get(e.texture);he.framebufferTexture2D(36160,36064,34069+t,i.__webglTexture,n)}else if(a){const i=G.get(e.texture),r=t||0;he.framebufferTextureLayer(36160,36064,i.__webglTexture,n||0,r)}b=-1},this.readRenderTargetPixels=function(e,t,n,i,r,s,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let o=G.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(o=o[a]),o){H.bindFramebuffer(36160,o);try{const a=e.texture,o=a.format,l=a.type;if(o!==gM&&le.convert(o)!==he.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const c=l===hM&&(V.has("EXT_color_buffer_half_float")||U.isWebGL2&&V.has("EXT_color_buffer_float"));if(l!==rM&&le.convert(l)!==he.getParameter(35738)&&(l!==uM||!(U.isWebGL2||V.has("OES_texture_float")||V.has("WEBGL_color_buffer_float")))&&!c)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-i&&n>=0&&n<=e.height-r&&he.readPixels(t,n,i,r,le.convert(o),le.convert(l),s)}finally{const e=null!==x?G.get(x).__webglFramebuffer:null;H.bindFramebuffer(36160,e)}}},this.copyFramebufferToTexture=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=Math.pow(2,-n),r=Math.floor(t.image.width*i),s=Math.floor(t.image.height*i);q.setTexture2D(t,0),he.copyTexSubImage2D(3553,n,0,0,e.x,e.y,r,s),H.unbindTexture()},this.copyTextureToTexture=function(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=t.image.width,s=t.image.height,a=le.convert(n.format),o=le.convert(n.type);q.setTexture2D(n,0),he.pixelStorei(37440,n.flipY),he.pixelStorei(37441,n.premultiplyAlpha),he.pixelStorei(3317,n.unpackAlignment),t.isDataTexture?he.texSubImage2D(3553,i,e.x,e.y,r,s,a,o,t.image.data):t.isCompressedTexture?he.compressedTexSubImage2D(3553,i,e.x,e.y,t.mipmaps[0].width,t.mipmaps[0].height,a,t.mipmaps[0].data):he.texSubImage2D(3553,i,e.x,e.y,a,o,t.image),0===i&&n.generateMipmaps&&he.generateMipmap(3553),H.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(m.isWebGL1Renderer)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");const s=e.max.x-e.min.x+1,a=e.max.y-e.min.y+1,o=e.max.z-e.min.z+1,l=le.convert(i.format),c=le.convert(i.type);let u;if(i.isData3DTexture)q.setTexture3D(i,0),u=32879;else{if(!i.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");q.setTexture2DArray(i,0),u=35866}he.pixelStorei(37440,i.flipY),he.pixelStorei(37441,i.premultiplyAlpha),he.pixelStorei(3317,i.unpackAlignment);const h=he.getParameter(3314),d=he.getParameter(32878),f=he.getParameter(3316),p=he.getParameter(3315),g=he.getParameter(32877),v=n.isCompressedTexture?n.mipmaps[0]:n.image;he.pixelStorei(3314,v.width),he.pixelStorei(32878,v.height),he.pixelStorei(3316,e.min.x),he.pixelStorei(3315,e.min.y),he.pixelStorei(32877,e.min.z),n.isDataTexture||n.isData3DTexture?he.texSubImage3D(u,r,t.x,t.y,t.z,s,a,o,l,c,v.data):n.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),he.compressedTexSubImage3D(u,r,t.x,t.y,t.z,s,a,o,l,v.data)):he.texSubImage3D(u,r,t.x,t.y,t.z,s,a,o,l,c,v),he.pixelStorei(3314,h),he.pixelStorei(32878,d),he.pixelStorei(3316,f),he.pixelStorei(3315,p),he.pixelStorei(32877,g),0===r&&i.generateMipmaps&&he.generateMipmap(u),H.unbindTexture()},this.initTexture=function(e){e.isCubeTexture?q.setTextureCube(e,0):e.isData3DTexture?q.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?q.setTexture2DArray(e,0):q.setTexture2D(e,0),H.unbindTexture()},this.resetState=function(){v=0,y=0,x=null,H.reset(),ce.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Object.defineProperties(XL.prototype,{physicallyCorrectLights:{get:function(){return console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights},set:function(e){console.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}}});class YL extends XL{}YL.prototype.isWebGL1Renderer=!0;class KL{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new cA(e),this.density=t}clone(){return new KL(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class ZL{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new cA(e),this.near=t,this.far=n}clone(){return new ZL(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class QL extends GT{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t}get autoUpdate(){return console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){console.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class JL{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=UC,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=sE()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let i=0,r=this.stride;i<r;i++)this.array[e+i]=t.array[n+i];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sE()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=sE()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const $L=new SE;class eD{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=i}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)$L.fromBufferAttribute(this,t),$L.applyMatrix4(e),this.setXYZ(t,$L.x,$L.y,$L.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)$L.fromBufferAttribute(this,t),$L.applyNormalMatrix(e),this.setXYZ(t,$L.x,$L.y,$L.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)$L.fromBufferAttribute(this,t),$L.transformDirection(e),this.setXYZ(t,$L.x,$L.y,$L.z);return this}setX(e,t){return this.normalized&&(t=fE(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=fE(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=fE(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=fE(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=dE(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=dE(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=dE(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=dE(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=fE(t,this.array),n=fE(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=fE(t,this.array),n=fE(n,this.array),i=fE(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this}setXYZW(e,t,n,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=fE(t,this.array),n=fE(n,this.array),i=fE(i,this.array),r=fE(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=i,this.data.array[e+3]=r,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new pA(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new eD(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class tD extends rA{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new cA(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let nD;const iD=new SE,rD=new SE,sD=new SE,aD=new mE,oD=new mE,lD=new bT,cD=new SE,uD=new SE,hD=new SE,dD=new mE,fD=new mE,pD=new mE;class mD extends GT{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",void 0===nD){nD=new DA;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new JL(e,5);nD.setIndex([0,1,2,0,2,3]),nD.setAttribute("position",new eD(t,3,0,!1)),nD.setAttribute("uv",new eD(t,2,3,!1))}this.geometry=nD,this.material=void 0!==e?e:new tD,this.center=new mE(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),rD.setFromMatrixScale(this.matrixWorld),lD.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),sD.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&rD.multiplyScalar(-sD.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const s=this.center;gD(cD.set(-.5,-.5,0),sD,s,rD,i,r),gD(uD.set(.5,-.5,0),sD,s,rD,i,r),gD(hD.set(.5,.5,0),sD,s,rD,i,r),dD.set(0,0),fD.set(1,0),pD.set(1,1);let a=e.ray.intersectTriangle(cD,uD,hD,!1,iD);if(null===a&&(gD(uD.set(-.5,.5,0),sD,s,rD,i,r),fD.set(0,1),a=e.ray.intersectTriangle(cD,hD,uD,!1,iD),null===a))return;const o=e.ray.origin.distanceTo(iD);o<e.near||o>e.far||t.push({distance:o,point:iD.clone(),uv:nA.getUV(iD,cD,uD,hD,dD,fD,pD,new mE),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function gD(e,t,n,i,r,s){aD.subVectors(e,n).addScalar(.5).multiply(i),void 0!==r?(oD.x=s*aD.x-r*aD.y,oD.y=r*aD.x+s*aD.y):oD.copy(aD),e.copy(t),e.x+=oD.x,e.y+=oD.y,e.applyMatrix4(lD)}const vD=new SE,yD=new SE;class xD extends GT{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,i=t.length;n<i;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const i=this.levels;let r;for(r=0;r<i.length&&!(t<i[r].distance);r++);return i.splice(r,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,i;for(n=1,i=t.length;n<i;n++){let i=t[n].distance;if(t[n].object.visible&&(i-=i*t[n].hysteresis),e<i)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){vD.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(vD);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){vD.setFromMatrixPosition(e.matrixWorld),yD.setFromMatrixPosition(this.matrixWorld);const n=vD.distanceTo(yD)/e.zoom;let i,r;for(t[0].object.visible=!0,i=1,r=t.length;i<r;i++){let e=t[i].distance;if(t[i].object.visible&&(e-=e*t[i].hysteresis),!(n>=e))break;t[i-1].object.visible=!1,t[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)t[i].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const e=n[i];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const bD=new SE,_D=new BE,wD=new BE,SD=new SE,MD=new bT;class CD extends XA{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new bT,this.bindMatrixInverse=new bT}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,this}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new BE,t=this.geometry.attributes.skinWeight;for(let n=0,i=t.count;n<i;n++){e.fromBufferAttribute(t,n);const i=1/e.manhattanLength();i!==1/0?e.multiplyScalar(i):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(e,t){const n=this.skeleton,i=this.geometry;_D.fromBufferAttribute(i.attributes.skinIndex,e),wD.fromBufferAttribute(i.attributes.skinWeight,e),bD.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let r=0;r<4;r++){const e=wD.getComponent(r);if(0!==e){const i=_D.getComponent(r);MD.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(SD.copy(bD).applyMatrix4(MD),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class ED extends GT{constructor(){super(),this.isBone=!0,this.type="Bone"}}class TD extends jE{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:YS,arguments.length>9&&void 0!==arguments[9]?arguments[9]:YS,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const AD=new bT,kD=new bT;class PD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=sE(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new bT)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new bT;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,s=e.length;r<s;r++){const i=e[r]?e[r].matrixWorld:kD;AD.multiplyMatrices(i,t[r]),AD.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)}clone(){return new PD(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=uE(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new TD(t,e,e,gM,uM);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,i=e.bones.length;n<i;n++){const i=e.bones[n];let r=t[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new ED),this.bones.push(r),this.boneInverses.push((new bT).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let i=0,r=t.length;i<r;i++){const r=t[i];e.bones.push(r.uuid);const s=n[i];e.boneInverses.push(s.toArray())}return e}}class LD extends pA{constructor(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const DD=new bT,RD=new bT,ND=[],ID=new bT,OD=new XA;class zD extends XA{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new LD(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1;for(let i=0;i<n;i++)this.setMatrixAt(i,ID)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}raycast(e,t){const n=this.matrixWorld,i=this.count;if(OD.geometry=this.geometry,OD.material=this.material,void 0!==OD.material)for(let r=0;r<i;r++){this.getMatrixAt(r,DD),RD.multiplyMatrices(n,DD),OD.matrixWorld=RD,OD.raycast(e,ND);for(let e=0,n=ND.length;e<n;e++){const n=ND[e];n.instanceId=r,n.object=this,t.push(n)}ND.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new LD(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class FD extends rA{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new cA(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const jD=new SE,BD=new SE,VD=new bT,UD=new xT,HD=new hT;class WD extends GT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new DA,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FD;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,i=t.count;e<i;e++)jD.fromBufferAttribute(t,e-1),BD.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=jD.distanceTo(BD);e.setAttribute("lineDistance",new SA(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),HD.copy(n.boundingSphere),HD.applyMatrix4(i),HD.radius+=r,!1===e.ray.intersectsSphere(HD))return;VD.copy(i).invert(),UD.copy(e.ray).applyMatrix4(VD);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=new SE,c=new SE,u=new SE,h=new SE,d=this.isLineSegments?2:1,f=n.index,p=n.attributes.position;if(null!==f){for(let n=Math.max(0,s.start),i=Math.min(f.count,s.start+s.count)-1;n<i;n+=d){const i=f.getX(n),r=f.getX(n+1);l.fromBufferAttribute(p,i),c.fromBufferAttribute(p,r);if(UD.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const s=e.ray.origin.distanceTo(h);s<e.near||s>e.far||t.push({distance:s,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else{for(let n=Math.max(0,s.start),i=Math.min(p.count,s.start+s.count)-1;n<i;n+=d){l.fromBufferAttribute(p,n),c.fromBufferAttribute(p,n+1);if(UD.distanceSqToSegment(l,c,h,u)>o)continue;h.applyMatrix4(this.matrixWorld);const i=e.ray.origin.distanceTo(h);i<e.near||i>e.far||t.push({distance:i,point:u.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}const GD=new SE,qD=new SE;class XD extends WD{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,i=t.count;e<i;e+=2)GD.fromBufferAttribute(t,e),qD.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+GD.distanceTo(qD);e.setAttribute("lineDistance",new SA(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class YD extends WD{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class KD extends rA{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new cA(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const ZD=new bT,QD=new xT,JD=new hT,$D=new SE;class eR extends GT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new DA,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new KD;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,i=this.matrixWorld,r=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),JD.copy(n.boundingSphere),JD.applyMatrix4(i),JD.radius+=r,!1===e.ray.intersectsSphere(JD))return;ZD.copy(i).invert(),QD.copy(e.ray).applyMatrix4(ZD);const a=r/((this.scale.x+this.scale.y+this.scale.z)/3),o=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,s.start),r=Math.min(l.count,s.start+s.count);n<r;n++){const r=l.getX(n);$D.fromBufferAttribute(c,r),tR($D,r,o,i,e,t,this)}}else{for(let n=Math.max(0,s.start),r=Math.min(c.count,s.start+s.count);n<r;n++)$D.fromBufferAttribute(c,n),tR($D,n,o,i,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function tR(e,t,n,i,r,s,a){const o=QD.distanceSqToPoint(e);if(o<n){const n=new SE;QD.closestPointToPoint(e,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;s.push({distance:l,distanceToRay:Math.sqrt(o),point:n,index:t,face:null,object:a})}}class nR extends jE{constructor(e,t,n,i,r,s,a,o,l){super(e,t,n,i,r,s,a,o,l),this.isVideoTexture=!0,this.minFilter=void 0!==s?s:$S,this.magFilter=void 0!==r?r:$S,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)})}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class iR extends jE{constructor(e,t,n){super({width:e,height:t}),this.isFramebufferTexture=!0,this.format=n,this.magFilter=YS,this.minFilter=YS,this.generateMipmaps=!1,this.needsUpdate=!0}}class rR extends jE{constructor(e,t,n,i,r,s,a,o,l,c,u,h){super(null,s,a,o,l,c,i,r,u,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class sR extends rR{constructor(e,t,n,i,r,s){super(e,t,n,r,s),this.isCompressedArrayTexture=!0,this.image.depth=i,this.wrapR=qS}}class aR extends jE{constructor(e,t,n,i,r,s,a,o,l){super(e,t,n,i,r,s,a,o,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class oR{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,i=this.getPoint(0),r=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),r+=n.distanceTo(i),t.push(r),i=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let i=0;const r=n.length;let s;s=t||e*n[r-1];let a,o=0,l=r-1;for(;o<=l;)if(i=Math.floor(o+(l-o)/2),a=n[i]-s,a<0)o=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===s)return i/(r-1);const c=n[i];return(i+(s-c)/(n[i+1]-c))/(r-1)}getTangent(e,t){const n=1e-4;let i=e-n,r=e+n;i<0&&(i=0),r>1&&(r=1);const s=this.getPoint(i),a=this.getPoint(r),o=t||(s.isVector2?new mE:new SE);return o.copy(a).sub(s).normalize(),o}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new SE,i=[],r=[],s=[],a=new SE,o=new bT;for(let d=0;d<=e;d++){const t=d/e;i[d]=this.getTangentAt(t,new SE)}r[0]=new SE,s[0]=new SE;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),s[0].crossVectors(i[0],r[0]);for(let d=1;d<=e;d++){if(r[d]=r[d-1].clone(),s[d]=s[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(aE(i[d-1].dot(i[d]),-1,1));r[d].applyMatrix4(o.makeRotationAxis(a,e))}s[d].crossVectors(i[d],r[d])}if(!0===t){let t=Math.acos(aE(r[0].dot(r[e]),-1,1));t/=e,i[0].dot(a.crossVectors(r[0],r[e]))>0&&(t=-t);for(let n=1;n<=e;n++)r[n].applyMatrix4(o.makeRotationAxis(i[n],t*n)),s[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class lR extends oR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=i,this.aStartAngle=r,this.aEndAngle=s,this.aClockwise=a,this.aRotation=o}getPoint(e,t){const n=t||new mE,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const s=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=i;for(;r>i;)r-=i;r<Number.EPSILON&&(r=s?0:i),!0!==this.aClockwise||s||(r===i?r=-i:r-=i);const a=this.aStartAngle+e*r;let o=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=o-this.aX,i=l-this.aY;o=n*e-i*t+this.aX,l=n*t+i*e+this.aY}return n.set(o,l)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class cR extends lR{constructor(e,t,n,i,r,s){super(e,t,n,n,i,r,s),this.isArcCurve=!0,this.type="ArcCurve"}}function uR(){let e=0,t=0,n=0,i=0;function r(r,s,a,o){e=r,t=a,n=-3*r+3*s-2*a-o,i=2*r-2*s+a+o}return{initCatmullRom:function(e,t,n,i,s){r(t,n,s*(n-e),s*(i-t))},initNonuniformCatmullRom:function(e,t,n,i,s,a,o){let l=(t-e)/s-(n-e)/(s+a)+(n-t)/a,c=(n-t)/a-(i-t)/(a+o)+(i-n)/o;l*=a,c*=a,r(t,n,l,c)},calc:function(r){const s=r*r;return e+t*r+n*s+i*(s*r)}}}const hR=new SE,dR=new uR,fR=new uR,pR=new uR;class mR extends oR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE,n=this.points,i=n.length,r=(i-(this.closed?0:1))*e;let s,a,o=Math.floor(r),l=r-o;this.closed?o+=o>0?0:(Math.floor(Math.abs(o)/i)+1)*i:0===l&&o===i-1&&(o=i-2,l=1),this.closed||o>0?s=n[(o-1)%i]:(hR.subVectors(n[0],n[1]).add(n[0]),s=hR);const c=n[o%i],u=n[(o+1)%i];if(this.closed||o+2<i?a=n[(o+2)%i]:(hR.subVectors(n[i-1],n[i-2]).add(n[i-1]),a=hR),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(s.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(u),e),i=Math.pow(u.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),i<1e-4&&(i=n),dR.initNonuniformCatmullRom(s.x,c.x,u.x,a.x,t,n,i),fR.initNonuniformCatmullRom(s.y,c.y,u.y,a.y,t,n,i),pR.initNonuniformCatmullRom(s.z,c.z,u.z,a.z,t,n,i)}else"catmullrom"===this.curveType&&(dR.initCatmullRom(s.x,c.x,u.x,a.x,this.tension),fR.initCatmullRom(s.y,c.y,u.y,a.y,this.tension),pR.initCatmullRom(s.z,c.z,u.z,a.z,this.tension));return t.set(dR.calc(l),fR.calc(l),pR.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new SE).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function gR(e,t,n,i,r){const s=.5*(i-t),a=.5*(r-n),o=e*e;return(2*n-2*i+s+a)*(e*o)+(-3*n+3*i-2*s-a)*o+s*e+n}function vR(e,t,n,i){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,i)}function yR(e,t,n,i,r){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,i)+function(e,t){return e*e*e*t}(e,r)}class xR extends oR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new mE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new mE;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mE,n=this.v0,i=this.v1,r=this.v2,s=this.v3;return t.set(yR(e,n.x,i.x,r.x,s.x),yR(e,n.y,i.y,r.y,s.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class bR extends oR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new SE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new SE;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=i}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE,n=this.v0,i=this.v1,r=this.v2,s=this.v3;return t.set(yR(e,n.x,i.x,r.x,s.x),yR(e,n.y,i.y,r.y,s.y),yR(e,n.z,i.z,r.z,s.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class _R extends oR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mE;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mE;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mE).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class wR extends oR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class SR extends oR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new mE;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mE,n=this.v0,i=this.v1,r=this.v2;return t.set(vR(e,n.x,i.x,r.x),vR(e,n.y,i.y,r.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class MR extends oR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new SE;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE,n=this.v0,i=this.v1,r=this.v2;return t.set(vR(e,n.x,i.x,r.x),vR(e,n.y,i.y,r.y),vR(e,n.z,i.z,r.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class CR extends oR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mE,n=this.points,i=(n.length-1)*e,r=Math.floor(i),s=i-r,a=n[0===r?r:r-1],o=n[r],l=n[r>n.length-2?n.length-1:r+1],c=n[r>n.length-3?n.length-1:r+2];return t.set(gR(s,a.x,o.x,l.x,c.x),gR(s,a.y,o.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new mE).fromArray(n))}return this}}var ER=Object.freeze({__proto__:null,ArcCurve:cR,CatmullRomCurve3:mR,CubicBezierCurve:xR,CubicBezierCurve3:bR,EllipseCurve:lR,LineCurve:_R,LineCurve3:wR,QuadraticBezierCurve:SR,QuadraticBezierCurve3:MR,SplineCurve:CR});class TR extends oR{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new _R(t,e))}getPoint(e,t){const n=e*this.getLength(),i=this.getCurveLengths();let r=0;for(;r<i.length;){if(i[r]>=n){const e=i[r]-n,s=this.curves[r],a=s.getLength(),o=0===a?0:1-e/a;return s.getPointAt(o,t)}r++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,i=this.curves.length;n<i;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const s=r[i],a=s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,o=s.getPoints(a);for(let e=0;e<o.length;e++){const i=o[e];n&&n.equals(i)||(t.push(i),n=i)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new ER[n.type]).fromJSON(n))}return this}}class AR extends TR{constructor(e){super(),this.type="Path",this.currentPoint=new mE,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new _R(this.currentPoint.clone(),new mE(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,i){const r=new SR(this.currentPoint.clone(),new mE(e,t),new mE(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this}bezierCurveTo(e,t,n,i,r,s){const a=new xR(this.currentPoint.clone(),new mE(e,t),new mE(n,i),new mE(r,s));return this.curves.push(a),this.currentPoint.set(r,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new CR(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,i,r,s){const a=this.currentPoint.x,o=this.currentPoint.y;return this.absarc(e+a,t+o,n,i,r,s),this}absarc(e,t,n,i,r,s){return this.absellipse(e,t,n,n,i,r,s),this}ellipse(e,t,n,i,r,s,a,o){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,i,r,s,a,o),this}absellipse(e,t,n,i,r,s,a,o){const l=new lR(e,t,n,i,r,s,a,o);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class kR extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new mE(0,-.5),new mE(.5,0),new mE(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:i},t=Math.floor(t),i=aE(i,0,2*Math.PI);const r=[],s=[],a=[],o=[],l=[],c=1/t,u=new SE,h=new mE,d=new SE,f=new SE,p=new SE;let m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.normalize(),o.push(d.x,d.y,d.z);break;case e.length-1:o.push(p.x,p.y,p.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),o.push(d.x,d.y,d.z),p.copy(f)}for(let v=0;v<=t;v++){const r=n+v*c*i,d=Math.sin(r),f=Math.cos(r);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*d,u.y=e[n].y,u.z=e[n].x*f,s.push(u.x,u.y,u.z),h.x=v/t,h.y=n/(e.length-1),a.push(h.x,h.y);const i=o[3*n+0]*d,r=o[3*n+1],c=o[3*n+0]*f;l.push(i,r,c)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,i=n,s=n+e.length,a=n+e.length+1,o=n+1;r.push(i,s,o),r.push(a,o,s)}this.setIndex(r),this.setAttribute("position",new SA(s,3)),this.setAttribute("uv",new SA(a,2)),this.setAttribute("normal",new SA(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kR(e.points,e.segments,e.phiStart,e.phiLength)}}class PR extends kR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const r=new AR;r.absarc(0,-t/2,e,1.5*Math.PI,0),r.absarc(0,t/2,e,0,.5*Math.PI),super(r.getPoints(n),i),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:i}}static fromJSON(e){return new PR(e.radius,e.length,e.capSegments,e.radialSegments)}}class LR extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:i},t=Math.max(3,t);const r=[],s=[],a=[],o=[],l=new SE,c=new mE;s.push(0,0,0),a.push(0,0,1),o.push(.5,.5);for(let u=0,h=3;u<=t;u++,h+=3){const r=n+u/t*i;l.x=e*Math.cos(r),l.y=e*Math.sin(r),s.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(s[h]/e+1)/2,c.y=(s[h+1]/e+1)/2,o.push(c.x,c.y)}for(let u=1;u<=t;u++)r.push(u,u+1,0);this.setIndex(r),this.setAttribute("position",new SA(s,3)),this.setAttribute("normal",new SA(a,3)),this.setAttribute("uv",new SA(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new LR(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class DR extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,s=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:o};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],h=[],d=[];let f=0;const p=[],m=n/2;let g=0;function v(n){const r=f,s=new mE,p=new SE;let v=0;const y=!0===n?e:t,x=!0===n?1:-1;for(let e=1;e<=i;e++)u.push(0,m*x,0),h.push(0,x,0),d.push(.5,.5),f++;const b=f;for(let e=0;e<=i;e++){const t=e/i*o+a,n=Math.cos(t),r=Math.sin(t);p.x=y*r,p.y=m*x,p.z=y*n,u.push(p.x,p.y,p.z),h.push(0,x,0),s.x=.5*n+.5,s.y=.5*r*x+.5,d.push(s.x,s.y),f++}for(let e=0;e<i;e++){const t=r+e,i=b+e;!0===n?c.push(i,i+1,t):c.push(i+1,i,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const s=new SE,v=new SE;let y=0;const x=(t-e)/n;for(let l=0;l<=r;l++){const c=[],g=l/r,y=g*(t-e)+e;for(let e=0;e<=i;e++){const t=e/i,r=t*o+a,l=Math.sin(r),p=Math.cos(r);v.x=y*l,v.y=-g*n+m,v.z=y*p,u.push(v.x,v.y,v.z),s.set(l,x,p).normalize(),h.push(s.x,s.y,s.z),d.push(t,1-g),c.push(f++)}p.push(c)}for(let e=0;e<i;e++)for(let t=0;t<r;t++){const n=p[t][e],i=p[t+1][e],r=p[t+1][e+1],s=p[t][e+1];c.push(n,i,s),c.push(i,r,s),y+=6}l.addGroup(g,y,0),g+=y}(),!1===s&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new SA(u,3)),this.setAttribute("normal",new SA(h,3)),this.setAttribute("uv",new SA(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new DR(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class RR extends DR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,i,r,s,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:s,thetaLength:a}}static fromJSON(e){return new RR(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class NR extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:i};const r=[],s=[];function a(e,t,n,i){const r=i+1,s=[];for(let a=0;a<=r;a++){s[a]=[];const i=e.clone().lerp(n,a/r),o=t.clone().lerp(n,a/r),l=r-a;for(let e=0;e<=l;e++)s[a][e]=0===e&&a===r?i:i.clone().lerp(o,e/l)}for(let a=0;a<r;a++)for(let e=0;e<2*(r-a)-1;e++){const t=Math.floor(e/2);e%2===0?(o(s[a][t+1]),o(s[a+1][t]),o(s[a][t])):(o(s[a][t+1]),o(s[a+1][t+1]),o(s[a+1][t]))}}function o(e){r.push(e.x,e.y,e.z)}function l(t,n){const i=3*t;n.x=e[i+0],n.y=e[i+1],n.z=e[i+2]}function c(e,t,n,i){i<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=i/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}function h(e){return Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))}!function(e){const n=new SE,i=new SE,r=new SE;for(let s=0;s<t.length;s+=3)l(t[s+0],n),l(t[s+1],i),l(t[s+2],r),a(n,i,r,e)}(i),function(e){const t=new SE;for(let n=0;n<r.length;n+=3)t.x=r[n+0],t.y=r[n+1],t.z=r[n+2],t.normalize().multiplyScalar(e),r[n+0]=t.x,r[n+1]=t.y,r[n+2]=t.z}(n),function(){const e=new SE;for(let t=0;t<r.length;t+=3){e.x=r[t+0],e.y=r[t+1],e.z=r[t+2];const n=u(e)/2/Math.PI+.5,i=h(e)/Math.PI+.5;s.push(n,1-i)}(function(){const e=new SE,t=new SE,n=new SE,i=new SE,a=new mE,o=new mE,l=new mE;for(let h=0,d=0;h<r.length;h+=9,d+=6){e.set(r[h+0],r[h+1],r[h+2]),t.set(r[h+3],r[h+4],r[h+5]),n.set(r[h+6],r[h+7],r[h+8]),a.set(s[d+0],s[d+1]),o.set(s[d+2],s[d+3]),l.set(s[d+4],s[d+5]),i.copy(e).add(t).add(n).divideScalar(3);const f=u(i);c(a,d+0,e,f),c(o,d+2,t,f),c(l,d+4,n,f)}})(),function(){for(let e=0;e<s.length;e+=6){const t=s[e+0],n=s[e+2],i=s[e+4],r=Math.max(t,n,i),a=Math.min(t,n,i);r>.9&&a<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),i<.2&&(s[e+4]+=1))}}()}(),this.setAttribute("position",new SA(r,3)),this.setAttribute("normal",new SA(r.slice(),3)),this.setAttribute("uv",new SA(s,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new NR(e.vertices,e.indices,e.radius,e.details)}}class IR extends NR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,i=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new IR(e.radius,e.detail)}}const OR=new SE,zR=new SE,FR=new SE,jR=new nA;class BR extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,i=Math.pow(10,n),r=Math.cos(iE*t),s=e.getIndex(),a=e.getAttribute("position"),o=s?s.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<o;e+=3){s?(l[0]=s.getX(e),l[1]=s.getX(e+1),l[2]=s.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:o}=jR;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),o.fromBufferAttribute(a,l[2]),jR.getNormal(FR),u[0]="".concat(Math.round(t.x*i),",").concat(Math.round(t.y*i),",").concat(Math.round(t.z*i)),u[1]="".concat(Math.round(n.x*i),",").concat(Math.round(n.y*i),",").concat(Math.round(n.z*i)),u[2]="".concat(Math.round(o.x*i),",").concat(Math.round(o.y*i),",").concat(Math.round(o.z*i)),u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],i=u[t],s=jR[c[e]],a=jR[c[t]],o="".concat(n,"_").concat(i),f="".concat(i,"_").concat(n);f in h&&h[f]?(FR.dot(h[f].normal)<=r&&(d.push(s.x,s.y,s.z),d.push(a.x,a.y,a.z)),h[f]=null):o in h||(h[o]={index0:l[e],index1:l[t],normal:FR.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];OR.fromBufferAttribute(a,t),zR.fromBufferAttribute(a,n),d.push(OR.x,OR.y,OR.z),d.push(zR.x,zR.y,zR.z)}this.setAttribute("position",new SA(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class VR extends AR{constructor(e){super(e),this.uuid=sE(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,i=this.holes.length;n<i;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new AR).fromJSON(n))}return this}}const UR=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const i=t&&t.length,r=i?t[0]*n:e.length;let s=HR(e,0,r,n,!0);const a=[];if(!s||s.next===s.prev)return a;let o,l,c,u,h,d,f;if(i&&(s=function(e,t,n,i){const r=[];let s,a,o,l,c;for(s=0,a=t.length;s<a;s++)o=t[s]*i,l=s<a-1?t[s+1]*i:e.length,c=HR(e,o,l,i,!1),c===c.next&&(c.steiner=!0),r.push(eN(c));for(r.sort(ZR),s=0;s<r.length;s++)n=QR(r[s],n);return n}(e,t,s,n)),e.length>80*n){o=c=e[0],l=u=e[1];for(let t=n;t<r;t+=n)h=e[t],d=e[t+1],h<o&&(o=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-o,u-l),f=0!==f?32767/f:0}return GR(s,a,n,o,l,f,0),a};function HR(e,t,n,i,r){let s,a;if(r===function(e,t,n,i){let r=0;for(let s=t,a=n-i;s<n;s+=i)r+=(e[a]-e[s])*(e[s+1]+e[a+1]),a=s;return r}(e,t,n,i)>0)for(s=t;s<n;s+=i)a=uN(s,e[s],e[s+1],a);else for(s=n-i;s>=t;s-=i)a=uN(s,e[s],e[s+1],a);return a&&rN(a,a.next)&&(hN(a),a=a.next),a}function WR(e,t){if(!e)return e;t||(t=e);let n,i=e;do{if(n=!1,i.steiner||!rN(i,i.next)&&0!==iN(i.prev,i,i.next))i=i.next;else{if(hN(i),i=t=i.prev,i===i.next)break;n=!0}}while(n||i!==t);return t}function GR(e,t,n,i,r,s,a){if(!e)return;!a&&s&&function(e,t,n,i){let r=e;do{0===r.z&&(r.z=$R(r.x,r.y,t,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,function(e){let t,n,i,r,s,a,o,l,c=1;do{for(n=e,e=null,s=null,a=0;n;){for(a++,i=n,o=0,t=0;t<c&&(o++,i=i.nextZ,i);t++);for(l=c;o>0||l>0&&i;)0!==o&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(a>1)}(r)}(e,i,r,s);let o,l,c=e;for(;e.prev!==e.next;)if(o=e.prev,l=e.next,s?XR(e,i,r,s):qR(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),hN(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?GR(e=YR(WR(e),t,n),t,n,i,r,s,2):2===a&&KR(e,t,n,i,r,s):GR(WR(e),t,n,i,r,s,1);break}}function qR(e){const t=e.prev,n=e,i=e.next;if(iN(t,n,i)>=0)return!1;const r=t.x,s=n.x,a=i.x,o=t.y,l=n.y,c=i.y,u=r<s?r<a?r:a:s<a?s:a,h=o<l?o<c?o:c:l<c?l:c,d=r>s?r>a?r:a:s>a?s:a,f=o>l?o>c?o:c:l>c?l:c;let p=i.next;for(;p!==t;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&tN(r,o,s,l,a,c,p.x,p.y)&&iN(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function XR(e,t,n,i){const r=e.prev,s=e,a=e.next;if(iN(r,s,a)>=0)return!1;const o=r.x,l=s.x,c=a.x,u=r.y,h=s.y,d=a.y,f=o<l?o<c?o:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,m=o>l?o>c?o:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,v=$R(f,p,t,n,i),y=$R(m,g,t,n,i);let x=e.prevZ,b=e.nextZ;for(;x&&x.z>=v&&b&&b.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==a&&tN(o,u,l,h,c,d,x.x,x.y)&&iN(x.prev,x,x.next)>=0)return!1;if(x=x.prevZ,b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==r&&b!==a&&tN(o,u,l,h,c,d,b.x,b.y)&&iN(b.prev,b,b.next)>=0)return!1;b=b.nextZ}for(;x&&x.z>=v;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==r&&x!==a&&tN(o,u,l,h,c,d,x.x,x.y)&&iN(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;b&&b.z<=y;){if(b.x>=f&&b.x<=m&&b.y>=p&&b.y<=g&&b!==r&&b!==a&&tN(o,u,l,h,c,d,b.x,b.y)&&iN(b.prev,b,b.next)>=0)return!1;b=b.nextZ}return!0}function YR(e,t,n){let i=e;do{const r=i.prev,s=i.next.next;!rN(r,s)&&sN(r,i,i.next,s)&&lN(r,s)&&lN(s,r)&&(t.push(r.i/n|0),t.push(i.i/n|0),t.push(s.i/n|0),hN(i),hN(i.next),i=e=s),i=i.next}while(i!==e);return WR(i)}function KR(e,t,n,i,r,s){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&nN(a,e)){let o=cN(a,e);return a=WR(a,a.next),o=WR(o,o.next),GR(a,t,n,i,r,s,0),void GR(o,t,n,i,r,s,0)}e=e.next}a=a.next}while(a!==e)}function ZR(e,t){return e.x-t.x}function QR(e,t){const n=function(e,t){let n,i=t,r=-1/0;const s=e.x,a=e.y;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){const e=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(e<=s&&e>r&&(r=e,n=i.x<i.next.x?i:i.next,e===s))return n}i=i.next}while(i!==t);if(!n)return null;const o=n,l=n.x,c=n.y;let u,h=1/0;i=n;do{s>=i.x&&i.x>=l&&s!==i.x&&tN(a<c?s:r,a,l,c,a<c?r:s,a,i.x,i.y)&&(u=Math.abs(a-i.y)/(s-i.x),lN(i,e)&&(u<h||u===h&&(i.x>n.x||i.x===n.x&&JR(n,i)))&&(n=i,h=u)),i=i.next}while(i!==o);return n}(e,t);if(!n)return t;const i=cN(n,e);return WR(i,i.next),WR(n,n.next)}function JR(e,t){return iN(e.prev,e,t.prev)<0&&iN(t.next,e,e.next)<0}function $R(e,t,n,i,r){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function eN(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function tN(e,t,n,i,r,s,a,o){return(r-a)*(t-o)>=(e-a)*(s-o)&&(e-a)*(i-o)>=(n-a)*(t-o)&&(n-a)*(s-o)>=(r-a)*(i-o)}function nN(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&sN(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(lN(e,t)&&lN(t,e)&&function(e,t){let n=e,i=!1;const r=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!==n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==e);return i}(e,t)&&(iN(e.prev,e,t.prev)||iN(e,t.prev,t))||rN(e,t)&&iN(e.prev,e,e.next)>0&&iN(t.prev,t,t.next)>0)}function iN(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function rN(e,t){return e.x===t.x&&e.y===t.y}function sN(e,t,n,i){const r=oN(iN(e,t,n)),s=oN(iN(e,t,i)),a=oN(iN(n,i,e)),o=oN(iN(n,i,t));return r!==s&&a!==o||(!(0!==r||!aN(e,n,t))||(!(0!==s||!aN(e,i,t))||(!(0!==a||!aN(n,e,i))||!(0!==o||!aN(n,t,i)))))}function aN(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function oN(e){return e>0?1:e<0?-1:0}function lN(e,t){return iN(e.prev,e,e.next)<0?iN(e,t,e.next)>=0&&iN(e,e.prev,t)>=0:iN(e,t,e.prev)<0||iN(e,e.next,t)<0}function cN(e,t){const n=new dN(e.i,e.x,e.y),i=new dN(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function uN(e,t,n,i){const r=new dN(e,t,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function hN(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function dN(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class fN{static area(e){const t=e.length;let n=0;for(let i=t-1,r=0;r<t;i=r++)n+=e[i].x*e[r].y-e[r].x*e[i].y;return.5*n}static isClockWise(e){return fN.area(e)<0}static triangulateShape(e,t){const n=[],i=[],r=[];pN(e),mN(n,e);let s=e.length;t.forEach(pN);for(let o=0;o<t.length;o++)i.push(s),s+=t[o].length,mN(n,t[o]);const a=UR(n,i);for(let o=0;o<a.length;o+=3)r.push(a.slice(o,o+3));return r}}function pN(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function mN(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class gN extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new VR([new mE(.5,.5),new mE(-.5,.5),new mE(-.5,-.5),new mE(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,i=[],r=[];for(let a=0,o=e.length;a<o;a++){s(e[a])}function s(e){const s=[],a=void 0!==t.curveSegments?t.curveSegments:12,o=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:vN;let g,v,y,x,b,_=!1;p&&(g=p.getSpacedPoints(o),_=!0,c=!1,v=p.computeFrenetFrames(o,!1),y=new SE,x=new SE,b=new SE),c||(f=0,u=0,h=0,d=0);const w=e.extractPoints(a);let S=w.shape;const M=w.holes;if(!fN.isClockWise(S)){S=S.reverse();for(let e=0,t=M.length;e<t;e++){const t=M[e];fN.isClockWise(t)&&(M[e]=t.reverse())}}const C=fN.triangulateShape(S,M),E=S;for(let t=0,n=M.length;t<n;t++){const e=M[t];S=S.concat(e)}function T(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const A=S.length,k=C.length;function P(e,t,n){let i,r,s;const a=e.x-t.x,o=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+o*o,h=a*c-o*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),f=t.x-o/h,p=t.y+a/h,m=((n.x-c/d-f)*c-(n.y+l/d-p)*l)/(a*c-o*l);i=f+a*m-e.x,r=p+o*m-e.y;const g=i*i+r*r;if(g<=2)return new mE(i,r);s=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(c)&&(e=!0),e?(i=-o,r=a,s=Math.sqrt(u)):(i=a,r=o,s=Math.sqrt(u/2))}return new mE(i/s,r/s)}const L=[];for(let t=0,n=E.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),L[t]=P(E[t],E[i],E[r]);const D=[];let R,N=L.concat();for(let t=0,n=M.length;t<n;t++){const e=M[t];R=[];for(let t=0,n=e.length,i=n-1,r=t+1;t<n;t++,i++,r++)i===n&&(i=0),r===n&&(r=0),R[t]=P(e[t],e[i],e[r]);D.push(R),N=N.concat(R)}for(let t=0;t<f;t++){const e=t/f,n=u*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+d;for(let t=0,r=E.length;t<r;t++){const e=T(E[t],L[t],i);z(e.x,e.y,-n)}for(let t=0,r=M.length;t<r;t++){const e=M[t];R=D[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],R[t],i);z(r.x,r.y,-n)}}}const I=h+d;for(let t=0;t<A;t++){const e=c?T(S[t],N[t],I):S[t];_?(x.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),b.copy(g[0]).add(x).add(y),z(b.x,b.y,b.z)):z(e.x,e.y,0)}for(let t=1;t<=o;t++)for(let e=0;e<A;e++){const n=c?T(S[e],N[e],I):S[e];_?(x.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),b.copy(g[t]).add(x).add(y),z(b.x,b.y,b.z)):z(n.x,n.y,l/o*t)}for(let t=f-1;t>=0;t--){const e=t/f,n=u*Math.cos(e*Math.PI/2),i=h*Math.sin(e*Math.PI/2)+d;for(let t=0,r=E.length;t<r;t++){const e=T(E[t],L[t],i);z(e.x,e.y,l+n)}for(let t=0,r=M.length;t<r;t++){const e=M[t];R=D[t];for(let t=0,r=e.length;t<r;t++){const r=T(e[t],R[t],i);_?z(r.x,r.y+g[o-1].y,g[o-1].x+n):z(r.x,r.y,l+n)}}}function O(e,t){let n=e.length;for(;--n>=0;){const i=n;let r=n-1;r<0&&(r=e.length-1);for(let e=0,n=o+2*f;e<n;e++){const n=A*e,s=A*(e+1);j(t+i+n,t+r+n,t+r+s,t+i+s)}}}function z(e,t,n){s.push(e),s.push(t),s.push(n)}function F(e,t,r){B(e),B(t),B(r);const s=i.length/3,a=m.generateTopUV(n,i,s-3,s-2,s-1);V(a[0]),V(a[1]),V(a[2])}function j(e,t,r,s){B(e),B(t),B(s),B(t),B(r),B(s);const a=i.length/3,o=m.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);V(o[0]),V(o[1]),V(o[3]),V(o[1]),V(o[2]),V(o[3])}function B(e){i.push(s[3*e+0]),i.push(s[3*e+1]),i.push(s[3*e+2])}function V(e){r.push(e.x),r.push(e.y)}!function(){const e=i.length/3;if(c){let e=0,t=A*e;for(let n=0;n<k;n++){const e=C[n];F(e[2]+t,e[1]+t,e[0]+t)}e=o+2*f,t=A*e;for(let n=0;n<k;n++){const e=C[n];F(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<k;e++){const t=C[e];F(t[2],t[1],t[0])}for(let e=0;e<k;e++){const t=C[e];F(t[0]+A*o,t[1]+A*o,t[2]+A*o)}}n.addGroup(e,i.length/3-e,0)}(),function(){const e=i.length/3;let t=0;O(E,t),t+=E.length;for(let n=0,i=M.length;n<i;n++){const e=M[n];O(e,t),t+=e.length}n.addGroup(e,i.length/3-e,1)}()}this.setAttribute("position",new SA(i,3)),this.setAttribute("uv",new SA(r,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let i=0,r=e.length;i<r;i++){const t=e[i];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const i=t[e.shapes[r]];n.push(i)}const i=e.options.extrudePath;return void 0!==i&&(e.options.extrudePath=(new ER[i.type]).fromJSON(i)),new gN(n,e.options)}}const vN={generateTopUV:function(e,t,n,i,r){const s=t[3*n],a=t[3*n+1],o=t[3*i],l=t[3*i+1],c=t[3*r],u=t[3*r+1];return[new mE(s,a),new mE(o,l),new mE(c,u)]},generateSideWallUV:function(e,t,n,i,r,s){const a=t[3*n],o=t[3*n+1],l=t[3*n+2],c=t[3*i],u=t[3*i+1],h=t[3*i+2],d=t[3*r],f=t[3*r+1],p=t[3*r+2],m=t[3*s],g=t[3*s+1],v=t[3*s+2];return Math.abs(o-u)<Math.abs(a-c)?[new mE(a,1-l),new mE(c,1-h),new mE(d,1-p),new mE(m,1-v)]:[new mE(o,1-l),new mE(u,1-h),new mE(f,1-p),new mE(g,1-v)]}};class yN extends NR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yN(e.radius,e.detail)}}class xN extends NR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new xN(e.radius,e.detail)}}class bN extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:s},n=Math.max(3,n),i=Math.max(1,i);const a=[],o=[],l=[],c=[];let u=e;const h=(t-e)/i,d=new SE,f=new mE;for(let p=0;p<=i;p++){for(let e=0;e<=n;e++){const i=r+e/n*s;d.x=u*Math.cos(i),d.y=u*Math.sin(i),o.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,c.push(f.x,f.y)}u+=h}for(let p=0;p<i;p++){const e=p*(n+1);for(let t=0;t<n;t++){const i=t+e,r=i,s=i+n+1,o=i+n+2,l=i+1;a.push(r,s,l),a.push(s,o,l)}}this.setIndex(a),this.setAttribute("position",new SA(o,3)),this.setAttribute("normal",new SA(l,3)),this.setAttribute("uv",new SA(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bN(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class _N extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new VR([new mE(0,.5),new mE(-.5,-.5),new mE(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],i=[],r=[],s=[];let a=0,o=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(a,o,c),a+=o,o=0;function l(e){const a=i.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===fN.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===fN.isClockWise(e)&&(u[t]=e.reverse())}const h=fN.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];i.push(e.x,e.y,0),r.push(0,0,1),s.push(e.x,e.y)}for(let t=0,i=h.length;t<i;t++){const e=h[t],i=e[0]+a,r=e[1]+a,s=e[2]+a;n.push(i,r,s),o+=3}}this.setIndex(n),this.setAttribute("position",new SA(i,3)),this.setAttribute("normal",new SA(r,3)),this.setAttribute("uv",new SA(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,i=e.length;n<i;n++){const i=e[n];t.shapes.push(i.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let i=0,r=e.shapes.length;i<r;i++){const r=t[e.shapes[i]];n.push(r)}return new _N(n,e.curveSegments)}}class wN extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:i,phiLength:r,thetaStart:s,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const o=Math.min(s+a,Math.PI);let l=0;const c=[],u=new SE,h=new SE,d=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let y=0;0==g&&0==s?y=.5/t:g==n&&o==Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const o=n/t;u.x=-e*Math.cos(i+o*r)*Math.sin(s+v*a),u.y=e*Math.cos(s+v*a),u.z=e*Math.sin(i+o*r)*Math.sin(s+v*a),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(o+y,1-v),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],i=c[g][e],r=c[g+1][e],a=c[g+1][e+1];(0!==g||s>0)&&d.push(t,i,a),(g!==n-1||o<Math.PI)&&d.push(i,r,a)}this.setIndex(d),this.setAttribute("position",new SA(f,3)),this.setAttribute("normal",new SA(p,3)),this.setAttribute("uv",new SA(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wN(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class SN extends NR{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new SN(e.radius,e.detail)}}class MN extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const s=[],a=[],o=[],l=[],c=new SE,u=new SE,h=new SE;for(let d=0;d<=n;d++)for(let s=0;s<=i;s++){const f=s/i*r,p=d/n*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),a.push(u.x,u.y,u.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),h.subVectors(u,c).normalize(),o.push(h.x,h.y,h.z),l.push(s/i),l.push(d/n)}for(let d=1;d<=n;d++)for(let e=1;e<=i;e++){const t=(i+1)*d+e-1,n=(i+1)*(d-1)+e-1,r=(i+1)*(d-1)+e,a=(i+1)*d+e;s.push(t,n,a),s.push(n,r,a)}this.setIndex(s),this.setAttribute("position",new SA(a,3)),this.setAttribute("normal",new SA(o,3)),this.setAttribute("uv",new SA(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new MN(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class CN extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:i,p:r,q:s},n=Math.floor(n),i=Math.floor(i);const a=[],o=[],l=[],c=[],u=new SE,h=new SE,d=new SE,f=new SE,p=new SE,m=new SE,g=new SE;for(let y=0;y<=n;++y){const a=y/n*r*Math.PI*2;v(a,r,s,e,d),v(a+.01,r,s,e,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=i;++e){const r=e/i*Math.PI*2,s=-t*Math.cos(r),a=t*Math.sin(r);u.x=d.x+(s*g.x+a*p.x),u.y=d.y+(s*g.y+a*p.y),u.z=d.z+(s*g.z+a*p.z),o.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(y/n),c.push(e/i)}}for(let y=1;y<=n;y++)for(let e=1;e<=i;e++){const t=(i+1)*(y-1)+(e-1),n=(i+1)*y+(e-1),r=(i+1)*y+e,s=(i+1)*(y-1)+e;a.push(t,n,s),a.push(n,r,s)}function v(e,t,n,i,r){const s=Math.cos(e),a=Math.sin(e),o=n/t*e,l=Math.cos(o);r.x=i*(2+l)*.5*s,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(o)*.5}this.setIndex(a),this.setAttribute("position",new SA(o,3)),this.setAttribute("normal",new SA(l,3)),this.setAttribute("uv",new SA(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new CN(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class EN extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new MR(new SE(-1,-1,0),new SE(-1,1,0),new SE(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:i,closed:r};const s=e.computeFrenetFrames(t,r);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const a=new SE,o=new SE,l=new mE;let c=new SE;const u=[],h=[],d=[],f=[];function p(r){c=e.getPointAt(r/t,c);const l=s.normals[r],d=s.binormals[r];for(let e=0;e<=i;e++){const t=e/i*Math.PI*2,r=Math.sin(t),s=-Math.cos(t);o.x=s*l.x+r*d.x,o.y=s*l.y+r*d.y,o.z=s*l.z+r*d.z,o.normalize(),h.push(o.x,o.y,o.z),a.x=c.x+n*o.x,a.y=c.y+n*o.y,a.z=c.z+n*o.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===r?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=i;n++)l.x=e/t,l.y=n/i,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=i;t++){const n=(i+1)*(e-1)+(t-1),r=(i+1)*e+(t-1),s=(i+1)*e+t,a=(i+1)*(e-1)+t;f.push(n,r,a),f.push(r,s,a)}}()}(),this.setIndex(f),this.setAttribute("position",new SA(u,3)),this.setAttribute("normal",new SA(h,3)),this.setAttribute("uv",new SA(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new EN((new ER[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class TN extends DA{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,i=new SE,r=new SE;if(null!==e.index){const s=e.attributes.position,a=e.index;let o=e.groups;0===o.length&&(o=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=o.length;e<l;++e){const l=o[e],c=l.start;for(let e=c,o=c+l.count;e<o;e+=3)for(let l=0;l<3;l++){const o=a.getX(e+l),c=a.getX(e+(l+1)%3);i.fromBufferAttribute(s,o),r.fromBufferAttribute(s,c),!0===AN(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}}else{const s=e.attributes.position;for(let e=0,a=s.count/3;e<a;e++)for(let o=0;o<3;o++){const a=3*e+o,l=3*e+(o+1)%3;i.fromBufferAttribute(s,a),r.fromBufferAttribute(s,l),!0===AN(i,r,n)&&(t.push(i.x,i.y,i.z),t.push(r.x,r.y,r.z))}}this.setAttribute("position",new SA(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function AN(e,t,n){const i="".concat(e.x,",").concat(e.y,",").concat(e.z,"-").concat(t.x,",").concat(t.y,",").concat(t.z),r="".concat(t.x,",").concat(t.y,",").concat(t.z,"-").concat(e.x,",").concat(e.y,",").concat(e.z);return!0!==n.has(i)&&!0!==n.has(r)&&(n.add(i),n.add(r),!0)}var kN=Object.freeze({__proto__:null,BoxGeometry:KA,CapsuleGeometry:PR,CircleGeometry:LR,ConeGeometry:RR,CylinderGeometry:DR,DodecahedronGeometry:IR,EdgesGeometry:BR,ExtrudeGeometry:gN,IcosahedronGeometry:yN,LatheGeometry:kR,OctahedronGeometry:xN,PlaneGeometry:gk,PolyhedronGeometry:NR,RingGeometry:bN,ShapeGeometry:_N,SphereGeometry:wN,TetrahedronGeometry:SN,TorusGeometry:MN,TorusKnotGeometry:CN,TubeGeometry:EN,WireframeGeometry:TN});class PN extends rA{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new cA(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class LN extends ek{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class DN extends rA{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new cA(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bC,this.normalScale=new mE(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class RN extends DN{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new mE(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return aE(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new cA(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new cA(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new cA(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(e)}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class NN extends rA{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new cA(16777215),this.specular=new cA(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bC,this.normalScale=new mE(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=PS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class IN extends rA{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new cA(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bC,this.normalScale=new mE(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class ON extends rA{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bC,this.normalScale=new mE(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class zN extends rA{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new cA(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new cA(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bC,this.normalScale=new mE(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=PS,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class FN extends rA{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new cA(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=bC,this.normalScale=new mE(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class jN extends FD{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function BN(e,t,n){return UN(e)?new e.constructor(e.subarray(t,void 0!==n?n:e.length)):e.slice(t,n)}function VN(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function UN(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function HN(e){const t=e.length,n=new Array(t);for(let i=0;i!==t;++i)n[i]=i;return n.sort(function(t,n){return e[t]-e[n]}),n}function WN(e,t,n){const i=e.length,r=new e.constructor(i);for(let s=0,a=0;a!==i;++s){const i=n[s]*t;for(let n=0;n!==t;++n)r[a++]=e[i+n]}return r}function GN(e,t,n,i){let r=1,s=e[0];for(;void 0!==s&&void 0===s[i];)s=e[r++];if(void 0===s)return;let a=s[i];if(void 0!==a)if(Array.isArray(a))do{a=s[i],void 0!==a&&(t.push(s.time),n.push.apply(n,a)),s=e[r++]}while(void 0!==s);else if(void 0!==a.toArray)do{a=s[i],void 0!==a&&(t.push(s.time),a.toArray(n,n.length)),s=e[r++]}while(void 0!==s);else do{a=s[i],void 0!==a&&(t.push(s.time),n.push(a)),s=e[r++]}while(void 0!==s)}const qN={arraySlice:BN,convertArray:VN,isTypedArray:UN,getKeyframeOrder:HN,sortedArray:WN,flattenJSON:GN,subclip:function(e,t,n,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const s=e.clone();s.name=t;const a=[];for(let l=0;l<s.tracks.length;++l){const e=s.tracks[l],t=e.getValueSize(),o=[],c=[];for(let s=0;s<e.times.length;++s){const a=e.times[s]*r;if(!(a<n||a>=i)){o.push(e.times[s]);for(let n=0;n<t;++n)c.push(e.values[s*t+n])}}0!==o.length&&(e.times=VN(o,e.times.constructor),e.values=VN(c,e.values.constructor),a.push(e))}s.tracks=a;let o=1/0;for(let l=0;l<s.tracks.length;++l)o>s.tracks[l].times[0]&&(o=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*o);return s.resetDuration(),s},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;i<=0&&(i=30);const r=n.tracks.length,s=t/i;for(let a=0;a<r;++a){const t=n.tracks[a],i=t.ValueTypeName;if("bool"===i||"string"===i)continue;const r=e.tracks.find(function(e){return e.name===t.name&&e.ValueTypeName===i});if(void 0===r)continue;let o=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(o=l/3);let c=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=t.times.length-1;let d;if(s<=t.times[0]){const e=o,n=l-o;d=BN(t.values,e,n)}else if(s>=t.times[h]){const e=h*l+o,n=e+l-o;d=BN(t.values,e,n)}else{const e=t.createInterpolant(),n=o,i=l-o;e.evaluate(s),d=BN(e.resultBuffer,n,i)}if("quaternion"===i){(new wE).fromArray(d).normalize().conjugate().toArray(d)}const f=r.times.length;for(let e=0;e<f;++e){const t=e*u+c;if("quaternion"===i)wE.multiplyQuaternionsFlat(r.values,t,d,0,r.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)r.values[t+n]-=d[n]}}}return e.blendMode=dC,e}};class XN{constructor(e,t,n,i){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,i=t[n],r=t[n-1];e:{t:{let s;n:{i:if(!(e<i)){for(let s=n+2;;){if(void 0===i){if(e<r)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(r=i,i=t[++n],e<i)break t}s=t.length;break n}if(!(e>=r)){const a=t[1];e<a&&(n=2,r=a);for(let s=n-2;;){if(void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(i=r,r=t[--n-1],e>=r)break t}s=n,n=0;break n}break e}for(;n<s;){const i=n+s>>>1;e<t[i]?s=i:n=i+1}if(i=t[n],r=t[n-1],void 0===r)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===i)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,e,i)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=e*i;for(let s=0;s!==i;++s)t[s]=n[r+s];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class YN extends XN{constructor(e,t,n,i){super(e,t,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:lC,endingEnd:lC}}intervalChanged_(e,t,n){const i=this.parameterPositions;let r=e-2,s=e+1,a=i[r],o=i[s];if(void 0===a)switch(this.getSettings_().endingStart){case cC:r=e,a=2*t-n;break;case uC:r=i.length-2,a=t+i[r]-i[r+1];break;default:r=e,a=n}if(void 0===o)switch(this.getSettings_().endingEnd){case cC:s=e,o=2*n-t;break;case uC:s=1,o=n+i[1]-i[0];break;default:s=e-1,o=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(o-n),this._offsetPrev=r*c,this._offsetNext=s*c}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(i-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,x=d*m-d*p;for(let b=0;b!==a;++b)r[b]=g*s[c+b]+v*s[l+b]+y*s[o+b]+x*s[u+b];return r}}class KN extends XN{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=e*a,l=o-a,c=(n-t)/(i-t),u=1-c;for(let h=0;h!==a;++h)r[h]=s[l+h]*u+s[o+h]*c;return r}}class ZN extends XN{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e){return this.copySampleValue_(e-1)}}class QN{constructor(e,t,n,i){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=VN(t,this.TimeBufferType),this.values=VN(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:VN(e.times,Array),values:VN(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new ZN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new KN(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new YN(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case sC:t=this.InterpolantFactoryMethodDiscrete;break;case aC:t=this.InterpolantFactoryMethodLinear;break;case oC:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return sC;case this.InterpolantFactoryMethodLinear:return aC;case this.InterpolantFactoryMethodSmooth:return oC}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,i=t.length;n!==i;++n)t[n]*=e}return this}trim(e,t){const n=this.times,i=n.length;let r=0,s=i-1;for(;r!==i&&n[r]<e;)++r;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==r||s!==i){r>=s&&(s=Math.max(s,1),r=s-1);const e=this.getValueSize();this.times=BN(n,r,s),this.values=BN(this.values,r*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let a=0;a!==r;a++){const t=n[a];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==s&&s>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,s),e=!1;break}s=t}if(void 0!==i&&UN(i))for(let a=0,o=i.length;a!==o;++a){const t=i[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=BN(this.times),t=BN(this.values),n=this.getValueSize(),i=this.getInterpolation()===oC,r=e.length-1;let s=1;for(let a=1;a<r;++a){let r=!1;const o=e[a];if(o!==e[a+1]&&(1!==a||o!==e[0]))if(i)r=!0;else{const e=a*n,i=e-n,s=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[i+a]||n!==t[s+a]){r=!0;break}}}if(r){if(a!==s){e[s]=e[a];const i=a*n,r=s*n;for(let e=0;e!==n;++e)t[r+e]=t[i+e]}++s}}if(r>0){e[s]=e[r];for(let e=r*n,i=s*n,a=0;a!==n;++a)t[i+a]=t[e+a];++s}return s!==e.length?(this.times=BN(e,0,s),this.values=BN(t,0,s*n)):(this.times=e,this.values=t),this}clone(){const e=BN(this.times,0),t=BN(this.values,0),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}QN.prototype.TimeBufferType=Float32Array,QN.prototype.ValueBufferType=Float32Array,QN.prototype.DefaultInterpolation=aC;class JN extends QN{}JN.prototype.ValueTypeName="bool",JN.prototype.ValueBufferType=Array,JN.prototype.DefaultInterpolation=sC,JN.prototype.InterpolantFactoryMethodLinear=void 0,JN.prototype.InterpolantFactoryMethodSmooth=void 0;class $N extends QN{}$N.prototype.ValueTypeName="color";class eI extends QN{}eI.prototype.ValueTypeName="number";class tI extends XN{constructor(e,t,n,i){super(e,t,n,i)}interpolate_(e,t,n,i){const r=this.resultBuffer,s=this.sampleValues,a=this.valueSize,o=(n-t)/(i-t);let l=e*a;for(let c=l+a;l!==c;l+=4)wE.slerpFlat(r,0,s,l-a,s,l,o);return r}}class nI extends QN{InterpolantFactoryMethodLinear(e){return new tI(this.times,this.values,this.getValueSize(),e)}}nI.prototype.ValueTypeName="quaternion",nI.prototype.DefaultInterpolation=aC,nI.prototype.InterpolantFactoryMethodSmooth=void 0;class iI extends QN{}iI.prototype.ValueTypeName="string",iI.prototype.ValueBufferType=Array,iI.prototype.DefaultInterpolation=sC,iI.prototype.InterpolantFactoryMethodLinear=void 0,iI.prototype.InterpolantFactoryMethodSmooth=void 0;class rI extends QN{}rI.prototype.ValueTypeName="vector";class sI{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hC;this.name=e,this.tracks=n,this.duration=t,this.blendMode=i,this.uuid=sE(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,i=1/(e.fps||1);for(let s=0,a=n.length;s!==a;++s)t.push(aI(n[s]).scale(i));const r=new this(e.name,e.duration,t,e.blendMode);return r.uuid=e.uuid,r}static toJSON(e){const t=[],n=e.tracks,i={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let r=0,s=n.length;r!==s;++r)t.push(QN.toJSON(n[r]));return i}static CreateFromMorphTargetSequence(e,t,n,i){const r=t.length,s=[];for(let a=0;a<r;a++){let e=[],o=[];e.push((a+r-1)%r,a,(a+1)%r),o.push(0,1,0);const l=HN(e);e=WN(e,1,l),o=WN(o,1,l),i||0!==e[0]||(e.push(r),o.push(o[0])),s.push(new eI(".morphTargetInfluences["+t[a].name+"]",e,o).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let i=0;i<n.length;i++)if(n[i].name===t)return n[i];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,o=e.length;a<o;a++){const t=e[a],n=t.name.match(r);if(n&&n.length>1){const e=n[1];let r=i[e];r||(i[e]=r=[]),r.push(t)}}const s=[];for(const a in i)s.push(this.CreateFromMorphTargetSequence(a,i[a],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,i,r){if(0!==n.length){const s=[],a=[];GN(n,s,a,i),0!==s.length&&r.push(new e(t,s,a))}},i=[],r=e.name||"default",s=e.fps||30,a=e.blendMode;let o=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let i=0;i<e[n].morphTargets.length;i++)t[e[n].morphTargets[i]]=-1;for(const r in t){const t=[],s=[];for(let i=0;i!==e[n].morphTargets.length;++i){const i=e[n];t.push(i.time),s.push(i.morphTarget===r?1:0)}i.push(new eI(".morphTargetInfluence["+r+"]",t,s))}o=t.length*s}else{const r=".bones["+t[c].name+"]";n(rI,r+".position",e,"pos",i),n(nI,r+".quaternion",e,"rot",i),n(rI,r+".scale",e,"scl",i)}}if(0===i.length)return null;return new this(r,o,i,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function aI(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return eI;case"vector":case"vector2":case"vector3":case"vector4":return rI;case"color":return $N;case"quaternion":return nI;case"bool":case"boolean":return JN;case"string":return iI}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];GN(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const oI={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class lI{constructor(e,t,n){const i=this;let r,s=!1,a=0,o=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){o++,!1===s&&void 0!==i.onStart&&i.onStart(e,a,o),s=!0},this.itemEnd=function(e){a++,void 0!==i.onProgress&&i.onProgress(e,a,o),a===o&&(s=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(e){void 0!==i.onError&&i.onError(e)},this.resolveURL=function(e){return r?r(e):e},this.setURLModifier=function(e){return r=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],i=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return i}return null}}}const cI=new lI;class uI{constructor(e){this.manager=void 0!==e?e:cI,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(i,r){n.load(e,i,t,r)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const hI={};class dI extends Error{constructor(e,t){super(e),this.response=t}}class fI extends uI{constructor(e){super(e)}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=oI.get(e);if(void 0!==r)return this.manager.itemStart(e),setTimeout(()=>{t&&t(r),this.manager.itemEnd(e)},0),r;if(void 0!==hI[e])return void hI[e].push({onLoad:t,onProgress:n,onError:i});hI[e]=[],hI[e].push({onLoad:t,onProgress:n,onError:i});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,o=this.responseType;fetch(s).then(t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=hI[e],i=t.body.getReader(),r=t.headers.get("Content-Length")||t.headers.get("X-File-Size"),s=r?parseInt(r):0,a=0!==s;let o=0;const l=new ReadableStream({start(e){!function t(){i.read().then(i=>{let{done:r,value:l}=i;if(r)e.close();else{o+=l.byteLength;const i=new ProgressEvent("progress",{lengthComputable:a,loaded:o,total:s});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(i)}e.enqueue(l),t()}})}()}});return new Response(l)}throw new dI('fetch for "'.concat(t.url,'" responded with ').concat(t.status,": ").concat(t.statusText),t)}).then(e=>{switch(o){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then(e=>(new DOMParser).parseFromString(e,a));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,i=new TextDecoder(n);return e.arrayBuffer().then(e=>i.decode(e))}}}).then(t=>{oI.add(e,t);const n=hI[e];delete hI[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onLoad&&i.onLoad(t)}}).catch(t=>{const n=hI[e];if(void 0===n)throw this.manager.itemError(e),t;delete hI[e];for(let e=0,i=n.length;e<i;e++){const i=n[e];i.onError&&i.onError(t)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class pI extends uI{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new fI(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(Kg){i?i(Kg):console.error(Kg),r.manager.itemError(e)}},n,i)}parse(e){const t=[];for(let n=0;n<e.length;n++){const i=sI.parse(e[n]);t.push(i)}return t}}class mI extends uI{constructor(e){super(e)}load(e,t,n,i){const r=this,s=[],a=new rR,o=new fI(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials);let l=0;function c(c){o.load(e[c],function(e){const n=r.parse(e,!0);s[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=$S),a.image=s,a.format=n.format,a.needsUpdate=!0,t&&t(a))},n,i)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)c(u);else o.load(e,function(e){const n=r.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){s[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)s[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),s[t].format=n.format,s[t].width=n.width,s[t].height=n.height}a.image=s}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=$S),a.format=n.format,a.needsUpdate=!0,t&&t(a)},n,i);return a}}class gI extends uI{constructor(e){super(e)}load(e,t,n,i){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=oI.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;const a=_E("img");function o(){c(),oI.add(e,this),t&&t(this),r.manager.itemEnd(e)}function l(t){c(),i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}function c(){a.removeEventListener("load",o,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",o,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(e),a.src=e,a}}class vI extends uI{constructor(e){super(e)}load(e,t,n,i){const r=new sk,s=new gI(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let a=0;function o(n){s.load(e[n],function(e){r.images[n]=e,a++,6===a&&(r.needsUpdate=!0,t&&t(r))},void 0,i)}for(let l=0;l<e.length;++l)o(l);return r}}class yI extends uI{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new TD,a=new fI(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(e,function(e){const n=r.parse(e);n&&(void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:qS,s.wrapT=void 0!==n.wrapT?n.wrapT:qS,s.magFilter=void 0!==n.magFilter?n.magFilter:$S,s.minFilter=void 0!==n.minFilter?n.minFilter:$S,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(s.encoding=n.encoding),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=nM),1===n.mipmapCount&&(s.minFilter=$S),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,t&&t(s,n))},n,i),s}}class xI extends uI{constructor(e){super(e)}load(e,t,n,i){const r=new jE,s=new gI(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,function(e){r.image=e,r.needsUpdate=!0,void 0!==t&&t(r)},n,i),r}}class bI extends GT{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new cA(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class _I extends bI{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(GT.DEFAULT_UP),this.updateMatrix(),this.groundColor=new cA(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const wI=new bT,SI=new SE,MI=new SE;class CI{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new mE(512,512),this.map=null,this.mapPass=null,this.matrix=new bT,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fk,this._frameExtents=new mE(1,1),this._viewportCount=1,this._viewports=[new BE(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;SI.setFromMatrixPosition(e.matrixWorld),t.position.copy(SI),MI.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(MI),t.updateMatrixWorld(),wI.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(wI),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(wI)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class EI extends CI{constructor(){super(new nk(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*rE*e.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=e.distance||t.far;n===t.fov&&i===t.aspect&&r===t.far||(t.fov=n,t.aspect=i,t.far=r,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class TI extends bI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(GT.DEFAULT_UP),this.updateMatrix(),this.target=new GT,this.distance=n,this.angle=i,this.penumbra=r,this.decay=s,this.map=null,this.shadow=new EI}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const AI=new bT,kI=new SE,PI=new SE;class LI extends CI{constructor(){super(new nk(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new mE(4,2),this._viewportCount=6,this._viewports=[new BE(2,1,1,1),new BE(0,1,1,1),new BE(3,1,1,1),new BE(1,1,1,1),new BE(3,0,1,1),new BE(1,0,1,1)],this._cubeDirections=[new SE(1,0,0),new SE(-1,0,0),new SE(0,0,1),new SE(0,0,-1),new SE(0,1,0),new SE(0,-1,0)],this._cubeUps=[new SE(0,1,0),new SE(0,1,0),new SE(0,1,0),new SE(0,1,0),new SE(0,0,1),new SE(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,i=this.matrix,r=e.distance||n.far;r!==n.far&&(n.far=r,n.updateProjectionMatrix()),kI.setFromMatrixPosition(e.matrixWorld),n.position.copy(kI),PI.copy(n.position),PI.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(PI),n.updateMatrixWorld(),i.makeTranslation(-kI.x,-kI.y,-kI.z),AI.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(AI)}}class DI extends bI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=i,this.shadow=new LI}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class RI extends CI{constructor(){super(new Tk(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class NI extends bI{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(GT.DEFAULT_UP),this.updateMatrix(),this.target=new GT,this.shadow=new RI}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class II extends bI{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class OI extends bI{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=i}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class zI{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new SE)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,i=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*i),t.addScaledVector(s[2],.488603*r),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],n*i*1.092548),t.addScaledVector(s[5],i*r*1.092548),t.addScaledVector(s[6],.315392*(3*r*r-1)),t.addScaledVector(s[7],n*r*1.092548),t.addScaledVector(s[8],.546274*(n*n-i*i)),t}getIrradianceAt(e,t){const n=e.x,i=e.y,r=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*i),t.addScaledVector(s[2],1.023328*r),t.addScaledVector(s[3],1.023328*n),t.addScaledVector(s[4],.858086*n*i),t.addScaledVector(s[5],.858086*i*r),t.addScaledVector(s[6],.743125*r*r-.247708),t.addScaledVector(s[7],.858086*n*r),t.addScaledVector(s[8],.429043*(n*n-i*i)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(e,t+3*i);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(e,t+3*i);return e}static getBasisAt(e,t){const n=e.x,i=e.y,r=e.z;t[0]=.282095,t[1]=.488603*i,t[2]=.488603*r,t[3]=.488603*n,t[4]=1.092548*n*i,t[5]=1.092548*i*r,t[6]=.315392*(3*r*r-1),t[7]=1.092548*n*r,t[8]=.546274*(n*n-i*i)}}class FI extends bI{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zI;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class jI extends uI{constructor(e){super(e),this.textures={}}load(e,t,n,i){const r=this,s=new fI(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(Kg){i?i(Kg):console.error(Kg),r.manager.itemError(e)}},n,i)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const i=jI.createMaterialFromType(e.type);if(void 0!==e.uuid&&(i.uuid=e.uuid),void 0!==e.name&&(i.name=e.name),void 0!==e.color&&void 0!==i.color&&i.color.setHex(e.color),void 0!==e.roughness&&(i.roughness=e.roughness),void 0!==e.metalness&&(i.metalness=e.metalness),void 0!==e.sheen&&(i.sheen=e.sheen),void 0!==e.sheenColor&&(i.sheenColor=(new cA).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(i.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==i.emissive&&i.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==i.specular&&i.specular.setHex(e.specular),void 0!==e.specularIntensity&&(i.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==i.specularColor&&i.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(i.shininess=e.shininess),void 0!==e.clearcoat&&(i.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(i.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.iridescence&&(i.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(i.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(i.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(i.transmission=e.transmission),void 0!==e.thickness&&(i.thickness=e.thickness),void 0!==e.attenuationDistance&&(i.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==i.attenuationColor&&i.attenuationColor.setHex(e.attenuationColor),void 0!==e.fog&&(i.fog=e.fog),void 0!==e.flatShading&&(i.flatShading=e.flatShading),void 0!==e.blending&&(i.blending=e.blending),void 0!==e.combine&&(i.combine=e.combine),void 0!==e.side&&(i.side=e.side),void 0!==e.shadowSide&&(i.shadowSide=e.shadowSide),void 0!==e.opacity&&(i.opacity=e.opacity),void 0!==e.transparent&&(i.transparent=e.transparent),void 0!==e.alphaTest&&(i.alphaTest=e.alphaTest),void 0!==e.depthTest&&(i.depthTest=e.depthTest),void 0!==e.depthWrite&&(i.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(i.colorWrite=e.colorWrite),void 0!==e.stencilWrite&&(i.stencilWrite=e.stencilWrite),void 0!==e.stencilWriteMask&&(i.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(i.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(i.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(i.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(i.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(i.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(i.stencilZPass=e.stencilZPass),void 0!==e.wireframe&&(i.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(i.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(i.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(i.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(i.rotation=e.rotation),1!==e.linewidth&&(i.linewidth=e.linewidth),void 0!==e.dashSize&&(i.dashSize=e.dashSize),void 0!==e.gapSize&&(i.gapSize=e.gapSize),void 0!==e.scale&&(i.scale=e.scale),void 0!==e.polygonOffset&&(i.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(i.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(i.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(i.dithering=e.dithering),void 0!==e.alphaToCoverage&&(i.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(i.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(i.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(i.visible=e.visible),void 0!==e.toneMapped&&(i.toneMapped=e.toneMapped),void 0!==e.userData&&(i.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?i.vertexColors=e.vertexColors>0:i.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const r in e.uniforms){const t=e.uniforms[r];switch(i.uniforms[r]={},t.type){case"t":i.uniforms[r].value=n(t.value);break;case"c":i.uniforms[r].value=(new cA).setHex(t.value);break;case"v2":i.uniforms[r].value=(new mE).fromArray(t.value);break;case"v3":i.uniforms[r].value=(new SE).fromArray(t.value);break;case"v4":i.uniforms[r].value=(new BE).fromArray(t.value);break;case"m3":i.uniforms[r].value=(new gE).fromArray(t.value);break;case"m4":i.uniforms[r].value=(new bT).fromArray(t.value);break;default:i.uniforms[r].value=t.value}}if(void 0!==e.defines&&(i.defines=e.defines),void 0!==e.vertexShader&&(i.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(i.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(i.glslVersion=e.glslVersion),void 0!==e.extensions)for(const r in e.extensions)i.extensions[r]=e.extensions[r];if(void 0!==e.size&&(i.size=e.size),void 0!==e.sizeAttenuation&&(i.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(i.map=n(e.map)),void 0!==e.matcap&&(i.matcap=n(e.matcap)),void 0!==e.alphaMap&&(i.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(i.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(i.bumpScale=e.bumpScale),void 0!==e.normalMap&&(i.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(i.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),i.normalScale=(new mE).fromArray(t)}return void 0!==e.displacementMap&&(i.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(i.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(i.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(i.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(i.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(i.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(i.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(i.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(i.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(i.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(i.envMap=n(e.envMap)),void 0!==e.envMapIntensity&&(i.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(i.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(i.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(i.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(i.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(i.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(i.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(i.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(i.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(i.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(i.clearcoatNormalScale=(new mE).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(i.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(i.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(i.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(i.thicknessMap=n(e.thicknessMap)),void 0!==e.sheenColorMap&&(i.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(i.sheenRoughnessMap=n(e.sheenRoughnessMap)),i}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:PN,SpriteMaterial:tD,RawShaderMaterial:LN,ShaderMaterial:ek,PointsMaterial:KD,MeshPhysicalMaterial:RN,MeshStandardMaterial:DN,MeshPhongMaterial:NN,MeshToonMaterial:IN,MeshNormalMaterial:ON,MeshLambertMaterial:zN,MeshDepthMaterial:LL,MeshDistanceMaterial:DL,MeshBasicMaterial:hA,MeshMatcapMaterial:FN,LineDashedMaterial:jN,LineBasicMaterial:FD,Material:rA}[e]}}class BI{static decodeText(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,i=e.length;n<i;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(Kg){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class VI extends DA{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class UI extends uI{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new fI(r.manager);s.setPath(r.path),s.setRequestHeader(r.requestHeader),s.setWithCredentials(r.withCredentials),s.load(e,function(n){try{t(r.parse(JSON.parse(n)))}catch(Kg){i?i(Kg):console.error(Kg),r.manager.itemError(e)}},n,i)}parse(e){const t={},n={};function i(e,i){if(void 0!==t[i])return t[i];const r=e.interleavedBuffers[i],s=function(e,t){if(void 0!==n[t])return n[t];const i=e.arrayBuffers,r=i[t],s=new Uint32Array(r).buffer;return n[t]=s,s}(e,r.buffer),a=bE(r.type,s),o=new JL(a,r.stride);return o.uuid=r.uuid,t[i]=o,o}const r=e.isInstancedBufferGeometry?new VI:new DA,s=e.data.index;if(void 0!==s){const e=bE(s.type,s.array);r.setIndex(new pA(e,1))}const a=e.data.attributes;for(const u in a){const t=a[u];let n;if(t.isInterleavedBufferAttribute){const r=i(e.data,t.data);n=new eD(r,t.itemSize,t.offset,t.normalized)}else{const e=bE(t.type,t.array);n=new(t.isInstancedBufferAttribute?LD:pA)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),void 0!==t.updateRange&&(n.updateRange.offset=t.updateRange.offset,n.updateRange.count=t.updateRange.count),r.setAttribute(u,n)}const o=e.data.morphAttributes;if(o)for(const u in o){const t=o[u],n=[];for(let r=0,s=t.length;r<s;r++){const s=t[r];let a;if(s.isInterleavedBufferAttribute){const t=i(e.data,s.data);a=new eD(t,s.itemSize,s.offset,s.normalized)}else{const e=bE(s.type,s.array);a=new pA(e,s.itemSize,s.normalized)}void 0!==s.name&&(a.name=s.name),n.push(a)}r.morphAttributes[u]=n}e.data.morphTargetsRelative&&(r.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const e=l[u];r.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new SE;void 0!==c.center&&e.fromArray(c.center),r.boundingSphere=new hT(e,c.radius)}return e.name&&(r.name=e.name),e.userData&&(r.userData=e.userData),r}}class HI extends uI{constructor(e){super(e)}load(e,t,n,i){const r=this,s=""===this.path?BI.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const a=new fI(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(n){let s=null;try{s=JSON.parse(n)}catch(Mj){return void 0!==i&&i(Mj),void console.error("THREE:ObjectLoader: Can't parse "+e+".",Mj.message)}const a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==i&&i(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);r.parse(s,t)},n,i)}async loadAsync(e,t){const n=""===this.path?BI.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const i=new fI(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials);const r=await i.loadAsync(e,t),s=JSON.parse(r),a=s.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(s)}parse(e,t){const n=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=this.parseImages(e.images,function(){void 0!==t&&t(l)}),a=this.parseTextures(e.textures,s),o=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,r,o,a,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),void 0!==t){let e=!1;for(const t in s)if(s[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,n),r=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,r),a=this.parseMaterials(e.materials,s),o=this.parseObject(e.object,i,a,s,t),l=this.parseSkeletons(e.skeletons,o);return this.bindSkeletons(o,l),o}parseShapes(e){const t={};if(void 0!==e)for(let n=0,i=e.length;n<i;n++){const i=(new VR).fromJSON(e[n]);t[i.uuid]=i}return t}parseSkeletons(e,t){const n={},i={};if(t.traverse(function(e){e.isBone&&(i[e.uuid]=e)}),void 0!==e)for(let r=0,s=e.length;r<s;r++){const t=(new PD).fromJSON(e[r],i);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const i=new UI;for(let r=0,s=e.length;r<s;r++){let s;const a=e[r];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":s=i.parse(a);break;default:a.type in kN?s=kN[a.type].fromJSON(a,t):console.warn('THREE.ObjectLoader: Unsupported geometry type "'.concat(a.type,'"'))}s.uuid=a.uuid,void 0!==a.name&&(s.name=a.name),void 0!==a.userData&&(s.userData=a.userData),n[a.uuid]=s}}return n}parseMaterials(e,t){const n={},i={};if(void 0!==e){const r=new jI;r.setTextures(t);for(let t=0,s=e.length;t<s;t++){const s=e[t];void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const i=e[n],r=sI.parse(i);t[r.uuid]=r}return t}parseImages(e,t){const n=this,i={};let r;function s(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),r.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemError(e),n.manager.itemEnd(e)})}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:bE(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new lI(t);r=new gI(n),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const n=e[t],r=n.url;if(Array.isArray(r)){const e=[];for(let t=0,n=r.length;t<n;t++){const n=s(r[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new TD(n.data,n.width,n.height)))}i[n.uuid]=new OE(e)}else{const e=s(n.url);i[n.uuid]=new OE(e)}}}return i}async parseImagesAsync(e){const t=this,n={};let i;async function r(e){if("string"===typeof e){const n=e,r=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await i.loadAsync(r)}return e.data?{data:bE(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){i=new gI(this.manager),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const i=e[t],s=i.url;if(Array.isArray(s)){const e=[];for(let t=0,n=s.length;t<n;t++){const n=s[t],i=await r(n);null!==i&&(i instanceof HTMLImageElement?e.push(i):e.push(new TD(i.data,i.width,i.height)))}n[i.uuid]=new OE(e)}else{const e=await r(i.url);n[i.uuid]=new OE(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const i={};if(void 0!==e)for(let r=0,s=e.length;r<s;r++){const s=e[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const a=t[s.image],o=a.data;let l;Array.isArray(o)?(l=new sk,6===o.length&&(l.needsUpdate=!0)):(l=o&&o.data?new TD:new jE,o&&(l.needsUpdate=!0)),l.source=a,l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),void 0!==s.mapping&&(l.mapping=n(s.mapping,WI)),void 0!==s.offset&&l.offset.fromArray(s.offset),void 0!==s.repeat&&l.repeat.fromArray(s.repeat),void 0!==s.center&&l.center.fromArray(s.center),void 0!==s.rotation&&(l.rotation=s.rotation),void 0!==s.wrap&&(l.wrapS=n(s.wrap[0],GI),l.wrapT=n(s.wrap[1],GI)),void 0!==s.format&&(l.format=s.format),void 0!==s.internalFormat&&(l.internalFormat=s.internalFormat),void 0!==s.type&&(l.type=s.type),void 0!==s.encoding&&(l.encoding=s.encoding),void 0!==s.minFilter&&(l.minFilter=n(s.minFilter,qI)),void 0!==s.magFilter&&(l.magFilter=n(s.magFilter,qI)),void 0!==s.anisotropy&&(l.anisotropy=s.anisotropy),void 0!==s.flipY&&(l.flipY=s.flipY),void 0!==s.generateMipmaps&&(l.generateMipmaps=s.generateMipmaps),void 0!==s.premultiplyAlpha&&(l.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(l.unpackAlignment=s.unpackAlignment),void 0!==s.userData&&(l.userData=s.userData),i[s.uuid]=l}return i}parseObject(e,t,n,i,r){let s,a,o;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let i=0,r=e.length;i<r;i++){const r=e[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),t.push(n[r])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),i[e]}switch(e.type){case"Scene":s=new QL,void 0!==e.background&&(Number.isInteger(e.background)?s.background=new cA(e.background):s.background=u(e.background)),void 0!==e.environment&&(s.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new ZL(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new KL(e.fog.color,e.fog.density))),void 0!==e.backgroundBlurriness&&(s.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(s.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":s=new nk(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Tk(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new II(e.color,e.intensity);break;case"DirectionalLight":s=new NI(e.color,e.intensity);break;case"PointLight":s=new DI(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new OI(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new TI(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new _I(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=(new FI).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),o=c(e.material),s=new CD(a,o),void 0!==e.bindMode&&(s.bindMode=e.bindMode),void 0!==e.bindMatrix&&s.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(s.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),o=c(e.material),s=new XA(a,o);break;case"InstancedMesh":a=l(e.geometry),o=c(e.material);const t=e.count,n=e.instanceMatrix,i=e.instanceColor;s=new zD(a,o,t),s.instanceMatrix=new LD(new Float32Array(n.array),16),void 0!==i&&(s.instanceColor=new LD(new Float32Array(i.array),i.itemSize));break;case"LOD":s=new xD;break;case"Line":s=new WD(l(e.geometry),c(e.material));break;case"LineLoop":s=new YD(l(e.geometry),c(e.material));break;case"LineSegments":s=new XD(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":s=new eR(l(e.geometry),c(e.material));break;case"Sprite":s=new mD(c(e.material));break;case"Group":s=new BL;break;case"Bone":s=new ED;break;default:s=new GT}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(s.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(s.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.frustumCulled&&(s.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(s.renderOrder=e.renderOrder),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.layers&&(s.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)s.add(this.parseObject(a[e],t,n,i,r))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];s.animations.push(r[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(s.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],i=s.getObjectByProperty("uuid",n.object);void 0!==i&&s.addLevel(i,n.distance,n.hysteresis)}}return s}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse(function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}})}}const WI={UVMapping:jS,CubeReflectionMapping:BS,CubeRefractionMapping:VS,EquirectangularReflectionMapping:US,EquirectangularRefractionMapping:HS,CubeUVReflectionMapping:WS},GI={RepeatWrapping:GS,ClampToEdgeWrapping:qS,MirroredRepeatWrapping:XS},qI={NearestFilter:YS,NearestMipmapNearestFilter:KS,NearestMipmapLinearFilter:QS,LinearFilter:$S,LinearMipmapNearestFilter:eM,LinearMipmapLinearFilter:nM};class XI extends uI{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,i){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const r=this,s=oI.get(e);if(void 0!==s)return r.manager.itemStart(e),setTimeout(function(){t&&t(s),r.manager.itemEnd(e)},0),s;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader,fetch(e,a).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,Object.assign(r.options,{colorSpaceConversion:"none"}))}).then(function(n){oI.add(e,n),t&&t(n),r.manager.itemEnd(e)}).catch(function(t){i&&i(t),r.manager.itemError(e),r.manager.itemEnd(e)}),r.manager.itemStart(e)}}let YI;class KI{static getContext(){return void 0===YI&&(YI=new(window.AudioContext||window.webkitAudioContext)),YI}static setContext(e){YI=e}}class ZI extends uI{constructor(e){super(e)}load(e,t,n,i){const r=this,s=new fI(this.manager);s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(n){try{const e=n.slice(0);KI.getContext().decodeAudioData(e,function(e){t(e)})}catch(Kg){i?i(Kg):console.error(Kg),r.manager.itemError(e)}},n,i)}}class QI extends FI{constructor(e,t){super(void 0,arguments.length>2&&void 0!==arguments[2]?arguments[2]:1),this.isHemisphereLightProbe=!0;const n=(new cA).set(e),i=(new cA).set(t),r=new SE(n.r,n.g,n.b),s=new SE(i.r,i.g,i.b),a=Math.sqrt(Math.PI),o=a*Math.sqrt(.75);this.sh.coefficients[0].copy(r).add(s).multiplyScalar(a),this.sh.coefficients[1].copy(r).sub(s).multiplyScalar(o)}}class JI extends FI{constructor(e){super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isAmbientLightProbe=!0;const t=(new cA).set(e);this.sh.coefficients[0].set(t.r,t.g,t.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const $I=new bT,eO=new bT,tO=new bT;class nO{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new nk,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new nk,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,tO.copy(e.projectionMatrix);const n=t.eyeSep/2,i=n*t.near/t.focus,r=t.near*Math.tan(iE*t.fov*.5)/t.zoom;let s,a;eO.elements[12]=-n,$I.elements[12]=n,s=-r*t.aspect+i,a=r*t.aspect+i,tO.elements[0]=2*t.near/(a-s),tO.elements[8]=(a+s)/(a-s),this.cameraL.projectionMatrix.copy(tO),s=-r*t.aspect-i,a=r*t.aspect-i,tO.elements[0]=2*t.near/(a-s),tO.elements[8]=(a+s)/(a-s),this.cameraR.projectionMatrix.copy(tO)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(eO),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply($I)}}class iO{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=rO(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=rO();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function rO(){return("undefined"===typeof performance?Date:performance).now()}const sO=new SE,aO=new wE,oO=new SE,lO=new SE;class cO extends GT{constructor(){super(),this.type="AudioListener",this.context=KI.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new iO}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(sO,aO,oO),lO.set(0,0,-1).applyQuaternion(aO),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(sO.x,e),t.positionY.linearRampToValueAtTime(sO.y,e),t.positionZ.linearRampToValueAtTime(sO.z,e),t.forwardX.linearRampToValueAtTime(lO.x,e),t.forwardY.linearRampToValueAtTime(lO.y,e),t.forwardZ.linearRampToValueAtTime(lO.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(sO.x,sO.y,sO.z),t.setOrientation(lO.x,lO.y,lO.z,n.x,n.y,n.z)}}class uO extends GT{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const hO=new SE,dO=new wE,fO=new SE,pO=new SE;class mO extends uO{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(hO,dO,fO),pO.set(0,0,1).applyQuaternion(dO);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(hO.x,e),t.positionY.linearRampToValueAtTime(hO.y,e),t.positionZ.linearRampToValueAtTime(hO.z,e),t.orientationX.linearRampToValueAtTime(pO.x,e),t.orientationY.linearRampToValueAtTime(pO.y,e),t.orientationZ.linearRampToValueAtTime(pO.z,e)}else t.setPosition(hO.x,hO.y,hO.z),t.setOrientation(pO.x,pO.y,pO.z)}}class gO{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class vO{constructor(e,t,n){let i,r,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":i=this._slerp,r=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,i=this.valueSize,r=e*i+i;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==i;++e)n[r+e]=n[e];s=t}else{s+=t;const e=t/s;this._mixBufferRegion(n,r,0,e,i)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,i,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,i=e*t+t,r=this.cumulativeWeight,s=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const e=t*this._origIndex;this._mixBufferRegion(n,i,e,1-r,t)}s>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*t,1,t);for(let o=t,l=t+t;o!==l;++o)if(n[o]!==n[o+t]){a.setValue(n,i);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,i=n*this._origIndex;e.getValue(t,i);for(let r=n,s=i;r!==s;++r)t[r]=t[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,i,r){if(i>=.5)for(let s=0;s!==r;++s)e[t+s]=e[n+s]}_slerp(e,t,n,i){wE.slerpFlat(e,t,e,t,e,n,i)}_slerpAdditive(e,t,n,i,r){const s=this._workIndex*r;wE.multiplyQuaternionsFlat(e,s,e,t,e,n),wE.slerpFlat(e,t,e,t,e,s,i)}_lerp(e,t,n,i,r){const s=1-i;for(let a=0;a!==r;++a){const r=t+a;e[r]=e[r]*s+e[n+a]*i}}_lerpAdditive(e,t,n,i,r){for(let s=0;s!==r;++s){const r=t+s;e[r]=e[r]+e[n+s]*i}}}const yO="\\[\\]\\.:\\/",xO=new RegExp("["+yO+"]","g"),bO="[^"+yO+"]",_O="[^"+yO.replace("\\.","")+"]",wO=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",bO)+/(WCOD+)?/.source.replace("WCOD",_O)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",bO)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",bO)+"$"),SO=["material","materials","bones","map"];class MO{constructor(e,t,n){this.path=t,this.parsedPath=n||MO.parseTrackName(t),this.node=MO.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new MO.Composite(e,t,n):new MO(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(xO,"")}static parseTrackName(e){const t=wO.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const e=n.nodeName.substring(i+1);-1!==SO.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let i=0;i<e.length;i++){const r=e[i];if(r.name===t||r.uuid===t)return r;const s=n(r.children);if(s)return s}return null},i=n(e.children);if(i)return i}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)e[t++]=n[i]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,i=t.propertyName;let r=t.propertyIndex;if(e||(e=MO.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===i){i=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==i){if(void 0===e[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[i]}}const s=e[i];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let o=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[r]&&(r=e.morphTargetDictionary[r])}o=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(o=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(o=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[o],this.setValue=this.SetterByBindingTypeAndVersioning[o][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}MO.Composite=class{constructor(e,t,n){const i=n||MO.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,i)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},MO.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},MO.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},MO.prototype.GetterByBindingType=[MO.prototype._getValue_direct,MO.prototype._getValue_array,MO.prototype._getValue_arrayElement,MO.prototype._getValue_toArray],MO.prototype.SetterByBindingTypeAndVersioning=[[MO.prototype._setValue_direct,MO.prototype._setValue_direct_setNeedsUpdate,MO.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[MO.prototype._setValue_array,MO.prototype._setValue_array_setNeedsUpdate,MO.prototype._setValue_array_setMatrixWorldNeedsUpdate],[MO.prototype._setValue_arrayElement,MO.prototype._setValue_arrayElement_setNeedsUpdate,MO.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[MO.prototype._setValue_fromArray,MO.prototype._setValue_fromArray_setNeedsUpdate,MO.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class CO{constructor(){this.isAnimationObjectGroup=!0,this.uuid=sE(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,i=arguments.length;n!==i;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,s=r.length;let a,o=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=o++,t[h]=d,e.push(u);for(let e=0,t=s;e!==t;++e)r[e].push(new MO(u,n[e],i[e]))}else if(d<l){a=e[d];const o=--l,c=e[o];t[c.uuid]=d,e[d]=c,t[h]=o,e[o]=u;for(let e=0,t=s;e!==t;++e){const t=r[e],s=t[o];let a=t[d];t[d]=s,void 0===a&&(a=new MO(u,n[e],i[e])),t[o]=a}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let s=0,a=arguments.length;s!==a;++s){const a=arguments[s],o=a.uuid,l=t[o];if(void 0!==l&&l>=r){const s=r++,c=e[s];t[c.uuid]=l,e[l]=c,t[o]=s,e[s]=a;for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[s],r=t[l];t[l]=i,t[s]=r}}}this.nCachedObjects_=r}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,s=e.length;for(let a=0,o=arguments.length;a!==o;++a){const o=arguments[a].uuid,l=t[o];if(void 0!==l)if(delete t[o],l<r){const a=--r,o=e[a],c=--s,u=e[c];t[o.uuid]=l,e[l]=o,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e],i=t[a],r=t[c];t[l]=i,t[a]=r,t.pop()}}else{const r=--s,a=e[r];r>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=i;e!==t;++e){const t=n[e];t[l]=t[r],t.pop()}}}this.nCachedObjects_=r}subscribe_(e,t){const n=this._bindingsIndicesByPath;let i=n[e];const r=this._bindings;if(void 0!==i)return r[i];const s=this._paths,a=this._parsedPaths,o=this._objects,l=o.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[e]=i,s.push(e),a.push(t),r.push(u);for(let h=c,d=o.length;h!==d;++h){const n=o[h];u[h]=new MO(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length-1,o=s[a];t[e[a]]=n,s[n]=o,s.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}class EO{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=i;const r=t.tracks,s=r.length,a=new Array(s),o={endingStart:lC,endingEnd:lC};for(let l=0;l!==s;++l){const e=r[l].createInterpolant(null);a[l]=e,e.settings=o}this._interpolantSettings=o,this._interpolants=a,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=iC,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,i=e._clip.duration,r=i/n,s=n/i;e.warp(1,r,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const i=this._mixer,r=i.time,s=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const o=a.parameterPositions,l=a.sampleValues;return o[0]=r,o[1]=r+n,l[0]=e/s,l[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,i){if(!this.enabled)return void this._updateWeight(e);const r=this._startTime;if(null!==r){const i=(e-r)*n;i<0||0===n?t=0:(this._startTime=null,t=n*i)}t*=this._updateTimeScale(e);const s=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===dC)for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(s),t[n].accumulateAdditive(a);else for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(s),t[n].accumulate(i,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(e)[0];t*=i,e>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let i=this.time+e,r=this._loopCount;const s=n===rC;if(0===e)return-1===r?i:s&&1===(1&r)?t-i:i;if(n===nC){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(i>=t)i=t;else{if(!(i<0)){this.time=i;break e}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),i>=t||i<0){const n=Math.floor(i/t);i-=t*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=e>0?t:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(s&&1===(1&r))return t-i}return i}_setEndings(e,t,n){const i=this._interpolantSettings;n?(i.endingStart=cC,i.endingEnd=cC):(i.endingStart=e?this.zeroSlopeAtStart?cC:lC:uC,i.endingEnd=t?this.zeroSlopeAtEnd?cC:lC:uC)}_scheduleFading(e,t,n){const i=this._mixer,r=i.time;let s=this._weightInterpolant;null===s&&(s=i._lendControlInterpolant(),this._weightInterpolant=s);const a=s.parameterPositions,o=s.sampleValues;return a[0]=r,o[0]=t,a[1]=r+e,o[1]=n,this}}const TO=new Float32Array(1);class AO extends eE{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,i=e._clip.tracks,r=i.length,s=e._propertyBindings,a=e._interpolants,o=n.uuid,l=this._bindingsByRootAndName;let c=l[o];void 0===c&&(c={},l[o]=c);for(let u=0;u!==r;++u){const e=i[u],r=e.name;let l=c[r];if(void 0!==l)++l.referenceCount,s[u]=l;else{if(l=s[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,o,r));continue}const i=t&&t._propertyBindings[u].binding.parsedPath;l=new vO(MO.create(n,r,i),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,o,r),s[u]=l}a[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,i=this._actionsByClip[n];this._bindAction(e,i&&i.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const i=this._actions,r=this._actionsByClip;let s=r[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=i.length,i.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],i=e._cacheIndex;n._cacheIndex=i,t[i]=n,t.pop(),e._cacheIndex=null;const r=e._clip.uuid,s=this._actionsByClip,a=s[r],o=a.knownActions,l=o[o.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,o[c]=l,o.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===o.length&&delete s[r],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,i=t.length;n!==i;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,i=this._nActiveActions++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,i=--this._nActiveActions,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_addInactiveBinding(e,t,n){const i=this._bindingsByRootAndName,r=this._bindings;let s=i[t];void 0===s&&(s={},i[t]=s),s[n]=e,e._cacheIndex=r.length,r.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,i=n.rootNode.uuid,r=n.path,s=this._bindingsByRootAndName,a=s[i],o=t[t.length-1],l=e._cacheIndex;o._cacheIndex=l,t[l]=o,t.pop(),delete a[r],0===Object.keys(a).length&&delete s[i]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,i=this._nActiveBindings++,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,i=--this._nActiveBindings,r=t[i];e._cacheIndex=i,t[i]=e,r._cacheIndex=n,t[n]=r}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new KN(new Float32Array(2),new Float32Array(2),1,TO),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,i=--this._nActiveControlInterpolants,r=t[i];e.__cacheIndex=i,t[i]=e,r.__cacheIndex=n,t[n]=r}clipAction(e,t,n){const i=t||this._root,r=i.uuid;let s="string"===typeof e?sI.findByName(i,e):e;const a=null!==s?s.uuid:e,o=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==s?s.blendMode:hC),void 0!==o){const e=o.actionByRoot[r];if(void 0!==e&&e.blendMode===n)return e;l=o.knownActions[0],null===s&&(s=l._clip)}if(null===s)return null;const c=new EO(this,s,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c}existingAction(e,t){const n=t||this._root,i=n.uuid,r="string"===typeof e?sI.findByName(n,e):e,s=r?r.uuid:e,a=this._actionsByClip[s];return void 0!==a&&a.actionByRoot[i]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,i=this.time+=e,r=Math.sign(e),s=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(i,e,r,s)}const a=this._bindings,o=this._nActiveBindings;for(let l=0;l!==o;++l)a[l].apply(s);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const e=r.knownActions;for(let n=0,i=e.length;n!==i;++n){const i=e[n];this._deactivateAction(i);const r=i._cacheIndex,s=t[t.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,s._cacheIndex=r,t[r]=s,t.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const r in n){const e=n[r].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const i=this._bindingsByRootAndName[t];if(void 0!==i)for(const r in i){const e=i[r];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class kO{constructor(e){this.value=e}clone(){return new kO(void 0===this.value.clone?this.value:this.value.clone())}}let PO=0;class LO extends eE{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:PO++}),this.name="",this.usage=UC,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,i=t.length;n<i;n++)this.uniforms.push(t[n].clone());return this}clone(){return(new this.constructor).copy(this)}}class DO extends JL{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class RO{constructor(e,t,n,i,r){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class NO{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new xT(e,t),this.near=n,this.far=i,this.camera=null,this.layers=new LT,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return OO(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(IO),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let i=0,r=e.length;i<r;i++)OO(e[i],this,n,t);return n.sort(IO),n}}function IO(e,t){return e.distance-t.distance}function OO(e,t,n,i){if(e.layers.test(t.layers)&&e.raycast(t,n),!0===i){const i=e.children;for(let e=0,r=i.length;e<r;e++)OO(i[e],t,n,!0)}}class zO{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(aE(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class FO{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const jO=new mE;class BO{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mE(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new mE(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=jO.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,jO).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const VO=new SE,UO=new SE;class HO{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){VO.subVectors(e,this.start),UO.subVectors(this.end,this.start);const n=UO.dot(UO);let i=UO.dot(VO)/n;return t&&(i=aE(i,0,1)),i}closestPointToPoint(e,t,n){const i=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const WO=new SE;class GO extends GT{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new DA,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let s=0,a=1,o=32;s<o;s++,a++){const e=s/o*Math.PI*2,t=a/o*Math.PI*2;i.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new SA(i,3));const r=new FD({fog:!1,toneMapped:!1});this.cone=new XD(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),WO.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(WO),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const qO=new SE,XO=new bT,YO=new bT;class KO extends XD{constructor(e){const t=ZO(e),n=new DA,i=[],r=[],s=new cA(0,0,1),a=new cA(0,1,0);for(let o=0;o<t.length;o++){const e=t[o];e.parent&&e.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(s.r,s.g,s.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new SA(i,3)),n.setAttribute("color",new SA(r,3));super(n,new FD({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,i=n.getAttribute("position");YO.copy(this.root.matrixWorld).invert();for(let r=0,s=0;r<t.length;r++){const e=t[r];e.parent&&e.parent.isBone&&(XO.multiplyMatrices(YO,e.matrixWorld),qO.setFromMatrixPosition(XO),i.setXYZ(s,qO.x,qO.y,qO.z),XO.multiplyMatrices(YO,e.parent.matrixWorld),qO.setFromMatrixPosition(XO),i.setXYZ(s+1,qO.x,qO.y,qO.z),s+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function ZO(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,ZO(e.children[n]));return t}class QO extends XA{constructor(e,t,n){super(new wN(t,4,2),new hA({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const JO=new SE,$O=new cA,ez=new cA;class tz extends GT{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const i=new xN(t);i.rotateY(.5*Math.PI),this.material=new hA({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),s=new Float32Array(3*r.count);i.setAttribute("color",new pA(s,3)),this.add(new XA(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");$O.copy(this.light.color),ez.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const i=e<n/2?$O:ez;t.setXYZ(e,i.r,i.g,i.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(JO.setFromMatrixPosition(this.light.matrixWorld).negate())}}class nz extends XD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new cA(n),i=new cA(i);const r=t/2,s=e/t,a=e/2,o=[],l=[];for(let u=0,h=0,d=-a;u<=t;u++,d+=s){o.push(-a,0,d,a,0,d),o.push(d,0,-a,d,0,a);const e=u===r?n:i;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const c=new DA;c.setAttribute("position",new SA(o,3)),c.setAttribute("color",new SA(l,3));super(c,new FD({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class iz extends XD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;r=new cA(r),s=new cA(s);const a=[],o=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),i=Math.sin(n)*e,l=Math.cos(n)*e;a.push(0,0,0),a.push(i,0,l);const u=1&c?r:s;o.push(u.r,u.g,u.b),o.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const t=1&c?r:s,l=e-e/n*c;for(let e=0;e<i;e++){let n=e/i*(2*Math.PI),r=Math.sin(n)*l,s=Math.cos(n)*l;a.push(r,0,s),o.push(t.r,t.g,t.b),n=(e+1)/i*(2*Math.PI),r=Math.sin(n)*l,s=Math.cos(n)*l,a.push(r,0,s),o.push(t.r,t.g,t.b)}}const l=new DA;l.setAttribute("position",new SA(a,3)),l.setAttribute("color",new SA(o,3));super(l,new FD({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const rz=new SE,sz=new SE,az=new SE;class oz extends GT{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let i=new DA;i.setAttribute("position",new SA([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const r=new FD({fog:!1,toneMapped:!1});this.lightPlane=new WD(i,r),this.add(this.lightPlane),i=new DA,i.setAttribute("position",new SA([0,0,0,0,0,1],3)),this.targetLine=new WD(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),rz.setFromMatrixPosition(this.light.matrixWorld),sz.setFromMatrixPosition(this.light.target.matrixWorld),az.subVectors(sz,rz),this.lightPlane.lookAt(sz),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(sz),this.targetLine.scale.z=az.length()}}const lz=new SE,cz=new tk;class uz extends XD{constructor(e){const t=new DA,n=new FD({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],s={};function a(e,t){o(e),o(t)}function o(e){i.push(0,0,0),r.push(0,0,0),void 0===s[e]&&(s[e]=[]),s[e].push(i.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new SA(i,3)),t.setAttribute("color",new SA(r,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const l=new cA(16755200),c=new cA(16711680),u=new cA(43775),h=new cA(16777215),d=new cA(3355443);this.setColors(l,c,u,h,d)}setColors(e,t,n,i,r){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,i.r,i.g,i.b),s.setXYZ(39,i.r,i.g,i.b),s.setXYZ(40,r.r,r.g,r.b),s.setXYZ(41,r.r,r.g,r.b),s.setXYZ(42,r.r,r.g,r.b),s.setXYZ(43,r.r,r.g,r.b),s.setXYZ(44,r.r,r.g,r.b),s.setXYZ(45,r.r,r.g,r.b),s.setXYZ(46,r.r,r.g,r.b),s.setXYZ(47,r.r,r.g,r.b),s.setXYZ(48,r.r,r.g,r.b),s.setXYZ(49,r.r,r.g,r.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;cz.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),hz("c",t,e,cz,0,0,-1),hz("t",t,e,cz,0,0,1),hz("n1",t,e,cz,-1,-1,-1),hz("n2",t,e,cz,1,-1,-1),hz("n3",t,e,cz,-1,1,-1),hz("n4",t,e,cz,1,1,-1),hz("f1",t,e,cz,-1,-1,1),hz("f2",t,e,cz,1,-1,1),hz("f3",t,e,cz,-1,1,1),hz("f4",t,e,cz,1,1,1),hz("u1",t,e,cz,.7,1.1,-1),hz("u2",t,e,cz,-.7,1.1,-1),hz("u3",t,e,cz,0,2,-1),hz("cf1",t,e,cz,-1,0,1),hz("cf2",t,e,cz,1,0,1),hz("cf3",t,e,cz,0,-1,1),hz("cf4",t,e,cz,0,1,1),hz("cn1",t,e,cz,-1,0,-1),hz("cn2",t,e,cz,1,0,-1),hz("cn3",t,e,cz,0,-1,-1),hz("cn4",t,e,cz,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function hz(e,t,n,i,r,s,a){lz.set(r,s,a).unproject(i);const o=t[e];if(void 0!==o){const e=n.getAttribute("position");for(let t=0,n=o.length;t<n;t++)e.setXYZ(o[t],lz.x,lz.y,lz.z)}}const dz=new XE;class fz extends XD{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new DA;r.setIndex(new pA(n,1)),r.setAttribute("position",new pA(i,3)),super(r,new FD({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&dz.setFromObject(this.object),dz.isEmpty())return;const t=dz.min,n=dz.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=t.x,r[4]=n.y,r[5]=n.z,r[6]=t.x,r[7]=t.y,r[8]=n.z,r[9]=n.x,r[10]=t.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=t.z,r[15]=t.x,r[16]=n.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=n.x,r[22]=t.y,r[23]=t.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class pz extends XD{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new DA;i.setIndex(new pA(n,1)),i.setAttribute("position",new SA([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(i,new FD({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class mz extends WD{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,i=new DA;i.setAttribute("position",new SA([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new FD({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const r=new DA;r.setAttribute("position",new SA([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),r.computeBoundingSphere(),this.add(new XA(r,new hA({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const gz=new SE;let vz,yz;class xz extends GT{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new SE(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new SE(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*r;super(),this.type="ArrowHelper",void 0===vz&&(vz=new DA,vz.setAttribute("position",new SA([0,0,0,0,1,0],3)),yz=new DR(0,.5,1,5,1),yz.translate(0,-.5,0)),this.position.copy(t),this.line=new WD(vz,new FD({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new XA(yz,new hA({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,r,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{gz.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(gz,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class bz extends XD{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new DA;n.setAttribute("position",new SA(t,3)),n.setAttribute("color",new SA([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new FD({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const i=new cA,r=this.geometry.attributes.color.array;return i.set(e),i.toArray(r,0),i.toArray(r,3),i.set(t),i.toArray(r,6),i.toArray(r,9),i.set(n),i.toArray(r,12),i.toArray(r,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class _z{constructor(){this.type="ShapePath",this.color=new cA,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new AR,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,i){return this.currentPath.quadraticCurveTo(e,t,n,i),this}bezierCurveTo(e,t,n,i,r,s){return this.currentPath.bezierCurveTo(e,t,n,i,r,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let i=!1;for(let r=n-1,s=0;s<n;r=s++){let n=t[r],a=t[s],o=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[s],o=-o,a=t[r],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-o*(e.y-n.y);if(0===t)return!0;if(t<0)continue;i=!i}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return i}const n=fN.isClockWise,i=this.subPaths;if(0===i.length)return[];let r,s,a;const o=[];if(1===i.length)return s=i[0],a=new VR,a.curves=s.curves,o.push(a),o;let l=!n(i[0].getPoints());l=e?!l:l;const c=[],u=[];let h,d,f=[],p=0;u[p]=void 0,f[p]=[];for(let m=0,g=i.length;m<g;m++)s=i[m],h=s.getPoints(),r=n(h),r=e?!r:r,r?(!l&&u[p]&&p++,u[p]={s:new VR,p:h},u[p].s.curves=s.curves,l&&p++,f[p]=[]):f[p].push({h:s,p:h[0]});if(!u[0])return function(e){const t=[];for(let n=0,i=e.length;n<i;n++){const i=e[n],r=new VR;r.curves=i.curves,t.push(r)}return t}(i);if(u.length>1){let e=!1,n=0;for(let t=0,i=u.length;t<i;t++)c[t]=[];for(let i=0,r=u.length;i<r;i++){const r=f[i];for(let s=0;s<r.length;s++){const a=r[s];let o=!0;for(let r=0;r<u.length;r++)t(a.p,u[r].p)&&(i!==r&&n++,o?(o=!1,c[r].push(a)):e=!0);o&&c[i].push(a)}}n>0&&!1===e&&(f=c)}for(let m=0,g=u.length;m<g;m++){a=u[m].s,o.push(a),d=f[m];for(let e=0,t=d.length;e<t;e++)a.holes.push(d[e].h)}return o}}const wz=Sz();function Sz(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(i[l]=0,i[256|l]=32768,r[l]=24,r[256|l]=24):e<-14?(i[l]=1024>>-e-14,i[256|l]=1024>>-e-14|32768,r[l]=-e-1,r[256|l]=-e-1):e<=15?(i[l]=e+15<<10,i[256|l]=e+15<<10|32768,r[l]=13,r[256|l]=13):e<128?(i[l]=31744,i[256|l]=64512,r[l]=24,r[256|l]=24):(i[l]=31744,i[256|l]=64512,r[l]=13,r[256|l]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),o=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,s[l]=e|t}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(o[l]=1024);return{floatView:t,uint32View:n,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:o}}const Mz={toHalfFloat:function(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=aE(e,-65504,65504),wz.floatView[0]=e;const t=wz.uint32View[0],n=t>>23&511;return wz.baseTable[n]+((8388607&t)>>wz.shiftTable[n])},fromHalfFloat:function(e){const t=e>>10;return wz.uint32View[0]=wz.mantissaTable[wz.offsetTable[t]+(1023&e)]+wz.exponentTable[t],wz.floatView[0]}};class Cz extends KA{constructor(e,t,n,i,r,s){console.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,t,n,i,r,s)}}class Ez extends PR{constructor(e,t,n,i){console.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,t,n,i)}}class Tz extends LR{constructor(e,t,n,i){console.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,t,n,i)}}class Az extends RR{constructor(e,t,n,i,r,s,a){console.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,t,n,i,r,s,a)}}class kz extends DR{constructor(e,t,n,i,r,s,a,o){console.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,t,n,i,r,s,a,o)}}class Pz extends IR{constructor(e,t){console.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,t)}}class Lz extends gN{constructor(e,t){console.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,t)}}class Dz extends yN{constructor(e,t){console.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,t)}}class Rz extends kR{constructor(e,t,n,i){console.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,t,n,i)}}class Nz extends xN{constructor(e,t){console.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,t)}}class Iz extends gk{constructor(e,t,n,i){console.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,t,n,i)}}class Oz extends NR{constructor(e,t,n,i){console.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,t,n,i)}}class zz extends bN{constructor(e,t,n,i,r,s){console.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,t,n,i,r,s)}}class Fz extends _N{constructor(e,t){console.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,t)}}class jz extends wN{constructor(e,t,n,i,r,s,a){console.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,t,n,i,r,s,a)}}class Bz extends SN{constructor(e,t){console.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,t)}}class Vz extends MN{constructor(e,t,n,i,r){console.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,t,n,i,r)}}class Uz extends CN{constructor(e,t,n,i,r,s){console.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,t,n,i,r,s)}}class Hz extends EN{constructor(e,t,n,i,r){console.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,t,n,i,r)}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:jw}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=jw);var Wz=n(205);function Gz(e){let t;const n=new Set,i=(e,i)=>{const r="function"===typeof e?e(t):e;if(r!==t){const e=t;t=i?r:Object.assign({},t,r),n.forEach(n=>n(t,e))}},r=()=>t,s={setState:i,getState:r,subscribe:(e,i,s)=>i||s?function(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=i(t);function o(){const n=i(t);if(!s(a,n)){const t=a;e(a=n,t)}}return n.add(o),()=>n.delete(o)}(e,i,s):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(i,r,s),s}const qz="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?t.useEffect:t.useLayoutEffect;var Xz=n(16),Yz=n.n(Xz),Kz=n(853);function Zz(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const i=e.length;if(t.length!==i)return!1;for(let r=0;r<i;r++)if(!n(e[r],t[r]))return!1;return!0}const Qz=[];function Jz(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};for(const s of Qz)if(Zz(t,s.keys,s.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return s.response;if(!n)throw s.promise}const r={keys:t,equal:i.equal,promise:e(...t).then(e=>r.response=e).then(()=>{i.lifespan&&i.lifespan>0&&setTimeout(()=>{const e=Qz.indexOf(r);-1!==e&&Qz.splice(e,1)},i.lifespan)}).catch(e=>r.error=e)};if(Qz.push(r),!n)throw r.promise}const $z=["args","attach"],eF=["args","children"],tF=["args","children"],nF=["children","key","ref"],iF=["children","key","ref"],rF=["params"];const sF={},aF=e=>{Object.assign(sF,e)};var oF,lF;const cF=()=>{var e;return null!=(e=sF.ColorManagement)?e:null},uF=e=>e&&e.isOrthographicCamera,hF="undefined"!==typeof window&&(null!=(oF=window.document)&&oF.createElement||"ReactNative"===(null==(lF=window.navigator)?void 0:lF.product))?t.useLayoutEffect:t.useEffect;function dF(e){const n=t.useRef(e);return hF(()=>{n.current=e},[e]),n}function fF(e){let{set:t}=e;return hF(()=>(t(new Promise(()=>null)),()=>t(!1)),[t]),null}class pF extends t.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}pF.getDerivedStateFromError=()=>({error:!0});const mF="__default",gF=new Map,vF=e=>e&&!!e.memoized&&!!e.changes;function yF(e){const t="undefined"!==typeof window?window.devicePixelRatio:1;return Array.isArray(e)?Math.min(Math.max(e[0],t),e[1]):e}const xF=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()},bF={obj:e=>e===Object(e)&&!bF.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:n="shallow",objects:i="reference",strict:r=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!==typeof t||!!e!==!!t)return!1;if(bF.str(e)||bF.num(e))return e===t;const s=bF.obj(e);if(s&&"reference"===i)return e===t;const a=bF.arr(e);if(a&&"reference"===n)return e===t;if((a||s)&&e===t)return!0;let o;for(o in e)if(!(o in t))return!1;if(s&&"shallow"===n&&"shallow"===i){for(o in r?t:e)if(!bF.equ(e[o],t[o],{strict:r,objects:"reference"}))return!1}else for(o in r?t:e)if(e[o]!==t[o])return!1;if(bF.und(o)){if(a&&0===e.length&&0===t.length)return!0;if(s&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function _F(e){const t={nodes:{},materials:{}};return e&&e.traverse(e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)}),t}function wF(e,t){const n=e;return(null!=t&&t.primitive||!n.__r3f)&&(n.__r3f=I({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},t)),e}function SF(e,t){let n=e;if(t.includes("-")){const i=t.split("-"),r=i.pop();return n=i.reduce((e,t)=>e[t],e),{target:n,key:r}}return{target:n,key:t}}const MF=/-\d+$/;function CF(e,t,n){if(bF.str(n)){if(MF.test(n)){const t=n.replace(MF,""),{target:i,key:r}=SF(e,t);Array.isArray(i[r])||(i[r]=[])}const{target:i,key:r}=SF(e,n);t.__r3f.previousAttach=i[r],i[r]=t}else t.__r3f.previousAttach=n(e,t)}function EF(e,t,n){var i,r;if(bF.str(n)){const{target:i,key:r}=SF(e,n),s=t.__r3f.previousAttach;void 0===s?delete i[r]:i[r]=s}else null==(i=t.__r3f)||null==i.previousAttach||i.previousAttach(e,t);null==(r=t.__r3f)||delete r.previousAttach}function TF(e,t){let{children:n,key:i,ref:r}=t,s=Qe(t,nF),a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},{children:o,key:l,ref:c}=a,u=Qe(a,iF),h=arguments.length>3&&void 0!==arguments[3]&&arguments[3];var d;const f=null!=(d=null==e?void 0:e.__r3f)?d:{},p=Object.entries(s),m=[];if(h){const e=Object.keys(u);for(let t=0;t<e.length;t++)s.hasOwnProperty(e[t])||p.unshift([e[t],mF+"remove"])}p.forEach(t=>{let[n,i]=t;var r;if(null!=(r=e.__r3f)&&r.primitive&&"object"===n)return;if(bF.equ(i,u[n]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(n))return m.push([n,i,!0,[]]);let a=[];n.includes("-")&&(a=n.split("-")),m.push([n,i,!1,a]);for(const e in s){const t=s[e];e.startsWith("".concat(n,"-"))&&m.push([e,t,!1,e.split("-")])}});const g=I({},s);return f.memoizedProps&&f.memoizedProps.args&&(g.args=f.memoizedProps.args),f.memoizedProps&&f.memoizedProps.attach&&(g.attach=f.memoizedProps.attach),{memoized:g,changes:m}}function AF(e,t){var n,i,r;const s=null!=(n=e.__r3f)?n:{},a=s.root,o=null!=(i=null==a||null==a.getState?void 0:a.getState())?i:{},{memoized:l,changes:c}=vF(t)?t:TF(e,t),u=s.eventCount;e.__r3f&&(e.__r3f.memoizedProps=l);for(let h=0;h<c.length;h++){let[t,n,i,r]=c[h],a=e,l=a[t];if(r.length&&(l=r.reduce((e,t)=>e[t],e),!l||!l.set)){const[n,...i]=r.reverse();a=i.reverse().reduce((e,t)=>e[t],e),t=n}if(n===mF+"remove")if(a.constructor){let e=gF.get(a.constructor);e||(e=new a.constructor,gF.set(a.constructor,e)),n=e[t]}else n=0;if(i)n?s.handlers[t]=n:delete s.handlers[t],s.eventCount=Object.keys(s.handlers).length;else if(l&&l.set&&(l.copy||l instanceof LT)){if(Array.isArray(n))l.fromArray?l.fromArray(n):l.set(...n);else if(l.copy&&n&&n.constructor&&l.constructor===n.constructor)l.copy(n);else if(void 0!==n){const e=l instanceof cA;!e&&l.setScalar?l.setScalar(n):l instanceof LT&&n instanceof LT?l.mask=n.mask:l.set(n),cF()||o.linear||!e||l.convertSRGBToLinear()}}else a[t]=n,!o.linear&&a[t]instanceof jE&&a[t].format===gM&&a[t].type===rM&&(a[t].encoding=vC);kF(e)}if(s.parent&&o.internal&&e.raycast&&u!==s.eventCount){const t=o.internal.interaction.indexOf(e);t>-1&&o.internal.interaction.splice(t,1),s.eventCount&&o.internal.interaction.push(e)}return!(1===c.length&&"onUpdate"===c[0][0])&&c.length&&null!=(r=e.__r3f)&&r.parent&&PF(e),e}function kF(e){var t,n;const i=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();i&&0===i.internal.frames&&i.invalidate()}function PF(e){null==e.onUpdate||e.onUpdate(e)}function LF(e,t){e.manual||(uF(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function DF(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function RF(e,t,n,i){const r=n.get(t);r&&(n.delete(t),0===n.size&&(e.delete(i),r.target.releasePointerCapture(i)))}function NF(e){function t(e){return e.filter(e=>["Move","Over","Enter","Out","Leave"].some(t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find(t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId)){const i=e.eventObject.__r3f,r=null==i?void 0:i.handlers;if(n.hovered.delete(DF(e)),null!=i&&i.eventCount){const n=I(I({},e),{},{intersections:t});null==r.onPointerOut||r.onPointerOut(n),null==r.onPointerLeave||r.onPointerLeave(n)}}}function i(e,t){for(let n=0;n<t.length;n++){const i=t[n].__r3f;null==i||null==i.handlers.onPointerMissed||i.handlers.onPointerMissed(e)}}return{handlePointer:function(r){switch(r){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:i}=e.getState();"pointerId"in t&&i.capturedMap.has(t.pointerId)&&requestAnimationFrame(()=>{i.capturedMap.has(t.pointerId)&&(i.capturedMap.delete(t.pointerId),n([]))})}}return function(s){const{onPointerMissed:a,internal:o}=e.getState();o.lastEvent.current=s;const l="onPointerMove"===r,c="onClick"===r||"onContextMenu"===r||"onDoubleClick"===r,u=function(t,n){const i=e.getState(),r=new Set,s=[],a=n?n(i.internal.interaction):i.internal.interaction;for(let e=0;e<a.length;e++){const t=xF(a[e]);t&&(t.raycaster.camera=void 0)}i.previousRoot||null==i.events.compute||i.events.compute(t,i);let o=a.flatMap(function(e){const n=xF(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(i=n.previousRoot)?void 0:i.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var i}).sort((e,t)=>{const n=xF(e.object),i=xF(t.object);return n&&i&&i.events.priority-n.events.priority||e.distance-t.distance}).filter(e=>{const t=DF(e);return!r.has(t)&&(r.add(t),!0)});i.events.filter&&(o=i.events.filter(o,i));for(const e of o){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&s.push(I(I({},e),{},{eventObject:t})),t=t.parent}}if("pointerId"in t&&i.internal.capturedMap.has(t.pointerId))for(let e of i.internal.capturedMap.get(t.pointerId).values())r.has(DF(e.intersection))||s.push(e.intersection);return s}(s,l?t:void 0),h=c?function(t){const{internal:n}=e.getState(),i=t.offsetX-n.initialClick[0],r=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(i*i+r*r))}(s):0;"onPointerDown"===r&&(o.initialClick=[s.offsetX,s.offsetY],o.initialHits=u.map(e=>e.eventObject)),c&&!u.length&&h<=2&&(i(s,o.interaction),a&&a(s)),l&&n(u),function(t,i,r,s){const a=e.getState();if(t.length){const e={stopped:!1};for(const o of t){const l=xF(o.object)||a,{raycaster:c,pointer:u,camera:h,internal:d}=l,f=new SE(u.x,u.y,0).unproject(h),p=e=>{var t,n;return null!=(t=null==(n=d.capturedMap.get(e))?void 0:n.has(o.eventObject))&&t},m=e=>{const t={intersection:o,target:i.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(o.eventObject,t):d.capturedMap.set(e,new Map([[o.eventObject,t]])),i.target.setPointerCapture(e)},g=e=>{const t=d.capturedMap.get(e);t&&RF(d.capturedMap,o.eventObject,t,e)};let v={};for(let e in i){let t=i[e];"function"!==typeof t&&(v[e]=t)}let y=I(I(I({},o),v),{},{pointer:u,intersections:t,stopped:e.stopped,delta:r,unprojectedPoint:f,ray:c.ray,camera:h,stopPropagation(){const r="pointerId"in i&&d.capturedMap.get(i.pointerId);(!r||r.has(o.eventObject))&&(y.stopped=e.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find(e=>e.eventObject===o.eventObject))&&n([...t.slice(0,t.indexOf(o)),o])},target:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:g},nativeEvent:i});if(s(y),!0===e.stopped)break}}}(u,s,h,function(e){const t=e.eventObject,n=t.__r3f,a=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){const t=DF(e),n=o.hovered.get(t);n?n.stopped&&e.stopPropagation():(o.hovered.set(t,e),null==a.onPointerOver||a.onPointerOver(e),null==a.onPointerEnter||a.onPointerEnter(e))}null==a.onPointerMove||a.onPointerMove(e)}else{const n=a[r];n?c&&!o.initialHits.includes(t)||(i(s,o.interaction.filter(e=>!o.initialHits.includes(e))),n(e)):c&&o.initialHits.includes(t)&&i(s,o.interaction.filter(e=>!o.initialHits.includes(e)))}})}}}}const IF=e=>!(null==e||!e.render),OF=t.createContext(null),zF=(e,n)=>{const i=function(e){const n="function"===typeof e?Gz(e):e,i=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.getState,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,r]=(0,t.useReducer)(e=>e+1,0),s=n.getState(),a=(0,t.useRef)(s),o=(0,t.useRef)(e),l=(0,t.useRef)(i),c=(0,t.useRef)(!1),u=(0,t.useRef)();let h;void 0===u.current&&(u.current=e(s));let d=!1;(a.current!==s||o.current!==e||l.current!==i||c.current)&&(h=e(s),d=!i(u.current,h)),qz(()=>{d&&(u.current=h),a.current=s,o.current=e,l.current=i,c.current=!1});const f=(0,t.useRef)(s);qz(()=>{const e=()=>{try{const e=n.getState(),t=o.current(e);l.current(u.current,t)||(a.current=e,u.current=t,r())}catch(Mj){c.current=!0,r()}},t=n.subscribe(e);return n.getState()!==f.current&&e(),t},[]);const p=d?h:u.current;return(0,t.useDebugValue)(p),p};return Object.assign(i,n),i[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[i,n];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},i}((i,r)=>{const s=new SE,a=new SE,o=new SE;function l(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size;const{width:i,height:l,top:c,left:u}=n,h=i/l;t instanceof SE?o.copy(t):o.set(...t);const d=e.getWorldPosition(s).distanceTo(o);if(uF(e))return{width:i/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:d,aspect:h};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*d,r=n*(i/l);return{width:r,height:n,top:c,left:u,factor:i/r,distance:d,aspect:h}}}let c;const u=e=>i(t=>({performance:I(I({},t.performance),{},{current:e})})),h=new mE,d={set:i,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(r(),t)},advance:(e,t)=>n(e,t,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new iO,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=r();c&&clearTimeout(c),e.performance.current!==e.performance.min&&u(e.performance.min),c=setTimeout(()=>u(r().performance.max),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:l},setEvents:e=>i(t=>I(I({},t),{},{events:I(I({},t.events),e)})),setSize:(e,t,n,s,o)=>{const c=r().camera,u={width:e,height:t,top:s||0,left:o||0,updateStyle:n};i(e=>({size:u,viewport:I(I({},e.viewport),l(c,a,u))}))},setDpr:e=>i(t=>{const n=yF(e);return{viewport:I(I({},t.viewport),{},{dpr:n,initialDpr:t.viewport.initialDpr||n})}}),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),i(()=>({frameloop:e}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:t.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort((e,t)=>e.priority-t.priority),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter(t=>t.ref!==e))}}}};return d}),r=i.getState();let s=r.size,a=r.viewport.dpr,o=r.camera;return i.subscribe(()=>{const{camera:e,size:t,viewport:n,gl:r,set:l}=i.getState();if(t!==s||n.dpr!==a){var c;s=t,a=n.dpr,LF(e,t),r.setPixelRatio(n.dpr);const i=null!=(c=t.updateStyle)?c:"undefined"!==typeof HTMLCanvasElement&&r.domElement instanceof HTMLCanvasElement;r.setSize(t.width,t.height,i)}e!==o&&(o=e,l(t=>({viewport:I(I({},t.viewport),t.viewport.getCurrentViewport(e))})))}),i.subscribe(t=>e(t)),i};let FF,jF=new Set,BF=new Set,VF=new Set;function UF(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function HF(e,t){switch(e){case"before":return UF(jF,t);case"after":return UF(BF,t);case"tail":return UF(VF,t)}}let WF,GF;function qF(e,t,n){let i=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(i=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),WF=t.internal.subscribers,FF=0;FF<WF.length;FF++)GF=WF[FF],GF.ref.current(GF.store.getState(),i,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function XF(){const e=t.useContext(OF);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function YF(e,t){return function(n){const i=new n;e&&e(i);for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return Promise.all(s.map(e=>new Promise((n,r)=>i.load(e,e=>{e.scene&&Object.assign(e,_F(e.scene)),n(e)},t,t=>r(new Error("Could not load ".concat(e,": ").concat(t.message,")")))))))}}function KF(e,t,n,i){const r=Array.isArray(t)?t:[t],s=((e,t,n)=>Jz(e,t,!1,n))(YF(n,i),[e,...r],{equal:bF.equ});return Array.isArray(t)?s:s[0]}KF.preload=function(e,t,n){const i=Array.isArray(t)?t:[t];return((e,t,n)=>{Jz(e,t,!0,n)})(YF(n),[e,...i])},KF.clear=function(e,t){return(e=>{if(void 0===e||0===e.length)Qz.splice(0,Qz.length);else{const t=Qz.find(t=>Zz(e,t.keys,t.equal));if(t){const e=Qz.indexOf(t);-1!==e&&Qz.splice(e,1)}}})([e,...Array.isArray(t)?t:[t]])};const ZF=new Map,{invalidate:QF,advance:JF}=function(e){let t,n,i,r=!1;function s(a){n=requestAnimationFrame(s),r=!0,t=0,HF("before",a);for(const n of e.values()){var o;i=n.store.getState(),!i.internal.active||!("always"===i.frameloop||i.internal.frames>0)||null!=(o=i.gl.xr)&&o.isPresenting||(t+=qF(a,i))}if(HF("after",a),0===t)return HF("tail",a),r=!1,cancelAnimationFrame(n)}return{loop:s,invalidate:function t(n){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var a;if(!n)return e.forEach(e=>t(e.store.getState()),i);null!=(a=n.gl.xr)&&a.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=Math.min(60,n.internal.frames+i),r||(r=!0,requestAnimationFrame(s)))},advance:function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;if(n&&HF("before",t),i)qF(t,i,r);else for(const s of e.values())qF(t,s.store.getState());n&&HF("after",t)}}}(ZF),{reconciler:$F,applyProps:ej}=function(e,t){function n(e,t,n){let i,{args:r=[],attach:s}=t,a=Qe(t,$z),o="".concat(e[0].toUpperCase()).concat(e.slice(1));if("primitive"===e){if(void 0===a.object)throw new Error("R3F: Primitives without 'object' are invalid!");i=wF(a.object,{type:e,root:n,attach:s,primitive:!0})}else{const t=sF[o];if(!t)throw new Error("R3F: ".concat(o," is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"));if(!Array.isArray(r))throw new Error("R3F: The args prop must be an array!");i=wF(new t(...r),{type:e,root:n,attach:s,memoizedProps:{args:r}})}return void 0===i.__r3f.attach&&(i instanceof DA?i.__r3f.attach="geometry":i instanceof rA&&(i.__r3f.attach="material")),"inject"!==o&&AF(i,a),i}function i(e,t){let n=!1;var i,r;t&&(null!=(i=t.__r3f)&&i.attach?CF(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(r=e.__r3f)||r.objects.push(t),t.__r3f||wF(t,{}),t.__r3f.parent=e,PF(t),kF(t))}function r(e,t,n){let i=!1;if(t){var r,s;if(null!=(r=t.__r3f)&&r.attach)CF(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"});const r=e.children.filter(e=>e!==t),s=r.indexOf(n);e.children=[...r.slice(0,s),t,...r.slice(s)],i=!0}i||null==(s=e.__r3f)||s.objects.push(t),t.__r3f||wF(t,{}),t.__r3f.parent=e,PF(t),kF(t)}}function s(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&[...e].forEach(e=>a(t,e,n))}function a(e,t,n){if(t){var i,r,a;if(t.__r3f&&(t.__r3f.parent=null),null!=(i=e.__r3f)&&i.objects&&(e.__r3f.objects=e.__r3f.objects.filter(e=>e!==t)),null!=(r=t.__r3f)&&r.attach)EF(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var o;e.remove(t),null!=(o=t.__r3f)&&o.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter(e=>e!==t),n.initialHits=n.initialHits.filter(e=>e!==t),n.hovered.forEach((e,i)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(i)}),n.capturedMap.forEach((e,i)=>{RF(n.capturedMap,t,e,i)})}(t.__r3f.root,t)}const c=null==(a=t.__r3f)?void 0:a.primitive,u=void 0===n?null!==t.dispose&&!c:n;var l;if(!c)s(null==(l=t.__r3f)?void 0:l.objects,t,u),s(t.children,t,u);t.__r3f&&(delete t.__r3f.root,delete t.__r3f.objects,delete t.__r3f.handlers,delete t.__r3f.memoizedProps,c||delete t.__r3f),u&&t.dispose&&"Scene"!==t.type&&(0,Kz.unstable_scheduleCallback)(Kz.unstable_IdlePriority,()=>{try{t.dispose()}catch(Kg){}}),kF(e)}}const o=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters."),l=Yz()({createInstance:n,removeChild:a,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,i(n,t))},removeChildFromContainer:(e,t)=>{t&&a(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const i=e.getState().scene;i.__r3f&&r(i,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,i){if(e.__r3f.primitive&&i.object&&i.object!==e)return[!0];{const{args:t=[],children:r}=i,s=Qe(i,eF),{args:a=[],children:o}=n,l=Qe(n,tF);if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some((e,t)=>e!==a[t]))return[!0];const c=TF(e,s,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(e,t,r,s,o,l){let[c,u]=t;c?function(e,t,r,s){var o;const l=null==(o=e.__r3f)?void 0:o.parent;if(!l)return;const c=n(t,r,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&i(c,t);e.children=e.children.filter(e=>!e.__r3f)}e.__r3f.objects.forEach(e=>i(c,e)),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||a(l,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),i(l,c),c.raycast&&c.__r3f.eventCount&&c.__r3f.root.getState().internal.interaction.push(c);[s,s.alternate].forEach(e=>{null!==e&&(e.stateNode=c,e.ref&&("function"===typeof e.ref?e.ref(c):e.ref.current=c))})}(e,r,o,l):AF(e,u)},commitMount(e,t,n,i){var r;const s=null!=(r=e.__r3f)?r:{};e.raycast&&s.handlers&&s.eventCount&&e.__r3f.root.getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>wF(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:i}=null!=(t=e.__r3f)?t:{};n&&i&&EF(i,e,n),e.isObject3D&&(e.visible=!1),kF(e)},unhideInstance(e,t){var n;const{attach:i,parent:r}=null!=(n=e.__r3f)?n:{};i&&r&&CF(r,e,i),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),kF(e)},createTextInstance:o,hideTextInstance:o,unhideTextInstance:o,getCurrentEventPriority:()=>t?t():Wz.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!==typeof performance&&bF.fun(performance.now)?performance.now:bF.fun(Date.now)?Date.now:()=>0,scheduleTimeout:bF.fun(setTimeout)?setTimeout:void 0,cancelTimeout:bF.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:l,applyProps:AF}}(0,function(){var e;const t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return Wz.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Wz.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Wz.ContinuousEventPriority;default:return Wz.DefaultEventPriority}}),tj={objects:"shallow",strict:!1},nj=(e,t)=>{const n="function"===typeof e?e(t):e;return IF(n)?n:new XL(I({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0},e))};function ij(e){const n=ZF.get(e),i=null==n?void 0:n.fiber,r=null==n?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");const s="function"===typeof reportError?reportError:console.error,a=r||zF(QF,JF),o=i||$F.createContainer(a,Wz.ConcurrentRoot,null,!1,null,"",s,null);let l;n||ZF.set(e,{fiber:o,store:a});let c,u=!1;return{configure(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:n,size:i,scene:r,events:s,onCreated:o,shadows:h=!1,linear:d=!1,flat:f=!1,legacy:p=!1,orthographic:m=!1,frameloop:g="always",dpr:v=[1,2],performance:y,raycaster:x,camera:b,onPointerMissed:_}=t,w=a.getState(),S=w.gl;w.gl||w.set({gl:S=nj(n,e)});let M=w.raycaster;M||w.set({raycaster:M=new NO});const C=x||{},{params:E}=C,T=Qe(C,rF);if(bF.equ(T,M,tj)||ej(M,I({},T)),bF.equ(E,M.params,tj)||ej(M,{params:I(I({},M.params),E)}),!w.camera||w.camera===c&&!bF.equ(c,b,tj)){c=b;const e=b instanceof tk,t=e?b:m?new Tk(0,0,0,0,.1,1e3):new nk(75,0,.1,1e3);e||(t.position.z=5,b&&ej(t,b),w.camera||null!=b&&b.rotation||t.lookAt(0,0,0)),w.set({camera:t})}if(!w.scene){let e;r instanceof QL?e=r:(e=new QL,r&&ej(e,r)),w.set({scene:wF(e)})}if(!w.xr){const e=(e,t)=>{const n=a.getState();"never"!==n.frameloop&&JF(e,!0,n,t)},t=()=>{const t=a.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||QF(t)},n={connect(){const e=a.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=a.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};S.xr&&n.connect(),w.set({xr:n})}if(S.shadowMap){const e=S.shadowMap.enabled,t=S.shadowMap.type;if(S.shadowMap.enabled=!!h,bF.boo(h))S.shadowMap.type=Yw;else if(bF.str(h)){var A;const e={basic:qw,percentage:Xw,soft:Yw,variance:Kw};S.shadowMap.type=null!=(A=e[h])?A:Yw}else bF.obj(h)&&Object.assign(S.shadowMap,h);e===S.shadowMap.enabled&&t===S.shadowMap.type||(S.shadowMap.needsUpdate=!0)}const k=cF();k&&("enabled"in k?k.enabled=!p:"legacyMode"in k&&(k.legacyMode=p));const P=d?gC:vC,L=f?RS:zS;S.outputEncoding!==P&&(S.outputEncoding=P),S.toneMapping!==L&&(S.toneMapping=L),w.legacy!==p&&w.set(()=>({legacy:p})),w.linear!==d&&w.set(()=>({linear:d})),w.flat!==f&&w.set(()=>({flat:f})),!n||bF.fun(n)||IF(n)||bF.equ(n,S,tj)||ej(S,n),s&&!w.events.handlers&&w.set({events:s(a)});const D=function(e,t){if(t)return t;if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:n,top:i,left:r}=e.parentElement.getBoundingClientRect();return{width:t,height:n,top:i,left:r}}return"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0}:{width:0,height:0,top:0,left:0}}(e,i);return bF.equ(D,w.size,tj)||w.setSize(D.width,D.height,D.updateStyle,D.top,D.left),v&&w.viewport.dpr!==yF(v)&&w.setDpr(v),w.frameloop!==g&&w.setFrameloop(g),w.onPointerMissed||w.set({onPointerMissed:_}),y&&!bF.equ(y,w.performance,tj)&&w.set(e=>({performance:I(I({},e.performance),y)})),l=o,u=!0,this},render(n){return u||this.configure(),$F.updateContainer(t.createElement(rj,{store:a,children:n,onCreated:l,rootElement:e}),o,null,()=>{}),a},unmount(){sj(e)}}}function rj(e){let{store:n,children:i,onCreated:r,rootElement:s}=e;return hF(()=>{const e=n.getState();e.set(e=>({internal:I(I({},e.internal),{},{active:!0})})),r&&r(e),n.getState().events.connected||null==e.events.connect||e.events.connect(s)},[]),t.createElement(OF.Provider,{value:n},i)}function sj(e,t){const n=ZF.get(e),i=null==n?void 0:n.fiber;if(i){const r=null==n?void 0:n.store.getState();r&&(r.internal.active=!1),$F.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var n,i,s,a;null==r.events.disconnect||r.events.disconnect(),null==(n=r.gl)||null==(i=n.renderLists)||null==i.dispose||i.dispose(),null==(s=r.gl)||null==s.forceContextLoss||s.forceContextLoss(),null!=(a=r.gl)&&a.xr&&r.xr.disconnect(),function(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}(r),ZF.delete(e),t&&t(e)}catch(Kg){}},500)})}}$F.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:t.version});t.unstable_act;function aj(){return aj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)({}).hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},aj.apply(null,arguments)}function oj(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function lj(){let{debounce:e,scroll:n,polyfill:i,offsetSize:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const s=i||("undefined"==typeof window?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,o]=(0,t.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=(0,t.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=e?"number"==typeof e?e:e.scroll:null,u=e?"number"==typeof e?e:e.resize:null,h=(0,t.useRef)(!1);(0,t.useEffect)(()=>(h.current=!0,()=>{h.current=!1}));const[d,f,p]=(0,t.useMemo)(()=>{const e=()=>{if(!l.current.element)return;const{left:e,top:t,width:n,height:i,bottom:s,right:a,x:c,y:u}=l.current.element.getBoundingClientRect(),d={left:e,top:t,width:n,height:i,bottom:s,right:a,x:c,y:u};l.current.element instanceof HTMLElement&&r&&(d.height=l.current.element.offsetHeight,d.width=l.current.element.offsetWidth),Object.freeze(d),h.current&&!hj(l.current.lastBounds,d)&&o(l.current.lastBounds=d)};return[e,u?oj(e,u):e,c?oj(e,c):e]},[o,r,c,u]);function m(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(e=>e.removeEventListener("scroll",p,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function g(){l.current.element&&(l.current.resizeObserver=new s(p),l.current.resizeObserver.observe(l.current.element),n&&l.current.scrollContainers&&l.current.scrollContainers.forEach(e=>e.addEventListener("scroll",p,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{p()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}return function(e,n){(0,t.useEffect)(()=>{if(n){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}},[e,n])}(p,!!n),function(e){(0,t.useEffect)(()=>{const t=e;return window.addEventListener("resize",t),()=>{window.removeEventListener("resize",t)}},[e])}(f),(0,t.useEffect)(()=>{m(),g()},[n,p,f]),(0,t.useEffect)(()=>m,[]),[e=>{!e||e===l.current.element||(m(),l.current.element=e,l.current.scrollContainers=cj(e),g())},a,d]}function cj(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:i,overflowY:r}=window.getComputedStyle(e);return[n,i,r].some(e=>"auto"===e||"scroll"===e)&&t.push(e),[...t,...cj(e.parentElement)]}const uj=["x","y","top","bottom","left","right","width","height"],hj=(e,t)=>uj.every(n=>e[n]===t[n]);var dj,fj,pj=Object.defineProperty,mj=Object.defineProperties,gj=Object.getOwnPropertyDescriptors,vj=Object.getOwnPropertySymbols,yj=Object.prototype.hasOwnProperty,xj=Object.prototype.propertyIsEnumerable,bj=(e,t,n)=>t in e?pj(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,_j=(e,t)=>{for(var n in t||(t={}))yj.call(t,n)&&bj(e,n,t[n]);if(vj)for(var n of vj(t))xj.call(t,n)&&bj(e,n,t[n]);return e};"undefined"===typeof window||!(null==(dj=window.document)?void 0:dj.createElement)&&"ReactNative"!==(null==(fj=window.navigator)?void 0:fj.product)?t.useEffect:t.useLayoutEffect;function wj(e,t,n){if(!e)return;if(!0===n(e))return e;let i=t?e.return:e.child;for(;i;){const e=wj(i,t,n);if(e)return e;i=t?null:i.sibling}}function Sj(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(t){return e}}const Mj=console.error;console.error=function(){const e=[...arguments].join("");if(!(null==e?void 0:e.startsWith("Warning:"))||!e.includes("useContext"))return Mj.apply(this,arguments);console.error=Mj};const Cj=Sj(t.createContext(null));class Ej extends t.Component{render(){return t.createElement(Cj.Provider,{value:this._reactInternals},this.props.children)}}function Tj(){const e=t.useContext(Cj);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=t.useId();return t.useMemo(()=>{for(const t of[e,null==e?void 0:e.alternate]){if(!t)continue;const e=wj(t,!1,e=>{let t=e.memoizedState;for(;t;){if(t.memoizedState===n)return!0;t=t.next}});if(e)return e}},[e,n])}function Aj(){const e=function(){const e=Tj(),[n]=t.useState(()=>new Map);n.clear();let i=e;for(;i;){if(i.type&&"object"===typeof i.type){const e=void 0===i.type._context&&i.type.Provider===i.type?i.type:i.type._context;e&&e!==Cj&&!n.has(e)&&n.set(e,t.useContext(Sj(e)))}i=i.return}return n}();return t.useMemo(()=>Array.from(e.keys()).reduce((n,i)=>r=>{return t.createElement(n,null,t.createElement(i.Provider,(s=_j({},r),a={value:e.get(i)},mj(s,gj(a)))));var s,a},e=>t.createElement(Ej,_j({},e))),[e])}const kj=["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"],Pj={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Lj(e){const{handlePointer:t}=NF(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(Pj).reduce((e,n)=>I(I({},e),{},{[n]:t(n)}),{}),update:()=>{var t;const{events:n,internal:i}=e.getState();null!=(t=i.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(i.lastEvent.current)},connect:t=>{var n;const{set:i,events:r}=e.getState();null==r.disconnect||r.disconnect(),i(e=>({events:I(I({},e.events),{},{connected:t})})),Object.entries(null!=(n=r.handlers)?n:[]).forEach(e=>{let[n,i]=e;const[r,s]=Pj[n];t.addEventListener(r,i,{passive:s})})},disconnect:()=>{const{set:t,events:n}=e.getState();var i;n.connected&&(Object.entries(null!=(i=n.handlers)?i:[]).forEach(e=>{let[t,i]=e;if(n&&n.connected instanceof HTMLElement){const[e]=Pj[t];n.connected.removeEventListener(e,i)}}),t(e=>({events:I(I({},e.events),{},{connected:void 0})})))}}}const Dj=t.forwardRef(function(n,i){let{children:r,fallback:s,resize:a,style:o,gl:l,events:c=Lj,eventSource:u,eventPrefix:h,shadows:d,linear:f,flat:p,legacy:m,orthographic:g,frameloop:v,dpr:y,performance:x,raycaster:b,camera:_,onPointerMissed:w,onCreated:S}=n,M=Qe(n,kj);t.useMemo(()=>aF(e),[]);const C=Aj(),[E,T]=lj(I({scroll:!0,debounce:{scroll:50,resize:0}},a)),A=t.useRef(null),k=t.useRef(null);t.useImperativeHandle(i,()=>A.current);const P=dF(w),[L,D]=t.useState(!1),[R,N]=t.useState(!1);if(L)throw L;if(R)throw R;const O=t.useRef(null);hF(()=>{const e=A.current;T.width>0&&T.height>0&&e&&(O.current||(O.current=ij(e)),O.current.configure({gl:l,events:c,shadows:d,linear:f,flat:p,legacy:m,orthographic:g,frameloop:v,dpr:y,performance:x,raycaster:b,camera:_,size:T,onPointerMissed:function(){return null==P.current?void 0:P.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(u?(t=u)&&t.hasOwnProperty("current")?u.current:u:k.current),h&&e.setEvents({compute:(e,t)=>{const n=e[h+"X"],i=e[h+"Y"];t.pointer.set(n/t.size.width*2-1,-i/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==S||S(e)}}),O.current.render(t.createElement(C,null,t.createElement(pF,{set:N},t.createElement(t.Suspense,{fallback:t.createElement(fF,{set:D})},r)))))}),t.useEffect(()=>{const e=A.current;if(e)return()=>sj(e)},[]);const z=u?"none":"auto";return t.createElement("div",aj({ref:k,style:I({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:z},o)},M),t.createElement("div",{ref:E,style:{width:"100%",height:"100%"}},t.createElement("canvas",{ref:A,style:{display:"block"}},s)))}),Rj=t.forwardRef(function(e,n){return t.createElement(Ej,null,t.createElement(Dj,aj({},e,{ref:n})))});aF({LiquidMaterial:ek});const Nj=()=>{const e=(0,t.useRef)();!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=XF(),i=n.getState().internal.subscribe,r=dF(e);hF(()=>i(r,t,n),[t,i,n])}((t,n)=>{e.current&&(e.current.uniforms.uTime.value+=n,e.current.uniforms.uMouse.value.lerp(t.mouse,.05))});const n={uTime:{value:0},uMouse:{value:new mE(0,0)},uColor1:{value:new cA("#6a0dad")},uColor2:{value:new cA("#ff006e")},uColor3:{value:new cA("#3a86ff")}};return(0,s.jsxs)("mesh",{children:[(0,s.jsx)("planeGeometry",{args:[2,2]}),(0,s.jsx)("liquidMaterial",{ref:e,vertexShader:"\n  varying vec2 vUv;\n  void main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }\n",fragmentShader:"\n  uniform float uTime;\n  uniform vec2 uMouse; // \u2605 \u30de\u30a6\u30b9\u5ea7\u6a19\u3092\u53d7\u3051\u53d6\u308b\u5909\u6570\u3092\u5fa9\u6d3b\n  uniform vec3 uColor1;\n  uniform vec3 uColor2;\n  uniform vec3 uColor3;\n  varying vec2 vUv;\n\n  float random (vec2 st) {\n      return fract(sin(dot(st.xy, vec2(12.9898,78.233))) * 43758.5453123);\n  }\n\n  float noise (vec2 st) {\n      vec2 i = floor(st);\n      vec2 f = fract(st);\n\n      float a = random(i);\n      float b = random(i + vec2(1.0, 0.0));\n      float c = random(i + vec2(0.0, 1.0));\n      float d = random(i + vec2(1.0, 1.0));\n\n      vec2 u = f*f*(3.0-2.0*f);\n      return mix(a, b, u.x) + (c - a)* u.y * (1.0 - u.x) + (d - b) * u.x * u.y;\n  }\n\n  void main() {\n      vec2 uv = vUv;\n      float time = uTime * 0.1;\n\n      // \u2605 \u30de\u30a6\u30b9\u306e\u4f4d\u7f6e\u306b\u3088\u3063\u3066\u30ce\u30a4\u30ba\u306e\u751f\u6210\u3092\u6b6a\u307e\u305b\u308b\n      float n = noise(uv * 3.0 + time + uMouse * 0.3);\n      \n      vec3 color = mix(uColor1, uColor2, smoothstep(0.3, 0.7, n));\n      color = mix(color, uColor3, sin(n * 5.0 + time) * 0.5 + 0.5);\n\n      uv.x += sin(uv.y * 10.0 + time) * 0.05;\n      uv.y += cos(uv.x * 10.0 + time) * 0.05;\n      \n      float finalNoise = noise(uv * 2.0 + time);\n      gl_FragColor = vec4(color * finalNoise, 1.0);\n  }\n",uniforms:n},ek.key)]})},Ij=()=>(0,s.jsx)(Rj,{style:{position:"absolute",top:0,left:0,zIndex:-1},children:(0,s.jsx)(Nj,{})}),Oj=e=>{let{onTriggerProblem:t}=e;const n=e=>{let{text:t,count:n}=e;return(0,s.jsx)("section",{className:"guerilla-marquee",style:{"--char-count":n},children:(0,s.jsxs)("div",{className:"marquee--inner",children:[(0,s.jsx)("p",{children:t}),(0,s.jsx)("p",{"aria-hidden":"true",children:t}),(0,s.jsx)("p",{"aria-hidden":"true",children:t}),(0,s.jsx)("p",{"aria-hidden":"true",children:t}),(0,s.jsx)("p",{"aria-hidden":"true",children:t}),(0,s.jsx)("p",{"aria-hidden":"true",children:t})]})})};return(0,s.jsx)(Ka.div,{className:"guerilla-container",onClick:t,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:[{text:"PREPARE FOR THE FINAL SMASH TRIAL",count:28},{text:"ONLY THE WORTHY SHALL PROCEED",count:30},{text:"QUIZ INITIATED \u2014 FIGHT FOR ANSWERS",count:22},{text:"ERROR 404: MERCY NOT FOUND",count:24}].map((e,t)=>(0,s.jsx)(n,{text:e.text,count:e.count},t))})},zj=e=>{let{quiz:n,onClose:i}=e;const{setCursorVariant:r}=av(),[a,o]=(0,t.useState)(null),[l,c]=(0,t.useState)(null),u=()=>r("default"),h=()=>r("hover");return(0,s.jsx)(Ka.div,{className:"quiz-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onMouseEnter:u,children:(0,s.jsxs)(Ka.div,{className:"quiz-modal-content",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},transition:{type:"spring",stiffness:100},children:[(0,s.jsx)("h2",{className:"quiz-question",children:n.question}),(0,s.jsx)("div",{className:"quiz-options",children:n.options.map((e,t)=>(0,s.jsx)("button",{className:"quiz-option-button",onClick:()=>(e=>{if(a)return;const t=e===n.answer;o(e),c(t),setTimeout(()=>{i()},1500)})(e),disabled:null!==a,onMouseEnter:h,onMouseLeave:u,children:e},t))}),null!==l&&(0,s.jsx)(Ka.div,{className:"quiz-feedback ".concat(l?"feedback-correct":"feedback-incorrect"),initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},children:l?"\u6b63\u89e3\uff01":"\u4e0d\u6b63\u89e3\uff01 \u6b63\u89e3\u306f\u300c".concat(n.answer,"\u300d")})]})})},Fj=pv("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),jj=pv("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Bj=pv("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),Vj=pv("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Uj=pv("trash-2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),Hj=pv("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),Wj=pv("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),Gj=e=>{let{command:n,setCommand:i}=e;const r=Array.isArray(n)?n:[];return(0,s.jsxs)("div",{className:"bg-slate-900/50 p-4 rounded-lg",children:[(0,s.jsx)("div",{className:"bg-black/50 min-h-[64px] rounded-md mb-4 flex items-center p-2 gap-1 overflow-x-auto custom-scrollbar",children:r.map((e,n)=>(0,s.jsxs)(t.Fragment,{children:[" ",n>0&&(0,s.jsx)("span",{className:"text-2xl font-bold text-purple-400 mx-1",children:"+"})," ",(0,s.jsx)("img",{src:"/images/command-parts/".concat(e,".svg"),alt:e,className:"h-10"})," "]},n))}),(0,s.jsx)("div",{className:"grid grid-cols-5 sm:grid-cols-8 gap-2",children:["stick-n","stick-u","stick-d","stick-l","stick-r","stick-ul","stick-ur","stick-dl","stick-dr","flick-u","flick-d","flick-l","flick-r","button-a","button-b","button-jump","button-grab","stick-lr","flick-lr"].map(e=>(0,s.jsxs)("button",{onClick:()=>(e=>{i(t=>[...Array.isArray(t)?t:[],e])})(e),className:"bg-slate-700 hover:bg-slate-600 rounded-md p-2 flex items-center justify-center aspect-square transition-transform hover:scale-110",children:[" ",(0,s.jsx)("img",{src:"/images/command-parts/".concat(e,".svg"),alt:e,className:"h-full"})," "]},e))}),(0,s.jsxs)("button",{onClick:()=>{i(e=>Array.isArray(e)?e.slice(0,-1):[])},className:"bg-red-800 hover:bg-red-700 rounded-md p-2 mt-2 w-full",children:[" ",(0,s.jsx)("span",{className:"text-white font-bold",children:"1\u3064\u623b\u3059"})," "]})]})},qj=e=>{let{categories:n}=e;const{commands:i,handleAddCommand:r,handleUpdateCommand:a,handleDeleteCommand:o}=Jg(),[l,c]=(0,t.useState)(null),[u,h]=(0,t.useState)(""),[d,f]=(0,t.useState)([]),[p,m]=(0,t.useState)(n[0]),g=()=>{if(l){const e=Array.isArray(l.command)?l.command:[];a(I(I({},l),{},{command:e})),c(null)}};return(0,s.jsxs)("div",{className:"bg-white/5 p-6 rounded-lg h-full flex flex-col",children:[(0,s.jsx)("h3",{className:"text-xl font-semibold mb-4 text-white",children:"\u30b3\u30de\u30f3\u30c9\u30ea\u30b9\u30c8\u7ba1\u7406"}),(0,s.jsxs)("div",{className:"bg-black/20 p-4 rounded-md mb-6 space-y-3",children:[(0,s.jsx)("h4",{className:"font-bold text-white/80",children:"\u65b0\u3057\u3044\u30b3\u30de\u30f3\u30c9\u3092\u8ffd\u52a0"}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"\u30b3\u30de\u30f3\u30c9\u540d (\u4f8b: \u7a7a\u4e2d\u4e0aA)",className:"w-full bg-slate-900/50 p-2 rounded-md border border-white/10"}),(0,s.jsx)(Gj,{command:d,setCommand:f}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("select",{value:p,onChange:e=>m(e.target.value),className:"w-full bg-slate-700 p-2 rounded-md border border-white/10",children:n.map(e=>(0,s.jsx)("option",{value:e,children:e},e))}),(0,s.jsxs)("button",{onClick:()=>{u&&d.length>0&&(r({name:u,command:d,category:p}),h(""),f([]))},className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md font-semibold flex items-center gap-2 ml-4 whitespace-nowrap",children:[(0,s.jsx)(Fj,{size:18}),"\u8ffd\u52a0"]})]})]}),(0,s.jsx)("div",{className:"space-y-2 flex-grow overflow-y-auto pr-2 custom-scrollbar",children:i.map(e=>(0,s.jsx)(Ka.div,{layout:!0,className:"bg-black/20 p-3 rounded-md",children:l&&l.id===e.id?(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("input",{type:"text",value:l.name,onChange:e=>c(I(I({},l),{},{name:e.target.value})),className:"w-full bg-slate-900/50 p-2 rounded-md border border-white/10"}),(0,s.jsx)(Gj,{command:l.command,setCommand:e=>{c(t=>{const n=Array.isArray(t.command)?t.command:[];return I(I({},t),{},{command:e(n)})})}}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsxs)("select",{value:l.category,onChange:e=>c(I(I({},l),{},{category:e.target.value})),className:"bg-slate-700 p-2 rounded-md border border-white/10",children:[" ",n.map(e=>(0,s.jsx)("option",{value:e,children:e},e))," "]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[" ",(0,s.jsx)("button",{onClick:()=>c(null),className:"p-2 rounded-full hover:bg-white/10",children:(0,s.jsx)(jj,{size:18})})," ",(0,s.jsx)("button",{onClick:g,className:"p-2 rounded-full bg-green-600 hover:bg-green-700",children:(0,s.jsx)(Bj,{size:18})})," "]})]})]}):(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{className:"font-semibold text-white",children:[e.name," ",(0,s.jsxs)("span",{className:"text-xs text-white/50",children:["(",e.category,")"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 mt-1 flex-wrap",children:[" ",Array.isArray(e.command)?e.command.map((e,n)=>(0,s.jsxs)(t.Fragment,{children:[" ",n>0&&(0,s.jsx)("span",{className:"text-lg font-bold text-purple-300",children:"+"})," ",(0,s.jsx)("img",{src:"/images/command-parts/".concat(e,".svg"),alt:e,className:"h-6"})," "]},n)):(0,s.jsx)("p",{className:"text-sm text-white/60 font-mono",children:e.command})," "]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[" ",(0,s.jsx)("button",{onClick:()=>(e=>{c(I({},e))})(e),className:"text-yellow-400 hover:text-yellow-300 p-2 rounded-full hover:bg-white/10",children:(0,s.jsx)(Vj,{size:18})})," ",(0,s.jsx)("button",{onClick:()=>o(e.id),className:"text-red-400 hover:text-red-500 p-2 rounded-full hover:bg-white/10",children:(0,s.jsx)(Uj,{size:18})})," "]})]})},e.id))})]})},Xj=()=>{const{settings:e,setSetting:t,assignments:n,setAssignment:i}=Iv(),{unlockedItems:r}=Jg(),a=Object.values($a).filter(e=>"bgm"===e.type&&r.includes(e.id)),o=Object.values($a).filter(e=>"se"===e.type&&r.includes(e.id));return(0,s.jsxs)("section",{className:"bg-white/5 p-6 rounded-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"\u30b5\u30a6\u30f3\u30c9\u8a2d\u5b9a"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{className:"text-lg",children:"BGM"}),(0,s.jsx)("button",{onClick:()=>t("isBgmEnabled",!e.isBgmEnabled),className:"w-14 h-8 rounded-full p-1 transition-colors ".concat(e.isBgmEnabled?"bg-green-500":"bg-gray-600"),children:(0,s.jsx)("span",{className:"block w-6 h-6 rounded-full bg-white transform transition-transform ".concat(e.isBgmEnabled?"translate-x-6":"translate-x-0")})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("label",{children:"\u97f3\u91cf"}),(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:e.bgmVolume,onChange:e=>t("bgmVolume",parseFloat(e.target.value)),disabled:!e.isBgmEnabled,className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500 disabled:opacity-50"})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-white/10 flex items-center justify-between",children:[(0,s.jsx)("label",{className:"text-lg",children:"\u52b9\u679c\u97f3 (SE)"}),(0,s.jsx)("button",{onClick:()=>t("isSeEnabled",!e.isSeEnabled),className:"w-14 h-8 rounded-full p-1 transition-colors ".concat(e.isSeEnabled?"bg-green-500":"bg-gray-600"),children:(0,s.jsx)("span",{className:"block w-6 h-6 rounded-full bg-white transform transition-transform ".concat(e.isSeEnabled?"translate-x-6":"translate-x-0")})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("label",{children:"\u97f3\u91cf"}),(0,s.jsx)("input",{type:"range",min:"0",max:"1",step:"0.01",value:e.seVolume,onChange:e=>t("seVolume",parseFloat(e.target.value)),disabled:!e.isSeEnabled,className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-purple-500 disabled:opacity-50"})]}),(0,s.jsxs)("div",{className:"pt-4 border-t border-white/10",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-3",children:"\u30ab\u30b9\u30bf\u30de\u30a4\u30ba"}),Object.entries({BGM:[{key:"bgm_splash",label:"\u30b9\u30d7\u30e9\u30c3\u30b7\u30e5\u753b\u9762"},{key:"bgm_home",label:"\u30db\u30fc\u30e0\u753b\u9762"}],"\u52b9\u679c\u97f3 (SE)":[{key:"se_click",label:"\u6c7a\u5b9a\u30fb\u30af\u30ea\u30c3\u30af\u97f3"}]}).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,s.jsx)("h4",{className:"font-bold text-white/70",children:t}),r.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{htmlFor:e.key,children:e.label}),(0,s.jsx)("select",{id:e.key,value:n[e.key],onChange:t=>i(e.key,t.target.value),className:"bg-slate-700 p-2 rounded-md w-1/2",children:(e.key.startsWith("bgm")?a:o).map(e=>(0,s.jsx)("option",{value:e.id,children:e.name},e.id))})]},e.key))]},t)})]})]})]})},Yj=()=>{const{exportAllData:e,importAllData:n}=Jg(),{showConfirm:i}=yv(),r=(0,t.useRef)(null);return(0,s.jsxs)("section",{className:"bg-white/5 p-6 rounded-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"\u30c7\u30fc\u30bf\u7ba1\u7406"}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,s.jsxs)("button",{onClick:()=>{const t=e(),n=JSON.stringify(t,null,2),i=new Blob([n],{type:"application/json"}),r=URL.createObjectURL(i),s=document.createElement("a");s.href=r,s.download="smash-note-backup-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)},className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-blue-600 hover:bg-blue-700 font-semibold",children:[(0,s.jsx)(Hj,{size:20}),"\u30a8\u30af\u30b9\u30dd\u30fc\u30c8 (\u30d0\u30c3\u30af\u30a2\u30c3\u30d7)"]}),(0,s.jsxs)("button",{onClick:()=>{r.current.click()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 rounded-lg bg-green-600 hover:bg-green-700 font-semibold",children:[(0,s.jsx)(Wj,{size:20}),"\u30a4\u30f3\u30dd\u30fc\u30c8 (\u5fa9\u5143)"]}),(0,s.jsx)("input",{type:"file",accept:".json",onChange:async e=>{const t=e.target.files[0];if(!t)return;if(await i("\u30c7\u30fc\u30bf\u306e\u30a4\u30f3\u30dd\u30fc\u30c8","\u73fe\u5728\u306e\u5168\u30c7\u30fc\u30bf\u304c\u4e0a\u66f8\u304d\u3055\u308c\u307e\u3059\u3002\u672c\u5f53\u306b\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")){const e=new FileReader;e.onload=e=>{try{const t=JSON.parse(e.target.result);n(t)?(alert("\u30c7\u30fc\u30bf\u306e\u30a4\u30f3\u30dd\u30fc\u30c8\u306b\u6210\u529f\u3057\u307e\u3057\u305f\u3002\u30a2\u30d7\u30ea\u3092\u518d\u8aad\u307f\u8fbc\u307f\u3057\u307e\u3059\u3002"),window.location.reload()):alert("\u7121\u52b9\u306a\u30d5\u30a1\u30a4\u30eb\u3067\u3059\u3002")}catch(Mj){alert("\u30d5\u30a1\u30a4\u30eb\u306e\u8aad\u307f\u8fbc\u307f\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}},e.readAsText(t)}e.target.value=null},ref:r,className:"hidden"})]})]})},Kj=e=>{let{onClose:n,commandCategories:i}=e;const{settings:r,setSettings:a}=iv(),{quizzes:o,setQuizzes:l}=Jg(),{setCursorVariant:c}=av(),[u,h]=(0,t.useState)(""),[d,f]=(0,t.useState)(["","","",""]),[p,m]=(0,t.useState)("");return(0,s.jsx)("div",{className:"w-screen h-screen bg-slate-900/80 backdrop-blur-xl p-4 sm:p-8 overflow-y-auto custom-scrollbar",onMouseEnter:()=>c("default"),children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto text-white",children:[(0,s.jsxs)(Ka.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"flex justify-between items-center mb-8",children:[(0,s.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold",children:"\u8a2d\u5b9a"}),(0,s.jsx)("button",{onClick:n,className:"p-2 rounded-full hover:bg-white/10",onMouseEnter:()=>c("hover"),onMouseLeave:()=>c("default"),children:(0,s.jsx)(jj,{size:32})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)(Ka.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:(0,s.jsx)(Yj,{})}),(0,s.jsx)(Ka.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},children:(0,s.jsx)(Xj,{})}),(0,s.jsxs)(Ka.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.15},className:"bg-white/5 p-6 rounded-lg",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"\u30b2\u30ea\u30e9\u30af\u30a4\u30ba\u8a2d\u5b9a"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{htmlFor:"guerilla-toggle",className:"text-lg",children:"\u30b2\u30ea\u30e9\u30af\u30a4\u30ba\u3092\u6709\u52b9\u306b\u3059\u308b"}),(0,s.jsx)("button",{id:"guerilla-toggle",onClick:()=>a(e=>I(I({},e),{},{isGuerillaEnabled:!e.isGuerillaEnabled})),className:"w-14 h-8 rounded-full p-1 transition-colors ".concat(r.isGuerillaEnabled?"bg-green-500":"bg-gray-600"),children:(0,s.jsx)("span",{className:"block w-6 h-6 rounded-full bg-white transform transition-transform ".concat(r.isGuerillaEnabled?"translate-x-6":"translate-x-0")})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("label",{htmlFor:"guerilla-frequency",className:"text-lg",children:"\u767a\u751f\u983b\u5ea6\uff08\u5206\uff09"}),(0,s.jsxs)("select",{id:"guerilla-frequency",value:r.guerillaFrequency/6e4,onChange:e=>a(t=>I(I({},t),{},{guerillaFrequency:6e4*Number(e.target.value)})),className:"bg-slate-700 border border-slate-600 rounded-md p-2",children:[(0,s.jsx)("option",{value:"1",children:"1\u5206"}),(0,s.jsx)("option",{value:"3",children:"3\u5206"}),(0,s.jsx)("option",{value:"5",children:"5\u5206"}),(0,s.jsx)("option",{value:"10",children:"10\u5206"}),(0,s.jsx)("option",{value:"15",children:"15\u5206"})]})]})]})]}),(0,s.jsxs)(Ka.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.25},children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"\u30af\u30a4\u30ba\u7ba1\u7406"}),(0,s.jsxs)("div",{className:"bg-white/5 p-6 rounded-lg mb-6 space-y-4",children:[(0,s.jsx)("h3",{className:"text-xl font-medium",children:"\u65b0\u3057\u3044\u30af\u30a4\u30ba\u3092\u8ffd\u52a0"}),(0,s.jsx)("input",{type:"text",placeholder:"\u554f\u984c\u6587",value:u,onChange:e=>h(e.target.value),className:"w-full bg-slate-700 p-2 rounded-md"}),(0,s.jsx)("div",{className:"grid grid-cols-2 gap-4",children:d.map((e,t)=>(0,s.jsx)("input",{type:"text",placeholder:"\u9078\u629e\u80a2 ".concat(t+1),value:e,onChange:e=>((e,t)=>{const n=[...d];n[e]=t,f(n)})(t,e.target.value),className:"bg-slate-700 p-2 rounded-md"},t))}),(0,s.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"w-full bg-slate-700 p-2 rounded-md",children:[(0,s.jsx)("option",{value:"",children:"\u6b63\u89e3\u306e\u9078\u629e\u80a2\u3092\u9078\u3093\u3067\u304f\u3060\u3055\u3044"}),d.filter(e=>e).map((e,t)=>(0,s.jsx)("option",{value:e,children:e},t))]}),(0,s.jsxs)("button",{onClick:()=>{if(!u||d.some(e=>""===e)||!p)return void alert("\u3059\u3079\u3066\u306e\u9805\u76ee\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002");const e={id:Date.now(),question:u,options:d,answer:p};l(t=>[...t,e]),h(""),f(["","","",""]),m("")},className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md font-semibold flex items-center gap-2",children:[(0,s.jsx)(Fj,{size:18}),"\u8ffd\u52a0\u3059\u308b"]})]}),(0,s.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto pr-2 custom-scrollbar",children:o.map(e=>(0,s.jsxs)("div",{className:"bg-black/20 p-4 rounded-md flex justify-between items-center gap-4",children:[(0,s.jsx)("p",{className:"flex-grow break-words",children:e.question}),(0,s.jsx)("button",{onClick:()=>(e=>{l(t=>t.filter(t=>t.id!==e))})(e.id),className:"text-red-400 hover:text-red-500 p-2 flex-shrink-0",children:(0,s.jsx)(Uj,{size:20})})]},e.id))})]})]}),(0,s.jsx)(Ka.section,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.35},children:(0,s.jsx)(qj,{categories:i})})]})]})})},Zj=pv("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Qj=pv("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]),Jj=pv("circle-plus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]),$j=pv("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),eB=pv("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]),tB=pv("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);var nB=n(950);const iB="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;function rB(e){const t=Object.prototype.toString.call(e);return"[object Window]"===t||"[object global]"===t}function sB(e){return"nodeType"in e}function aB(e){var t,n;return e?rB(e)?e:sB(e)&&null!=(t=null==(n=e.ownerDocument)?void 0:n.defaultView)?t:window:window}function oB(e){const{Document:t}=aB(e);return e instanceof t}function lB(e){return!rB(e)&&e instanceof aB(e).HTMLElement}function cB(e){return e instanceof aB(e).SVGElement}function uB(e){return e?rB(e)?e.document:sB(e)?oB(e)?e:lB(e)||cB(e)?e.ownerDocument:document:document:document}const hB=iB?t.useLayoutEffect:t.useEffect;function dB(e){const n=(0,t.useRef)(e);return hB(()=>{n.current=e}),(0,t.useCallback)(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return null==n.current?void 0:n.current(...t)},[])}function fB(e,n){void 0===n&&(n=[e]);const i=(0,t.useRef)(e);return hB(()=>{i.current!==e&&(i.current=e)},n),i}function pB(e,n){const i=(0,t.useRef)();return(0,t.useMemo)(()=>{const t=e(i.current);return i.current=t,t},[...n])}function mB(e){const n=dB(e),i=(0,t.useRef)(null),r=(0,t.useCallback)(e=>{e!==i.current&&(null==n||n(e,i.current)),i.current=e},[]);return[i,r]}function gB(e){const n=(0,t.useRef)();return(0,t.useEffect)(()=>{n.current=e},[e]),n.current}let vB={};function yB(e,n){return(0,t.useMemo)(()=>{if(n)return n;const t=null==vB[e]?0:vB[e]+1;return vB[e]=t,e+"-"+t},[e,n])}function xB(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.reduce((t,n)=>{const i=Object.entries(n);for(const[r,s]of i){const n=t[r];null!=n&&(t[r]=n+e*s)}return t},I({},t))}}const bB=xB(1),_B=xB(-1);function wB(e){if(!e)return!1;const{KeyboardEvent:t}=aB(e.target);return t&&e instanceof t}function SB(e){if(function(e){if(!e)return!1;const{TouchEvent:t}=aB(e.target);return t&&e instanceof t}(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return function(e){return"clientX"in e&&"clientY"in e}(e)?{x:e.clientX,y:e.clientY}:null}const MB=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[MB.Translate.toString(e),MB.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:i}=e;return t+" "+n+"ms "+i}}}),CB="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function EB(e){return e.matches(CB)?e:e.querySelector(CB)}const TB={display:"none"};function AB(e){let{id:n,value:i}=e;return t.createElement("div",{id:n,style:TB},i)}function kB(e){let{id:n,announcement:i,ariaLiveType:r="assertive"}=e;return t.createElement("div",{id:n,style:{position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"},role:"status","aria-live":r,"aria-atomic":!0},i)}const PB=["transform"],LB=["id","accessibility","autoScroll","children","sensors","collisionDetection","measuring","modifiers"],DB=["active","dragOverlay","transform"],RB=(0,t.createContext)(null);const NB={draggable:"\n    To pick up a draggable item, press the space bar.\n    While dragging, use the arrow keys to move the item.\n    Press space again to drop the item in its new position, or press escape to cancel.\n  "},IB={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function OB(e){let{announcements:n=IB,container:i,hiddenTextDescribedById:r,screenReaderInstructions:s=NB}=e;const{announce:a,announcement:o}=function(){const[e,n]=(0,t.useState)("");return{announce:(0,t.useCallback)(e=>{null!=e&&n(e)},[]),announcement:e}}(),l=yB("DndLiveRegion"),[c,u]=(0,t.useState)(!1);if((0,t.useEffect)(()=>{u(!0)},[]),function(e){const n=(0,t.useContext)(RB);(0,t.useEffect)(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}((0,t.useMemo)(()=>({onDragStart(e){let{active:t}=e;a(n.onDragStart({active:t}))},onDragMove(e){let{active:t,over:i}=e;n.onDragMove&&a(n.onDragMove({active:t,over:i}))},onDragOver(e){let{active:t,over:i}=e;a(n.onDragOver({active:t,over:i}))},onDragEnd(e){let{active:t,over:i}=e;a(n.onDragEnd({active:t,over:i}))},onDragCancel(e){let{active:t,over:i}=e;a(n.onDragCancel({active:t,over:i}))}}),[a,n])),!c)return null;const h=t.createElement(t.Fragment,null,t.createElement(AB,{id:r,value:s.draggable}),t.createElement(kB,{id:l,announcement:o}));return i?(0,nB.createPortal)(h,i):h}var zB;function FB(){}function jB(e,n){return(0,t.useMemo)(()=>({sensor:e,options:null!=n?n:{}}),[e,n])}function BB(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(0,t.useMemo)(()=>[...n].filter(e=>null!=e),[...n])}!function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"}(zB||(zB={}));const VB=Object.freeze({x:0,y:0});function UB(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function HB(e,t){const n=SB(e);if(!n)return"0 0";return(n.x-t.left)/t.width*100+"% "+(n.y-t.top)/t.height*100+"%"}function WB(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return n-i}function GB(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return i-n}function qB(e,t,n){return void 0===t&&(t=e.left),void 0===n&&(n=e.top),{x:t+.5*e.width,y:n+.5*e.height}}const XB=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const r=qB(t,t.left,t.top),s=[];for(const a of i){const{id:e}=a,t=n.get(e);if(t){const n=UB(qB(t),r);s.push({id:e,data:{droppableContainer:a,value:n}})}}return s.sort(WB)};function YB(e,t){const n=Math.max(t.top,e.top),i=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),s=Math.min(t.top+t.height,e.top+e.height),a=r-i,o=s-n;if(i<r&&n<s){const n=t.width*t.height,i=e.width*e.height,r=a*o;return Number((r/(n+i-r)).toFixed(4))}return 0}const KB=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e;const r=[];for(const s of i){const{id:e}=s,i=n.get(e);if(i){const n=YB(i,t);n>0&&r.push({id:e,data:{droppableContainer:s,value:n}})}}return r.sort(GB)};function ZB(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:VB}function QB(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return i.reduce((t,n)=>I(I({},t),{},{top:t.top+e*n.y,bottom:t.bottom+e*n.y,left:t.left+e*n.x,right:t.right+e*n.x}),I({},t))}}const JB=QB(1);function $B(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}const eV={ignoreTransform:!1};function tV(e,t){void 0===t&&(t=eV);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:t,transformOrigin:i}=aB(e).getComputedStyle(e);t&&(n=function(e,t,n){const i=$B(t);if(!i)return e;const{scaleX:r,scaleY:s,x:a,y:o}=i,l=e.left-a-(1-r)*parseFloat(n),c=e.top-o-(1-s)*parseFloat(n.slice(n.indexOf(" ")+1)),u=r?e.width/r:e.width,h=s?e.height/s:e.height;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l}}(n,t,i))}const{top:i,left:r,width:s,height:a,bottom:o,right:l}=n;return{top:i,left:r,width:s,height:a,bottom:o,right:l}}function nV(e){return tV(e,{ignoreTransform:!0})}function iV(e,t){const n=[];return e?function i(r){if(null!=t&&n.length>=t)return n;if(!r)return n;if(oB(r)&&null!=r.scrollingElement&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!lB(r)||cB(r))return n;if(n.includes(r))return n;const s=aB(e).getComputedStyle(r);return r!==e&&function(e,t){void 0===t&&(t=aB(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(e=>{const i=t[e];return"string"===typeof i&&n.test(i)})}(r,s)&&n.push(r),function(e,t){return void 0===t&&(t=aB(e).getComputedStyle(e)),"fixed"===t.position}(r,s)?n:i(r.parentNode)}(e):n}function rV(e){const[t]=iV(e,1);return null!=t?t:null}function sV(e){return iB&&e?rB(e)?e:sB(e)?oB(e)||e===uB(e).scrollingElement?window:lB(e)?e:null:null:null}function aV(e){return rB(e)?e.scrollX:e.scrollLeft}function oV(e){return rB(e)?e.scrollY:e.scrollTop}function lV(e){return{x:aV(e),y:oV(e)}}var cV;function uV(e){return!(!iB||!e)&&e===document.scrollingElement}function hV(e){const t={x:0,y:0},n=uV(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height};return{isTop:e.scrollTop<=t.y,isLeft:e.scrollLeft<=t.x,isBottom:e.scrollTop>=i.y,isRight:e.scrollLeft>=i.x,maxScroll:i,minScroll:t}}!function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"}(cV||(cV={}));const dV={x:.2,y:.2};function fV(e,t,n,i,r){let{top:s,left:a,right:o,bottom:l}=n;void 0===i&&(i=10),void 0===r&&(r=dV);const{isTop:c,isBottom:u,isLeft:h,isRight:d}=hV(e),f={x:0,y:0},p={x:0,y:0},m=t.height*r.y,g=t.width*r.x;return!c&&s<=t.top+m?(f.y=cV.Backward,p.y=i*Math.abs((t.top+m-s)/m)):!u&&l>=t.bottom-m&&(f.y=cV.Forward,p.y=i*Math.abs((t.bottom-m-l)/m)),!d&&o>=t.right-g?(f.x=cV.Forward,p.x=i*Math.abs((t.right-g-o)/g)):!h&&a<=t.left+g&&(f.x=cV.Backward,p.x=i*Math.abs((t.left+g-a)/g)),{direction:f,speed:p}}function pV(e){if(e===document.scrollingElement){const{innerWidth:e,innerHeight:t}=window;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}const{top:t,left:n,right:i,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:i,bottom:r,width:e.clientWidth,height:e.clientHeight}}function mV(e){return e.reduce((e,t)=>bB(e,lV(t)),VB)}function gV(e,t){if(void 0===t&&(t=tV),!e)return;const{top:n,left:i,bottom:r,right:s}=t(e);rV(e)&&(r<=0||s<=0||n>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const vV=[["x",["left","right"],function(e){return e.reduce((e,t)=>e+aV(t),0)}],["y",["top","bottom"],function(e){return e.reduce((e,t)=>e+oV(t),0)}]];class yV{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=iV(t),i=mV(n);this.rect=I({},e),this.width=e.width,this.height=e.height;for(const[r,s,a]of vV)for(const e of s)Object.defineProperty(this,e,{get:()=>{const t=a(n),s=i[r]-t;return this.rect[e]+s},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class xV{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(e=>{var t;return null==(t=this.target)?void 0:t.removeEventListener(...e)})},this.target=e}add(e,t,n){var i;null==(i=this.target)||i.addEventListener(e,t,n),this.listeners.push([e,t,n])}}function bV(e,t){const n=Math.abs(e.x),i=Math.abs(e.y);return"number"===typeof t?Math.sqrt(n**2+i**2)>t:"x"in t&&"y"in t?n>t.x&&i>t.y:"x"in t?n>t.x:"y"in t&&i>t.y}var _V,wV;function SV(e){e.preventDefault()}function MV(e){e.stopPropagation()}!function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"}(_V||(_V={})),function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"}(wV||(wV={}));const CV={start:[wV.Space,wV.Enter],cancel:[wV.Esc],end:[wV.Space,wV.Enter,wV.Tab]},EV=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case wV.Right:return I(I({},n),{},{x:n.x+25});case wV.Left:return I(I({},n),{},{x:n.x-25});case wV.Down:return I(I({},n),{},{y:n.y+25});case wV.Up:return I(I({},n),{},{y:n.y-25})}};class TV{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new xV(uB(t)),this.windowListeners=new xV(aB(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(_V.Resize,this.handleCancel),this.windowListeners.add(_V.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(_V.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,n=e.node.current;n&&gV(n),t(VB)}handleKeyDown(e){if(wB(e)){const{active:t,context:n,options:i}=this.props,{keyboardCodes:r=CV,coordinateGetter:s=EV,scrollBehavior:a="smooth"}=i,{code:o}=e;if(r.end.includes(o))return void this.handleEnd(e);if(r.cancel.includes(o))return void this.handleCancel(e);const{collisionRect:l}=n.current,c=l?{x:l.left,y:l.top}:VB;this.referenceCoordinates||(this.referenceCoordinates=c);const u=s(e,{active:t,context:n.current,currentCoordinates:c});if(u){const t=_B(u,c),i={x:0,y:0},{scrollableAncestors:r}=n.current;for(const n of r){const r=e.code,{isTop:s,isRight:o,isLeft:l,isBottom:c,maxScroll:h,minScroll:d}=hV(n),f=pV(n),p={x:Math.min(r===wV.Right?f.right-f.width/2:f.right,Math.max(r===wV.Right?f.left:f.left+f.width/2,u.x)),y:Math.min(r===wV.Down?f.bottom-f.height/2:f.bottom,Math.max(r===wV.Down?f.top:f.top+f.height/2,u.y))},m=r===wV.Right&&!o||r===wV.Left&&!l,g=r===wV.Down&&!c||r===wV.Up&&!s;if(m&&p.x!==u.x){const e=n.scrollLeft+t.x,s=r===wV.Right&&e<=h.x||r===wV.Left&&e>=d.x;if(s&&!t.y)return void n.scrollTo({left:e,behavior:a});i.x=s?n.scrollLeft-e:r===wV.Right?n.scrollLeft-h.x:n.scrollLeft-d.x,i.x&&n.scrollBy({left:-i.x,behavior:a});break}if(g&&p.y!==u.y){const e=n.scrollTop+t.y,s=r===wV.Down&&e<=h.y||r===wV.Up&&e>=d.y;if(s&&!t.x)return void n.scrollTo({top:e,behavior:a});i.y=s?n.scrollTop-e:r===wV.Down?n.scrollTop-h.y:n.scrollTop-d.y,i.y&&n.scrollBy({top:-i.y,behavior:a});break}}this.handleMove(e,bB(_B(u,this.referenceCoordinates),i))}}}handleMove(e,t){const{onMove:n}=this.props;e.preventDefault(),n(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}function AV(e){return Boolean(e&&"distance"in e)}function kV(e){return Boolean(e&&"delay"in e)}TV.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:i=CV,onActivation:r}=t,{active:s}=n;const{code:a}=e.nativeEvent;if(i.start.includes(a)){const t=s.activatorNode.current;return(!t||e.target===t)&&(e.preventDefault(),null==r||r({event:e.nativeEvent}),!0)}return!1}}];class PV{constructor(e,t,n){var i;void 0===n&&(n=function(e){const{EventTarget:t}=aB(e);return e instanceof t?e:uB(e)}(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:r}=e,{target:s}=r;this.props=e,this.events=t,this.document=uB(s),this.documentListeners=new xV(this.document),this.listeners=new xV(n),this.windowListeners=new xV(aB(s)),this.initialCoordinates=null!=(i=SB(r))?i:VB,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:n}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(_V.Resize,this.handleCancel),this.windowListeners.add(_V.DragStart,SV),this.windowListeners.add(_V.VisibilityChange,this.handleCancel),this.windowListeners.add(_V.ContextMenu,SV),this.documentListeners.add(_V.Keydown,this.handleKeydown),t){if(null!=n&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(kV(t))return this.timeoutId=setTimeout(this.handleStart,t.delay),void this.handlePending(t);if(AV(t))return void this.handlePending(t)}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:n,onPending:i}=this.props;i(n,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(_V.Click,MV,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(_V.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:n,initialCoordinates:i,props:r}=this,{onMove:s,options:{activationConstraint:a}}=r;if(!i)return;const o=null!=(t=SB(e))?t:VB,l=_B(i,o);if(!n&&a){if(AV(a)){if(null!=a.tolerance&&bV(l,a.tolerance))return this.handleCancel();if(bV(l,a.distance))return this.handleStart()}return kV(a)&&bV(l,a.tolerance)?this.handleCancel():void this.handlePending(a,l)}e.cancelable&&e.preventDefault(),s(o)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===wV.Esc&&this.handleCancel()}removeTextSelection(){var e;null==(e=this.document.getSelection())||e.removeAllRanges()}}const LV={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class DV extends PV{constructor(e){const{event:t}=e,n=uB(t.target);super(e,LV,n)}}DV.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return!(!n.isPrimary||0!==n.button)&&(null==i||i({event:n}),!0)}}];const RV={move:{name:"mousemove"},end:{name:"mouseup"}};var NV;!function(e){e[e.RightClick=2]="RightClick"}(NV||(NV={}));(class extends PV{constructor(e){super(e,RV,uB(e.event.target))}}).activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return n.button!==NV.RightClick&&(null==i||i({event:n}),!0)}}];const IV={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};var OV,zV;function FV(e){let{acceleration:n,activator:i=OV.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:o=5,order:l=zV.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:h,delta:d,threshold:f}=e;const p=function(e){let{delta:t,disabled:n}=e;const i=gB(t);return pB(e=>{if(n||!i||!e)return jV;const r={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[cV.Backward]:e.x[cV.Backward]||-1===r.x,[cV.Forward]:e.x[cV.Forward]||1===r.x},y:{[cV.Backward]:e.y[cV.Backward]||-1===r.y,[cV.Forward]:e.y[cV.Forward]||1===r.y}}},[n,t,i])}({delta:d,disabled:!a}),[m,g]=function(){const e=(0,t.useRef)(null);return[(0,t.useCallback)((t,n)=>{e.current=setInterval(t,n)},[]),(0,t.useCallback)(()=>{null!==e.current&&(clearInterval(e.current),e.current=null)},[])]}(),v=(0,t.useRef)({x:0,y:0}),y=(0,t.useRef)({x:0,y:0}),x=(0,t.useMemo)(()=>{switch(i){case OV.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case OV.DraggableRect:return s}},[i,s,c]),b=(0,t.useRef)(null),_=(0,t.useCallback)(()=>{const e=b.current;if(!e)return;const t=v.current.x*y.current.x,n=v.current.y*y.current.y;e.scrollBy(t,n)},[]),w=(0,t.useMemo)(()=>l===zV.TreeOrder?[...u].reverse():u,[l,u]);(0,t.useEffect)(()=>{if(a&&u.length&&x){for(const e of w){if(!1===(null==r?void 0:r(e)))continue;const t=u.indexOf(e),i=h[t];if(!i)continue;const{direction:s,speed:a}=fV(e,i,x,n,f);for(const e of["x","y"])p[e][s[e]]||(a[e]=0,s[e]=0);if(a.x>0||a.y>0)return g(),b.current=e,m(_,o),v.current=a,void(y.current=s)}v.current={x:0,y:0},y.current={x:0,y:0},g()}else g()},[n,_,r,g,a,o,JSON.stringify(x),JSON.stringify(p),m,u,w,h,JSON.stringify(f)])}(class extends PV{constructor(e){super(e,IV)}static setup(){return window.addEventListener(IV.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(IV.move.name,e)};function e(){}}}).activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;const{touches:r}=n;return!(r.length>1)&&(null==i||i({event:n}),!0)}}],function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"}(OV||(OV={})),function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"}(zV||(zV={}));const jV={x:{[cV.Backward]:!1,[cV.Forward]:!1},y:{[cV.Backward]:!1,[cV.Forward]:!1}};var BV,VV;!function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"}(BV||(BV={})),function(e){e.Optimized="optimized"}(VV||(VV={}));const UV=new Map;function HV(e,t){return pB(n=>e?n||("function"===typeof t?t(e):e):null,[t,e])}function WV(e){let{callback:n,disabled:i}=e;const r=dB(n),s=(0,t.useMemo)(()=>{if(i||"undefined"===typeof window||"undefined"===typeof window.ResizeObserver)return;const{ResizeObserver:e}=window;return new e(r)},[i]);return(0,t.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}function GV(e){return new yV(tV(e),e)}function qV(e,n,i){void 0===n&&(n=GV);const[r,s]=(0,t.useState)(null);function a(){s(t=>{if(!e)return null;var r;if(!1===e.isConnected)return null!=(r=null!=t?t:i)?r:null;const s=n(e);return JSON.stringify(t)===JSON.stringify(s)?t:s})}const o=function(e){let{callback:n,disabled:i}=e;const r=dB(n),s=(0,t.useMemo)(()=>{if(i||"undefined"===typeof window||"undefined"===typeof window.MutationObserver)return;const{MutationObserver:e}=window;return new e(r)},[r,i]);return(0,t.useEffect)(()=>()=>null==s?void 0:s.disconnect(),[s]),s}({callback(t){if(e)for(const n of t){const{type:t,target:i}=n;if("childList"===t&&i instanceof HTMLElement&&i.contains(e)){a();break}}}}),l=WV({callback:a});return hB(()=>{a(),e?(null==l||l.observe(e),null==o||o.observe(document.body,{childList:!0,subtree:!0})):(null==l||l.disconnect(),null==o||o.disconnect())},[e]),r}const XV=[];function YV(e,n){void 0===n&&(n=[]);const i=(0,t.useRef)(null);return(0,t.useEffect)(()=>{i.current=null},n),(0,t.useEffect)(()=>{const t=e!==VB;t&&!i.current&&(i.current=e),!t&&i.current&&(i.current=null)},[e]),i.current?_B(e,i.current):VB}function KV(e){return(0,t.useMemo)(()=>e?function(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}(e):null,[e])}const ZV=[];function QV(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return lB(t)?t:e}const JV=[{sensor:DV,options:{}},{sensor:TV,options:{}}],$V={current:{}},eU={draggable:{measure:nV},droppable:{measure:nV,strategy:BV.WhileDragging,frequency:VV.Optimized},dragOverlay:{measure:tV}};class tU extends Map{get(e){var t;return null!=e&&null!=(t=super.get(e))?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,n;return null!=(t=null==(n=this.get(e))?void 0:n.node.current)?t:void 0}}const nU={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new tU,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:FB},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:eU,measureDroppableContainers:FB,windowRect:null,measuringScheduled:!1},iU={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:FB,draggableNodes:new Map,over:null,measureDroppableContainers:FB},rU=(0,t.createContext)(iU),sU=(0,t.createContext)(nU);function aU(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new tU}}}function oU(e,t){switch(t.type){case zB.DragStart:return I(I({},e),{},{draggable:I(I({},e.draggable),{},{initialCoordinates:t.initialCoordinates,active:t.active})});case zB.DragMove:return null==e.draggable.active?e:I(I({},e),{},{draggable:I(I({},e.draggable),{},{translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}})});case zB.DragEnd:case zB.DragCancel:return I(I({},e),{},{draggable:I(I({},e.draggable),{},{active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}})});case zB.RegisterDroppable:{const{element:n}=t,{id:i}=n,r=new tU(e.droppable.containers);return r.set(i,n),I(I({},e),{},{droppable:I(I({},e.droppable),{},{containers:r})})}case zB.SetDroppableDisabled:{const{id:n,key:i,disabled:r}=t,s=e.droppable.containers.get(n);if(!s||i!==s.key)return e;const a=new tU(e.droppable.containers);return a.set(n,I(I({},s),{},{disabled:r})),I(I({},e),{},{droppable:I(I({},e.droppable),{},{containers:a})})}case zB.UnregisterDroppable:{const{id:n,key:i}=t,r=e.droppable.containers.get(n);if(!r||i!==r.key)return e;const s=new tU(e.droppable.containers);return s.delete(n),I(I({},e),{},{droppable:I(I({},e.droppable),{},{containers:s})})}default:return e}}function lU(e){let{disabled:n}=e;const{active:i,activatorEvent:r,draggableNodes:s}=(0,t.useContext)(rU),a=gB(r),o=gB(null==i?void 0:i.id);return(0,t.useEffect)(()=>{if(!n&&!r&&a&&null!=o){if(!wB(a))return;if(document.activeElement===a.target)return;const e=s.get(o);if(!e)return;const{activatorNode:t,node:n}=e;if(!t.current&&!n.current)return;requestAnimationFrame(()=>{for(const e of[t.current,n.current]){if(!e)continue;const t=EB(e);if(t){t.focus();break}}})}},[r,n,s,o,a]),null}function cU(e,t){let{transform:n}=t,i=Qe(t,PB);return null!=e&&e.length?e.reduce((e,t)=>t(I({transform:e},i)),n):n}const uU=(0,t.createContext)(I(I({},VB),{},{scaleX:1,scaleY:1}));var hU;!function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"}(hU||(hU={}));const dU=(0,t.memo)(function(e){var n,i,r,s;let{id:a,accessibility:o,autoScroll:l=!0,children:c,sensors:u=JV,collisionDetection:h=KB,measuring:d,modifiers:f}=e,p=Qe(e,LB);const m=(0,t.useReducer)(oU,void 0,aU),[g,v]=m,[y,x]=function(){const[e]=(0,t.useState)(()=>new Set),n=(0,t.useCallback)(t=>(e.add(t),()=>e.delete(t)),[e]);return[(0,t.useCallback)(t=>{let{type:n,event:i}=t;e.forEach(e=>{var t;return null==(t=e[n])?void 0:t.call(e,i)})},[e]),n]}(),[b,_]=(0,t.useState)(hU.Uninitialized),w=b===hU.Initialized,{draggable:{active:S,nodes:M,translate:C},droppable:{containers:E}}=g,T=null!=S?M.get(S):null,A=(0,t.useRef)({initial:null,translated:null}),k=(0,t.useMemo)(()=>{var e;return null!=S?{id:S,data:null!=(e=null==T?void 0:T.data)?e:$V,rect:A}:null},[S,T]),P=(0,t.useRef)(null),[L,D]=(0,t.useState)(null),[R,N]=(0,t.useState)(null),O=fB(p,Object.values(p)),z=yB("DndDescribedBy",a),F=(0,t.useMemo)(()=>E.getEnabled(),[E]),j=(B=d,(0,t.useMemo)(()=>({draggable:I(I({},eU.draggable),null==B?void 0:B.draggable),droppable:I(I({},eU.droppable),null==B?void 0:B.droppable),dragOverlay:I(I({},eU.dragOverlay),null==B?void 0:B.dragOverlay)}),[null==B?void 0:B.draggable,null==B?void 0:B.droppable,null==B?void 0:B.dragOverlay]));var B;const{droppableRects:V,measureDroppableContainers:U,measuringScheduled:H}=function(e,n){let{dragging:i,dependencies:r,config:s}=n;const[a,o]=(0,t.useState)(null),{frequency:l,measure:c,strategy:u}=s,h=(0,t.useRef)(e),d=function(){switch(u){case BV.Always:return!1;case BV.BeforeDragging:return i;default:return!i}}(),f=fB(d),p=(0,t.useCallback)(function(e){void 0===e&&(e=[]),f.current||o(t=>null===t?e:t.concat(e.filter(e=>!t.includes(e))))},[f]),m=(0,t.useRef)(null),g=pB(t=>{if(d&&!i)return UV;if(!t||t===UV||h.current!==e||null!=a){const t=new Map;for(let n of e){if(!n)continue;if(a&&a.length>0&&!a.includes(n.id)&&n.rect.current){t.set(n.id,n.rect.current);continue}const e=n.node.current,i=e?new yV(c(e),e):null;n.rect.current=i,i&&t.set(n.id,i)}return t}return t},[e,a,i,d,c]);return(0,t.useEffect)(()=>{h.current=e},[e]),(0,t.useEffect)(()=>{d||p()},[i,d]),(0,t.useEffect)(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),(0,t.useEffect)(()=>{d||"number"!==typeof l||null!==m.current||(m.current=setTimeout(()=>{p(),m.current=null},l))},[l,d,p,...r]),{droppableRects:g,measureDroppableContainers:p,measuringScheduled:null!=a}}(F,{dragging:w,dependencies:[C.x,C.y],config:j.droppable}),W=function(e,t){const n=null!=t?e.get(t):void 0,i=n?n.node.current:null;return pB(e=>{var n;return null==t?null:null!=(n=null!=i?i:e)?n:null},[i,t])}(M,S),G=(0,t.useMemo)(()=>R?SB(R):null,[R]),q=function(){const e=!1===(null==L?void 0:L.autoScrollEnabled),t="object"===typeof l?!1===l.enabled:!1===l,n=w&&!e&&!t;if("object"===typeof l)return I(I({},l),{},{enabled:n});return{enabled:n}}(),X=function(e,t){return HV(e,t)}(W,j.draggable.measure);!function(e){let{activeNode:n,measure:i,initialRect:r,config:s=!0}=e;const a=(0,t.useRef)(!1),{x:o,y:l}="boolean"===typeof s?{x:s,y:s}:s;hB(()=>{if(!o&&!l||!n)return void(a.current=!1);if(a.current||!r)return;const e=null==n?void 0:n.node.current;if(!e||!1===e.isConnected)return;const t=ZB(i(e),r);if(o||(t.x=0),l||(t.y=0),a.current=!0,Math.abs(t.x)>0||Math.abs(t.y)>0){const n=rV(e);n&&n.scrollBy({top:t.y,left:t.x})}},[n,o,l,r,i])}({activeNode:null!=S?M.get(S):null,config:q.layoutShiftCompensation,initialRect:X,measure:j.draggable.measure});const Y=qV(W,j.draggable.measure,X),K=qV(W?W.parentElement:null),Z=(0,t.useRef)({activatorEvent:null,active:null,activeNode:W,collisionRect:null,collisions:null,droppableRects:V,draggableNodes:M,draggingNode:null,draggingNodeRect:null,droppableContainers:E,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Q=E.getNodeFor(null==(n=Z.current.over)?void 0:n.id),J=function(e){let{measure:n}=e;const[i,r]=(0,t.useState)(null),s=WV({callback:(0,t.useCallback)(e=>{for(const{target:t}of e)if(lB(t)){r(e=>{const i=n(t);return e?I(I({},e),{},{width:i.width,height:i.height}):i});break}},[n])}),a=(0,t.useCallback)(e=>{const t=QV(e);null==s||s.disconnect(),t&&(null==s||s.observe(t)),r(t?n(t):null)},[n,s]),[o,l]=mB(a);return(0,t.useMemo)(()=>({nodeRef:o,rect:i,setRef:l}),[i,o,l])}({measure:j.dragOverlay.measure}),$=null!=(i=J.nodeRef.current)?i:W,ee=w?null!=(r=J.rect)?r:Y:null,te=Boolean(J.nodeRef.current&&J.rect),ne=ZB(ie=te?null:Y,HV(ie));var ie;const re=KV($?aB($):null),se=function(e){const n=(0,t.useRef)(e),i=pB(t=>e?t&&t!==XV&&e&&n.current&&e.parentNode===n.current.parentNode?t:iV(e):XV,[e]);return(0,t.useEffect)(()=>{n.current=e},[e]),i}(w?null!=Q?Q:W:null),ae=function(e,n){void 0===n&&(n=tV);const[i]=e,r=KV(i?aB(i):null),[s,a]=(0,t.useState)(ZV);function o(){a(()=>e.length?e.map(e=>uV(e)?r:new yV(n(e),e)):ZV)}const l=WV({callback:o});return hB(()=>{null==l||l.disconnect(),o(),e.forEach(e=>null==l?void 0:l.observe(e))},[e]),s}(se),oe=cU(f,{transform:{x:C.x-ne.x,y:C.y-ne.y,scaleX:1,scaleY:1},activatorEvent:R,active:k,activeNodeRect:Y,containerNodeRect:K,draggingNodeRect:ee,over:Z.current.over,overlayNodeRect:J.rect,scrollableAncestors:se,scrollableAncestorRects:ae,windowRect:re}),le=G?bB(G,C):null,ce=function(e){const[n,i]=(0,t.useState)(null),r=(0,t.useRef)(e),s=(0,t.useCallback)(e=>{const t=sV(e.target);t&&i(e=>e?(e.set(t,lV(t)),new Map(e)):null)},[]);return(0,t.useEffect)(()=>{const t=r.current;if(e!==t){n(t);const a=e.map(e=>{const t=sV(e);return t?(t.addEventListener("scroll",s,{passive:!0}),[t,lV(t)]):null}).filter(e=>null!=e);i(a.length?new Map(a):null),r.current=e}return()=>{n(e),n(t)};function n(e){e.forEach(e=>{const t=sV(e);null==t||t.removeEventListener("scroll",s)})}},[s,e]),(0,t.useMemo)(()=>e.length?n?Array.from(n.values()).reduce((e,t)=>bB(e,t),VB):mV(e):VB,[e,n])}(se),ue=YV(ce),he=YV(ce,[Y]),de=bB(oe,ue),fe=ee?JB(ee,oe):null,pe=k&&fe?h({active:k,collisionRect:fe,droppableRects:V,droppableContainers:F,pointerCoordinates:le}):null,me=function(e,t){if(!e||0===e.length)return null;const[n]=e;return t?n[t]:n}(pe,"id"),[ge,ve]=(0,t.useState)(null),ye=function(e,t,n){return I(I({},e),{},{scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1})}(te?oe:bB(oe,he),null!=(s=null==ge?void 0:ge.rect)?s:null,Y),xe=(0,t.useRef)(null),be=(0,t.useCallback)((e,t)=>{let{sensor:n,options:i}=t;if(null==P.current)return;const r=M.get(P.current);if(!r)return;const s=e.nativeEvent,a=new n({active:P.current,activeNode:r,event:s,options:i,context:Z,onAbort(e){if(!M.get(e))return;const{onDragAbort:t}=O.current,n={id:e};null==t||t(n),y({type:"onDragAbort",event:n})},onPending(e,t,n,i){if(!M.get(e))return;const{onDragPending:r}=O.current,s={id:e,constraint:t,initialCoordinates:n,offset:i};null==r||r(s),y({type:"onDragPending",event:s})},onStart(e){const t=P.current;if(null==t)return;const n=M.get(t);if(!n)return;const{onDragStart:i}=O.current,r={activatorEvent:s,active:{id:t,data:n.data,rect:A}};(0,nB.unstable_batchedUpdates)(()=>{null==i||i(r),_(hU.Initializing),v({type:zB.DragStart,initialCoordinates:e,active:t}),y({type:"onDragStart",event:r}),D(xe.current),N(s)})},onMove(e){v({type:zB.DragMove,coordinates:e})},onEnd:o(zB.DragEnd),onCancel:o(zB.DragCancel)});function o(e){return async function(){const{active:t,collisions:n,over:i,scrollAdjustedTranslate:r}=Z.current;let a=null;if(t&&r){const{cancelDrop:o}=O.current;if(a={activatorEvent:s,active:t,collisions:n,delta:r,over:i},e===zB.DragEnd&&"function"===typeof o){await Promise.resolve(o(a))&&(e=zB.DragCancel)}}P.current=null,(0,nB.unstable_batchedUpdates)(()=>{v({type:e}),_(hU.Uninitialized),ve(null),D(null),N(null),xe.current=null;const t=e===zB.DragEnd?"onDragEnd":"onDragCancel";if(a){const e=O.current[t];null==e||e(a),y({type:t,event:a})}})}}xe.current=a},[M]),_e=(0,t.useCallback)((e,t)=>(n,i)=>{const r=n.nativeEvent,s=M.get(i);if(null!==P.current||!s||r.dndKit||r.defaultPrevented)return;const a={active:s};!0===e(n,t.options,a)&&(r.dndKit={capturedBy:t.sensor},P.current=i,be(n,t))},[M,be]),we=function(e,n){return(0,t.useMemo)(()=>e.reduce((e,t)=>{const{sensor:i}=t;return[...e,...i.activators.map(e=>({eventName:e.eventName,handler:n(e.handler,t)}))]},[]),[e,n])}(u,_e);!function(e){(0,t.useEffect)(()=>{if(!iB)return;const t=e.map(e=>{let{sensor:t}=e;return null==t.setup?void 0:t.setup()});return()=>{for(const e of t)null==e||e()}},e.map(e=>{let{sensor:t}=e;return t}))}(u),hB(()=>{Y&&b===hU.Initializing&&_(hU.Initialized)},[Y,b]),(0,t.useEffect)(()=>{const{onDragMove:e}=O.current,{active:t,activatorEvent:n,collisions:i,over:r}=Z.current;if(!t||!n)return;const s={active:t,activatorEvent:n,collisions:i,delta:{x:de.x,y:de.y},over:r};(0,nB.unstable_batchedUpdates)(()=>{null==e||e(s),y({type:"onDragMove",event:s})})},[de.x,de.y]),(0,t.useEffect)(()=>{const{active:e,activatorEvent:t,collisions:n,droppableContainers:i,scrollAdjustedTranslate:r}=Z.current;if(!e||null==P.current||!t||!r)return;const{onDragOver:s}=O.current,a=i.get(me),o=a&&a.rect.current?{id:a.id,rect:a.rect.current,data:a.data,disabled:a.disabled}:null,l={active:e,activatorEvent:t,collisions:n,delta:{x:r.x,y:r.y},over:o};(0,nB.unstable_batchedUpdates)(()=>{ve(o),null==s||s(l),y({type:"onDragOver",event:l})})},[me]),hB(()=>{Z.current={activatorEvent:R,active:k,activeNode:W,collisionRect:fe,collisions:pe,droppableRects:V,draggableNodes:M,draggingNode:$,draggingNodeRect:ee,droppableContainers:E,over:ge,scrollableAncestors:se,scrollAdjustedTranslate:de},A.current={initial:ee,translated:fe}},[k,W,pe,fe,M,$,ee,V,E,ge,se,de]),FV(I(I({},q),{},{delta:C,draggingRect:fe,pointerCoordinates:le,scrollableAncestors:se,scrollableAncestorRects:ae}));const Se=(0,t.useMemo)(()=>({active:k,activeNode:W,activeNodeRect:Y,activatorEvent:R,collisions:pe,containerNodeRect:K,dragOverlay:J,draggableNodes:M,droppableContainers:E,droppableRects:V,over:ge,measureDroppableContainers:U,scrollableAncestors:se,scrollableAncestorRects:ae,measuringConfiguration:j,measuringScheduled:H,windowRect:re}),[k,W,Y,R,pe,K,J,M,E,V,ge,U,se,ae,j,H,re]),Me=(0,t.useMemo)(()=>({activatorEvent:R,activators:we,active:k,activeNodeRect:Y,ariaDescribedById:{draggable:z},dispatch:v,draggableNodes:M,over:ge,measureDroppableContainers:U}),[R,we,k,Y,v,z,M,ge,U]);return t.createElement(RB.Provider,{value:x},t.createElement(rU.Provider,{value:Me},t.createElement(sU.Provider,{value:Se},t.createElement(uU.Provider,{value:ye},c)),t.createElement(lU,{disabled:!1===(null==o?void 0:o.restoreFocus)})),t.createElement(OB,I(I({},o),{},{hiddenTextDescribedById:z})))}),fU=(0,t.createContext)(null),pU="button";function mU(e){let{id:n,data:i,disabled:r=!1,attributes:s}=e;const a=yB("Draggable"),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:h,draggableNodes:d,over:f}=(0,t.useContext)(rU),{role:p=pU,roleDescription:m="draggable",tabIndex:g=0}=null!=s?s:{},v=(null==c?void 0:c.id)===n,y=(0,t.useContext)(v?uU:fU),[x,b]=mB(),[_,w]=mB(),S=function(e,n){return(0,t.useMemo)(()=>e.reduce((e,t)=>{let{eventName:i,handler:r}=t;return e[i]=e=>{r(e,n)},e},{}),[e,n])}(o,n),M=fB(i);hB(()=>(d.set(n,{id:n,key:a,node:x,activatorNode:_,data:M}),()=>{const e=d.get(n);e&&e.key===a&&d.delete(n)}),[d,n]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:(0,t.useMemo)(()=>({role:p,tabIndex:g,"aria-disabled":r,"aria-pressed":!(!v||p!==pU)||void 0,"aria-roledescription":m,"aria-describedby":h.draggable}),[r,p,g,v,m,h.draggable]),isDragging:v,listeners:r?void 0:S,node:x,over:f,setNodeRef:b,setActivatorNodeRef:w,transform:y}}function gU(){return(0,t.useContext)(sU)}const vU={timeout:25};function yU(e){let{animation:n,children:i}=e;const[r,s]=(0,t.useState)(null),[a,o]=(0,t.useState)(null),l=gB(i);return i||r||!l||s(l),hB(()=>{if(!a)return;const e=null==r?void 0:r.key,t=null==r?void 0:r.props.id;null!=e&&null!=t?Promise.resolve(n(t,a)).then(()=>{s(null)}):s(null)},[n,r,a]),t.createElement(t.Fragment,null,i,r?(0,t.cloneElement)(r,{ref:o}):null)}const xU={x:0,y:0,scaleX:1,scaleY:1};function bU(e){let{children:n}=e;return t.createElement(rU.Provider,{value:iU},t.createElement(uU.Provider,{value:xU},n))}const _U={position:"fixed",touchAction:"none"},wU=e=>wB(e)?"transform 250ms ease":void 0,SU=(0,t.forwardRef)((e,n)=>{let{as:i,activatorEvent:r,adjustScale:s,children:a,className:o,rect:l,style:c,transform:u,transition:h=wU}=e;if(!l)return null;const d=s?u:I(I({},u),{},{scaleX:1,scaleY:1}),f=I(I({},_U),{},{width:l.width,height:l.height,top:l.top,left:l.left,transform:MB.Transform.toString(d),transformOrigin:s&&r?HB(r,l):void 0,transition:"function"===typeof h?h(r):h},c);return t.createElement(i,{className:o,style:f,ref:n},a)}),MU=e=>t=>{let{active:n,dragOverlay:i}=t;const r={},{styles:s,className:a}=e;if(null!=s&&s.active)for(const[e,o]of Object.entries(s.active))void 0!==o&&(r[e]=n.node.style.getPropertyValue(e),n.node.style.setProperty(e,o));if(null!=s&&s.dragOverlay)for(const[e,o]of Object.entries(s.dragOverlay))void 0!==o&&i.node.style.setProperty(e,o);return null!=a&&a.active&&n.node.classList.add(a.active),null!=a&&a.dragOverlay&&i.node.classList.add(a.dragOverlay),function(){for(const[e,t]of Object.entries(r))n.node.style.setProperty(e,t);null!=a&&a.active&&n.node.classList.remove(a.active)}},CU={duration:250,easing:"ease",keyframes:e=>{let{transform:{initial:t,final:n}}=e;return[{transform:MB.Transform.toString(t)},{transform:MB.Transform.toString(n)}]},sideEffects:MU({styles:{active:{opacity:"0"}}})};function EU(e){let{config:t,draggableNodes:n,droppableContainers:i,measuringConfiguration:r}=e;return dB((e,s)=>{if(null===t)return;const a=n.get(e);if(!a)return;const o=a.node.current;if(!o)return;const l=QV(s);if(!l)return;const{transform:c}=aB(s).getComputedStyle(s),u=$B(c);if(!u)return;const h="function"===typeof t?t:function(e){const{duration:t,easing:n,sideEffects:i,keyframes:r}=I(I({},CU),e);return e=>{let{active:s,dragOverlay:a,transform:o}=e,l=Qe(e,DB);if(!t)return;const c={x:a.rect.left-s.rect.left,y:a.rect.top-s.rect.top},u={scaleX:1!==o.scaleX?s.rect.width*o.scaleX/a.rect.width:1,scaleY:1!==o.scaleY?s.rect.height*o.scaleY/a.rect.height:1},h=I({x:o.x-c.x,y:o.y-c.y},u),d=r(I(I({},l),{},{active:s,dragOverlay:a,transform:{initial:o,final:h}})),[f]=d,p=d[d.length-1];if(JSON.stringify(f)===JSON.stringify(p))return;const m=null==i?void 0:i(I({active:s,dragOverlay:a},l)),g=a.node.animate(d,{duration:t,easing:n,fill:"forwards"});return new Promise(e=>{g.onfinish=()=>{null==m||m(),e()}})}}(t);return gV(o,r.draggable.measure),h({active:{id:e,data:a.data,node:o,rect:r.draggable.measure(o)},draggableNodes:n,dragOverlay:{node:s,rect:r.dragOverlay.measure(l)},droppableContainers:i,measuringConfiguration:r,transform:u})})}let TU=0;function AU(e){return(0,t.useMemo)(()=>{if(null!=e)return TU++,TU},[e])}const kU=t.memo(e=>{let{adjustScale:n=!1,children:i,dropAnimation:r,style:s,transition:a,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:h,active:d,activeNodeRect:f,containerNodeRect:p,draggableNodes:m,droppableContainers:g,dragOverlay:v,over:y,measuringConfiguration:x,scrollableAncestors:b,scrollableAncestorRects:_,windowRect:w}=gU(),S=(0,t.useContext)(uU),M=AU(null==d?void 0:d.id),C=cU(o,{activatorEvent:h,active:d,activeNodeRect:f,containerNodeRect:p,draggingNodeRect:v.rect,over:y,overlayNodeRect:v.rect,scrollableAncestors:b,scrollableAncestorRects:_,transform:S,windowRect:w}),E=HV(f),T=EU({config:r,draggableNodes:m,droppableContainers:g,measuringConfiguration:x}),A=E?v.setRef:void 0;return t.createElement(bU,null,t.createElement(yU,{animation:T},d&&M?t.createElement(SU,{key:M,id:d.id,ref:A,as:l,activatorEvent:h,adjustScale:n,className:c,transition:a,rect:E,style:I({zIndex:u},s),transform:C},i):null))});function PU(e,t,n){const i=e.slice();return i.splice(n<0?i.length+n:n,0,i.splice(t,1)[0]),i}function LU(e,t){return e.reduce((e,n,i)=>{const r=t.get(n);return r&&(e[i]=r),e},Array(e.length))}function DU(e){return null!==e&&e>=0}const RU=e=>{let{rects:t,activeIndex:n,overIndex:i,index:r}=e;const s=PU(t,i,n),a=t[r],o=s[r];return o&&a?{x:o.left-a.left,y:o.top-a.top,scaleX:o.width/a.width,scaleY:o.height/a.height}:null};const NU="Sortable",IU=t.createContext({activeIndex:-1,containerId:NU,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:RU,disabled:{draggable:!1,droppable:!1}});function OU(e){let{children:n,id:i,items:r,strategy:s=RU,disabled:a=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:h}=gU(),d=yB(NU,i),f=Boolean(null!==l.rect),p=(0,t.useMemo)(()=>r.map(e=>"object"===typeof e&&"id"in e?e.id:e),[r]),m=null!=o,g=o?p.indexOf(o.id):-1,v=u?p.indexOf(u.id):-1,y=(0,t.useRef)(p),x=!function(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(p,y.current),b=-1!==v&&-1===g||x,_=function(e){return"boolean"===typeof e?{draggable:e,droppable:e}:e}(a);hB(()=>{x&&m&&h(p)},[x,p,m,h]),(0,t.useEffect)(()=>{y.current=p},[p]);const w=(0,t.useMemo)(()=>({activeIndex:g,containerId:d,disabled:_,disableTransforms:b,items:p,overIndex:v,useDragOverlay:f,sortedRects:LU(p,c),strategy:s}),[g,d,_.draggable,_.droppable,b,p,v,c,f,s]);return t.createElement(IU.Provider,{value:w},n)}const zU=e=>{let{id:t,items:n,activeIndex:i,overIndex:r}=e;return PU(n,i,r).indexOf(t)},FU=e=>{let{containerId:t,isSorting:n,wasDragging:i,index:r,items:s,newIndex:a,previousItems:o,previousContainerId:l,transition:c}=e;return!(!c||!i)&&((o===s||r!==a)&&(!!n||a!==r&&t===l))},jU={duration:200,easing:"ease"},BU="transform",VU=MB.Transition.toString({property:BU,duration:0,easing:"linear"}),UU={roleDescription:"sortable"};function HU(e){let{animateLayoutChanges:n=FU,attributes:i,disabled:r,data:s,getNewIndex:a=zU,id:o,strategy:l,resizeObserverConfig:c,transition:u=jU}=e;const{items:h,containerId:d,activeIndex:f,disabled:p,disableTransforms:m,sortedRects:g,overIndex:v,useDragOverlay:y,strategy:x}=(0,t.useContext)(IU),b=function(e,t){var n,i;if("boolean"===typeof e)return{draggable:e,droppable:!1};return{draggable:null!=(n=null==e?void 0:e.draggable)?n:t.draggable,droppable:null!=(i=null==e?void 0:e.droppable)?i:t.droppable}}(r,p),_=h.indexOf(o),w=(0,t.useMemo)(()=>I({sortable:{containerId:d,index:_,items:h}},s),[d,s,_,h]),S=(0,t.useMemo)(()=>h.slice(h.indexOf(o)),[h,o]),{rect:M,node:C,isOver:E,setNodeRef:T}=function(e){let{data:n,disabled:i=!1,id:r,resizeObserverConfig:s}=e;const a=yB("Droppable"),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=(0,t.useContext)(rU),h=(0,t.useRef)({disabled:i}),d=(0,t.useRef)(!1),f=(0,t.useRef)(null),p=(0,t.useRef)(null),{disabled:m,updateMeasurementsFor:g,timeout:v}=I(I({},vU),s),y=fB(null!=g?g:r),x=WV({callback:(0,t.useCallback)(()=>{d.current?(null!=p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(y.current)?y.current:[y.current]),p.current=null},v)):d.current=!0},[v]),disabled:m||!o}),b=(0,t.useCallback)((e,t)=>{x&&(t&&(x.unobserve(t),d.current=!1),e&&x.observe(e))},[x]),[_,w]=mB(b),S=fB(n);return(0,t.useEffect)(()=>{x&&_.current&&(x.disconnect(),d.current=!1,x.observe(_.current))},[_,x]),(0,t.useEffect)(()=>(l({type:zB.RegisterDroppable,element:{id:r,key:a,disabled:i,node:_,rect:f,data:S}}),()=>l({type:zB.UnregisterDroppable,key:a,id:r})),[r]),(0,t.useEffect)(()=>{i!==h.current.disabled&&(l({type:zB.SetDroppableDisabled,id:r,key:a,disabled:i}),h.current.disabled=i)},[r,a,i,l]),{active:o,rect:f,isOver:(null==c?void 0:c.id)===r,node:_,over:c,setNodeRef:w}}({id:o,data:w,disabled:b.droppable,resizeObserverConfig:I({updateMeasurementsFor:S},c)}),{active:A,activatorEvent:k,activeNodeRect:P,attributes:L,setNodeRef:D,listeners:R,isDragging:N,over:O,setActivatorNodeRef:z,transform:F}=mU({id:o,data:w,attributes:I(I({},UU),i),disabled:b.draggable}),j=function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return(0,t.useMemo)(()=>e=>{n.forEach(t=>t(e))},n)}(T,D),B=Boolean(A),V=B&&!m&&DU(f)&&DU(v),U=!y&&N,H=U&&V?F:null,W=V?null!=H?H:(null!=l?l:x)({rects:g,activeNodeRect:P,activeIndex:f,overIndex:v,index:_}):null,G=DU(f)&&DU(v)?a({id:o,items:h,activeIndex:f,overIndex:v}):_,q=null==A?void 0:A.id,X=(0,t.useRef)({activeId:q,items:h,newIndex:G,containerId:d}),Y=h!==X.current.items,K=n({active:A,containerId:d,isDragging:N,isSorting:B,id:o,index:_,items:h,newIndex:X.current.newIndex,previousItems:X.current.items,previousContainerId:X.current.containerId,transition:u,wasDragging:null!=X.current.activeId}),Z=function(e){let{disabled:n,index:i,node:r,rect:s}=e;const[a,o]=(0,t.useState)(null),l=(0,t.useRef)(i);return hB(()=>{if(!n&&i!==l.current&&r.current){const e=s.current;if(e){const t=tV(r.current,{ignoreTransform:!0}),n={x:e.left-t.left,y:e.top-t.top,scaleX:e.width/t.width,scaleY:e.height/t.height};(n.x||n.y)&&o(n)}}i!==l.current&&(l.current=i)},[n,i,r,s]),(0,t.useEffect)(()=>{a&&o(null)},[a]),a}({disabled:!K,index:_,node:C,rect:M});return(0,t.useEffect)(()=>{B&&X.current.newIndex!==G&&(X.current.newIndex=G),d!==X.current.containerId&&(X.current.containerId=d),h!==X.current.items&&(X.current.items=h)},[B,G,d,h]),(0,t.useEffect)(()=>{if(q===X.current.activeId)return;if(q&&!X.current.activeId)return void(X.current.activeId=q);const e=setTimeout(()=>{X.current.activeId=q},50);return()=>clearTimeout(e)},[q]),{active:A,activeIndex:f,attributes:L,data:w,rect:M,index:_,newIndex:G,items:h,isOver:E,isSorting:B,isDragging:N,listeners:R,node:C,overIndex:v,over:O,setNodeRef:j,setActivatorNodeRef:z,setDroppableNodeRef:T,setDraggableNodeRef:D,transform:null!=Z?Z:W,transition:function(){if(Z||Y&&X.current.newIndex===_)return VU;if(U&&!wB(k)||!u)return;if(B||K)return MB.Transition.toString(I(I({},u),{},{property:BU}));return}()}}wV.Down,wV.Right,wV.Up,wV.Left;const WU=e=>{let{character:n,onSave:i,onCancel:r}=e;const[a,o]=(0,t.useState)(n.name),[l,c]=(0,t.useState)(n.color),[u,h]=(0,t.useState)(n.icon);return(0,s.jsx)(Ka.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,s.jsxs)(Ka.div,{className:"bg-slate-800 rounded-xl p-8 w-full max-w-md border border-yellow-500/30 shadow-2xl",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6 border-b border-slate-700 pb-4",children:[(0,s.jsxs)("h3",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,s.jsx)(Vj,{size:24,className:"text-yellow-400"}),"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u7de8\u96c6"]}),(0,s.jsx)("button",{onClick:r,className:"text-gray-400 hover:text-white p-2 rounded-full hover:bg-slate-700",children:(0,s.jsx)(jj,{size:28})})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u540d"}),(0,s.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),className:"w-full px-4 py-2.5 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\u30c6\u30fc\u30de\u30ab\u30e9\u30fc"}),(0,s.jsx)("input",{type:"color",value:l,onChange:e=>c(e.target.value),className:"w-full h-12 p-1 bg-slate-700 border border-slate-600 rounded-lg cursor-pointer"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"\u30a2\u30a4\u30b3\u30f3\u753b\u50cf"}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),className:"w-full px-4 py-2.5 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,s.jsxs)("button",{onClick:()=>{i(I(I({},n),{},{name:a,color:l,icon:u})),r()},className:"w-full bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white py-3 rounded-lg font-bold text-lg",children:[(0,s.jsx)(Zj,{size:20,className:"inline-block mr-2"}),"\u4fdd\u5b58\u3059\u308b"]})]})]})})},GU=e=>{let{character:t,onSelect:n,onDelete:i,onEdit:r}=e;const{setCursorVariant:a}=av(),{attributes:o,listeners:l,setNodeRef:c,transform:u,transition:h,isDragging:d}=HU({id:t.id}),f={transform:MB.Transform.toString(u),transition:h,opacity:d?.5:1};return(0,s.jsxs)(Ka.div,I(I(I({ref:c,style:f},o),l),{},{className:"group cursor-grab aspect-square relative touch-none",variants:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1}},exit:{opacity:0,scale:.5,transition:{duration:.3}},onMouseEnter:()=>a("hover"),onMouseLeave:()=>a("default"),whileTap:{cursor:"grabbing"},children:[(0,s.jsx)("div",{onClick:()=>n(t),className:"w-full h-full rounded-lg flex flex-col items-center justify-end text-white font-bold shadow-lg group-hover:shadow-2xl border-2 border-transparent group-hover:border-white/80 transition-all duration-300 transform group-hover:scale-105 p-2 bg-no-repeat bg-cover bg-center cursor-pointer",style:{backgroundImage:"linear-gradient(to top, ".concat(t.color,"A0 20%, transparent 70%), url(").concat(t.icon?"/images/".concat(encodeURIComponent(t.icon)):"",")"),backgroundColor:"#222"},children:(0,s.jsx)("span",{className:"text-center text-sm shadow-black [text-shadow:_0_1px_2px_var(--tw-shadow-color)]",children:t.name})}),(0,s.jsxs)("div",{className:"absolute top-1 right-1 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),r(t)},className:"p-1 bg-black/50 rounded-full text-white/50 hover:text-white hover:bg-blue-500/80 cursor-pointer",children:(0,s.jsx)(Vj,{size:16})}),(0,s.jsx)("button",{onClick:e=>{e.stopPropagation(),i(t.id)},className:"p-1 bg-black/50 rounded-full text-white/50 hover:text-white hover:bg-red-500/80 cursor-pointer",children:(0,s.jsx)(Uj,{size:16})})]})]}))},qU=e=>{let{onAdd:n,onCancel:i}=e;const[r,a]=(0,t.useState)([]),[o,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!1),{characters:h}=Jg();(0,t.useEffect)(()=>{(async()=>{if(window.electronAPI){const e=await window.electronAPI.getImageFileNames(),t=new Set(h.map(e=>e.icon)),n=e.filter(e=>!t.has(e));a(n)}})()},[h]);return(0,s.jsx)(Ka.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,s.jsxs)(Ka.div,{className:"bg-slate-800 rounded-xl p-6 w-full max-w-4xl h-[80vh] flex flex-col border border-purple-500/30",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},children:[c&&(0,s.jsxs)("div",{className:"absolute inset-0 bg-slate-800/80 flex flex-col items-center justify-center z-10",children:[" ",(0,s.jsx)(Qj,{className:"animate-spin w-16 h-16 text-purple-400"})," ",(0,s.jsx)("p",{className:"mt-4 text-lg",children:"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u8272\u3092\u5206\u6790\u4e2d..."})," "]}),(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[(0,s.jsxs)("h3",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[(0,s.jsx)(Jj,{size:24,className:"text-purple-400"}),"\u753b\u50cf\u304b\u3089\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3092\u9078\u629e"]}),(0,s.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-white p-2 rounded-full hover:bg-slate-700",children:(0,s.jsx)(jj,{size:28})})]}),(0,s.jsxs)("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 mb-4",children:[" ",r.length>0?(0,s.jsxs)("div",{className:"grid grid-cols-4 sm:grid-cols-5 md:grid-cols-6 lg:grid-cols-8 gap-4",children:[" ",r.map(e=>{const t=o.includes(e);return(0,s.jsxs)("div",{className:"relative aspect-square cursor-pointer group",onClick:()=>{return t=e,void l(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},children:[" ",(0,s.jsx)("img",{src:"/images/".concat(encodeURIComponent(e)),alt:e,className:"w-full h-full object-contain rounded-md transition-all duration-200 ".concat(t?"bg-purple-500/50 scale-95":"bg-black/20 hover:bg-black/40")})," ",t&&(0,s.jsxs)("div",{className:"absolute top-1 right-1 text-purple-400 bg-slate-900 rounded-full",children:[" ",(0,s.jsx)(Zj,{size:24})," "]})," "]},e)})," "]}):(0,s.jsxs)("div",{className:"flex items-center justify-center h-full text-white/50",children:[" ",(0,s.jsx)("p",{children:"\u8ffd\u52a0\u3067\u304d\u308b\u753b\u50cf\u304c `public/images` \u30d5\u30a9\u30eb\u30c0\u306b\u3042\u308a\u307e\u305b\u3093\u3002"})," "]})," "]}),(0,s.jsxs)("div",{className:"flex-shrink-0 flex justify-end",children:[" ",(0,s.jsxs)("button",{onClick:async()=>{0!==o.length?(u(!0),await n(o),u(!1),i()):alert("\u8ffd\u52a0\u3059\u308b\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u753b\u50cf\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002")},disabled:0===o.length||c,className:"px-6 py-3 bg-purple-600 rounded-md hover:bg-purple-700 disabled:bg-gray-500 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[" ",(0,s.jsx)($j,{size:18})," ",o.length,"\u4ef6\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3092\u8ffd\u52a0 "]})," "]})]})})},XU=e=>{let{onSelect:n,onBack:i}=e;const{characters:r,setCharacters:a,handleAddMultipleCharacters:o,handleDeleteCharacter:l,handleRecalculateAllColors:c,handleUpdateCharacter:u}=Jg(),{setCursorVariant:h}=av(),{showConfirm:d}=yv(),[f,p]=(0,t.useState)(!1),[m,g]=(0,t.useState)(!1),[v,y]=(0,t.useState)(null),x=BB(jB(DV,{activationConstraint:{distance:8}})),b=async e=>{await d("\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u524a\u9664","\u3053\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f\u95a2\u9023\u30c7\u30fc\u30bf\u3082\u5168\u3066\u5931\u308f\u308c\u307e\u3059\u3002")&&l(e)};return(0,s.jsxs)("div",{className:"w-screen h-screen bg-slate-900 flex flex-col text-white",children:[(0,s.jsxs)(P,{children:[" ",m&&(0,s.jsxs)(Ka.div,{className:"absolute inset-0 bg-slate-900/80 backdrop-blur-sm flex flex-col items-center justify-center z-50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[" ",(0,s.jsx)(Qj,{className:"animate-spin w-16 h-16 text-purple-400"})," ",(0,s.jsx)("p",{className:"mt-4 text-lg",children:"\u5168\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u8272\u3092\u518d\u30b9\u30ad\u30e3\u30f3\u4e2d..."})," "]})," "]}),(0,s.jsx)("header",{className:"flex-shrink-0 bg-black/30 backdrop-blur-sm border-b border-white/10",children:(0,s.jsxs)("div",{className:"container mx-auto px-6 py-4 flex justify-between items-center",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,s.jsx)(Mv,{className:"text-purple-400"}),"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u9078\u629e"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:async()=>{await d("\u8272\u306e\u518d\u30b9\u30ad\u30e3\u30f3","\u5168\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u8272\u3092\u30a2\u30a4\u30b3\u30f3\u753b\u50cf\u304b\u3089\u518d\u30b9\u30ad\u30e3\u30f3\u3057\u307e\u3059\u304b\uff1f")&&(g(!0),await c(),g(!1))},className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-blue-600 hover:bg-blue-700",children:[" ",(0,s.jsx)(eB,{size:20}),"\u8272\u306e\u518d\u30b9\u30ad\u30e3\u30f3 "]}),(0,s.jsxs)("button",{onClick:()=>p(!0),className:"flex items-center gap-2 px-4 py-2 rounded-lg bg-purple-600 hover:bg-purple-700",children:[" ",(0,s.jsx)($j,{size:20}),"\u30ad\u30e3\u30e9\u8ffd\u52a0 "]}),(0,s.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-white/10",children:[" ",(0,s.jsx)(tB,{size:20}),"\u30db\u30fc\u30e0 "]})]})]})}),(0,s.jsx)("main",{className:"flex-grow p-8 overflow-y-auto custom-scrollbar",children:r.length>0?(0,s.jsx)(dU,{sensors:x,collisionDetection:XB,onDragEnd:e=>{const{active:t,over:n}=e;if(t.id!==n.id){const e=r.findIndex(e=>e.id===t.id),i=r.findIndex(e=>e.id===n.id);a(PU(r,e,i))}},children:(0,s.jsx)(OU,{items:r,strategy:RU,children:(0,s.jsx)(Ka.div,{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4",variants:{visible:{transition:{staggerChildren:.02}}},initial:"hidden",animate:"visible",children:r.map(e=>(0,s.jsx)(GU,{character:e,onSelect:n,onDelete:b,onEdit:y},e.id))})})}):(0,s.jsxs)("div",{className:"text-center text-white/50 pt-16",children:[(0,s.jsx)("p",{className:"text-2xl mb-4",children:"\u307e\u3060\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002"}),(0,s.jsx)("p",{children:"\u53f3\u4e0a\u306e\u300c\u30ad\u30e3\u30e9\u8ffd\u52a0\u300d\u30dc\u30bf\u30f3\u304b\u3089\u3001\u6700\u521d\u306e\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3092\u767b\u9332\u3057\u3066\u307f\u307e\u3057\u3087\u3046\uff01"})]})}),(0,s.jsxs)(P,{children:[f&&(0,s.jsx)(qU,{onAdd:async e=>{const t=new Zg,n=e.map(e=>new Promise(n=>{const i=e.replace(/\.(png|jpe?g|gif)$/i,""),r="/images/".concat(encodeURIComponent(e)),s=new Image;s.crossOrigin="Anonymous",s.src=r,s.onload=()=>{try{const r=t.getColor(s),a="#".concat(r.map(e=>e.toString(16).padStart(2,"0")).join(""));n({name:i,icon:e,color:a})}catch(Kg){n({name:i,icon:e,color:"#".concat(Math.floor(16777215*Math.random()).toString(16).padStart(6,"0"))})}},s.onerror=()=>{n({name:i,icon:e,color:"#".concat(Math.floor(16777215*Math.random()).toString(16).padStart(6,"0"))})}})),i=await Promise.all(n);o(i)},onCancel:()=>p(!1)}),v&&(0,s.jsx)(WU,{character:v,onSave:u,onCancel:()=>y(null)})]})]})},YU=pv("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),KU=pv("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),ZU=pv("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),QU=pv("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),JU=pv("video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]),$U=pv("square-check-big",[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),eH=e=>{let{characterData:n,updateCharacterData:i}=e;const{commands:r}=Jg(),[a,o]=(0,t.useState)(null),l=(e,t,r,s)=>{const a=n.combos[e].map(e=>e.id===t?I(I({},e),{},{[r]:s}):e);i(["combos",e],a)};return(0,s.jsxs)("div",{className:"space-y-8",children:[[{key:"low",label:"\u4f4e\u30d1\u30fc\u30bb\u30f3\u30c8 (0-40%)"},{key:"mid",label:"\u4e2d\u30d1\u30fc\u30bb\u30f3\u30c8 (40-80%)"},{key:"high",label:"\u9ad8\u30d1\u30fc\u30bb\u30f3\u30c8 (80%+)"}].map((e,t)=>(0,s.jsxs)(Ka.div,{className:"bg-white/5 p-6 rounded-lg border border-white/10",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-purple-300",children:e.label}),(0,s.jsxs)("button",{onClick:()=>(e=>{const t=n.combos[e],r={id:Date.now(),comboSequence:[],damage:"",notes:"",isKillCombo:!1};i(["combos",e],[...t,r])})(e.key),className:"flex items-center gap-2 px-4 py-2 rounded-md bg-white/10 hover:bg-white/20",children:[(0,s.jsx)(Fj,{size:18})," \u30b3\u30f3\u30dc\u8ffd\u52a0"]})]}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(P,{children:n.combos[e.key].map(t=>(0,s.jsxs)(Ka.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"bg-black/20 p-4 rounded-md border border-white/10",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("label",{className:"text-sm text-white/50",children:"\u30b3\u30f3\u30dc\u30eb\u30fc\u30c8"}),(0,s.jsxs)("div",{className:"w-full bg-slate-900/50 p-2 rounded-md border border-white/10 min-h-[40px] flex flex-wrap gap-1 items-center",children:[t.comboSequence.map((e,n)=>(0,s.jsxs)("span",{className:"bg-slate-700 px-2 py-1 rounded text-sm",children:[e.name,n<t.comboSequence.length-1?" \u2192":""]},n)),(0,s.jsx)("button",{onClick:()=>o({comboId:t.id,percentRange:e.key}),className:"bg-purple-600 w-6 h-6 rounded flex items-center justify-center hover:bg-purple-700",children:"+"}),t.comboSequence.length>0&&(0,s.jsx)("button",{onClick:()=>{return n=e.key,i=t.id,void l(n,i,"comboSequence",[]);var n,i},className:"bg-red-600 w-6 h-6 rounded flex items-center justify-center hover:bg-red-700",children:(0,s.jsx)(jj,{size:14})})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm text-white/50",children:"\u30c0\u30e1\u30fc\u30b8"}),(0,s.jsx)("input",{type:"text",value:t.damage,onChange:n=>l(e.key,t.id,"damage",n.target.value),placeholder:"\u4f8b: 35%",className:"w-full bg-slate-900/50 p-2 rounded-md border border-white/10"})]}),(0,s.jsx)("div",{className:"flex flex-col justify-end",children:(0,s.jsxs)("label",{className:"flex items-center gap-3 text-red-400 font-semibold cursor-pointer mb-2",children:[(0,s.jsx)("input",{type:"checkbox",checked:t.isKillCombo,onChange:n=>l(e.key,t.id,"isKillCombo",n.target.checked),className:"kill-combo-toggle-checkbox",id:"kill-".concat(t.id)}),(0,s.jsx)("label",{htmlFor:"kill-".concat(t.id),className:"kill-combo-toggle-label"}),(0,s.jsx)("span",{children:"\u6483\u589c\u30b3\u30f3\u30dc"})]})})]})]}),(0,s.jsx)("textarea",{value:t.notes,onChange:n=>l(e.key,t.id,"notes",n.target.value),placeholder:"\u30e1\u30e2 (\u4f8b: \u78ba\u5b9a\u5e2f\u3001\u56de\u907f\u306e\u8aad\u307f\u5408\u3044\u306a\u3069)",className:"w-full h-20 bg-slate-900/50 p-2 rounded-md border border-white/10 resize-none text-sm"}),(0,s.jsx)("div",{className:"flex justify-end mt-2",children:(0,s.jsx)("button",{onClick:()=>((e,t)=>{const r=n.combos[e].filter(e=>e.id!==t);i(["combos",e],r)})(e.key,t.id),className:"text-white/30 hover:text-red-500 p-1",children:(0,s.jsx)(Uj,{size:18})})})]},t.id))})})]},e.key)),(0,s.jsx)(P,{children:a&&(0,s.jsx)(Ka.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,s.jsxs)(Ka.div,{className:"bg-slate-800 rounded-xl p-6 w-full max-w-2xl max-h-[80vh] flex flex-col border border-purple-500/30",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4 flex-shrink-0",children:[(0,s.jsx)("h4",{className:"text-xl font-bold text-white",children:"\u30b3\u30de\u30f3\u30c9\u3092\u9078\u629e"}),(0,s.jsx)("button",{onClick:()=>o(null),className:"text-gray-400 hover:text-white p-1",children:(0,s.jsx)(jj,{size:24})})]}),(0,s.jsx)("div",{className:"overflow-y-auto custom-scrollbar pr-2 space-y-4",children:["\u5730\u4e0a\u6280","\u30b9\u30de\u30c3\u30b7\u30e5\u653b\u6483","\u5fc5\u6bba\u6280","\u7a7a\u4e2d\u6280","\u3064\u304b\u307f","\u305d\u306e\u4ed6"].map(e=>{const t=r.filter(t=>t.category===e);return 0===t.length?null:(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-bold text-purple-300 mb-2",children:e}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:t.map(e=>(0,s.jsx)("button",{onClick:()=>{(e=>{if(!a)return;const{comboId:t,percentRange:i}=a,r=n.combos[i].find(e=>e.id===t);if(r){const n=[...r.comboSequence,e];l(i,t,"comboSequence",n)}})(e),o(null)},className:"bg-slate-700 hover:bg-slate-600 text-white py-2 px-3 rounded-lg text-sm text-left transition-colors",children:e.name},e.id))})]},e)})})]})})})]})},tH=e=>{let{title:t,value:n,onChange:i,color:r,delay:a}=e;return(0,s.jsxs)(Ka.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-3 flex items-center",style:{color:r},children:t}),(0,s.jsx)("textarea",{value:n,onChange:i,placeholder:"".concat(t,"\u306e\u6226\u8853\u3084\u610f\u8b58\u3059\u308b\u3053\u3068\u3092\u30e1\u30e2..."),className:"w-full h-36 bg-slate-900/50 p-4 rounded-lg border border-white/10 resize-y custom-scrollbar text-white/90 focus:ring-2 focus:outline-none transition",style:{"--tw-ring-color":r}})]})},nH=e=>{let{characterData:t,updateCharacterData:n}=e;const{gameplan:i}=t;return(0,s.jsx)("div",{className:"space-y-8",children:[{key:"early",title:"\u5e8f\u76e4\u306e\u7acb\u3061\u56de\u308a (0%\u301c)",color:"#34d399"},{key:"mid",title:"\u4e2d\u76e4\u306e\u7acb\u3061\u56de\u308a (\u30c0\u30e1\u30fc\u30b8\u7a3c\u304e)",color:"#facc15"},{key:"kill",title:"\u6483\u589c\u5e2f\u306e\u7acb\u3061\u56de\u308a (\u30d0\u30fc\u30b9\u30c8\u65b9\u6cd5)",color:"#f87171"}].map((e,t)=>(0,s.jsx)(tH,{title:e.title,value:i[e.key],onChange:t=>{return i=e.key,r=t.target.value,void n(["gameplan",i],r);var i,r},color:e.color,delay:t},e.key))})},iH=pv("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),rH=e=>{let{matchup:n,onUpdate:i,onDelete:r}=e;const[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)(n),u=()=>{i(l),o(!1)},h=()=>{c(n),o(!1)};return a?(0,s.jsxs)(Ka.div,{layout:!0,className:"bg-slate-800 p-4 rounded-lg border border-purple-500 space-y-3",children:[(0,s.jsx)("input",{type:"text",value:l.opponentName,onChange:e=>c(I(I({},l),{},{opponentName:e.target.value})),placeholder:"\u76f8\u624b\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u540d",className:"w-full bg-slate-700 p-2 rounded-md font-bold text-lg"}),(0,s.jsx)("textarea",{value:l.notes,onChange:e=>c(I(I({},l),{},{notes:e.target.value})),placeholder:"\u5bfe\u7b56\u30e1\u30e2...",className:"w-full h-24 bg-slate-700 p-2 rounded-md resize-y custom-scrollbar"}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsxs)("button",{onClick:h,className:"bg-gray-500 hover:bg-gray-600 text-white px-3 py-1 rounded-md flex items-center gap-1",children:[(0,s.jsx)(jj,{size:16}),"\u30ad\u30e3\u30f3\u30bb\u30eb"]}),(0,s.jsxs)("button",{onClick:u,className:"bg-purple-600 hover:bg-purple-700 text-white px-3 py-1 rounded-md flex items-center gap-1",children:[(0,s.jsx)(iH,{size:16}),"\u4fdd\u5b58"]})]})]}):(0,s.jsxs)(Ka.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"bg-black/20 p-4 rounded-lg",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("h4",{className:"text-xl font-bold text-purple-300 mb-2",children:n.opponentName}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>o(!0),className:"text-white/50 hover:text-white",children:(0,s.jsx)(Vj,{size:18})}),(0,s.jsx)("button",{onClick:()=>r(n.id),className:"text-white/50 hover:text-red-500",children:(0,s.jsx)(Uj,{size:18})})]})]}),(0,s.jsx)("p",{className:"text-white/80 whitespace-pre-wrap",children:n.notes||"\u30e1\u30e2\u304c\u3042\u308a\u307e\u305b\u3093"})]})},sH=e=>{let{characterData:t,updateCharacterData:n}=e;const i=t.matchups||[],r=e=>{const t=i.map(t=>t.id===e.id?e:t);n(["matchups"],t)},a=e=>{const t=i.filter(t=>t.id!==e);n(["matchups"],t)};return(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"flex justify-end mb-6",children:(0,s.jsxs)("button",{onClick:()=>{const e={id:Date.now(),opponentName:"\u65b0\u898f\u30ad\u30e3\u30e9",notes:""};n(["matchups"],[...i,e])},className:"flex items-center gap-2 px-4 py-2 rounded-md bg-white/10 hover:bg-white/20",children:[(0,s.jsx)(Fj,{size:18})," \u30ad\u30e3\u30e9\u5bfe\u7b56\u3092\u8ffd\u52a0"]})}),(0,s.jsx)("div",{className:"space-y-4",children:(0,s.jsx)(P,{children:i.length>0?i.map(e=>(0,s.jsx)(rH,{matchup:e,onUpdate:r,onDelete:a},e.id)):(0,s.jsx)("p",{className:"text-center text-white/50 py-8",children:"\u307e\u3060\u30ad\u30e3\u30e9\u5bfe\u7b56\u30e1\u30e2\u306f\u3042\u308a\u307e\u305b\u3093\u3002"})})})]})},aH=e=>{let{title:t,value:n,onChange:i,color:r,delay:a,placeholder:o}=e;return(0,s.jsxs)(Ka.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*a},children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-3",style:{color:r},children:t}),(0,s.jsx)("textarea",{value:n,onChange:i,placeholder:o,className:"w-full h-48 bg-slate-900/50 p-4 rounded-lg border border-white/10 resize-y custom-scrollbar text-white/90 focus:ring-2 focus:outline-none transition",style:{"--tw-ring-color":r}})]})},oH=e=>{let{characterData:t,updateCharacterData:n}=e;const{recovery:i}=t;return(0,s.jsx)("div",{className:"space-y-8",children:[{key:"patterns",title:"\u81ea\u5206\u306e\u5fa9\u5e30\u30d1\u30bf\u30fc\u30f3",color:"#60a5fa",placeholder:"\u4e0aB\u306e\u89d2\u5ea6\u3001\u6a2aB\u306e\u30bf\u30a4\u30df\u30f3\u30b0\u3001\u5d16\u63b4\u307e\u308a\u306e\u629e\u3001\u7a7aN\u3084\u7a7a\u524d\u306e\u66b4\u308c\u306a\u3069\u3001\u81ea\u5206\u306e\u5fa9\u5e30\u306e\u9078\u629e\u80a2\u3092\u30e1\u30e2..."},{key:"edgeguarding",title:"\u76f8\u624b\u3078\u306e\u5fa9\u5e30\u963b\u6b62\u30d1\u30bf\u30fc\u30f3",color:"#f87171",placeholder:"\u5d16\u5916\u306b\u51fa\u3057\u305f\u76f8\u624b\u3078\u306e\u8ffd\u6483\u65b9\u6cd5\u3001\u5d16\u63b4\u307e\u308a\u306e2F\u3001\u305d\u306e\u5834\u30fb\u56de\u907f\u30fb\u30b8\u30e3\u30f3\u30d7\u4e0a\u304c\u308a\u306e\u72e9\u308a\u65b9\u306a\u3069\u3092\u30e1\u30e2..."}].map((e,t)=>(0,s.jsx)(aH,{title:e.title,value:i[e.key],onChange:t=>{return i=e.key,r=t.target.value,void n(["recovery",i],r);var i,r},color:e.color,placeholder:e.placeholder,delay:t},e.key))})},lH=e=>{var n;let{characterData:i,updateCharacterData:r,characterId:a}=e;const{characters:o,addMatchRecord:l,deleteMatchRecord:c}=Jg(),[u,h]=(0,t.useState)((null===(n=o[0])||void 0===n?void 0:n.name)||""),d=(0,t.useMemo)(()=>{var e,t;const n=(null===(e=i.records)||void 0===e?void 0:e.matches)||[],r=n.filter(e=>"win"===e.result).length,s=n.filter(e=>"loss"===e.result).length,a=r+s;return{matches:n,wins:r,losses:s,total:a,winRate:a>0?(r/a*100).toFixed(1):"---",notes:(null===(t=i.records)||void 0===t?void 0:t.notes)||""}},[i]),f=e=>{u?l(a,u,e):alert("\u5bfe\u6226\u76f8\u624b\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u3002")};return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)(Ka.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-black/20 p-4 rounded-lg flex flex-col sm:flex-row items-center gap-4",children:[(0,s.jsxs)("div",{className:"flex-grow w-full",children:[(0,s.jsx)("label",{htmlFor:"opponent-select",className:"block text-sm font-medium text-white/70 mb-1",children:"\u5bfe\u6226\u76f8\u624b"}),(0,s.jsx)("select",{id:"opponent-select",value:u,onChange:e=>h(e.target.value),className:"w-full bg-slate-700 p-3 rounded-md",children:o.map(e=>(0,s.jsx)("option",{value:e.name,children:e.name},e.id))})]}),(0,s.jsxs)("div",{className:"flex gap-2 w-full sm:w-auto",children:[(0,s.jsx)("button",{onClick:()=>f("win"),className:"w-full h-12 bg-green-600 hover:bg-green-700 rounded-md font-bold",children:"WIN"}),(0,s.jsx)("button",{onClick:()=>f("loss"),className:"w-full h-12 bg-red-600 hover:bg-red-700 rounded-md font-bold",children:"LOSE"})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"bg-green-500/10 border border-green-500/30 p-6 rounded-lg text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-green-400 mb-2",children:"\u52dd\u5229\u6570"}),(0,s.jsx)("p",{className:"text-5xl font-extrabold",children:d.wins})]}),(0,s.jsxs)("div",{className:"bg-red-500/10 border border-red-500/30 p-6 rounded-lg text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-red-400 mb-2",children:"\u6557\u5317\u6570"}),(0,s.jsx)("p",{className:"text-5xl font-extrabold",children:d.losses})]}),(0,s.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500/30 p-6 rounded-lg text-center flex flex-col justify-center",children:[(0,s.jsx)("h3",{className:"text-lg font-bold text-blue-400 mb-2",children:"\u52dd\u7387"}),(0,s.jsxs)("p",{className:"text-5xl font-extrabold",children:[d.winRate,(0,s.jsx)("span",{className:"text-3xl ml-1",children:"%"})]}),(0,s.jsxs)("p",{className:"text-sm text-white/50 mt-2",children:[d.total,"\u6226 ",d.wins,"\u52dd ",d.losses,"\u6557"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-xl font-bold mb-3",children:"\u5bfe\u6226\u5c65\u6b74"}),(0,s.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto custom-scrollbar pr-2",children:d.matches.map(e=>(0,s.jsxs)("div",{className:"bg-black/20 p-3 rounded-md flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"font-bold text-lg ".concat("win"===e.result?"text-green-400":"text-red-400"),children:e.result.toUpperCase()}),(0,s.jsx)("span",{className:"text-white/80 mx-2",children:"vs"}),(0,s.jsx)("span",{children:e.opponent})]}),(0,s.jsx)("button",{onClick:()=>c(a,e.id),className:"text-white/30 hover:text-red-500",children:(0,s.jsx)(Uj,{size:16})})]},e.id))})]})]})},cH=e=>{let{characterData:n,updateCharacterData:i}=e;const r=n.frameData||[],[a,o]=(0,t.useState)({moveName:"",startup:"",onShield:"",notes:""}),l=e=>{const{name:t,value:n}=e.target;o(e=>I(I({},e),{},{[t]:n}))};return(0,s.jsx)("div",{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-white/10",children:[(0,s.jsx)("th",{className:"p-3",children:"\u6280\u540d"}),(0,s.jsx)("th",{className:"p-3",children:"\u767a\u751fF"}),(0,s.jsx)("th",{className:"p-3",children:"\u30ac\u30fc\u30c9\u786c\u76f4\u5dee"}),(0,s.jsx)("th",{className:"p-3",children:"\u30e1\u30e2"}),(0,s.jsx)("th",{className:"p-3 w-12"})]})}),(0,s.jsxs)("tbody",{children:[r.map((e,t)=>(0,s.jsxs)(Ka.tr,{className:"border-b border-white/10",initial:{opacity:0},animate:{opacity:1},transition:{delay:.05*t},children:[(0,s.jsx)("td",{className:"p-3 font-semibold",children:e.moveName}),(0,s.jsx)("td",{className:"p-3",children:e.startup}),(0,s.jsx)("td",{className:"p-3",children:e.onShield}),(0,s.jsx)("td",{className:"p-3 text-white/80",children:e.notes}),(0,s.jsx)("td",{className:"p-3 text-center",children:(0,s.jsx)("button",{onClick:()=>(e=>{i(["frameData"],r.filter(t=>t.id!==e))})(e.id),className:"text-red-400 hover:text-red-300",children:(0,s.jsx)(Uj,{size:18})})})]},e.id)),(0,s.jsxs)("tr",{className:"bg-white/5",children:[(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("input",{type:"text",name:"moveName",value:a.moveName,onChange:l,placeholder:"\u6280\u540d",className:"w-full bg-slate-700 p-2 rounded-md"})}),(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("input",{type:"text",name:"startup",value:a.startup,onChange:l,placeholder:"\u767a\u751f",className:"w-full bg-slate-700 p-2 rounded-md"})}),(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("input",{type:"text",name:"onShield",value:a.onShield,onChange:l,placeholder:"\u786c\u76f4\u5dee",className:"w-full bg-slate-700 p-2 rounded-md"})}),(0,s.jsx)("td",{className:"p-2",children:(0,s.jsx)("input",{type:"text",name:"notes",value:a.notes,onChange:l,placeholder:"\u30e1\u30e2",className:"w-full bg-slate-700 p-2 rounded-md"})}),(0,s.jsx)("td",{className:"p-2 text-center",children:(0,s.jsx)("button",{onClick:()=>{if(!a.moveName.trim())return void alert("\u6280\u540d\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002");const e=I(I({},a),{},{id:Date.now()});i(["frameData"],[...r,e]),o({moveName:"",startup:"",onShield:"",notes:""})},className:"p-2 bg-purple-600 rounded-md hover:bg-purple-700",children:(0,s.jsx)(Fj,{size:20})})})]})]})]})})})},uH=e=>{let{characterData:t,updateCharacterData:n}=e;const i={matchups:(t.stageStrategies||[]).map(e=>({id:e.id,opponentName:e.stageName,notes:e.notes}))};return(0,s.jsx)(sH,{characterData:i,updateCharacterData:(e,t)=>{const i=t.map(e=>({id:e.id,stageName:e.opponentName,notes:e.notes}));n(["stageStrategies"],i)}})},hH=e=>{let{characterData:n,updateCharacterData:i}=e;const r=n.videoLinks||[],[a,o]=(0,t.useState)(""),[l,c]=(0,t.useState)("");return(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg mb-6 flex flex-col sm:flex-row gap-4",children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"\u52d5\u753b\u306e\u30bf\u30a4\u30c8\u30eb",className:"w-full sm:w-1/3 bg-slate-700 p-2 rounded-md"}),(0,s.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),placeholder:"https://youtube.com/...",className:"flex-grow bg-slate-700 p-2 rounded-md"}),(0,s.jsxs)("button",{onClick:()=>{if(!l.trim()||!a.trim())return void alert("\u30bf\u30a4\u30c8\u30eb\u3068URL\u3092\u4e21\u65b9\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002");const e={id:Date.now(),title:a,url:l};i(["videoLinks"],[...r,e]),o(""),c("")},className:"px-4 py-2 bg-purple-600 rounded-md hover:bg-purple-700 flex items-center justify-center gap-2",children:[(0,s.jsx)(Fj,{size:18}),"\u8ffd\u52a0"]})]}),(0,s.jsx)("div",{className:"space-y-3",children:r.map((e,t)=>(0,s.jsxs)(Ka.div,{className:"bg-black/20 p-4 rounded-lg flex justify-between items-center",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold",children:e.title}),(0,s.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-cyan-400 hover:underline break-all",children:e.url})]}),(0,s.jsx)("button",{onClick:()=>(e=>{i(["videoLinks"],r.filter(t=>t.id!==e))})(e.id),className:"text-red-400 hover:text-red-300 p-2 flex-shrink-0 ml-4",children:(0,s.jsx)(Uj,{size:18})})]},e.id))})]})},dH=e=>{let{characterData:n,updateCharacterData:i}=e;const r=n.practiceList||[],[a,o]=(0,t.useState)("");return(0,s.jsxs)("div",{children:[(0,s.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!a.trim())return;const t={id:Date.now(),task:a,completed:!1};i(["practiceList"],[...r,t]),o("")},className:"flex gap-4 mb-6",children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"\u65b0\u3057\u3044\u7df4\u7fd2\u9805\u76ee (\u4f8b: \u7a7a\u5f8c\u304b\u3089\u306e\u30b3\u30f3\u30dc\u7df4\u7fd2)",className:"flex-grow bg-slate-700 p-3 rounded-md"}),(0,s.jsxs)("button",{type:"submit",className:"px-6 py-2 bg-purple-600 rounded-md hover:bg-purple-700 flex items-center justify-center gap-2",children:[(0,s.jsx)(Fj,{size:18}),"\u8ffd\u52a0"]})]}),(0,s.jsx)("div",{className:"space-y-2",children:(0,s.jsx)(P,{children:r.map(e=>(0,s.jsxs)(Ka.div,{layout:!0,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},className:"flex items-center gap-4 p-3 rounded-md transition-colors ".concat(e.completed?"bg-green-500/10":"bg-black/20"),children:[(0,s.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>(e=>{const t=r.map(t=>t.id===e?I(I({},t),{},{completed:!t.completed}):t);i(["practiceList"],t)})(e.id),className:"w-5 h-5 accent-purple-500"}),(0,s.jsx)("p",{className:"flex-grow ".concat(e.completed?"line-through text-white/50":""),children:e.task}),(0,s.jsx)("button",{onClick:()=>(e=>{i(["practiceList"],r.filter(t=>t.id!==e))})(e.id),className:"text-red-400 hover:text-red-300 p-1",children:(0,s.jsx)(Uj,{size:18})})]},e.id))})})]})},fH=e=>{let{id:t,label:n,icon:i,activeTab:r,setActiveTab:a,color:o}=e;return(0,s.jsxs)("button",{onClick:()=>a(t),className:"relative px-4 py-3 text-lg font-semibold text-white/70 transition-colors hover:text-white whitespace-nowrap",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(i,{size:20}),(0,s.jsx)("span",{children:n})]}),r===t&&(0,s.jsx)(Ka.div,{layoutId:"active-tab-indicator",className:"absolute bottom-0 left-0 right-0 h-1 rounded-t-full",style:{background:"linear-gradient(to right, ".concat(o,"80, ").concat(o,")")}})]})},pH=e=>{let{character:n,onBack:i}=e;const{characterData:r,setCharacterData:a}=Jg(),{setCursorVariant:o}=av(),[l,c]=(0,t.useState)("combos"),u=(0,t.useCallback)((e,t)=>{null!==n&&void 0!==n&&n.id&&a(i=>{const r=JSON.parse(JSON.stringify(i));let s=r[n.id];if(!s)return i;for(let t=0;t<e.length-1;t++)void 0!==s[e[t]]&&null!==s[e[t]]||(s[e[t]]={}),s=s[e[t]];return s[e[e.length-1]]=t,r})},[null===n||void 0===n?void 0:n.id,a]);if(!n||!r)return(0,s.jsx)("div",{className:"flex items-center justify-center h-screen text-white",children:"\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\u3002"});const h=r[n.id];if(!h)return(0,s.jsx)("div",{className:"flex items-center justify-center h-screen text-white",children:"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u30c7\u30fc\u30bf\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059..."});return(0,s.jsxs)("div",{className:"w-screen h-screen bg-slate-900 flex flex-col text-white",children:[(0,s.jsx)(Ka.header,{className:"flex-shrink-0 bg-black/30 backdrop-blur-sm border-b border-white/10",initial:{y:-80},animate:{y:0},transition:{duration:.5,ease:"easeOut"},children:(0,s.jsx)("div",{className:"container mx-auto px-6 py-3 flex justify-between items-center",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:i,className:"p-2 rounded-full hover:bg-white/10 overflow-hidden",onMouseEnter:()=>o("hover"),onMouseLeave:()=>o("default"),children:(0,s.jsx)(tB,{size:28})}),(0,s.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center border-4 border-white/20 overflow-hidden",style:{backgroundColor:n.color},children:n.icon?(0,s.jsx)("img",{src:"/images/".concat(encodeURIComponent(n.icon)),alt:n.name,className:"w-full h-full object-contain"}):(0,s.jsx)(Mv,{size:32})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-4xl font-bold",children:n.name}),(0,s.jsx)("p",{className:"text-white/60",children:"\u6226\u8853\u30ce\u30fc\u30c8"})]})]})})}),(0,s.jsx)("nav",{className:"flex-shrink-0 bg-black/20 border-b border-white/10 overflow-x-auto custom-scrollbar",children:(0,s.jsxs)("div",{className:"container mx-auto px-6 flex items-center gap-2",children:[(0,s.jsx)(fH,{id:"combos",label:"\u30b3\u30f3\u30dc",icon:YU,activeTab:l,setActiveTab:c,color:n.color}),(0,s.jsx)(fH,{id:"gameplan",label:"\u7acb\u3061\u56de\u308a",icon:KU,activeTab:l,setActiveTab:c,color:n.color}),(0,s.jsx)(fH,{id:"matchups",label:"\u30ad\u30e3\u30e9\u5bfe\u7b56",icon:Cv,activeTab:l,setActiveTab:c,color:n.color}),(0,s.jsx)(fH,{id:"recovery",label:"\u5fa9\u5e30\u30fb\u963b\u6b62",icon:Ev,activeTab:l,setActiveTab:c,color:n.color}),(0,s.jsx)(fH,{id:"frameData",label:"\u30d5\u30ec\u30fc\u30e0",icon:ZU,activeTab:l,setActiveTab:c,color:n.color}),(0,s.jsx)(fH,{id:"stageStrategies",label:"\u30b9\u30c6\u30fc\u30b8",icon:Av,activeTab:l,setActiveTab:c,color:n.color}),(0,s.jsx)(fH,{id:"records",label:"\u6226\u7e3e",icon:QU,activeTab:l,setActiveTab:c,color:n.color}),(0,s.jsx)(fH,{id:"videos",label:"\u52d5\u753b",icon:JU,activeTab:l,setActiveTab:c,color:n.color}),(0,s.jsx)(fH,{id:"practice",label:"\u7df4\u7fd2\u30e1\u30e2",icon:$U,activeTab:l,setActiveTab:c,color:n.color})]})}),(0,s.jsx)("main",{className:"flex-grow p-8 overflow-y-auto custom-scrollbar",children:(0,s.jsx)(P,{mode:"wait",children:(0,s.jsx)(Ka.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:(()=>{const e={characterData:h,updateCharacterData:u,characterId:n.id};switch(l){case"combos":return(0,s.jsx)(eH,I({},e));case"gameplan":return(0,s.jsx)(nH,I({},e));case"matchups":return(0,s.jsx)(sH,I({},e));case"recovery":return(0,s.jsx)(oH,I({},e));case"records":return(0,s.jsx)(lH,I({},e));case"frameData":return(0,s.jsx)(cH,I({},e));case"stageStrategies":return(0,s.jsx)(uH,I({},e));case"videos":return(0,s.jsx)(hH,I({},e));case"practice":return(0,s.jsx)(dH,I({},e));default:return(0,s.jsxs)("div",{className:"text-white/50 text-center p-8 text-2xl",children:[l," \u306e\u30b3\u30f3\u30c6\u30f3\u30c4\u306f\u4f5c\u6210\u4e2d\u3067\u3059\u3002"]})}})()},l)})})]})},mH=pv("gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),gH=pv("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),vH=pv("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),yH=pv("mouse-pointer-click",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]),xH=pv("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),bH=e=>{let{title:t,icon:n,items:i}=e;return(0,s.jsxs)("section",{children:[(0,s.jsxs)("h2",{className:"text-2xl font-semibold mb-3 flex items-center gap-2 border-b border-white/10 pb-2",children:[(0,s.jsx)(n,{}),t]}),(0,s.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:i.map(e=>(0,s.jsxs)("div",{className:"p-4 rounded-lg flex items-center gap-3 ".concat(e.isUnlocked?"bg-white/10":"bg-black/30"),children:[e.isUnlocked?(0,s.jsx)(Zj,{className:"text-green-400 flex-shrink-0"}):(0,s.jsx)(xH,{className:"text-white/30 flex-shrink-0"}),(0,s.jsx)("span",{className:e.isUnlocked?"":"text-white/30",children:e.name})]},e.id))})]})},_H=e=>{let{onBack:n}=e;const[i,r]=(0,t.useState)("missions"),{missionProgress:a,unlockedItems:o}=Jg(),l=(0,t.useMemo)(()=>{const e={bgm:[],image:[],se:[]};for(const t of Object.values($a))e[t.type]&&e[t.type].push(I(I({},t),{},{isUnlocked:o.includes(t.id)}));return e},[o]);return(0,s.jsxs)("div",{className:"w-screen h-screen bg-slate-900 flex flex-col text-white p-4 sm:p-8",children:[(0,s.jsxs)("header",{className:"flex-shrink-0 mb-6 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"\u30df\u30c3\u30b7\u30e7\u30f3 & \u30b3\u30ec\u30af\u30b7\u30e7\u30f3"}),(0,s.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"\u30db\u30fc\u30e0\u306b\u623b\u308b"]})]}),(0,s.jsxs)("div",{className:"flex-shrink-0 border-b border-white/10 mb-6",children:[(0,s.jsxs)("button",{onClick:()=>r("missions"),className:"px-6 py-3 font-semibold relative ".concat("missions"===i?"text-purple-400":"text-white/70"),children:["\u30df\u30c3\u30b7\u30e7\u30f3","missions"===i&&(0,s.jsx)(Ka.div,{layoutId:"tab-underline",className:"absolute bottom-0 left-0 right-0 h-1 bg-purple-400"})]}),(0,s.jsxs)("button",{onClick:()=>r("collection"),className:"px-6 py-3 font-semibold relative ".concat("collection"===i?"text-purple-400":"text-white/70"),children:["\u30b3\u30ec\u30af\u30b7\u30e7\u30f3","collection"===i&&(0,s.jsx)(Ka.div,{layoutId:"tab-underline",className:"absolute bottom-0 left-0 right-0 h-1 bg-purple-400"})]})]}),(0,s.jsxs)("main",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2",children:["missions"===i&&(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(Ja).map(e=>{let[t,n]=e;const i=a[t]||{current:0,completed:!1},r=i.completed;return(0,s.jsxs)(Ka.div,{className:"bg-black/20 p-4 rounded-lg border-l-4 ".concat(r?"border-yellow-400":"border-slate-600"),initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg ".concat(r?"text-yellow-400":"text-white"),children:n.title}),(0,s.jsx)("p",{className:"text-sm text-white/60",children:n.description})]}),r?(0,s.jsx)(Zj,{className:"text-yellow-400"}):(0,s.jsxs)("p",{className:"font-mono text-lg",children:[Math.min(i.current,n.goal)," / ",n.goal]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-purple-400 mt-2",children:[(0,s.jsx)(mH,{size:16}),(0,s.jsxs)("span",{children:["\u5831\u916c: ",$a[n.reward.id].name]})]})]},t)})}),"collection"===i&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)(bH,{title:"BGM",icon:gH,items:l.bgm}),(0,s.jsx)(bH,{title:"\u80cc\u666f\u753b\u50cf",icon:vH,items:l.image}),(0,s.jsx)(bH,{title:"\u52b9\u679c\u97f3",icon:yH,items:l.se})]})]})]})};function wH(e){return e+.5|0}const SH=(e,t,n)=>Math.max(Math.min(e,n),t);function MH(e){return SH(wH(2.55*e),0,255)}function CH(e){return SH(wH(255*e),0,255)}function EH(e){return SH(wH(e/2.55)/100,0,1)}function TH(e){return SH(wH(100*e),0,100)}const AH={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},kH=[..."0123456789ABCDEF"],PH=e=>kH[15&e],LH=e=>kH[(240&e)>>4]+kH[15&e],DH=e=>(240&e)>>4===(15&e);function RH(e){var t=(e=>DH(e.r)&&DH(e.g)&&DH(e.b)&&DH(e.a))(e)?PH:LH;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const NH=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function IH(e,t,n){const i=t*Math.min(n,1-n),r=function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-i*Math.max(Math.min(r-3,9-r,1),-1)};return[r(0),r(8),r(4)]}function OH(e,t,n){const i=function(i){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(i+e/60)%6;return n-n*t*Math.max(Math.min(r,4-r,1),0)};return[i(5),i(3),i(1)]}function zH(e,t,n){const i=IH(e,1,.5);let r;for(t+n>1&&(r=1/(t+n),t*=r,n*=r),r=0;r<3;r++)i[r]*=1-t-n,i[r]+=t;return i}function FH(e){const t=e.r/255,n=e.g/255,i=e.b/255,r=Math.max(t,n,i),s=Math.min(t,n,i),a=(r+s)/2;let o,l,c;return r!==s&&(c=r-s,l=a>.5?c/(2-r-s):c/(r+s),o=function(e,t,n,i,r){return e===r?(t-n)/i+(t<n?6:0):t===r?(n-e)/i+2:(e-t)/i+4}(t,n,i,c,r),o=60*o+.5),[0|o,l||0,a]}function jH(e,t,n,i){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,i)).map(CH)}function BH(e,t,n){return jH(IH,e,t,n)}function VH(e){return(e%360+360)%360}function UH(e){const t=NH.exec(e);let n,i=255;if(!t)return;t[5]!==n&&(i=t[6]?MH(+t[5]):CH(+t[5]));const r=VH(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return jH(zH,e,t,n)}(r,s,a):"hsv"===t[1]?function(e,t,n){return jH(OH,e,t,n)}(r,s,a):BH(r,s,a),{r:n[0],g:n[1],b:n[2],a:i}}const HH={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},WH={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let GH;function qH(e){GH||(GH=function(){const e={},t=Object.keys(WH),n=Object.keys(HH);let i,r,s,a,o;for(i=0;i<t.length;i++){for(a=o=t[i],r=0;r<n.length;r++)s=n[r],o=o.replace(s,HH[s]);s=parseInt(WH[a],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),GH.transparent=[0,0,0,0]);const t=GH[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const XH=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const YH=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,KH=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function ZH(e,t,n){if(e){let i=FH(e);i[t]=Math.max(0,Math.min(i[t]+i[t]*n,0===t?360:1)),i=BH(i),e.r=i[0],e.g=i[1],e.b=i[2]}}function QH(e,t){return e?Object.assign(t||{},e):e}function JH(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=CH(e[3]))):(t=QH(e,{r:0,g:0,b:0,a:1})).a=CH(t.a),t}function $H(e){return"r"===e.charAt(0)?function(e){const t=XH.exec(e);let n,i,r,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?MH(e):SH(255*e,0,255)}return n=+t[1],i=+t[3],r=+t[5],n=255&(t[2]?MH(n):SH(n,0,255)),i=255&(t[4]?MH(i):SH(i,0,255)),r=255&(t[6]?MH(r):SH(r,0,255)),{r:n,g:i,b:r,a:s}}}(e):UH(e)}class eW{constructor(e){if(e instanceof eW)return e;const t=typeof e;let n;"object"===t?n=JH(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*AH[e[1]],g:255&17*AH[e[2]],b:255&17*AH[e[3]],a:5===n?17*AH[e[4]]:255}:7!==n&&9!==n||(t={r:AH[e[1]]<<4|AH[e[2]],g:AH[e[3]]<<4|AH[e[4]],b:AH[e[5]]<<4|AH[e[6]],a:9===n?AH[e[7]]<<4|AH[e[8]]:255})),t}(e)||qH(e)||$H(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=QH(this._rgb);return e&&(e.a=EH(e.a)),e}set rgb(e){this._rgb=JH(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(EH(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?RH(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=FH(e),n=t[0],i=TH(t[1]),r=TH(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(i,"%, ").concat(r,"%, ").concat(EH(e.a),")"):"hsl(".concat(n,", ").concat(i,"%, ").concat(r,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,i=e.rgb;let r;const s=t===r?.5:t,a=2*s-1,o=n.a-i.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=s*n.a+(1-s)*i.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const i=KH(EH(e.r)),r=KH(EH(e.g)),s=KH(EH(e.b));return{r:CH(YH(i+n*(KH(EH(t.r))-i))),g:CH(YH(r+n*(KH(EH(t.g))-r))),b:CH(YH(s+n*(KH(EH(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new eW(this.rgb)}alpha(e){return this._rgb.a=CH(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=wH(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ZH(this._rgb,2,e),this}darken(e){return ZH(this._rgb,2,-e),this}saturate(e){return ZH(this._rgb,1,e),this}desaturate(e){return ZH(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=FH(e);n[0]=VH(n[0]+t),n=BH(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function tW(){}const nW=(()=>{let e=0;return()=>e++})();function iW(e){return null===e||void 0===e}function rW(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function sW(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function aW(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function oW(e,t){return aW(e)?e:t}function lW(e,t){return"undefined"===typeof e?t:e}const cW=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function uW(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function hW(e,t,n,i){let r,s,a;if(rW(e))if(s=e.length,i)for(r=s-1;r>=0;r--)t.call(n,e[r],r);else for(r=0;r<s;r++)t.call(n,e[r],r);else if(sW(e))for(a=Object.keys(e),s=a.length,r=0;r<s;r++)t.call(n,e[a[r]],a[r])}function dW(e,t){let n,i,r,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(r=e[n],s=t[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function fW(e){if(rW(e))return e.map(fW);if(sW(e)){const t=Object.create(null),n=Object.keys(e),i=n.length;let r=0;for(;r<i;++r)t[n[r]]=fW(e[n[r]]);return t}return e}function pW(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function mW(e,t,n,i){if(!pW(e))return;const r=t[e],s=n[e];sW(r)&&sW(s)?gW(r,s,i):t[e]=fW(s)}function gW(e,t,n){const i=rW(t)?t:[t],r=i.length;if(!sW(e))return e;const s=(n=n||{}).merger||mW;let a;for(let o=0;o<r;++o){if(a=i[o],!sW(a))continue;const t=Object.keys(a);for(let i=0,r=t.length;i<r;++i)s(t[i],e,a,n)}return e}function vW(e,t){return gW(e,t,{merger:yW})}function yW(e,t,n){if(!pW(e))return;const i=t[e],r=n[e];sW(i)&&sW(r)?vW(i,r):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=fW(r))}const xW={"":e=>e,x:e=>e.x,y:e=>e.y};function bW(e,t){const n=xW[t]||(xW[t]=function(e){const t=function(e){const t=e.split("."),n=[];let i="";for(const r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function _W(e){return e.charAt(0).toUpperCase()+e.slice(1)}const wW=e=>"undefined"!==typeof e,SW=e=>"function"===typeof e,MW=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const CW=Math.PI,EW=2*CW,TW=EW+CW,AW=Number.POSITIVE_INFINITY,kW=CW/180,PW=CW/2,LW=CW/4,DW=2*CW/3,RW=Math.log10,NW=Math.sign;function IW(e,t,n){return Math.abs(e-t)<n}function OW(e){const t=Math.round(e);e=IW(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(RW(e))),i=e/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function zW(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function FW(e,t,n){let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function jW(e){return e*(CW/180)}function BW(e){return e*(180/CW)}function VW(e){if(!aW(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function UW(e,t){const n=t.x-e.x,i=t.y-e.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*CW&&(s+=EW),{angle:s,distance:r}}function HW(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function WW(e,t){return(e-t+TW)%EW-CW}function GW(e){return(e%EW+EW)%EW}function qW(e,t,n,i){const r=GW(e),s=GW(t),a=GW(n),o=GW(s-r),l=GW(a-r),c=GW(r-s),u=GW(r-a);return r===s||r===a||i&&s===a||o>l&&c<u}function XW(e,t,n){return Math.max(t,Math.min(n,e))}function YW(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-i&&e<=Math.max(t,n)+i}function KW(e,t,n){n=n||(n=>e[n]<t);let i,r=e.length-1,s=0;for(;r-s>1;)i=s+r>>1,n(i)?s=i:r=i;return{lo:s,hi:r}}const ZW=(e,t,n,i)=>KW(e,n,i?i=>{const r=e[i][t];return r<n||r===n&&e[i+1][t]===n}:i=>e[i][t]<n),QW=(e,t,n)=>KW(e,n,i=>e[i][t]>=n);const JW=["push","pop","shift","splice","unshift"];function $W(e,t){const n=e._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(t);-1!==r&&i.splice(r,1),i.length>0||(JW.forEach(t=>{delete e[t]}),delete e._chartjs)}function eG(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const tG="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function nG(e,t){let n=[],i=!1;return function(){for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];n=s,i||(i=!0,tG.call(window,()=>{i=!1,e.apply(t,n)}))}}const iG=e=>"start"===e?"left":"end"===e?"right":"center",rG=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function sG(e,t,n){const i=t.length;let r=0,s=i;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:h,max:d,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(r=Math.min(ZW(l,u,h).lo,n?i:ZW(t,u,a.getPixelForValue(h)).lo),c){const e=l.slice(0,r+1).reverse().findIndex(e=>!iW(e[o.axis]));r-=Math.max(0,e)}r=XW(r,0,i-1)}if(p){let e=Math.max(ZW(l,a.axis,d,!0).hi+1,n?0:ZW(t,u,a.getPixelForValue(d),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!iW(e[o.axis]));e+=Math.max(0,t)}s=XW(e,r,i)-r}else s=i-r}return{start:r,count:s}}function aG(e){const{xScale:t,yScale:n,_scaleRanges:i}=e,r={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!i)return e._scaleRanges=r,!0;const s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const oG=e=>0===e||1===e,lG=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*EW/n),cG=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*EW/n)+1,uG={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*PW),easeOutSine:e=>Math.sin(e*PW),easeInOutSine:e=>-.5*(Math.cos(CW*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>oG(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>oG(e)?e:lG(e,.075,.3),easeOutElastic:e=>oG(e)?e:cG(e,.075,.3),easeInOutElastic(e){const t=.1125;return oG(e)?e:e<.5?.5*lG(2*e,t,.45):.5+.5*cG(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-uG.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*uG.easeInBounce(2*e):.5*uG.easeOutBounce(2*e-1)+.5};function hG(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function dG(e){return hG(e)?e:new eW(e)}function fG(e){return hG(e)?e:new eW(e).saturate(.5).darken(.1).hexString()}const pG=["x","y","borderWidth","radius","tension"],mG=["color","borderColor","backgroundColor"];const gG=new Map;function vG(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let i=gG.get(n);return i||(i=new Intl.NumberFormat(e,t),gG.set(n,i)),i}(t,n).format(e)}const yG={values:e=>rW(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const i=this.chart.options.locale;let r,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(r="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=RW(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),vG(e,i,l)},logarithmic(e,t,n){if(0===e)return"0";const i=n[t].significand||e/Math.pow(10,Math.floor(RW(e)));return[1,2,3,5,10,15].includes(i)||t>.8*n.length?yG.numeric.call(this,e,t,n):""}};var xG={formatters:yG};const bG=Object.create(null),_G=Object.create(null);function wG(e,t){if(!t)return e;const n=t.split(".");for(let i=0,r=n.length;i<r;++i){const t=n[i];e=e[t]||(e[t]=Object.create(null))}return e}function SG(e,t,n){return"string"===typeof t?gW(wG(e,t),n):gW(wG(e,""),t)}class MG{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>fG(t.backgroundColor),this.hoverBorderColor=(e,t)=>fG(t.borderColor),this.hoverColor=(e,t)=>fG(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return SG(this,e,t)}get(e){return wG(this,e)}describe(e,t){return SG(_G,e,t)}override(e,t){return SG(bG,e,t)}route(e,t,n,i){const r=wG(this,e),s=wG(this,n),a="_"+t;Object.defineProperties(r,{[a]:{value:r[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[i];return sW(e)?Object.assign({},t,e):lW(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var CG=new MG({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:mG},numbers:{type:"number",properties:pG}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:xG.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function EG(e,t,n,i,r){let s=t[r];return s||(s=t[r]=e.measureText(r).width,n.push(r)),s>i&&(i=s),i}function TG(e,t,n,i){let r=(i=i||{}).data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,u,h,d;for(l=0;l<o;l++)if(h=n[l],void 0===h||null===h||rW(h)){if(rW(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||rW(d)||(a=EG(e,r,s,a,d))}else a=EG(e,r,s,a,h);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete r[s[l]];s.splice(0,f)}return a}function AG(e,t,n){const i=e.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((t-r)*i)/i+r}function kG(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function PG(e,t,n,i){LG(e,t,n,i,null)}function LG(e,t,n,i,r){let s,a,o,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,m=t.radius;let g=(p||0)*kW;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,i),e.rotate(g),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(m)||m<=0)){switch(e.beginPath(),f){default:r?e.ellipse(n,i,r/2,m,0,0,EW):e.arc(n,i,m,0,EW),e.closePath();break;case"triangle":u=r?r/2:m,e.moveTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=DW,e.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),g+=DW,e.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*m),e.closePath();break;case"rectRounded":c=.516*m,l=m-c,a=Math.cos(g+LW)*l,h=Math.cos(g+LW)*(r?r/2-c:l),o=Math.sin(g+LW)*l,d=Math.sin(g+LW)*(r?r/2-c:l),e.arc(n-h,i-o,c,g-CW,g-PW),e.arc(n+d,i-a,c,g-PW,g),e.arc(n+h,i+o,c,g,g+PW),e.arc(n-d,i+a,c,g+PW,g+CW),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*m,u=r?r/2:l,e.rect(n-u,i-l,2*u,2*l);break}g+=LW;case"rectRot":h=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(r?r/2:m),e.moveTo(n-h,i-o),e.lineTo(n+d,i-a),e.lineTo(n+h,i+o),e.lineTo(n-d,i+a),e.closePath();break;case"crossRot":g+=LW;case"cross":h=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(r?r/2:m),e.moveTo(n-h,i-o),e.lineTo(n+h,i+o),e.moveTo(n+d,i-a),e.lineTo(n-d,i+a);break;case"star":h=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(r?r/2:m),e.moveTo(n-h,i-o),e.lineTo(n+h,i+o),e.moveTo(n+d,i-a),e.lineTo(n-d,i+a),g+=LW,h=Math.cos(g)*(r?r/2:m),a=Math.cos(g)*m,o=Math.sin(g)*m,d=Math.sin(g)*(r?r/2:m),e.moveTo(n-h,i-o),e.lineTo(n+h,i+o),e.moveTo(n+d,i-a),e.lineTo(n-d,i+a);break;case"line":a=r?r/2:Math.cos(g)*m,o=Math.sin(g)*m,e.moveTo(n-a,i-o),e.lineTo(n+a,i+o);break;case"dash":e.moveTo(n,i),e.lineTo(n+Math.cos(g)*(r?r/2:m),i+Math.sin(g)*m);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function DG(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function RG(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function NG(e){e.restore()}function IG(e,t,n,i,r){if(!t)return e.lineTo(n.x,n.y);if("middle"===r){const i=(t.x+n.x)/2;e.lineTo(i,t.y),e.lineTo(i,n.y)}else"after"===r!==!!i?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function OG(e,t,n,i){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function zG(e,t,n,i,r){if(r.strikethrough||r.underline){const s=e.measureText(i),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=r.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function FG(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function jG(e,t,n,i,r){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=rW(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=r.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),iW(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&FG(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),iW(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,i,s.maxWidth)),e.fillText(c,n,i,s.maxWidth),zG(e,n,i,c,s),i+=Number(r.lineHeight);e.restore()}function BG(e,t){const{x:n,y:i,w:r,h:s,radius:a}=t;e.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*CW,CW,!0),e.lineTo(n,i+s-a.bottomLeft),e.arc(n+a.bottomLeft,i+s-a.bottomLeft,a.bottomLeft,CW,PW,!0),e.lineTo(n+r-a.bottomRight,i+s),e.arc(n+r-a.bottomRight,i+s-a.bottomRight,a.bottomRight,PW,0,!0),e.lineTo(n+r,i+a.topRight),e.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-PW,!0),e.lineTo(n+a.topLeft,i)}const VG=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,UG=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function HG(e,t){const n=(""+e).match(VG);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const WG=e=>+e||0;function GG(e,t){const n={},i=sW(t),r=i?Object.keys(t):t,s=sW(e)?i?n=>lW(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of r)n[a]=WG(s(a));return n}function qG(e){return GG(e,{top:"y",right:"x",bottom:"y",left:"x"})}function XG(e){return GG(e,["topLeft","topRight","bottomLeft","bottomRight"])}function YG(e){const t=qG(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function KG(e,t){e=e||{},t=t||CG.font;let n=lW(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let i=lW(e.style,t.style);i&&!(""+i).match(UG)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:lW(e.family,t.family),lineHeight:HG(lW(e.lineHeight,t.lineHeight),n),size:n,style:i,weight:lW(e.weight,t.weight),string:""};return r.string=function(e){return!e||iW(e.size)||iW(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(r),r}function ZG(e,t,n,i){let r,s,a,o=!0;for(r=0,s=e.length;r<s;++r)if(a=e[r],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&rW(a)&&(a=a[n%a.length],o=!1),void 0!==a))return i&&!o&&(i.cacheable=!1),a}function QG(e,t){return Object.assign(Object.create(e),t)}function JG(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const r=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=cq("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:r,_fallback:n,_getTarget:i,override:i=>JG([i,...e],t,r,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,i)=>iq(n,i,()=>function(e,t,n,i){let r;for(const s of t)if(r=cq(tq(s,e),n),"undefined"!==typeof r)return nq(e,r)?oq(n,i,e,r):r}(i,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>uq(e).includes(t),ownKeys:e=>uq(e),set(e,t,n){const r=e._storage||(e._storage=i());return e[t]=r[t]=n,delete e._keys,!0}})}function $G(e,t,n,i){const r={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:eq(e,i),setContext:t=>$G(e,t,n,i),override:r=>$G(e.override(r),t,n,i)};return new Proxy(r,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>iq(e,t,()=>function(e,t,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:a}=e;let o=i[t];SW(o)&&a.isScriptable(t)&&(o=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,a||i);o.delete(e),nq(e,l)&&(l=oq(r._scopes,r,e,l));return l}(t,o,e,n));rW(o)&&o.length&&(o=function(e,t,n,i){const{_proxy:r,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&i(e))return t[s.index%t.length];if(sW(t[0])){const n=t,i=r._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=oq(i,r,e,l);t.push($G(n,s,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));nq(t,o)&&(o=$G(o,r,s&&s[t],a));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,i)=>(e[n]=i,delete t[n],!0)})}function eq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=e;return{allKeys:r,scriptable:n,indexable:i,isScriptable:SW(n)?n:()=>n,isIndexable:SW(i)?i:()=>i}}const tq=(e,t)=>e?e+_W(t):t,nq=(e,t)=>sW(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function iq(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const i=n();return e[t]=i,i}function rq(e,t,n){return SW(e)?e(t,n):e}const sq=(e,t)=>!0===e?t:"string"===typeof e?bW(t,e):void 0;function aq(e,t,n,i,r){for(const s of t){const t=sq(n,s);if(t){e.add(t);const s=rq(t._fallback,n,r);if("undefined"!==typeof s&&s!==n&&s!==i)return s}else if(!1===t&&"undefined"!==typeof i&&n!==i)return null}return!1}function oq(e,t,n,i){const r=t._rootScopes,s=rq(t._fallback,n,i),a=[...e,...r],o=new Set;o.add(i);let l=lq(o,a,n,s||n,i);return null!==l&&(("undefined"===typeof s||s===n||(l=lq(o,a,s,l,i),null!==l))&&JG(Array.from(o),[""],r,s,()=>function(e,t,n){const i=e._getTarget();t in i||(i[t]={});const r=i[t];if(rW(r)&&sW(n))return n;return r||{}}(t,n,i)))}function lq(e,t,n,i,r){for(;n;)n=aq(e,t,n,i,r);return n}function cq(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function uq(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function hq(e,t,n,i){const{iScale:r}=e,{key:s="r"}=this._parsing,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=t[c],a[o]={r:r.parse(bW(u,s),c)};return a}const dq=Number.EPSILON||1e-14,fq=(e,t)=>t<e.length&&!e[t].skip&&e[t],pq=e=>"x"===e?"y":"x";function mq(e,t,n,i){const r=e.skip?t:e,s=t,a=n.skip?t:n,o=HW(s,r),l=HW(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:s.x-h*(a.x-r.x),y:s.y-h*(a.y-r.y)},next:{x:s.x+d*(a.x-r.x),y:s.y+d*(a.y-r.y)}}}function gq(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=pq(t),i=e.length,r=Array(i).fill(0),s=Array(i);let a,o,l,c=fq(e,0);for(a=0;a<i;++a)if(o=l,l=c,c=fq(e,a+1),l){if(c){const e=c[t]-l[t];r[a]=0!==e?(c[n]-l[n])/e:0}s[a]=o?c?NW(r[a-1])!==NW(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(e,t,n){const i=e.length;let r,s,a,o,l,c=fq(e,0);for(let u=0;u<i-1;++u)l=c,c=fq(e,u+1),l&&c&&(IW(t[u],0,dq)?n[u]=n[u+1]=0:(r=n[u]/t[u],s=n[u+1]/t[u],o=Math.pow(r,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[u]=r*a*t[u],n[u+1]=s*a*t[u])))}(e,r,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const i=pq(n),r=e.length;let s,a,o,l=fq(e,0);for(let c=0;c<r;++c){if(a=o,o=l,l=fq(e,c+1),!o)continue;const r=o[n],u=o[i];a&&(s=(r-a[n])/3,o["cp1".concat(n)]=r-s,o["cp1".concat(i)]=u-s*t[c]),l&&(s=(l[n]-r)/3,o["cp2".concat(n)]=r+s,o["cp2".concat(i)]=u+s*t[c])}}(e,s,t)}function vq(e,t,n){return Math.max(Math.min(e,n),t)}function yq(e,t,n,i,r){let s,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)gq(e,r);else{let n=i?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=mq(n,o,e[Math.min(s+1,a-(i?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,i,r,s,a,o=DG(e[0],t);for(n=0,i=e.length;n<i;++n)a=s,s=o,o=n<i-1&&DG(e[n+1],t),s&&(r=e[n],a&&(r.cp1x=vq(r.cp1x,t.left,t.right),r.cp1y=vq(r.cp1y,t.top,t.bottom)),o&&(r.cp2x=vq(r.cp2x,t.left,t.right),r.cp2y=vq(r.cp2y,t.top,t.bottom)))}(e,n)}function xq(){return"undefined"!==typeof window&&"undefined"!==typeof document}function bq(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function _q(e,t,n){let i;return"string"===typeof e?(i=parseInt(e,10),-1!==e.indexOf("%")&&(i=i/100*t.parentNode[n])):i=e,i}const wq=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Sq=["top","right","bottom","left"];function Mq(e,t,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=Sq[r];i[s]=parseFloat(e[t+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function Cq(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:i}=t,r=wq(n),s="border-box"===r.boxSizing,a=Mq(r,"padding"),o=Mq(r,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,i=n&&n.length?n[0]:e,{offsetX:r,offsetY:s}=i;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(r,s,e.target))a=r,o=s;else{const e=t.getBoundingClientRect();a=i.clientX-e.left,o=i.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),h=a.left+(u&&o.left),d=a.top+(u&&o.top);let{width:f,height:p}=t;return s&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-h)/f*n.width/i),y:Math.round((c-d)/p*n.height/i)}}const Eq=e=>Math.round(10*e)/10;function Tq(e,t,n,i){const r=wq(e),s=Mq(r,"margin"),a=_q(r.maxWidth,e,"clientWidth")||AW,o=_q(r.maxHeight,e,"clientHeight")||AW,l=function(e,t,n){let i,r;if(void 0===t||void 0===n){const s=e&&bq(e);if(s){const e=s.getBoundingClientRect(),a=wq(s),o=Mq(a,"border","width"),l=Mq(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,i=_q(a.maxWidth,s,"clientWidth"),r=_q(a.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:i||AW,maxHeight:r||AW}}(e,t,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const e=Mq(r,"border","width"),t=Mq(r,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=Eq(Math.min(c,a,l.maxWidth)),u=Eq(Math.min(u,o,l.maxHeight)),c&&!u&&(u=Eq(c/2));return(void 0!==t||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=Eq(Math.floor(u*i))),{width:c,height:u}}function Aq(e,t,n){const i=t||1,r=Math.floor(e.height*i),s=Math.floor(e.width*i);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==i||a.height!==r||a.width!==s)&&(e.currentDevicePixelRatio=i,a.height=r,a.width=s,e.ctx.setTransform(i,0,0,i,0,0),!0)}const kq=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};xq()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(Kg){}return e}();function Pq(e,t){const n=function(e,t){return wq(e).getPropertyValue(t)}(e,t),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Lq(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Dq(e,t,n,i){return{x:e.x+n*(t.x-e.x),y:"middle"===i?n<.5?e.y:t.y:"after"===i?n<1?e.y:t.y:n>0?t.y:e.y}}function Rq(e,t,n,i){const r={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=Lq(e,r,n),o=Lq(r,s,n),l=Lq(s,t,n),c=Lq(a,o,n),u=Lq(o,l,n);return Lq(c,u,n)}function Nq(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Iq(e,t){let n,i;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=i)}function Oq(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function zq(e){return"angle"===e?{between:qW,compare:WW,normalize:GW}:{between:YW,compare:(e,t)=>e-t,normalize:e=>e}}function Fq(e){let{start:t,end:n,count:i,loop:r,style:s}=e;return{start:t%i,end:n%i,loop:r&&(n-t+1)%i===0,style:s}}function jq(e,t,n){if(!n)return[e];const{property:i,start:r,end:s}=n,a=t.length,{compare:o,between:l,normalize:c}=zq(i),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:i,start:r,end:s}=n,{between:a,normalize:o}=zq(i),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&a(o(t[h%l][i]),r,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let m,g,v,y=!1,x=null;const b=()=>y||l(r,v,m)&&0!==o(r,v),_=()=>!y||0===o(s,m)||l(s,v,m);for(let w=u,S=u;w<=h;++w)g=t[w%a],g.skip||(m=c(g[i]),m!==v&&(y=l(m,r,s),null===x&&b()&&(x=0===o(m,r)?w:S),null!==x&&_()&&(p.push(Fq({start:x,end:w,loop:d,count:a,style:f})),x=null),S=w,v=m));return null!==x&&p.push(Fq({start:x,end:h,loop:d,count:a,style:f})),p}function Bq(e,t){const n=[],i=e.segments;for(let r=0;r<i.length;r++){const s=jq(i[r],e.points,t);s.length&&n.push(...s)}return n}function Vq(e,t,n,i){return i&&i.setContext&&n?function(e,t,n,i){const r=e._chart.getContext(),s=Uq(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(e,t,i,r){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:i,style:r}),u=r,h=t%l)}}for(const p of t){h=o?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];e=Uq(i.setContext(QG(r,{type:"segment",p0:t,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),Hq(e,u)&&f(h,d-1,p.loop,u),t=s,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,i):t}function Uq(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function Hq(e,t){if(!t)return!1;const n=[],i=function(e,t){return hG(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,i)!==JSON.stringify(t,i)}function Wq(e,t,n){return e.options.clip?e[n]:t[n]}function Gq(e,t){const n=t._clip;if(n.disabled)return!1;const i=function(e,t){const{xScale:n,yScale:i}=e;return n&&i?{left:Wq(n,t,"left"),right:Wq(n,t,"right"),top:Wq(i,t,"top"),bottom:Wq(i,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:i.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:i.right+(!0===n.right?0:n.right),top:!1===n.top?0:i.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:i.bottom+(!0===n.bottom?0:n.bottom)}}class qq{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,i){const r=t.listeners[i],s=t.duration;r.forEach(i=>i({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=tG.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let s,a=r.length-1,o=!1;for(;a>=0;--a)s=r[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(r[a]=r[r.length-1],r.pop());o&&(i.draw(),this._notify(i,n,e,"progress")),r.length||(n.running=!1,this._notify(i,n,e,"complete"),n.initial=!1),t+=r.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Xq=new qq;const Yq="transparent",Kq={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const i=dG(e||Yq),r=i.valid&&dG(t||Yq);return r&&r.valid?r.mix(i,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class Zq{constructor(e,t,n,i){const r=t[n];i=ZG([e.to,i,r,e.from]);const s=ZG([e.from,r,i]);this._active=!0,this._fn=e.fn||Kq[e.type||typeof s],this._easing=uG[e.easing]||uG.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,s=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=r,this._loop=!!e.loop,this._to=ZG([e.to,t,i,e.from]),this._from=ZG([e.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,i=this._prop,r=this._from,s=this._loop,a=this._to;let o;if(this._active=r!==a&&(s||t<n),!this._active)return this._target[i]=a,void this._notify(!0);t<0?this._target[i]=r:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[i]=this._fn(r,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let i=0;i<n.length;i++)n[i][t]()}}class Qq{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!sW(e))return;const t=Object.keys(CG.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(i=>{const r=e[i];if(!sW(r))return;const s={};for(const e of t)s[e]=r[e];(rW(r.properties)&&r.properties||[i]).forEach(e=>{e!==i&&n.has(e)||n.set(e,s)})})}_animateOptions(e,t){const n=t.options,i=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(e,t){const n=[],i=Object.keys(t);for(let r=0;r<i.length;r++){const t=e[i[r]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),r}_createAnimations(e,t){const n=this._properties,i=[],r=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(e,t));continue}const c=t[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,a);continue}u.cancel()}h&&h.duration?(r[l]=u=new Zq(h,e,l,c),i.push(u)):e[l]=c}return i}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(Xq.add(this._chart,n),!0):void 0}}function Jq(e,t){const n=e&&e.options||{},i=n.reverse,r=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:i?s:r,end:i?r:s}}function $q(e,t){const n=[],i=e._getSortedDatasetMetas(t);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function eX(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const r=e.keys,s="single"===i.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=r.length;a<o;++a){if(l=+r[a],l===n){if(u=!0,i.all)continue;break}c=e.values[l],aW(c)&&(s||0===t||NW(t)===NW(c))&&(t+=c)}return u||i.all?t:0}function tX(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function nX(e,t,n){const i=e[t]||(e[t]={});return i[n]||(i[n]={})}function iX(e,t,n,i){for(const r of t.getMatchingVisibleMetas(i).reverse()){const t=e[r.index];if(n&&t>0||!n&&t<0)return r.index}return null}function rX(e,t){const{chart:n,_cachedMeta:i}=e,r=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=i,l=s.axis,c=a.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,a,i),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=nX(r,u,n),d[o]=s,d._top=iX(d,a,!0,i.type),d._bottom=iX(d,a,!1,i.type);(d._visualValues||(d._visualValues={}))[o]=s}}function sX(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function aX(e,t){const n=e.controller.index,i=e.vScale&&e.vScale.axis;if(i){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[i]||void 0===t[i][n])return;delete t[i][n],void 0!==t[i]._visualValues&&void 0!==t[i]._visualValues[n]&&delete t[i]._visualValues[n]}}}const oX=e=>"reset"===e||"none"===e,lX=(e,t)=>t?e:Object.assign({},e);class cX{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=tX(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&aX(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),i=(e,t,n,i)=>"x"===e?t:"r"===e?i:n,r=t.xAxisID=lW(n.xAxisID,sX(e,"x")),s=t.yAxisID=lW(n.yAxisID,sX(e,"y")),a=t.rAxisID=lW(n.rAxisID,sX(e,"r")),o=t.indexAxis,l=t.iAxisID=i(o,r,s,a),c=t.vAxisID=i(o,s,r,a);t.xScale=this.getScaleForId(r),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&$W(this._data,this),e._stacked&&aX(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(sW(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:i}=t,r="x"===n.axis?"x":"y",s="x"===i.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[r]:u,[s]:e[u]};return o}(t,e)}else if(n!==t){if(n){$W(n,this);const e=this._cachedMeta;aX(e),e._parsed=[]}t&&Object.isExtensible(t)&&(r=this,(i=t)._chartjs?i._chartjs.listeners.push(r):(Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[r]}}),JW.forEach(e=>{const t="_onData"+_W(e),n=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];const a=n.apply(this,r);return i._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...r)}),a}})}))),this._syncList=[],this._data=t}var i,r}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=t._stacked;t._stacked=tX(t.vScale,t),t.stack!==n.stack&&(i=!0,aX(t),t.stack=n.stack),this._resyncElements(e),(i||r!==t._stacked)&&(rX(this,t._parsed),t._stacked=tX(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:i}=this,{iScale:r,_stacked:s}=n,a=r.axis;let o,l,c,u=0===e&&t===i.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,c=i;else{c=rW(i[e])?this.parseArrayData(n,i,e,t):sW(i[e])?this.parseObjectData(n,i,e,t):this.parsePrimitiveData(n,i,e,t);const r=()=>null===l[a]||h&&l[a]<h[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(r()&&(u=!1),h=l);n._sorted=u}s&&rX(this,c)}parsePrimitiveData(e,t,n,i){const{iScale:r,vScale:s}=e,a=r.axis,o=s.axis,l=r.getLabels(),c=r===s,u=new Array(i);let h,d,f;for(h=0,d=i;h<d;++h)f=h+n,u[h]={[a]:c||r.parse(l[f],f),[o]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,i){const{xScale:r,yScale:s}=e,a=new Array(i);let o,l,c,u;for(o=0,l=i;o<l;++o)c=o+n,u=t[c],a[o]={x:r.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(e,t,n,i){const{xScale:r,yScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=t[h],l[c]={x:r.parse(bW(d,a),h),y:s.parse(bW(d,o),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const i=this.chart,r=this._cachedMeta,s=t[e.axis];return eX({keys:$q(i,!0),values:t._stacks[e.axis]._visualValues},s,r.index,{mode:n})}updateRangeFromParsed(e,t,n,i){const r=n[t.axis];let s=null===r?NaN:r;const a=i&&n._stacks[t.axis];i&&a&&(i.values=a,s=eX(i,r,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&e===n.iScale,s=i.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:$q(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:i,maxDefined:r}=e.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(a);let h,d;function f(){d=i[h];const t=d[a.axis];return!aW(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,o),!r));++h);if(r)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i][e.axis],aW(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,i=t.vScale,r=this.getParsed(e);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,i,r;return sW(e)?(t=e.top,n=e.right,i=e.bottom,r=e.left):t=n=i=r=e,{top:t,right:n,bottom:i,left:r,disabled:!1===e}}(lW(this.options.clip,function(e,t,n){if(!1===n)return!1;const i=Jq(e,n),r=Jq(t,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,i=n.data||[],r=t.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,r,a,o),c=a;c<a+o;++c){const t=i[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,r))}for(c=0;c<s.length;++c)s[c].draw(e,r)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const i=this.getDataset();let r;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];r=t.$context||(t.$context=function(e,t,n){return QG(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),r.parsed=this.getParsed(e),r.raw=i.data[e],r.index=r.dataIndex=e}else r=this.$context||(this.$context=function(e,t){return QG(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!t,r.mode=n,r}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const i="active"===t,r=this._cachedDataOpts,s=e+"-"+t,a=r[s],o=this.enableOptionSharing&&wW(n);if(a)return lX(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=i?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(CG.elements[e]),f=l.resolveNamedOptions(h,d,()=>this.getContext(n,i,t),u);return f.$shared&&(f.$shared=o,r[s]=Object.freeze(lX(f,o))),f}_resolveAnimations(e,t,n){const i=this.chart,r=this._cachedDataOpts,s="animation-".concat(t),a=r[s];if(a)return a;let o;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,t),s=i.getOptionScopes(this.getDataset(),r);o=i.createResolver(s,this.getContext(e,n,t))}const l=new Qq(i,o&&o.animations);return o&&o._cacheable&&(r[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||oX(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),i=this._sharedOptions,r=this.getSharedOptions(n),s=this.includeOptions(t,r)||r!==i;return this.updateSharedOptions(r,t,n),{sharedOptions:r,includeOptions:s}}updateElement(e,t,n,i){oX(i)?Object.assign(e,n):this._resolveAnimations(t,i).update(e,n)}updateSharedOptions(e,t,n){e&&!oX(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,i){e.active=i;const r=this.getStyle(t,i);this._resolveAnimations(t,n,i).update(e,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const i=n.length,r=t.length,s=Math.min(r,i);s&&this.parse(0,s),r>i?this._insertElements(i,r-i,e):r<i&&this._removeElements(r,i-r)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this._cachedMeta,r=i.data,s=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=s;a--)e[a]=e[a-t]};for(o(r),a=e;a<s;++a)r[a]=new this.dataElementType;this._parsing&&o(i._parsed),this.parse(e,t),n&&this.updateElements(r,e,t,"reset")}updateElements(e,t,n,i){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(e,t);n._stacked&&aX(n,i)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,i]=e;this[t](n,i)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function uX(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let i=[];for(let t=0,r=n.length;t<r;t++)i=i.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=eG(i.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let i,r,s,a,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(wW(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(i=0,r=n.length;i<r;++i)s=t.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=t.ticks.length;i<r;++i)s=t.getPixelForTick(i),l();return o}function hX(e,t,n,i){return rW(e)?function(e,t,n,i){const r=n.parse(e[0],i),s=n.parse(e[1],i),a=Math.min(r,s),o=Math.max(r,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:a,max:o}}(e,t,n,i):t[n.axis]=n.parse(e,i),t}function dX(e,t,n,i){const r=e.iScale,s=e.vScale,a=r.getLabels(),o=r===s,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=t[c],h={},h[r.axis]=o||r.parse(a[c],c),l.push(hX(d,h,s,c));return l}function fX(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function pX(e,t,n,i){let r=t.borderSkipped;const s={};if(!r)return void(e.borderSkipped=s);if(!0===r)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,i,r,s;return e.horizontal?(t=e.base>e.x,n="left",i="right"):(t=e.base<e.y,n="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:t,top:r,bottom:s}}(e);"middle"===r&&n&&(e.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[mX(u,a,o,l)]=!0,r=c)),s[mX(r,a,o,l)]=!0,e.borderSkipped=s}function mX(e,t,n,i){var r,s,a;return i?(a=n,e=gX(e=(r=e)===(s=t)?a:r===a?s:r,n,t)):e=gX(e,t,n),e}function gX(e,t,n){return"start"===e?t:"end"===e?n:e}function vX(e,t,n){let{inflateAmount:i}=t;e.inflateAmount="auto"===i?1===n?.33:0:i}R(cX,"defaults",{}),R(cX,"datasetElementType",null),R(cX,"dataElementType",null);class yX extends cX{parsePrimitiveData(e,t,n,i){return dX(e,t,n,i)}parseArrayData(e,t,n,i){return dX(e,t,n,i)}parseObjectData(e,t,n,i){const{iScale:r,vScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===r.axis?a:o,c="x"===s.axis?a:o,u=[];let h,d,f,p;for(h=n,d=n+i;h<d;++h)p=t[h],f={},f[r.axis]=r.parse(bW(p,l),h),u.push(hX(bW(p,c),f,s,h));return u}updateRangeFromParsed(e,t,n,i){super.updateRangeFromParsed(e,t,n,i);const r=n._custom;r&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,r.min),e.max=Math.max(e.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:i}=t,r=this.getParsed(e),s=r._custom,a=fX(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,i){const r="reset"===i,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,i);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=r||iW(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[a.axis],m={horizontal:l,base:n.base,enableBorderRadius:!p||fX(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(m.options=u||this.resolveDataElementOptions(d,e[d].active?"active":i));const g=m.options||e[d].options;pX(m,g,p,s),vX(m,g,c.ratio),this.updateElement(e[d],d,m,i)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,i=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),r=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),i=t&&t[e.vScale.axis];if(iW(i)||isNaN(i))return!0};for(const c of i)if((void 0===t||!l(c))&&((!1===r||-1===s.indexOf(c.stack)||void 0===r&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[lW("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const i=this._getStacks(e,n),r=void 0!==t?i.indexOf(t):-1;return-1===r?i.length-1:r}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,i=[];let r,s;for(r=0,s=t.data.length;r<s;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=e.barThickness;return{min:a||uX(t),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:i},options:{base:r,minBarLength:s}}=this,a=r||0,o=this.getParsed(e),l=o._custom,c=fX(l);let u,h,d=o[t.axis],f=0,p=n?this.applyStack(t,o,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&NW(d)!==NW(l.barEnd)&&(f=0),f+=d);const m=iW(r)||c?f:r;let g=t.getPixelForValue(m);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):g,h=u-g,Math.abs(h)<s){h=function(e,t,n){return 0!==e?NW(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,a)*s,d===a&&(g-=h/2);const e=t.getPixelForDecimal(0),r=t.getPixelForDecimal(1),l=Math.min(e,r),f=Math.max(e,r);g=Math.max(Math.min(g,f),l),u=g+h,n&&!c&&(o._stacks[t.axis]._visualValues[i]=t.getValueForPixel(u)-t.getValueForPixel(g))}if(g===t.getPixelForValue(a)){const e=NW(h)*t.getLineWidthForValue(a)/2;g+=e,h-=e}return{size:h,base:g,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,i=this.options,r=i.skipNull,s=lW(i.maxBarThickness,1/0);let a,o;const l=this._getAxisCount();if(t.grouped){const n=r?this._getStackCount(e):t.stackCount,c="flex"===i.barThickness?function(e,t,n,i){const r=t.pixels,s=r[e];let a=e>0?r[e-1]:null,o=e<r.length-1?r[e+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/i,ratio:n.barPercentage,start:c}}(e,t,i,n*l):function(e,t,n,i){const r=n.barThickness;let s,a;return iW(r)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=r*i,a=1),{chunk:s/i,ratio:a,start:t.pixels[e]-s/2}}(e,t,i,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(lW(u,this.getFirstScaleIdForIndexAxis())),d=this._getStackIndex(this.index,this._cachedMeta.stack,r?e:void 0)+h;a=c.start+c.chunk*d+c.chunk/2,o=Math.min(s,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,i=n.length;let r=0;for(;r<i;++r)null===this.getParsed(r)[t.axis]||n[r].hidden||n[r].draw(this._ctx)}}R(yX,"id","bar"),R(yX,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),R(yX,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class xX extends cX{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,i){const r=super.parsePrimitiveData(e,t,n,i);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+n).radius;return r}parseArrayData(e,t,n,i){const r=super.parseArrayData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=lW(e[2],this.resolveDataElementOptions(s+n).radius)}return r}parseObjectData(e,t,n,i){const r=super.parseObjectData(e,t,n,i);for(let s=0;s<r.length;s++){const e=t[n+s];r[s]._custom=lW(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return r}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),a=i.getLabelForValue(s.x),o=r.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,i),c=s.axis,u=a.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!r&&this.getParsed(h),d={},f=d[c]=r?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=r?a.getBasePixel():a.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=o||this.resolveDataElementOptions(h,t.active?"active":i),r&&(d.options.radius=0)),this.updateElement(t,h,d,i)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let i=super.resolveDataElementOptions(e,t);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==t&&(i.radius=0),i.radius+=lW(n&&n._custom,r),i}}R(xX,"id","bubble"),R(xX,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),R(xX,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class bX extends cX{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,s,a=e=>+n[e];if(sW(n[e])){const{key:e="value"}=this._parsing;a=t=>+bW(n[t],e)}for(r=e,s=e+t;r<s;++r)i._parsed[r]=a(r)}}_getRotation(){return jW(this.options.rotation-90)}_getCircumference(){return jW(this.options.circumference)}_getRotationExtents(){let e=EW,t=-EW;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),s=i._getCircumference();e=Math.min(e,r),t=Math.max(t,r+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,i=this._cachedMeta,r=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:m,offsetY:g}=function(e,t,n){let i=1,r=1,s=0,a=0;if(t<EW){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),h=Math.cos(l),d=Math.sin(l),f=(e,t,i)=>qW(e,o,l,!0)?1:Math.max(t,t*n,i,i*n),p=(e,t,i)=>qW(e,o,l,!0)?-1:Math.min(t,t*n,i,i*n),m=f(0,c,h),g=f(PW,u,d),v=p(CW,c,h),y=p(CW+PW,u,d);i=(m-v)/2,r=(g-y)/2,s=-(m+v)/2,a=-(g+y)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:a}}(d,h,o),v=(n.width-s)/f,y=(n.height-s)/p,x=Math.max(Math.min(v,y)/2,0),b=cW(this.options.radius,x),_=(b-Math.max(b*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=m*b,this.offsetY=g*b,i.total=this.calculateTotal(),this.outerRadius=b-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*u,0),this.updateElements(r,0,r.length,e)}_circumference(e,t){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===i._parsed[e]||i.data[e].hidden?0:this.calculateCircumference(i._parsed[e]*r/EW)}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=r&&o.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,i);let m,g=this._getRotation();for(m=0;m<t;++m)g+=this._circumference(m,r);for(m=t;m<t+n;++m){const t=this._circumference(m,r),n=e[m],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(m,n.active?"active":i)),g+=t,this.updateElement(n,m,s,i)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,i=0;for(n=0;n<t.length;n++){const r=e._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||t[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?EW*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=vG(t._parsed[e],n.options.locale);return{label:i[e]||"",value:r}}getMaxBorderWidth(e){let t=0;const n=this.chart;let i,r,s,a,o;if(!e)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){s=n.getDatasetMeta(i),e=s.data,a=s.controller;break}if(!e)return 0;for(i=0,r=e.length;i<r;++i)o=a.resolveDataElementOptions(i),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,i=e.length;n<i;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(lW(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}R(bX,"id","doughnut"),R(bX,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),R(bX,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),R(bX,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class _X extends cX{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=t,s=this.chart._animationsDisabled;let{start:a,count:o}=sG(t,i,s);this._drawStart=a,this._drawCount=o,aG(t)&&(a=0,o=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(i,a,o,e)}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,i),h=s.axis,d=a.axis,{spanGaps:f,segment:p}=this.options,m=zW(f)?f:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||r||"none"===i,v=t+n,y=e.length;let x=t>0&&this.getParsed(t-1);for(let b=0;b<y;++b){const n=e[b],f=g?n:{};if(b<t||b>=v){f.skip=!0;continue}const y=this.getParsed(b),_=iW(y[d]),w=f[h]=s.getPixelForValue(y[h],b),S=f[d]=r||_?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,y,o):y[d],b);f.skip=isNaN(w)||isNaN(S)||_,f.stop=b>0&&Math.abs(y[h]-x[h])>m,p&&(f.parsed=y,f.raw=l.data[b]),u&&(f.options=c||this.resolveDataElementOptions(b,n.active?"active":i)),g||this.updateElement(n,b,f,i),x=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,i=e.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}R(_X,"id","line"),R(_X,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),R(_X,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class wX extends cX{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=vG(t._parsed[e].r,n.options.locale);return{label:i[e]||"",value:r}}parseObjectData(e,t,n,i){return hq.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<t.min&&(t.min=i),i>t.max&&(t.max=i))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,i=Math.min(t.right-t.left,t.bottom-t.top),r=Math.max(i/2,0),s=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=r-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,i){const r="reset"===i,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*CW;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,i,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,i,f),m=s.getDataVisibility(h)?o.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,r&&(a.animateScale&&(m=0),a.animateRotate&&(n=p=u));const g={x:l,y:c,innerRadius:0,outerRadius:m,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":i)};this.updateElement(t,h,g,i)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?jW(this.resolveDataElementOptions(e,t).angle||n):0}}R(wX,"id","polarArea"),R(wX,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),R(wX,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:i}}=e.legend.options;return t.labels.map((t,r)=>{const s=e.getDatasetMeta(0).controller.getStyle(r);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:i,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(r),index:r}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class SX extends bX{}R(SX,"id","pie"),R(SX,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class MX extends cX{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,i){return hq.bind(this)(e,t,n,i)}update(e){const t=this._cachedMeta,n=t.dataset,i=t.data||[],r=t.iScale.getLabels();if(n.points=i,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:r.length===i.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(i,0,i.length,e)}updateElements(e,t,n,i){const r=this._cachedMeta.rScale,s="reset"===i;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":i),o=r.getPointPositionForValue(a,this.getParsed(a).r),l=s?r.xCenter:o.x,c=s?r.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,i)}}}R(MX,"id","radar"),R(MX,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),R(MX,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class CX extends cX{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=t,s=this.getParsed(e),a=i.getLabelForValue(s.x),o=r.getLabelForValue(s.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,i=this.chart._animationsDisabled;let{start:r,count:s}=sG(t,n,i);if(this._drawStart=r,this._drawCount=s,aG(t)&&(r=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:s}=t;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!s._decimated,r.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,r,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,i){const r="reset"===i,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,i),u=this.getSharedOptions(c),h=this.includeOptions(i,u),d=s.axis,f=a.axis,{spanGaps:p,segment:m}=this.options,g=zW(p)?p:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||r||"none"===i;let y=t>0&&this.getParsed(t-1);for(let x=t;x<t+n;++x){const t=e[x],n=this.getParsed(x),c=v?t:{},p=iW(n[f]),b=c[d]=s.getPixelForValue(n[d],x),_=c[f]=r||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],x);c.skip=isNaN(b)||isNaN(_)||p,c.stop=x>0&&Math.abs(n[d]-y[d])>g,m&&(c.parsed=n,c.raw=l.data[x]),h&&(c.options=u||this.resolveDataElementOptions(x,t.active?"active":i)),v||this.updateElement(t,x,c,i),y=n}this.updateSharedOptions(u,i,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,i=n.options&&n.options.borderWidth||0;if(!t.length)return i;const r=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(i,r,s)/2}}R(CX,"id","scatter"),R(CX,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),R(CX,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function EX(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class TX{static override(e){Object.assign(TX.prototype,e)}constructor(e){R(this,"options",void 0),this.options=e||{}}init(){}formats(){return EX()}parse(){return EX()}format(){return EX()}add(){return EX()}diff(){return EX()}startOf(){return EX()}endOf(){return EX()}}var AX=TX;function kX(e,t,n,i){const{controller:r,data:s,_sorted:a}=e,o=r._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&s.length){const a=o._reversePixels?QW:ZW;if(!i){const i=a(s,t,n);if(l){const{vScale:t}=r._cachedMeta,{_parsed:n}=e,s=n.slice(0,i.lo+1).reverse().findIndex(e=>!iW(e[t.axis]));i.lo-=Math.max(0,s);const a=n.slice(i.hi).findIndex(e=>!iW(e[t.axis]));i.hi+=Math.max(0,a)}return i}if(r._sharedOptions){const e=s[0],i="function"===typeof e.getRange&&e.getRange(t);if(i){const e=a(s,t,n-i),r=a(s,t,n+i);return{lo:e.lo,hi:r.hi}}}}return{lo:0,hi:s.length-1}}function PX(e,t,n,i,r){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=kX(s[o],t,a,r);for(let t=l;t<=c;++t){const r=n[t];r.skip||i(r,e,t)}}}function LX(e,t,n,i,r){const s=[];if(!r&&!e.isPointInArea(t))return s;return PX(e,n,t,function(n,a,o){(r||DG(n,e.chartArea,0))&&n.inRange(t.x,t.y,i)&&s.push({element:n,datasetIndex:a,index:o})},!0),s}function DX(e,t,n,i,r,s){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,i){const r=t?Math.abs(e.x-i.x):0,s=n?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return PX(e,n,t,function(n,c,u){const h=n.inRange(t.x,t.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=o(t,d);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})}),a}function RX(e,t,n,i,r,s){return s||e.isPointInArea(t)?"r"!==n||i?DX(e,t,n,i,r,s):function(e,t,n,i){let r=[];return PX(e,n,t,function(e,n,s){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],i),{angle:l}=UW(e,{x:t.x,y:t.y});qW(l,a,o)&&r.push({element:e,datasetIndex:n,index:s})}),r}(e,t,n,r):[]}function NX(e,t,n,i,r){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return PX(e,n,t,(e,i,l)=>{e[a]&&e[a](t[n],r)&&(s.push({element:e,datasetIndex:i,index:l}),o=o||e.inRange(t.x,t.y,r))}),i&&!o?[]:s}var IX={evaluateInteractionItems:PX,modes:{index(e,t,n,i){const r=Cq(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?LX(e,r,s,i,a):RX(e,r,s,!1,i,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,i){const r=Cq(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?LX(e,r,s,i,a):RX(e,r,s,!1,i,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,i)=>LX(e,Cq(t,e),n.axis||"xy",i,n.includeInvisible||!1),nearest(e,t,n,i){const r=Cq(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return RX(e,r,s,n.intersect,i,a)},x:(e,t,n,i)=>NX(e,Cq(t,e),"x",n.intersect,i),y:(e,t,n,i)=>NX(e,Cq(t,e),"y",n.intersect,i)}};const OX=["left","top","right","bottom"];function zX(e,t){return e.filter(e=>e.pos===t)}function FX(e,t){return e.filter(e=>-1===OX.indexOf(e.pos)&&e.box.axis===t)}function jX(e,t){return e.sort((e,n)=>{const i=t?n:e,r=t?e:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight})}function BX(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:i,stackWeight:r}=n;if(!e||!OX.includes(i))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=r}return t}(e),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*i:a&&t.availableWidth,o.height=r):(o.width=i,o.height=c?c*r:a&&t.availableHeight)}return n}function VX(e,t,n,i){return Math.max(e[n],t[n])+Math.max(e[i],t[i])}function UX(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function HX(e,t,n,i){const{pos:r,box:s}=n,a=e.maxPadding;if(!sW(r)){n.size&&(e[r]-=n.size);const t=i[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[r]+=n.size}s.getPadding&&UX(a,s.getPadding());const o=Math.max(0,t.outerWidth-VX(a,e,"left","right")),l=Math.max(0,t.outerHeight-VX(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function WX(e,t){const n=t.maxPadding;function i(e){const i={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{i[e]=Math.max(t[e],n[e])}),i}return i(e?["left","right"]:["top","bottom"])}function GX(e,t,n,i){const r=[];let s,a,o,l,c,u;for(s=0,a=e.length,c=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,WX(o.horizontal,t));const{same:a,other:h}=HX(t,n,o,i);c|=a&&r.length,u=u||h,l.fullSize||r.push(o)}return c&&GX(r,t,n,i)||u}function qX(e,t,n,i,r){e.top=n,e.left=t,e.right=t+i,e.bottom=n+r,e.width=i,e.height=r}function XX(e,t,n,i){const r=n.padding;let{x:s,y:a}=t;for(const o of e){const e=o.box,l=i[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const i=t.w*c,s=l.size||e.height;wW(l.start)&&(a=l.start),e.fullSize?qX(e,r.left,a,n.outerWidth-r.right-r.left,s):qX(e,t.left+l.placed,a,i,s),l.start=a,l.placed+=i,a=e.bottom}else{const i=t.h*c,a=l.size||e.width;wW(l.start)&&(s=l.start),e.fullSize?qX(e,s,r.top,a,n.outerHeight-r.bottom-r.top):qX(e,s,t.top+l.placed,a,i),l.start=s,l.placed+=i,s=e.right}}t.x=s,t.y=a}var YX={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,i){if(!e)return;const r=YG(e.options.layout.padding),s=Math.max(t-r.width,0),a=Math.max(n-r.height,0),o=function(e){const t=function(e){const t=[];let n,i,r,s,a,o;for(n=0,i=(e||[]).length;n<i;++n)r=e[n],({position:s,options:{stack:a,stackWeight:o=1}}=r),t.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&s+a,stackWeight:o});return t}(e),n=jX(t.filter(e=>e.box.fullSize),!0),i=jX(zX(t,"left"),!0),r=jX(zX(t,"right")),s=jX(zX(t,"top"),!0),a=jX(zX(t,"bottom")),o=FX(t,"x"),l=FX(t,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(a).concat(o),chartArea:zX(t,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;hW(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:r,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),d=Object.assign({},r);UX(d,YG(i));const f=Object.assign({maxPadding:d,w:s,h:a,x:r.left,y:r.top},r),p=BX(l.concat(c),h);GX(o.fullSize,f,h,p),GX(l,f,h,p),GX(c,f,h,p)&&GX(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const i=Math.max(t[n]-e[n],0);return e[n]+=i,i}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),XX(o.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,XX(o.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},hW(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class KX{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,i){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,i?Math.floor(t/i):n)}}isAttached(e){return!0}updateConfig(e){}}class ZX extends KX{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const QX="$chartjs",JX={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},$X=e=>null===e||""===e;const eY=!!kq&&{passive:!0};function tY(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,eY)}function nY(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function iY(e,t,n){const i=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||nY(n.addedNodes,i),t=t&&!nY(n.removedNodes,i);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function rY(e,t,n){const i=e.canvas,r=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||nY(n.removedNodes,i),t=t&&!nY(n.addedNodes,i);t&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const sY=new Map;let aY=0;function oY(){const e=window.devicePixelRatio;e!==aY&&(aY=e,sY.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function lY(e,t,n){const i=e.canvas,r=i&&bq(i);if(!r)return;const s=nG((e,t)=>{const i=r.clientWidth;n(e,t),i<r.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,i=t.contentRect.height;0===n&&0===i||s(n,i)});return a.observe(r),function(e,t){sY.size||window.addEventListener("resize",oY),sY.set(e,t)}(e,s),a}function cY(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){sY.delete(e),sY.size||window.removeEventListener("resize",oY)}(e)}function uY(e,t,n){const i=e.canvas,r=nG(t=>{null!==e.ctx&&n(function(e,t){const n=JX[e.type]||e.type,{x:i,y:r}=Cq(e,t);return{type:n,chart:t,native:e,x:void 0!==i?i:null,y:void 0!==r?r:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,eY)}(i,t,r),r}class hY extends KX{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,i=e.getAttribute("height"),r=e.getAttribute("width");if(e[QX]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",$X(r)){const t=Pq(e,"width");void 0!==t&&(e.width=t)}if($X(i))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Pq(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[QX])return!1;const n=t[QX].initial;["height","width"].forEach(e=>{const i=n[e];iW(i)?t.removeAttribute(e):t.setAttribute(e,i)});const i=n.style||{};return Object.keys(i).forEach(e=>{t.style[e]=i[e]}),t.width=t.width,delete t[QX],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const i=e.$proxies||(e.$proxies={}),r={attach:iY,detach:rY,resize:lY}[t]||uY;i[t]=r(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),i=n[t];if(!i)return;({attach:cY,detach:cY,resize:cY}[t]||tY)(e,t,i),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,i){return Tq(e,t,n,i)}isAttached(e){const t=e&&bq(e);return!(!t||!t.isConnected)}}class dY{constructor(){R(this,"x",void 0),R(this,"y",void 0),R(this,"active",!1),R(this,"options",void 0),R(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return zW(this.x)&&zW(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const i={};return e.forEach(e=>{i[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),i}}function fY(e,t){const n=e.options.ticks,i=function(e){const t=e.options.offset,n=e._tickSize(),i=e._length/n+(t?0:1),r=e._maxLength/n;return Math.floor(Math.min(i,r))}(e),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?function(e){const t=[];let n,i;for(n=0,i=e.length;n<i;n++)e[n].major&&t.push(n);return t}(t):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>r)return function(e,t,n,i){let r,s=0,a=n[0];for(i=Math.ceil(i),r=0;r<e.length;r++)r===a&&(t.push(e[r]),s++,a=n[s*i])}(t,c,s,a/r),c;const u=function(e,t,n){const i=function(e){const t=e.length;let n,i;if(t<2)return!1;for(i=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==i)return!1;return i}(e),r=t.length/n;if(!i)return Math.max(r,1);const s=function(e){const t=[],n=Math.sqrt(e);let i;for(i=1;i<n;i++)e%i===0&&(t.push(i),t.push(e/i));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(i);for(let a=0,o=s.length-1;a<o;a++){const e=s[a];if(e>r)return e}return Math.max(r,1)}(s,t,r);if(a>0){let e,n;const i=a>1?Math.round((l-o)/(a-1)):null;for(pY(t,c,u,iW(i)?0:o-i,o),e=0,n=a-1;e<n;e++)pY(t,c,u,s[e],s[e+1]);return pY(t,c,u,l,iW(i)?t.length:l+i),c}return pY(t,c,u),c}function pY(e,t,n,i,r){const s=lW(i,0),a=Math.min(lW(r,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),r&&(o=r-i,n=o/Math.floor(o/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}R(dY,"defaults",{}),R(dY,"defaultRoutes",void 0);const mY=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,gY=(e,t)=>Math.min(t||e,e);function vY(e,t){const n=[],i=e.length/t,r=e.length;let s=0;for(;s<r;s+=i)n.push(e[Math.floor(s)]);return n}function yY(e,t,n){const i=e.ticks.length,r=Math.min(t,i-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-s,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-o||c>a+o)))return c}function xY(e){return e.drawTicks?e.tickLength:0}function bY(e,t){if(!e.display)return 0;const n=KG(e.font,t),i=YG(e.padding);return(rW(e.text)?e.text.length:1)*n.lineHeight+i.height}function _Y(e,t,n){let i=iG(e);return(n&&"right"!==t||!n&&"right"===t)&&(i=(e=>"left"===e?"right":"right"===e?"left":e)(i)),i}class wY extends dY{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:i}=this;return e=oW(e,Number.POSITIVE_INFINITY),t=oW(t,Number.NEGATIVE_INFINITY),n=oW(n,Number.POSITIVE_INFINITY),i=oW(i,Number.NEGATIVE_INFINITY),{min:oW(e,n),max:oW(t,i),minDefined:aW(e),maxDefined:aW(t)}}getMinMax(e){let t,{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds();if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),r||(n=Math.min(n,t.min)),s||(i=Math.max(i,t.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:oW(n,oW(i,n)),max:oW(i,oW(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){uW(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:i,grace:r,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:i,max:r}=e,s=cW(t,(r-i)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(i,-Math.abs(s)),max:a(r,s)}}(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?vY(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=fY(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){uW(this.options.afterUpdate,[this])}beforeSetDimensions(){uW(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){uW(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),uW(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){uW(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,i,r;for(n=0,i=e.length;n<i;n++)r=e[n],r.label=uW(t.callback,[r.value,n,e],this)}afterTickToLabelConversion(){uW(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){uW(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=gY(this.ticks.length,e.ticks.maxTicksLimit),i=t.minRotation||0,r=t.maxRotation;let s,a,o,l=i;if(!this._isVisible()||!t.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=XW(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),a=this.maxHeight-xY(e.grid)-t.padding-bY(e.title,this.chart.options.font),o=Math.sqrt(u*u+h*h),l=BW(Math.min(Math.asin(XW((c.highest.height+6)/s,-1,1)),Math.asin(XW(a/o,-1,1))-Math.asin(XW(h/o,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){uW(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){uW(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:i,grid:r}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=bY(i,t.options.font);if(a?(e.width=this.maxWidth,e.height=xY(r)+s):(e.height=this.maxHeight,e.width=xY(r)+s),n.display&&this.ticks.length){const{first:t,last:i,widest:r,highest:s}=this._getLabelSizes(),o=2*n.padding,l=jW(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*r.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*r.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,i,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,i){const{ticks:{align:r,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;o?l?(u=i*e.width,h=n*t.height):(u=n*e.height,h=i*t.width):"start"===r?h=t.width:"end"===r?u=e.width:"inner"!==r&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,i=e.height/2;"start"===r?(n=0,i=e.height):"end"===r&&(n=t.height,i=0),this.paddingTop=n+s,this.paddingBottom=i+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){uW(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)iW(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=vY(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:i,_longestTextCache:r}=this,s=[],a=[],o=Math.floor(t/gY(t,n));let l,c,u,h,d,f,p,m,g,v,y,x=0,b=0;for(l=0;l<t;l+=o){if(h=e[l].label,d=this._resolveTickFontOptions(l),i.font=f=d.string,p=r[f]=r[f]||{data:{},gc:[]},m=d.lineHeight,g=v=0,iW(h)||rW(h)){if(rW(h))for(c=0,u=h.length;c<u;++c)y=h[c],iW(y)||rW(y)||(g=EG(i,p.data,p.gc,g,y),v+=m)}else g=EG(i,p.data,p.gc,g,h),v=m;s.push(g),a.push(v),x=Math.max(g,x),b=Math.max(v,b)}!function(e,t){hW(e,e=>{const n=e.gc,i=n.length/2;let r;if(i>t){for(r=0;r<i;++r)delete e.data[n[r]];n.splice(0,i)}})}(r,t);const _=s.indexOf(x),w=a.indexOf(b),S=e=>({width:s[e]||0,height:a[e]||0});return{first:S(0),last:S(t-1),widest:S(_),highest:S(w),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return XW(this._alignToPixels?AG(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return QG(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=function(e,t){return QG(e,{scale:t,type:"scale"})}(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=jW(this.labelRotation),n=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),r=this._getLabelSizes(),s=e.autoSkipPadding||0,a=r?r.widest.width+s:0,o=r?r.highest.height+s:0;return this.isHorizontal()?o*n>a*i?a/n:o/i:o*i<a*n?o/n:a/i}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,i=this.options,{grid:r,position:s,border:a}=i,o=r.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=xY(r),h=[],d=a.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,m=function(e){return AG(n,e,f)};let g,v,y,x,b,_,w,S,M,C,E,T;if("top"===s)g=m(this.bottom),_=this.bottom-u,S=g-p,C=m(e.top)+p,T=e.bottom;else if("bottom"===s)g=m(this.top),C=e.top,T=m(e.bottom)-p,_=g+p,S=this.top+u;else if("left"===s)g=m(this.right),b=this.right-u,w=g-p,M=m(e.left)+p,E=e.right;else if("right"===s)g=m(this.left),M=e.left,E=m(e.right)-p,b=g+p,w=this.left+u;else if("x"===t){if("center"===s)g=m((e.top+e.bottom)/2+.5);else if(sW(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}C=e.top,T=e.bottom,_=g+p,S=_+u}else if("y"===t){if("center"===s)g=m((e.left+e.right)/2);else if(sW(s)){const e=Object.keys(s)[0],t=s[e];g=m(this.chart.scales[e].getPixelForValue(t))}b=g-p,w=b-u,M=e.left,E=e.right}const A=lW(i.ticks.maxTicksLimit,c),k=Math.max(1,Math.ceil(c/A));for(v=0;v<c;v+=k){const e=this.getContext(v),t=r.setContext(e),i=a.setContext(e),s=t.lineWidth,c=t.color,u=i.dash||[],d=i.dashOffset,f=t.tickWidth,p=t.tickColor,m=t.tickBorderDash||[],g=t.tickBorderDashOffset;y=yY(this,v,o),void 0!==y&&(x=AG(n,y,s),l?b=w=M=E=x:_=S=C=T=x,h.push({tx1:b,ty1:_,tx2:w,ty2:S,x1:M,y1:C,x2:E,y2:T,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:m,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:i,ticks:r}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=r,h=xY(n.grid),d=h+c,f=u?-c:d,p=-jW(this.labelRotation),m=[];let g,v,y,x,b,_,w,S,M,C,E,T,A="middle";if("top"===i)_=this.bottom-f,w=this._getXAxisLabelAlignment();else if("bottom"===i)_=this.top+f,w=this._getXAxisLabelAlignment();else if("left"===i){const e=this._getYAxisLabelAlignment(h);w=e.textAlign,b=e.x}else if("right"===i){const e=this._getYAxisLabelAlignment(h);w=e.textAlign,b=e.x}else if("x"===t){if("center"===i)_=(e.top+e.bottom)/2+d;else if(sW(i)){const e=Object.keys(i)[0],t=i[e];_=this.chart.scales[e].getPixelForValue(t)+d}w=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===i)b=(e.left+e.right)/2-d;else if(sW(i)){const e=Object.keys(i)[0],t=i[e];b=this.chart.scales[e].getPixelForValue(t)}w=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===o?A="top":"end"===o&&(A="bottom"));const k=this._getLabelSizes();for(g=0,v=a.length;g<v;++g){y=a[g],x=y.label;const e=r.setContext(this.getContext(g));S=this.getPixelForTick(g)+r.labelOffset,M=this._resolveTickFontOptions(g),C=M.lineHeight,E=rW(x)?x.length:1;const t=E/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let h,d=w;if(s?(b=S,"inner"===w&&(d=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),T="top"===i?"near"===l||0!==p?-E*C+C/2:"center"===l?-k.highest.height/2-t*C+C:-k.highest.height+C/2:"near"===l||0!==p?C/2:"center"===l?k.highest.height/2-t*C:k.highest.height-E*C,u&&(T*=-1),0===p||e.showLabelBackdrop||(b+=C/2*Math.sin(p))):(_=S,T=(1-E)*C/2),e.showLabelBackdrop){const t=YG(e.backdropPadding),n=k.heights[g],i=k.widths[g];let r=T-t.top,s=0-t.left;switch(A){case"middle":r-=n/2;break;case"bottom":r-=n}switch(w){case"center":s-=i/2;break;case"right":s-=i;break;case"inner":g===v-1?s-=i:g>0&&(s-=i/2)}h={left:s,top:r,width:i+t.width,height:n+t.height,color:e.backdropColor}}m.push({label:x,font:M,textOffset:T,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:d,textBaseline:A,translation:[b,_],backdrop:h}})}return m}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-jW(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,s=e+r,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?i?(l=this.right+r,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?i?(l=this.left+r,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:i,width:r,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,i,r,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let r,s;const a=(e,t,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(r=0,s=i.length;r<s;++r){const e=i[r];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),s=n.display?r.width:0;if(!s)return;const a=i.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=AG(e,this.left,s)-s/2,c=AG(e,this.right,a)+a/2,u=h=o):(u=AG(e,this.top,s)-s/2,h=AG(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=r.width,t.strokeStyle=r.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&RG(t,n);const i=this.getLabelItems(e);for(const r of i){const e=r.options,n=r.font;jG(t,r.label,0,r.textOffset,n,e)}n&&NG(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:i}}=this;if(!n.display)return;const r=KG(n.font),s=YG(n.padding),a=n.align;let o=r.lineHeight/2;"bottom"===t||"center"===t||sW(t)?(o+=s.bottom,rW(n.text)&&(o+=r.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,i){const{top:r,left:s,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const m=a-r,g=o-s;if(e.isHorizontal()){if(d=rG(i,s,o),sW(n)){const e=Object.keys(n)[0],i=n[e];f=u[e].getPixelForValue(i)+m-t}else f="center"===n?(c.bottom+c.top)/2+m-t:mY(e,n,t);h=o-s}else{if(sW(n)){const e=Object.keys(n)[0],i=n[e];d=u[e].getPixelForValue(i)-g+t}else d="center"===n?(c.left+c.right)/2-g+t:mY(e,n,t);f=rG(i,a,r),p="left"===n?-PW:PW}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,o,t,a);jG(e,n.text,0,0,r,{color:n.color,maxWidth:u,rotation:h,textAlign:_Y(a,t,i),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=lW(e.grid&&e.grid.z,-1),i=lW(e.border&&e.border.z,0);return this._isVisible()&&this.draw===wY.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,s;for(r=0,s=t.length;r<s;++r){const s=t[r];s[n]!==this.id||e&&s.type!==e||i.push(s)}return i}_resolveTickFontOptions(e){return KG(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class SY{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const i=this.items,r=e.id,s=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+e);return r in i||(i[r]=e,function(e,t,n){const i=gW(Object.create(null),[n?CG.get(n):{},CG.get(t),e.defaults]);CG.set(t,i),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const i=n.split("."),r=i.pop(),s=[e].concat(i).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");CG.route(s,r,l,o)})}(t,e.defaultRoutes);e.descriptors&&CG.describe(t,e.descriptors)}(e,s,n),this.override&&CG.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,i=this.scope;n in t&&delete t[n],i&&n in CG[i]&&(delete CG[i][n],this.override&&delete bG[n])}}class MY{constructor(){this.controllers=new SY(cX,"datasets",!0),this.elements=new SY(dY,"elements"),this.plugins=new SY(Object,"plugins"),this.scales=new SY(wY,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const i=n||this._getRegistryForType(t);n||i.isForType(t)||i===this.plugins&&t.id?this._exec(e,i,t):hW(t,t=>{const i=n||this._getRegistryForType(t);this._exec(e,i,t)})})}_exec(e,t,n){const i=_W(e);uW(n["before"+i],[],n),t[e](n),uW(n["after"+i],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const i=t.get(e);if(void 0===i)throw new Error('"'+e+'" is not a registered '+n+".");return i}}var CY=new MY;class EY{constructor(){this._init=[]}notify(e,t,n,i){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const r=i?this._descriptors(e).filter(i):this._descriptors(e),s=this._notify(r,e,t,n);return"afterDestroy"===t&&(this._notify(r,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,i){i=i||{};for(const r of e){const e=r.plugin;if(!1===uW(e[n],[t,i,r.options],e)&&i.cancelable)return!1}return!0}invalidate(){iW(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,i=lW(n.options&&n.options.plugins,{}),r=function(e){const t={},n=[],i=Object.keys(CY.plugins.items);for(let s=0;s<i.length;s++)n.push(CY.getPlugin(i[s]));const r=e.plugins||[];for(let s=0;s<r.length;s++){const e=r[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==i||t?function(e,t,n,i){let{plugins:r,localIds:s}=t;const a=[],o=e.getContext();for(const l of r){const t=l.id,r=TY(n[t],i);null!==r&&a.push({plugin:l,options:AY(e.config,{plugin:l,local:s[t]},r,o)})}return a}(e,r,i,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,i=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(i(t,n),e,"stop"),this._notify(i(n,t),e,"start")}}function TY(e,t){return t||!1!==e?!0===e?{}:e:null}function AY(e,t,n,i){let{plugin:r,local:s}=t;const a=e.pluginScopeKeys(r),o=e.getOptionScopes(n,a);return s&&r.defaults&&o.push(r.defaults),e.createResolver(o,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function kY(e,t){const n=CG.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function PY(e){if("x"===e||"y"===e||"r"===e)return e}function LY(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function DY(e){if(PY(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];for(const r of n){const t=r.axis||LY(r.position)||e.length>1&&PY(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function RY(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function NY(e,t){const n=bG[e.type]||{scales:{}},i=t.scales||{},r=kY(e.type,t),s=Object.create(null);return Object.keys(i).forEach(t=>{const a=i[t];if(!sW(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=DY(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return RY(e,"x",n[0])||RY(e,"y",n[0])}return{}}(t,e),CG.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,r),c=n.scales||{};s[t]=vW(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const r=n.type||e.type,a=n.indexAxis||kY(r,t),o=(bG[r]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),r=n[t+"AxisID"]||t;s[r]=s[r]||Object.create(null),vW(s[r],[{axis:t},i[r],o[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];vW(t,[CG.scales[t.type],CG.scale])}),s}function IY(e){const t=e.options||(e.options={});t.plugins=lW(t.plugins,{}),t.scales=NY(e,t)}function OY(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const zY=new Map,FY=new Set;function jY(e,t){let n=zY.get(e);return n||(n=t(),zY.set(e,n),FY.add(n)),n}const BY=(e,t,n)=>{const i=bW(t,n);void 0!==i&&e.add(i)};class VY{constructor(e){this._config=function(e){return(e=e||{}).data=OY(e.data),IY(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=OY(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),IY(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return jY(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return jY("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return jY("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return jY("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let i=n.get(e);return i&&!t||(i=new Map,n.set(e,i)),i}getOptionScopes(e,t,n){const{options:i,type:r}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>BY(o,e,t))),t.forEach(e=>BY(o,i,e)),t.forEach(e=>BY(o,bG[r]||{},e)),t.forEach(e=>BY(o,CG,e)),t.forEach(e=>BY(o,_G,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),FY.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,bG[t]||{},CG.datasets[t]||{},{type:t},CG,_G]}resolveNamedOptions(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const r={$shared:!0},{resolver:s,subPrefixes:a}=UY(this._resolverCache,e,i);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:i}=eq(e);for(const r of t){const t=n(r),s=i(r),a=(s||t)&&e[r];if(t&&(SW(a)||HY(a))||s&&rW(a))return!0}return!1}(s,t)){r.$shared=!1;o=$G(s,n=SW(n)?n():n,this.createResolver(e,n,a))}for(const l of t)r[l]=o[l];return r}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=arguments.length>3?arguments[3]:void 0;const{resolver:r}=UY(this._resolverCache,e,n);return sW(t)?$G(r,t,void 0,i):r}}function UY(e,t,n){let i=e.get(t);i||(i=new Map,e.set(t,i));const r=n.join();let s=i.get(r);if(!s){s={resolver:JG(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},i.set(r,s)}return s}const HY=e=>sW(e)&&Object.getOwnPropertyNames(e).some(t=>SW(e[t]));const WY=["top","bottom","left","right","chartArea"];function GY(e,t){return"top"===e||"bottom"===e||-1===WY.indexOf(e)&&"x"===t}function qY(e,t){return function(n,i){return n[e]===i[e]?n[t]-i[t]:n[e]-i[e]}}function XY(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),uW(n&&n.onComplete,[e],t)}function YY(e){const t=e.chart,n=t.options.animation;uW(n&&n.onProgress,[e],t)}function KY(e){return xq()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const ZY={},QY=e=>{const t=KY(e);return Object.values(ZY).filter(e=>e.canvas===t).pop()};function JY(e,t,n){const i=Object.keys(e);for(const r of i){const i=+r;if(i>=t){const s=e[r];delete e[r],(n>0||i>t)&&(e[i+n]=s)}}}class $Y{static register(){CY.add(...arguments),eK()}static unregister(){CY.remove(...arguments),eK()}constructor(e,t){const n=this.config=new VY(t),i=KY(e),r=QY(i);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!xq()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?ZX:hY}(i)),this.platform.updateConfig(n);const a=this.platform.acquireContext(i,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=nW(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new EY,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,r)):e.apply(this,r),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],ZY[this.id]=this,a&&o?(Xq.listen(this,"complete",XY),Xq.listen(this,"progress",YY),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:i,_aspectRatio:r}=this;return iW(e)?t&&r?r:i?n/i:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return CY}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Aq(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return kG(this.canvas,this.ctx),this}stop(){return Xq.stop(this),this}resize(e,t){Xq.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,e,t,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Aq(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),uW(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){hW(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,i=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let r=[];t&&(r=r.concat(Object.keys(t).map(e=>{const n=t[e],i=DY(e,n),r="r"===i,s="x"===i;return{options:n,dposition:r?"chartArea":s?"bottom":"left",dtype:r?"radialLinear":s?"category":"linear"}}))),hW(r,t=>{const r=t.options,s=r.id,a=DY(s,r),o=lW(r.type,t.dtype);void 0!==r.position&&GY(r.position,a)===GY(t.dposition)||(r.position=t.dposition),i[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(CY.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(r,e)}),hW(i,(e,t)=>{e||delete n[t]}),hW(n,e=>{YX.configure(this,e,e.options),YX.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(qY("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=t.length;n<i;n++){const i=t[n];let r=this.getDatasetMeta(n);const s=i.type||this.config.type;if(r.type&&r.type!==s&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=s,r.indexAxis=i.indexAxis||kY(s,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const t=CY.getController(s),{datasetElementType:i,dataElementType:a}=CG.datasets[s];Object.assign(t,{dataElementType:CY.getElement(a),datasetElementType:i&&CY.getElement(i)}),r.controller=new t(this,n),e.push(r.controller)}}return this._updateMetasets(),e}_resetElements(){hW(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),i||hW(r,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(qY("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){hW(this.scales,e=>{YX.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);MW(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of t){JY(e,i,"_removeElements"===n?-r:r)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),i=n(0);for(let r=1;r<t;r++)if(!MW(i,n(r)))return;return Array.from(i).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;YX.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],hW(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,SW(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),i={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(t),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Xq.has(this)?this.attached&&!Xq.running(this)&&Xq.start(this):(this.draw(),XY({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let i,r;for(i=0,r=t.length;i<r;++i){const r=t[i];e&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},i=Gq(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(i&&RG(t,i),e.controller.draw(),i&&NG(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return DG(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,i){const r=IX.modes[t];return"function"===typeof r?r(this,e,n,i):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let i=n.filter(e=>e&&e._dataset===t).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=QG(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const i=n?"show":"hide",r=this.getDatasetMeta(e),s=r.controller._resolveAnimations(void 0,i);wW(t)?(r.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(r,{visible:n}),this.update(t=>t.datasetIndex===e?i:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),Xq.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),kG(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete ZY[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};hW(this.options.events,e=>n(e,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,i)=>{t.addEventListener(this,n,i),e[n]=i},i=(n,i)=>{e[n]&&(t.removeEventListener(this,n,i),delete e[n])},r=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",s)};s=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){hW(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},hW(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const i=n?"set":"remove";let r,s,a,o;for("dataset"===t&&(r=this.getDatasetMeta(e[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){s=e[a];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.getDatasetMeta(t);if(!i)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:i.data[n],index:n}});!dW(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const i=this.options.hover,r=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=r(t,e),a=n?e:r(e,t);s.length&&this.updateHoverStyle(s,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},i=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:i=[],options:r}=this,s=t,a=this._getActiveElements(e,i,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,i){return n&&"mouseout"!==e.type?i?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,uW(r.onHover,[e,a,this],this),o&&uW(r.onClick,[e,a,this],this));const c=!dW(a,i);return(c||t)&&(this._active=a,this._updateHoverStyles(a,i,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,i){if("mouseout"===e.type)return[];if(!n)return t;const r=this.options.hover;return this.getElementsAtEventForMode(e,r.mode,r,i)}}function eK(){return hW($Y.instances,e=>e._plugins.invalidate())}function tK(e,t,n,i){const r=GG(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,a=Math.min(s,i*t/2),o=e=>{const t=(n-Math.min(s,e))*i/2;return XW(e,0,Math.min(s,t))};return{outerStart:o(r.outerStart),outerEnd:o(r.outerEnd),innerStart:XW(r.innerStart,0,a),innerEnd:XW(r.innerEnd,0,a)}}function nK(e,t,n,i){return{x:n+e*Math.cos(t),y:i+e*Math.sin(t)}}function iK(e,t,n,i,r,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let f=0;const p=r-l;if(i){const e=((u>0?u-i:0)+(h>0?h-i:0))/2;f=(p-(0!==e?p*e/(e+i):p))/2}const m=(p-Math.max(.001,p*h-n/CW)/h)/2,g=l+m+f,v=r-m-f,{outerStart:y,outerEnd:x,innerStart:b,innerEnd:_}=tK(t,d,h,v-g),w=h-y,S=h-x,M=g+y/w,C=v-x/S,E=d+b,T=d+_,A=g+b/E,k=v-_/T;if(e.beginPath(),s){const t=(M+C)/2;if(e.arc(a,o,h,M,t),e.arc(a,o,h,t,C),x>0){const t=nK(S,C,a,o);e.arc(t.x,t.y,x,C,v+PW)}const n=nK(T,v,a,o);if(e.lineTo(n.x,n.y),_>0){const t=nK(T,k,a,o);e.arc(t.x,t.y,_,v+PW,k+Math.PI)}const i=(v-_/d+(g+b/d))/2;if(e.arc(a,o,d,v-_/d,i,!0),e.arc(a,o,d,i,g+b/d,!0),b>0){const t=nK(E,A,a,o);e.arc(t.x,t.y,b,A+Math.PI,g-PW)}const r=nK(w,g,a,o);if(e.lineTo(r.x,r.y),y>0){const t=nK(w,M,a,o);e.arc(t.x,t.y,y,g-PW,M)}}else{e.moveTo(a,o);const t=Math.cos(M)*h+a,n=Math.sin(M)*h+o;e.lineTo(t,n);const i=Math.cos(C)*h+a,r=Math.sin(C)*h+o;e.lineTo(i,r)}e.closePath()}function rK(e,t,n,i,r){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,p?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let m=t.endAngle;if(s){iK(e,t,n,i,m,r);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(m=a+(o%EW||EW))}p&&function(e,t,n){const{startAngle:i,pixelMargin:r,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=r/o;e.beginPath(),e.arc(s,a,o,i-c,n+c),l>r?(c=r/l,e.arc(s,a,l,n+c,i-c,!0)):e.arc(s,a,r,n+PW,i-PW),e.closePath(),e.clip()}(e,t,m),l.selfJoin&&m-a>=CW&&0===f&&"miter"!==u&&function(e,t,n){const{startAngle:i,x:r,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/a,GW(i-n));if(e.beginPath(),e.arc(r,s,a-c/2,i+h/2,n-h/2),o>0){const t=Math.min(c/o,GW(i-n));e.arc(r,s,o+c/2,n-t/2,i+t/2,!0)}else{const t=Math.min(c/2,a*GW(i-n));if("round"===u)e.arc(r,s,t,n-CW/2,i+CW/2,!0);else if("bevel"===u){const a=2*t*t,o=-a*Math.cos(n+CW/2)+r,l=-a*Math.sin(n+CW/2)+s,c=a*Math.cos(i+CW/2)+r,u=a*Math.sin(i+CW/2)+s;e.lineTo(o,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,m),s||(iK(e,t,n,i,m,r),e.stroke())}R($Y,"defaults",CG),R($Y,"instances",ZY),R($Y,"overrides",bG),R($Y,"registry",CY),R($Y,"version","4.5.0"),R($Y,"getChart",QY);class sK extends dY{constructor(e){super(),R(this,"circumference",void 0),R(this,"endAngle",void 0),R(this,"fullCircles",void 0),R(this,"innerRadius",void 0),R(this,"outerRadius",void 0),R(this,"pixelMargin",void 0),R(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.getProps(["x","y"],n),{angle:r,distance:s}=UW(i,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=lW(u,o-a),f=qW(r,a,o)&&a!==o,p=d>=EW||f,m=YW(s,l+h,c+h);return p&&m}getCenterPoint(e){const{x:t,y:n,startAngle:i,endAngle:r,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(i+r)/2,u=(s+a+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,i=(t.offset||0)/4,r=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>EW?Math.floor(n/EW):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*i,Math.sin(a)*i);const o=i*(1-Math.sin(Math.min(CW,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,i,r){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){iK(e,t,n,i,l,r);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=a+(o%EW||EW))}iK(e,t,n,i,l,r),e.fill()}(e,this,o,r,s),rK(e,this,o,r,s),e.restore()}}function aK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=lW(n.borderCapStyle,t.borderCapStyle),e.setLineDash(lW(n.borderDash,t.borderDash)),e.lineDashOffset=lW(n.borderDashOffset,t.borderDashOffset),e.lineJoin=lW(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=lW(n.borderWidth,t.borderWidth),e.strokeStyle=lW(n.borderColor,t.borderColor)}function oK(e,t,n){e.lineTo(n.x,n.y)}function lK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.length,{start:r=0,end:s=i-1}=n,{start:a,end:o}=t,l=Math.max(r,a),c=Math.min(s,o),u=r<a&&s<a||r>o&&s>o;return{count:i,start:l,loop:t.loop,ilen:c<l&&!u?i+c-l:c-l}}function cK(e,t,n,i){const{points:r,options:s}=t,{count:a,start:o,loop:l,ilen:c}=lK(r,n,i),u=function(e){return e.stepped?IG:e.tension||"monotone"===e.cubicInterpolationMode?OG:oK}(s);let h,d,f,{move:p=!0,reverse:m}=i||{};for(h=0;h<=c;++h)d=r[(o+(m?c-h:h))%a],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,m,s.stepped),f=d);return l&&(d=r[(o+(m?c:0))%a],u(e,f,d,m,s.stepped)),!!l}function uK(e,t,n,i){const r=t.points,{count:s,start:a,ilen:o}=lK(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,f,p,m,g=0,v=0;const y=e=>(a+(c?o-e:e))%s,x=()=>{f!==p&&(e.lineTo(g,p),e.lineTo(g,f),e.lineTo(g,m))};for(l&&(h=r[y(0)],e.moveTo(h.x,h.y)),u=0;u<=o;++u){if(h=r[y(u)],h.skip)continue;const t=h.x,n=h.y,i=0|t;i===d?(n<f?f=n:n>p&&(p=n),g=(v*g+t)/++v):(x(),e.lineTo(t,n),d=i,v=0,f=p=n),m=n}x()}function hK(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?uK:cK}R(sK,"id","arc"),R(sK,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),R(sK,"defaultRoutes",{backgroundColor:"backgroundColor"}),R(sK,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const dK="function"===typeof Path2D;function fK(e,t,n,i){dK&&!t.options.segment?function(e,t,n,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,n,i)&&r.closePath()),aK(e,t.options),e.stroke(r)}(e,t,n,i):function(e,t,n,i){const{segments:r,options:s}=t,a=hK(t);for(const o of r)aK(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+i-1})&&e.closePath(),e.stroke()}(e,t,n,i)}class pK extends dY{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;yq(this._points,n,e,i,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,i=e.options.spanGaps,r=n.length;if(!r)return[];const s=!!e._loop,{start:a,end:o}=function(e,t,n,i){let r=0,s=t-1;if(n&&!i)for(;r<t&&!e[r].skip;)r++;for(;r<t&&e[r].skip;)r++;for(r%=t,n&&(s+=r);s>r&&e[s%t].skip;)s--;return s%=t,{start:r,end:s}}(n,r,s,i);return Vq(e,!0===i?[{start:a,end:o,loop:s}]:function(e,t,n,i){const r=e.length,s=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%r];n.skip||n.stop?l.skip||(i=!1,s.push({start:t%r,end:(a-1)%r,loop:i}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&s.push({start:t%r,end:o%r,loop:i}),s}(n,a,o<a?o+r:o,!!e._fullLoop&&0===a&&o===r-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,i=e[t],r=this.points,s=Bq(this,{property:t,start:i,end:i});if(!s.length)return;const a=[],o=function(e){return e.stepped?Dq:e.tension||"monotone"===e.cubicInterpolationMode?Rq:Lq}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=r[c],d=r[u];if(h===d){a.push(h);continue}const f=o(h,d,Math.abs((i-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return hK(this)(e,this,t,n)}path(e,t,n){const i=this.segments,r=hK(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const a of i)s&=r(e,this,a,{start:t,end:t+n-1});return!!s}draw(e,t,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(e.save(),fK(e,this,n,i),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function mK(e,t,n,i){const r=e.options,{[n]:s}=e.getProps([n],i);return Math.abs(t-s)<r.radius+r.hitRadius}R(pK,"id","line"),R(pK,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),R(pK,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),R(pK,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class gK extends dY{constructor(e){super(),R(this,"parsed",void 0),R(this,"skip",void 0),R(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const i=this.options,{x:r,y:s}=this.getProps(["x","y"],n);return Math.pow(e-r,2)+Math.pow(t-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(e,t){return mK(this,e,"x",t)}inYRange(e,t){return mK(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!DG(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,PG(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function vK(e,t){const{x:n,y:i,base:r,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,h;return e.horizontal?(h=a/2,o=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,o=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:o,top:c,right:l,bottom:u}}function yK(e,t,n,i){return e?0:XW(t,n,i)}function xK(e){const t=vK(e),n=t.right-t.left,i=t.bottom-t.top,r=function(e,t,n){const i=e.options.borderWidth,r=e.borderSkipped,s=qG(i);return{t:yK(r.top,s.top,0,n),r:yK(r.right,s.right,0,t),b:yK(r.bottom,s.bottom,0,n),l:yK(r.left,s.left,0,t)}}(e,n/2,i/2),s=function(e,t,n){const{enableBorderRadius:i}=e.getProps(["enableBorderRadius"]),r=e.options.borderRadius,s=XG(r),a=Math.min(t,n),o=e.borderSkipped,l=i||sW(r);return{topLeft:yK(!l||o.top||o.left,s.topLeft,0,a),topRight:yK(!l||o.top||o.right,s.topRight,0,a),bottomLeft:yK(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:yK(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,i/2);return{outer:{x:t.left,y:t.top,w:n,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function bK(e,t,n,i){const r=null===t,s=null===n,a=e&&!(r&&s)&&vK(e,i);return a&&(r||YW(t,a.left,a.right))&&(s||YW(n,a.top,a.bottom))}function _K(e,t){e.rect(t.x,t.y,t.w,t.h)}function wK(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const i=e.x!==n.x?-t:0,r=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-i,a=(e.y+e.h!==n.y+n.h?t:0)-r;return{x:e.x+i,y:e.y+r,w:e.w+s,h:e.h+a,radius:e.radius}}R(gK,"id","point"),R(gK,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),R(gK,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class SK extends dY{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:s}=xK(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?BG:_K;var o;e.save(),s.w===r.w&&s.h===r.h||(e.beginPath(),a(e,wK(s,t,r)),e.clip(),a(e,wK(r,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,wK(r,t)),e.fillStyle=i,e.fill(),e.restore()}inRange(e,t,n){return bK(this,e,t,n)}inXRange(e,t){return bK(this,e,null,t)}inYRange(e,t){return bK(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],e);return{x:r?(t+i)/2:t,y:r?n:(n+i)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}R(SK,"id","bar"),R(SK,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),R(SK,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const MK=(e,t)=>{let{boxHeight:n=t,boxWidth:i=t}=e;return e.usePointStyle&&(n=Math.min(n,t),i=e.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(t,n)}};class CK extends dY{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=uW(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,i=KG(n.font),r=i.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=MK(n,r);let l,c;t.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,r,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,i,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,i){const{ctx:r,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let u=e;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((e,f)=>{const p=n+t/2+r.measureText(e.text).width;(0===f||l[l.length-1]+p+2*a>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),o[f]={left:0,top:d,row:h,width:p,height:i},l[l.length-1]+=p+a}),u}_fitCols(e,t,n,i){const{ctx:r,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=a,h=0,d=0,f=0,p=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:m,itemHeight:g}=function(e,t,n,i,r){const s=function(e,t,n,i){let r=e.text;r&&"string"!==typeof r&&(r=r.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+i.measureText(r).width}(i,e,t,n),a=function(e,t,n){let i=e;"string"!==typeof t.text&&(i=EK(t,n));return i}(r,i,t.lineHeight);return{itemWidth:s,itemHeight:a}}(n,t,r,e,i);s>0&&d+g+2*a>c&&(u+=h+a,l.push({width:h,height:d}),f+=h+a,p++,h=d=0),o[s]={left:f,top:d,col:p,width:m,height:g},h=Math.max(h,m),d+=g+a}),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:i},rtl:r}}=this,s=Nq(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=rG(n,this.left+i,this.right-this.lineWidths[r]);for(const o of t)r!==o.row&&(r=o.row,a=rG(n,this.left+i,this.right-this.lineWidths[r])),o.top+=this.top+e+i,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+i}else{let r=0,a=rG(n,this.top+e+i,this.bottom-this.columnSizes[r].height);for(const o of t)o.col!==r&&(r=o.col,a=rG(n,this.top+e+i,this.bottom-this.columnSizes[r].height)),o.top=a,o.left+=this.left+i,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;RG(e,this),this._draw(),NG(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:i}=this,{align:r,labels:s}=e,a=CG.color,o=Nq(e.rtl,this.left,this.width),l=KG(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),i.textAlign=o.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:m}=MK(s,u),g=this.isHorizontal(),v=this._computeTitleHeight();d=g?{x:rG(r,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:rG(r,this.top+v+c,this.bottom-t[0].height),line:0},Iq(this.ctx,e.textDirection);const y=m+c;this.legendItems.forEach((x,b)=>{i.strokeStyle=x.fontColor,i.fillStyle=x.fontColor;const _=i.measureText(x.text).width,w=o.textAlign(x.textAlign||(x.textAlign=s.textAlign)),S=f+h+_;let M=d.x,C=d.y;o.setWidth(this.width),g?b>0&&M+S+c>this.right&&(C=d.y+=y,d.line++,M=d.x=rG(r,this.left+c,this.right-n[d.line])):b>0&&C+y>this.bottom&&(M=d.x=M+t[d.line].width+c,d.line++,C=d.y=rG(r,this.top+v+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;i.save();const r=lW(n.lineWidth,1);if(i.fillStyle=lW(n.fillStyle,a),i.lineCap=lW(n.lineCap,"butt"),i.lineDashOffset=lW(n.lineDashOffset,0),i.lineJoin=lW(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=lW(n.strokeStyle,a),i.setLineDash(lW(n.lineDash,[])),s.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=o.xPlus(e,f/2);LG(i,a,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),a=o.leftForLtr(e,f),l=XG(n.borderRadius);i.beginPath(),Object.values(l).some(e=>0!==e)?BG(i,{x:a,y:s,w:f,h:p,radius:l}):i.rect(a,s,f,p),i.fill(),0!==r&&i.stroke()}i.restore()}(o.x(M),C,x),M=((e,t,n,i)=>e===(i?"left":"right")?n:"center"===e?(t+n)/2:t)(w,M+f+h,g?M+S:this.right,e.rtl),function(e,t,n){jG(i,n.text,e,t+m/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(M),C,x),g)d.x+=S+c;else if("string"!==typeof x.text){const e=l.lineHeight;d.y+=EK(x,e)+c}else d.y+=y}),Oq(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=KG(t.font),i=YG(t.padding);if(!t.display)return;const r=Nq(e.rtl,this.left,this.width),s=this.ctx,a=t.position,o=n.size/2,l=i.top+o;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=rG(e.align,u,this.right-h);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+rG(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=rG(a,u,u+h);s.textAlign=r.textAlign(iG(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,jG(s,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=KG(e.font),n=YG(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,i,r;if(YW(e,this.left,this.right)&&YW(t,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],YW(e,i.left,i.left+i.width)&&YW(t,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,a=(r=n,null!==(i=s)&&null!==r&&i.datasetIndex===r.datasetIndex&&i.index===r.index);s&&!a&&uW(t.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!a&&uW(t.onHover,[e,n,this],this)}else n&&uW(t.onClick,[e,n,this],this);var i,r}}function EK(e,t){return t*(e.text?e.text.length:0)}var TK={id:"legend",_element:CK,start(e,t,n){const i=e.legend=new CK({ctx:e.ctx,options:n,chart:e});YX.configure(e,i,n),YX.addBox(e,i)},stop(e){YX.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const i=e.legend;YX.configure(e,i,n),i.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const i=t.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=YG(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class AK extends dY{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const i=rW(n.text)?n.text.length:1;this._padding=YG(n.padding);const r=i*KG(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=r:this.width=r}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:i,right:r,options:s}=this,a=s.align;let o,l,c,u=0;return this.isHorizontal()?(l=rG(a,n,r),c=t+e,o=r-n):("left"===s.position?(l=n+e,c=rG(a,i,t),u=-.5*CW):(l=r-e,c=rG(a,t,i),u=.5*CW),o=i-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=KG(t.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(i);jG(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:iG(t.align),textBaseline:"middle",translation:[r,s]})}}var kK={id:"title",_element:AK,start(e,t,n){!function(e,t){const n=new AK({ctx:e.ctx,options:t,chart:e});YX.configure(e,n,t),YX.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;YX.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const i=e.titleBlock;YX.configure(e,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const PK={average(e){if(!e.length)return!1;let t,n,i=new Set,r=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();i.add(e.x),r+=e.y,++s}}if(0===s||0===i.size)return!1;return{x:[...i].reduce((e,t)=>e+t)/i.size,y:r/s}},nearest(e,t){if(!e.length)return!1;let n,i,r,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,i=e.length;n<i;++n){const i=e[n].element;if(i&&i.hasValue()){const e=HW(t,i.getCenterPoint());e<o&&(o=e,r=i)}}if(r){const e=r.tooltipPosition();s=e.x,a=e.y}return{x:s,y:a}}};function LK(e,t){return t&&(rW(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function DK(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function RK(e,t){const{element:n,datasetIndex:i,index:r}=t,s=e.getDatasetMeta(i).controller,{label:a,value:o}=s.getLabelAndValue(r);return{chart:e,label:a,parsed:s.getParsed(r),raw:e.data.datasets[i].data[r],formattedValue:o,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function NK(e,t){const n=e.chart.ctx,{body:i,footer:r,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=KG(t.bodyFont),c=KG(t.titleFont),u=KG(t.footerFont),h=s.length,d=r.length,f=i.length,p=YG(t.padding);let m=p.height,g=0,v=i.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),v){m+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-f)*l.lineHeight+(v-1)*t.bodySpacing}d&&(m+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let y=0;const x=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=c.string,hW(e.title,x),n.font=l.string,hW(e.beforeBody.concat(e.afterBody),x),y=t.displayColors?a+2+t.boxPadding:0,hW(i,e=>{hW(e.before,x),hW(e.lines,x),hW(e.after,x)}),y=0,n.font=u.string,hW(e.footer,x),n.restore(),g+=p.width,{width:g,height:m}}function IK(e,t,n,i){const{x:r,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===i?c=r<=(o+l)/2?"left":"right":r<=s/2?c="left":r>=a-s/2&&(c="right"),function(e,t,n,i){const{x:r,width:s}=i,a=n.caretSize+n.caretPadding;return"left"===e&&r+s+a>t.width||"right"===e&&r-s-a<0||void 0}(c,e,t,n)&&(c="center"),c}function OK(e,t,n){const i=n.yAlign||t.yAlign||function(e,t){const{y:n,height:i}=t;return n<i/2?"top":n>e.height-i/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||IK(e,t,n,i),yAlign:i}}function zK(e,t,n,i){const{caretSize:r,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=XG(a);let p=function(e,t){let{x:n,width:i}=e;return"right"===t?n-=i:"center"===t&&(n-=i/2),n}(t,o);const m=function(e,t,n){let{y:i,height:r}=e;return"top"===t?i+=n:i-="bottom"===t?r+n:r/2,i}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,d)+r:"right"===o&&(p+=Math.max(h,f)+r),{x:XW(p,0,i.width-t.width),y:XW(m,0,i.height-t.height)}}function FK(e,t,n){const i=YG(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-i.right:e.x+i.left}function jK(e){return LK([],DK(e))}function BK(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const VK={beforeTitle:tW,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return n[t.dataIndex]}return""},afterTitle:tW,beforeBody:tW,beforeLabel:tW,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return iW(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:tW,afterBody:tW,beforeFooter:tW,footer:tW,afterFooter:tW};function UK(e,t,n,i){const r=e[t].call(n,i);return"undefined"===typeof r?VK[t].call(n,i):r}class HK extends dY{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&t.options.animation&&n.animations,r=new Qq(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,QG(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,i=UK(n,"beforeTitle",this,e),r=UK(n,"title",this,e),s=UK(n,"afterTitle",this,e);let a=[];return a=LK(a,DK(i)),a=LK(a,DK(r)),a=LK(a,DK(s)),a}getBeforeBody(e,t){return jK(UK(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,i=[];return hW(e,e=>{const t={before:[],lines:[],after:[]},r=BK(n,e);LK(t.before,DK(UK(r,"beforeLabel",this,e))),LK(t.lines,UK(r,"label",this,e)),LK(t.after,DK(UK(r,"afterLabel",this,e))),i.push(t)}),i}getAfterBody(e,t){return jK(UK(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,i=UK(n,"beforeFooter",this,e),r=UK(n,"footer",this,e),s=UK(n,"afterFooter",this,e);let a=[];return a=LK(a,DK(i)),a=LK(a,DK(r)),a=LK(a,DK(s)),a}_createItems(e){const t=this._active,n=this.chart.data,i=[],r=[],s=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(RK(this.chart,t[a]));return e.filter&&(l=l.filter((t,i,r)=>e.filter(t,i,r,n))),e.itemSort&&(l=l.sort((t,i)=>e.itemSort(t,i,n))),hW(l,t=>{const n=BK(e.callbacks,t);i.push(UK(n,"labelColor",this,t)),r.push(UK(n,"labelPointStyle",this,t)),s.push(UK(n,"labelTextColor",this,t))}),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),i=this._active;let r,s=[];if(i.length){const e=PK[n.position].call(this,i,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=NK(this,n),a=Object.assign({},e,t),o=OK(this.chart,n,a),l=zK(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,r={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,i){const r=this.getCaretPosition(e,n,i);t.lineTo(r.x1,r.y1),t.lineTo(r.x2,r.y2),t.lineTo(r.x3,r.y3)}getCaretPosition(e,t,n){const{xAlign:i,yAlign:r}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=XG(a),{x:h,y:d}=e,{width:f,height:p}=t;let m,g,v,y,x,b;return"center"===r?(x=d+p/2,"left"===i?(m=h,g=m-s,y=x+s,b=x-s):(m=h+f,g=m+s,y=x-s,b=x+s),v=m):(g="left"===i?h+Math.max(o,c)+s:"right"===i?h+f-Math.max(l,u)-s:this.caretX,"top"===r?(y=d,x=y-s,m=g-s,v=g+s):(y=d+p,x=y+s,m=g+s,v=g-s),b=y),{x1:m,x2:g,x3:v,y1:y,y2:x,y3:b}}drawTitle(e,t,n){const i=this.title,r=i.length;let s,a,o;if(r){const l=Nq(n.rtl,this.x,this.width);for(e.x=FK(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=KG(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<r;++o)t.fillText(i[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,o+1===r&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,i,r){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=r,c=KG(r.bodyFont),u=FK(this,"left",r),h=i.x(u),d=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+d;if(r.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=i.leftForLtr(h,l)+l/2,c=f+o/2;e.strokeStyle=r.multiKeyBackground,e.fillStyle=r.multiKeyBackground,PG(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,PG(e,t,n,c)}else{e.lineWidth=sW(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=i.leftForLtr(h,l),n=i.leftForLtr(i.xPlus(h,1),l-2),a=XG(s.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=r.multiKeyBackground,BG(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),BG(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=r.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:i}=this,{bodySpacing:r,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=KG(n.bodyFont);let h=u.lineHeight,d=0;const f=Nq(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+r},m=f.textAlign(s);let g,v,y,x,b,_,w;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=FK(this,m,n),t.fillStyle=n.bodyColor,hW(this.beforeBody,p),d=a&&"right"!==m?"center"===s?l/2+c:l+2+c:0,x=0,_=i.length;x<_;++x){for(g=i[x],v=this.labelTextColors[x],t.fillStyle=v,hW(g.before,p),y=g.lines,a&&y.length&&(this._drawColorBox(t,e,x,f,n),h=Math.max(u.lineHeight,o)),b=0,w=y.length;b<w;++b)p(y[b]),h=u.lineHeight;hW(g.after,p)}d=0,h=u.lineHeight,hW(this.afterBody,p),e.y-=r}drawFooter(e,t,n){const i=this.footer,r=i.length;let s,a;if(r){const o=Nq(n.rtl,this.x,this.width);for(e.x=FK(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=KG(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,a=0;a<r;++a)t.fillText(i[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,i){const{xAlign:r,yAlign:s}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=XG(i.cornerRadius);t.fillStyle=i.backgroundColor,t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+l-h,o),t.quadraticCurveTo(a+l,o,a+l,o+h),"center"===s&&"right"===r&&this.drawCaret(e,t,n,i),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===s&&this.drawCaret(e,t,n,i),t.lineTo(a+d,o+c),t.quadraticCurveTo(a,o+c,a,o+c-d),"center"===s&&"left"===r&&this.drawCaret(e,t,n,i),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),i.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=PK[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=NK(this,e),a=Object.assign({},n,this._size),o=OK(t,e,a),l=zK(e,a,o,t);i._to===l.x&&r._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=YG(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(r,e,i,t),Iq(e,t.textDirection),r.y+=s.top,this.drawTitle(r,e,t),this.drawBody(r,e,t),this.drawFooter(r,e,t),Oq(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,i=e.map(e=>{let{datasetIndex:t,index:n}=e;const i=this.chart.getDatasetMeta(t);if(!i)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:i.data[n],index:n}}),r=!dW(n,i),s=this._positionChanged(i,t);(r||s)&&(this._active=i,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],s=this._getActiveElements(e,r,t,n),a=this._positionChanged(s,e),o=t||!dW(s,r)||a;return o&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,i){const r=this.options;if("mouseout"===e.type)return[];if(!i)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,r.mode,r,n);return r.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:i,options:r}=this,s=PK[r.position].call(this,e,t);return!1!==s&&(n!==s.x||i!==s.y)}}R(HK,"positioners",PK);var WK={id:"tooltip",_element:HK,positioners:PK,afterInit(e,t,n){n&&(e.tooltip=new HK({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",I(I({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:VK},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function GK(e,t,n,i){const r=e.indexOf(t);if(-1===r)return((e,t,n,i)=>("string"===typeof t?(n=e.push(t)-1,i.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,i);return r!==e.lastIndexOf(t)?n:r}function qK(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class XK extends wY{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:i}of t)e[n]===i&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(iW(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:XW(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:GK(n,e,lW(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===e&&t===r.length-1?r:r.slice(e,t+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)i.push({value:s});return i}getLabelForValue(e){return qK.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function YK(e,t){const n=[],{bounds:i,step:r,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=r||1,f=c-1,{min:p,max:m}=t,g=!iW(s),v=!iW(a),y=!iW(l),x=(m-p)/(u+1);let b,_,w,S,M=OW((m-p)/f/d)*d;if(M<1e-14&&!g&&!v)return[{value:p},{value:m}];S=Math.ceil(m/M)-Math.floor(p/M),S>f&&(M=OW(S*M/f/d)*d),iW(o)||(b=Math.pow(10,o),M=Math.ceil(M*b)/b),"ticks"===i?(_=Math.floor(p/M)*M,w=Math.ceil(m/M)*M):(_=p,w=m),g&&v&&r&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-s)/r,M/1e3)?(S=Math.round(Math.min((a-s)/M,c)),M=(a-s)/S,_=s,w=a):y?(_=g?s:_,w=v?a:w,S=l-1,M=(w-_)/S):(S=(w-_)/M,S=IW(S,Math.round(S),M/1e3)?Math.round(S):Math.ceil(S));const C=Math.max(VW(M),VW(_));b=Math.pow(10,iW(o)?C:o),_=Math.round(_*b)/b,w=Math.round(w*b)/b;let E=0;for(g&&(h&&_!==s?(n.push({value:s}),_<s&&E++,IW(Math.round((_+E*M)*b)/b,s,KK(s,x,e))&&E++):_<s&&E++);E<S;++E){const e=Math.round((_+E*M)*b)/b;if(v&&e>a)break;n.push({value:e})}return v&&h&&w!==a?n.length&&IW(n[n.length-1].value,a,KK(a,x,e))?n[n.length-1].value=a:n.push({value:a}):v&&w!==a||n.push({value:w}),n}function KK(e,t,n){let{horizontal:i,minRotation:r}=n;const s=jW(r),a=(i?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}R(XK,"id","category"),R(XK,"defaults",{ticks:{callback:qK}});class ZK extends wY{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return iW(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const s=e=>i=t?i:e,a=e=>r=n?r:e;if(e){const e=NW(i),t=NW(r);e<0&&t<0?a(0):e>0&&t>0&&s(0)}if(i===r){let t=0===r?1:Math.abs(.05*r);a(r+t),e||s(i-t)}this.min=i,this.max=r}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:i}=e;return i?(t=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(i," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const i=YK({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&FW(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const i=(n-t)/Math.max(e.length-1,1)/2;t-=i,n+=i}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return vG(e,this.chart.options.locale,this.options.ticks.format)}}class QK extends ZK{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=aW(e)?e:0,this.max=aW(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=jW(this.options.ticks.minRotation),i=(e?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,r.lineHeight/i))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}R(QK,"id","linear"),R(QK,"defaults",{ticks:{callback:xG.formatters.numeric}});const JK=e=>Math.floor(RW(e)),$K=(e,t)=>Math.pow(10,JK(e)+t);function eZ(e){return 1===e/Math.pow(10,JK(e))}function tZ(e,t,n){const i=Math.pow(10,n),r=Math.floor(e/i);return Math.ceil(t/i)-r}function nZ(e,t){let{min:n,max:i}=t;n=oW(e.min,n);const r=[],s=JK(n);let a=function(e,t){let n=JK(t-e);for(;tZ(e,t,n)>10;)n++;for(;tZ(e,t,n)<10;)n--;return Math.min(n,JK(e))}(n,i),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,u=Math.round((n-c)*o)/o,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,a)),f=oW(e.min,Math.round((c+h+d*Math.pow(10,a))*o)/o);for(;f<i;)r.push({value:f,major:eZ(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(a++,d=2,o=a>=0?1:o),f=Math.round((c+h+d*Math.pow(10,a))*o)/o;const p=oW(e.max,f);return r.push({value:p,major:eZ(p),significand:d}),r}class iZ extends wY{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=ZK.prototype.parse.apply(this,[e,t]);if(0!==n)return aW(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=aW(e)?Math.max(0,e):null,this.max=aW(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!aW(this._userMin)&&(this.min=e===$K(this.min,0)?$K(this.min,-1):$K(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,i=this.max;const r=t=>n=e?n:t,s=e=>i=t?i:e;n===i&&(n<=0?(r(1),s(10)):(r($K(n,-1)),s($K(i,1)))),n<=0&&r($K(i,-1)),i<=0&&s($K(n,1)),this.min=n,this.max=i}buildTicks(){const e=this.options,t=nZ({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&FW(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":vG(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=RW(e),this._valueRange=RW(this.max)-RW(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(RW(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function rZ(e){const t=e.ticks;if(t.display&&e.display){const e=YG(t.backdropPadding);return lW(t.font&&t.font.size,CG.font.size)+e.height}return 0}function sZ(e,t,n){return n=rW(n)?n:[n],{w:TG(e,t.string,n),h:n.length*t.lineHeight}}function aZ(e,t,n,i,r){return e===i||e===r?{start:t-n/2,end:t+n/2}:e<i||e>r?{start:t-n,end:t}:{start:t,end:t+n}}function oZ(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),i=[],r=[],s=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?CW/s:0;for(let l=0;l<s;l++){const s=a.setContext(e.getPointLabelContext(l));r[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+r[l],o),u=KG(s.font),h=sZ(e.ctx,u,e._pointLabels[l]);i[l]=h;const d=GW(e.getIndexAngle(l)+o),f=Math.round(BW(d));lZ(n,t,d,aZ(f,c.x,h.w,0,180),aZ(f,c.y,h.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const i=[],r=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:rZ(s)/2,additionalAngle:a?CW/r:0};let c;for(let u=0;u<r;u++){l.padding=n[u],l.size=t[u];const r=cZ(e,u,l);i.push(r),"auto"===o&&(r.visible=uZ(r,c),r.visible&&(c=r))}return i}(e,i,r)}function lZ(e,t,n,i,r){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;i.start<t.l?(o=(t.l-i.start)/s,e.l=Math.min(e.l,t.l-o)):i.end>t.r&&(o=(i.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),r.start<t.t?(l=(t.t-r.start)/a,e.t=Math.min(e.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function cZ(e,t,n){const i=e.drawingArea,{extra:r,additionalAngle:s,padding:a,size:o}=n,l=e.getPointPosition(t,i+r+a,s),c=Math.round(BW(GW(l.angle+PW))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+o.w,bottom:u+o.h}}function uZ(e,t){if(!t)return!0;const{left:n,top:i,right:r,bottom:s}=e;return!(DG({x:n,y:i},t)||DG({x:n,y:s},t)||DG({x:r,y:i},t)||DG({x:r,y:s},t))}function hZ(e,t,n){const{left:i,top:r,right:s,bottom:a}=n,{backdropColor:o}=t;if(!iW(o)){const n=XG(t.borderRadius),l=YG(t.backdropPadding);e.fillStyle=o;const c=i-l.left,u=r-l.top,h=s-i+l.width,d=a-r+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),BG(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function dZ(e,t,n,i){const{ctx:r}=e;if(n)r.arc(e.xCenter,e.yCenter,t,0,EW);else{let n=e.getPointPosition(0,t);r.moveTo(n.x,n.y);for(let s=1;s<i;s++)n=e.getPointPosition(s,t),r.lineTo(n.x,n.y)}}R(iZ,"id","logarithmic"),R(iZ,"defaults",{ticks:{callback:xG.formatters.logarithmic,major:{enabled:!0}}});class fZ extends ZK{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=YG(rZ(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=aW(e)&&!isNaN(e)?e:0,this.max=aW(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/rZ(this.options))}generateTickLabels(e){ZK.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=uW(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?oZ(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,i){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,i))}getIndexAngle(e){return GW(e*(EW/(this._pointLabels.length||1))+jW(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(iW(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(iW(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return QG(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const i=this.getIndexAngle(e)-PW+n;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:i,bottom:r}=this._pointLabelItems[e];return{left:t,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),dZ(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:i,border:r}=t,s=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:i}}=e;for(let r=t-1;r>=0;r--){const t=e._pointLabelItems[r];if(!t.visible)continue;const s=i.setContext(e.getPointLabelContext(r));hZ(n,s,t);const a=KG(s.font),{x:o,y:l,textAlign:c}=t;jG(n,e._pointLabels[r],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),i.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=i.setContext(n),l=r.setContext(n);!function(e,t,n,i,r){const s=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!i||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),dZ(e,n,a,i),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}}),n.display){for(e.save(),a=s-1;a>=0;a--){const i=n.setContext(this.getPointLabelContext(a)),{color:r,lineWidth:s}=i;s&&r&&(e.lineWidth=s,e.strokeStyle=r,e.setLineDash(i.borderDash),e.lineDashOffset=i.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(i),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((i,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=KG(o.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(i.label).width,e.fillStyle=o.backdropColor;const t=YG(o.backdropPadding);e.fillRect(-s/2-t.left,-r-l.size/2-t.top,s+t.width,l.size+t.height)}jG(e,i.label,0,-r,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}R(fZ,"id","radialLinear"),R(fZ,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:xG.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),R(fZ,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),R(fZ,"descriptors",{angleLines:{_fallback:"grid"}});const pZ={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},mZ=Object.keys(pZ);function gZ(e,t){return e-t}function vZ(e,t){if(iW(t))return null;const n=e._adapter,{parser:i,round:r,isoWeekday:s}=e._parseOpts;let a=t;return"function"===typeof i&&(a=i(a)),aW(a)||(a="string"===typeof i?n.parse(a,i):n.parse(a)),null===a?null:(r&&(a="week"!==r||!zW(s)&&!0!==s?n.startOf(a,r):n.startOf(a,"isoWeek",s)),+a)}function yZ(e,t,n,i){const r=mZ.length;for(let s=mZ.indexOf(e);s<r-1;++s){const e=pZ[mZ[s]],r=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(r*e.size))<=i)return mZ[s]}return mZ[r-1]}function xZ(e,t,n){if(n){if(n.length){const{lo:i,hi:r}=KW(n,t);e[n[i]>=t?n[i]:n[r]]=!0}}else e[t]=!0}function bZ(e,t,n){const i=[],r={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],r[o]=a,i.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,i){const r=e._adapter,s=+r.startOf(t[0].value,i),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+r.add(o,1,i))l=n[o],l>=0&&(t[l].major=!0);return t}(e,i,r,n):i}class _Z extends wY{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),i=this._adapter=new AX(e.adapters.date);i.init(t),vW(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:vZ(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:i,max:r,minDefined:s,maxDefined:a}=this.getUserBounds();function o(e){s||isNaN(e.min)||(i=Math.min(i,e.min)),a||isNaN(e.max)||(r=Math.max(r,e.max))}s&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),i=aW(i)&&!isNaN(i)?i:+t.startOf(Date.now(),n),r=aW(r)&&!isNaN(r)?r:+t.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,s=function(e,t,n){let i=0,r=e.length;for(;i<r&&e[i]<t;)i++;for(;r>i&&e[r-1]>n;)r--;return i>0||r<e.length?e.slice(i,r):e}(i,r,this.max);return this._unit=t.unit||(n.autoSkip?yZ(t.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(e,t,n,i,r){for(let s=mZ.length-1;s>=mZ.indexOf(n);s--){const n=mZ[s];if(pZ[n].common&&e._adapter.diff(r,i,n)>=t-1)return n}return mZ[n?mZ.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=mZ.indexOf(e)+1,n=mZ.length;t<n;++t)if(pZ[mZ[t]].common)return mZ[t]}(this._unit):void 0,this.initOffsets(i),e.reverse&&s.reverse(),bZ(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=0,r=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),i=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),r=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;i=XW(i,0,s),r=XW(r,0,s),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const e=this._adapter,t=this.min,n=this.max,i=this.options,r=i.time,s=r.unit||yZ(r.minUnit,t,n,this._getLabelCapacity(t)),a=lW(i.ticks.stepSize,1),o="week"===s&&r.isoWeekday,l=zW(o)||!0===o,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",o)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+s);const f="data"===i.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,a,s),h++)xZ(c,u,f);return u!==n&&"ticks"!==i.bounds&&1!==h||xZ(c,u,f),Object.keys(c).sort(gZ).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,i=this._unit,r=t||n[i];return this._adapter.format(e,r)}_tickFormatFunction(e,t,n,i){const r=this.options,s=r.ticks.callback;if(s)return uW(s,[e,t,n],this);const a=r.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,i||(d?u:c))}generateTickLabels(e){let t,n,i;for(t=0,n=e.length;t<n;++t)i=e[t],i.label=this._tickFormatFunction(i.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,i=jW(this.isHorizontal()?t.maxRotation:t.minRotation),r=Math.cos(i),s=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*s,h:n*s+a*r}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,i=n[t.unit]||n.millisecond,r=this._tickFormatFunction(e,0,bZ(this,[e],this._majorUnit),i),s=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,t=i.length;e<t;++e)n=n.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const i=this.getLabels();for(t=0,n=i.length;t<n;++t)e.push(vZ(this,i[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return eG(e.sort(gZ))}}function wZ(e,t,n){let i,r,s,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=ZW(e,"pos",t)),({pos:i,time:s}=e[o]),({pos:r,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=ZW(e,"time",t)),({time:i,pos:s}=e[o]),({time:r,pos:a}=e[l]));const c=r-i;return c?s+(a-s)*(t-i)/c:s}R(_Z,"id","time"),R(_Z,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class SZ extends _Z{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=wZ(t,this.min),this._tableRange=wZ(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,i=[],r=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=n&&i.push(l);if(i.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=i.length;s<a;++s)c=i[s+1],o=i[s-1],l=i[s],Math.round((c+o)/2)!==l&&r.push({time:l,pos:s/(a-1)});return r}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(wZ(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return wZ(this._table,n*this._tableRange+this._minPos,!0)}}R(SZ,"id","timeseries"),R(SZ,"defaults",_Z.defaults);const MZ=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],CZ="label";function EZ(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function TZ(e,t){e.labels=t}function AZ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:CZ;const i=[];e.datasets=t.map(t=>{const r=e.datasets.find(e=>e[n]===t[n]);return r&&t.data&&!i.includes(r)?(i.push(r),Object.assign(r,t),r):I({},t)})}function kZ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CZ;const n={labels:[],datasets:[]};return TZ(n,e.labels),AZ(n,e.datasets,t),n}function PZ(e,n){const{height:i=150,width:r=300,redraw:s=!1,datasetIdKey:a,type:o,data:l,options:c,plugins:u=[],fallbackContent:h,updateMode:d}=e,f=Qe(e,MZ),p=(0,t.useRef)(null),m=(0,t.useRef)(null),g=()=>{p.current&&(m.current=new $Y(p.current,{type:o,data:kZ(l,a),options:c&&I({},c),plugins:u}),EZ(n,m.current))},v=()=>{EZ(n,null),m.current&&(m.current.destroy(),m.current=null)};return(0,t.useEffect)(()=>{!s&&m.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(m.current,c)},[s,c]),(0,t.useEffect)(()=>{!s&&m.current&&TZ(m.current.config.data,l.labels)},[s,l.labels]),(0,t.useEffect)(()=>{!s&&m.current&&l.datasets&&AZ(m.current.config.data,l.datasets,a)},[s,l.datasets]),(0,t.useEffect)(()=>{m.current&&(s?(v(),setTimeout(g)):m.current.update(d))},[s,c,l.labels,l.datasets,d]),(0,t.useEffect)(()=>{m.current&&(v(),setTimeout(g))},[o]),(0,t.useEffect)(()=>(g(),()=>v()),[]),t.createElement("canvas",I({ref:p,role:"img",height:i,width:r},f),h)}const LZ=(0,t.forwardRef)(PZ);function DZ(e,n){return $Y.register(n),(0,t.forwardRef)((n,i)=>t.createElement(LZ,I(I({},n),{},{ref:i,type:e})))}const RZ=DZ("bar",yX),NZ=DZ("doughnut",bX);$Y.register(XK,QK,SK,kK,WK,TK);const IZ=e=>{let{wins:t,losses:n}=e;const i={labels:[""],datasets:[{label:"\u52dd\u5229\u6570",data:[t],backgroundColor:"rgba(74, 222, 128, 0.6)",borderColor:"rgba(74, 222, 128, 1)",borderWidth:1},{label:"\u6557\u5317\u6570",data:[n],backgroundColor:"rgba(248, 113, 113, 0.6)",borderColor:"rgba(248, 113, 113, 1)",borderWidth:1}]};return(0,s.jsx)(RZ,{data:i,options:{indexAxis:"y",responsive:!0,maintainAspectRatio:!1,scales:{x:{stacked:!0,display:!1},y:{stacked:!0,display:!1}},plugins:{legend:{display:!1},tooltip:{enabled:!1}}}})},OZ=e=>{let{onClose:t}=e;const{characters:n,characterData:i}=Jg(),r=n.map(e=>{var t;const n=(null===(t=i[e.id])||void 0===t?void 0:t.records)||{wins:0,losses:0},r=n.wins+n.losses,s=r>0?n.wins/r*100:0;return I(I({},e),{},{wins:n.wins,losses:n.losses,total:r,winRate:s.toFixed(1)})}).sort((e,t)=>t.total-e.total);return(0,s.jsxs)("div",{className:"min-h-screen w-full text-white flex flex-col p-4 sm:p-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-8 flex-shrink-0",children:[(0,s.jsxs)("h2",{className:"text-3xl sm:text-4xl font-bold text-white flex items-center gap-3",children:[(0,s.jsx)(QU,{size:32}),"\u30b3\u30ec\u30af\u30b7\u30e7\u30f3 - \u6226\u7e3e\u4e00\u89a7"]}),(0,s.jsxs)("button",{onClick:t,className:"bg-white/10 hover:bg-white/20 text-white px-6 py-3 rounded-lg font-semibold flex items-center gap-2 transition-all",children:[(0,s.jsx)(tB,{size:20}),"\u30db\u30fc\u30e0\u306b\u623b\u308b"]})]}),(0,s.jsxs)("div",{className:"flex-grow w-full space-y-3 overflow-y-auto custom-scrollbar pr-2",children:[r.map((e,t)=>(0,s.jsxs)(Ka.div,{className:"grid grid-cols-12 gap-4 items-center bg-white/5 hover:bg-white/10 p-4 rounded-lg transition-colors",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},children:[(0,s.jsxs)("div",{className:"col-span-3 lg:col-span-2 font-bold text-lg flex items-center gap-3",children:[(0,s.jsx)("div",{className:"w-10 h-10 rounded-full flex-shrink-0 overflow-hidden",style:{backgroundColor:e.color},children:e.icon&&(0,s.jsx)("img",{src:"/images/".concat(encodeURIComponent(e.icon)),alt:e.name,className:"w-full h-full object-contain"})}),(0,s.jsx)("span",{children:e.name})]}),(0,s.jsxs)("div",{className:"col-span-3 lg:col-span-2 text-center",children:[(0,s.jsx)("div",{className:"text-sm text-white/60",children:"\u52dd\u7387"}),(0,s.jsxs)("div",{className:"text-2xl font-bold text-cyan-400",children:[e.winRate,"%"]})]}),(0,s.jsxs)("div",{className:"col-span-3 lg:col-span-2 text-center",children:[(0,s.jsx)("div",{className:"text-sm text-white/60",children:"\u8a66\u5408\u6570"}),(0,s.jsx)("div",{className:"text-2xl font-bold",children:e.total})]}),(0,s.jsxs)("div",{className:"col-span-3 lg:col-span-6 flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("span",{className:"text-green-400 font-bold",children:e.wins}),(0,s.jsx)("span",{className:"text-white/50 mx-1",children:"W"}),(0,s.jsx)("span",{className:"text-red-400 font-bold",children:e.losses}),(0,s.jsx)("span",{className:"text-white/50 mx-1",children:"L"})]}),(0,s.jsx)("div",{className:"flex-grow h-6",children:(0,s.jsx)(IZ,{wins:e.wins,losses:e.losses})})]})]},e.id)),0===r.length&&(0,s.jsxs)("div",{className:"text-center py-16 text-white/50",children:[(0,s.jsx)("p",{children:"\u307e\u3060\u6226\u7e3e\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\u3002"}),(0,s.jsx)("p",{children:"\u5404\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u300c\u6226\u7e3e\u300d\u30bf\u30d6\u304b\u3089\u52dd\u3061\u8ca0\u3051\u3092\u8a18\u9332\u3057\u3066\u304f\u3060\u3055\u3044\u3002"})]})]})]})},zZ=pv("trophy",[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]]),FZ=[{id:"missions",title:"\u30df\u30c3\u30b7\u30e7\u30f3",subtitle:"\u5b9f\u7e3e\u3092\u89e3\u9664\u3057\u3066\u5831\u916c\u3092\u7372\u5f97",icon:mH,color:"#a855f7"},{id:"stats",title:"\u6226\u7e3e",subtitle:"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3054\u3068\u306e\u6226\u7e3e\u3092\u78ba\u8a8d",icon:zZ,color:"#f59e0b"}],jZ=e=>{let{item:t,onClick:n,onHover:i,onLeave:r}=e;return(0,s.jsxs)(Ka.div,{className:"relative group cursor-pointer text-white flex flex-col items-center justify-center p-4 shadow-xl h-full",style:{backgroundColor:"".concat(t.color,"BF"),clipPath:"polygon(10% 0%, 100% 0%, 90% 100%, 0% 100%)"},whileHover:{scale:1.05,zIndex:10,boxShadow:"0 0 30px ".concat(t.color)},transition:{type:"spring",stiffness:300},onClick:n,onMouseEnter:i,onMouseLeave:r,children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-all duration-300"}),(0,s.jsxs)("div",{className:"relative z-10 text-center flex flex-col items-center gap-2",children:[(0,s.jsx)(t.icon,{size:48,className:"drop-shadow-md"}),(0,s.jsx)("h3",{className:"font-bold text-2xl drop-shadow-md",children:t.title}),(0,s.jsx)("p",{className:"text-sm opacity-80",children:t.subtitle})]})]})},BZ=e=>{let{onNavigate:n,onBack:i}=e;const{setCursorVariant:r}=av(),a=(0,t.useRef)(null),o=(0,t.useCallback)(e=>{r("default");const t=a.current;if(!t)return void n(e);const i=()=>{n(e),t.removeEventListener("ended",i)};t.addEventListener("ended",i),t.currentTime=0,t.play().catch(r=>{t.removeEventListener("ended",i),n(e)})},[n,r]);return(0,s.jsxs)("div",{className:"w-screen h-screen bg-purple-900/50 relative flex flex-col items-center justify-center p-8",children:[(0,s.jsx)("audio",{ref:a,src:"/audio/click.mp3",preload:"auto"}),(0,s.jsx)("header",{className:"absolute top-8 left-8",children:(0,s.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"\u30db\u30fc\u30e0\u306b\u623b\u308b"]})}),(0,s.jsx)("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8",style:{height:"250px"},children:FZ.map(e=>(0,s.jsx)(jZ,{item:e,onClick:()=>o(e.id),onHover:()=>r("hover"),onLeave:()=>r("default")},e.id))})]})},VZ=pv("list-ordered",[["path",{d:"M10 12h11",key:"6m4ad9"}],["path",{d:"M10 18h11",key:"11hvi2"}],["path",{d:"M10 6h11",key:"c7qv1k"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]),UZ=pv("columns-2",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M12 3v18",key:"108xh3"}]]),HZ=[{id:"tier-maker",title:"Tier\u30e9\u30f3\u30af\u4f5c\u6210",subtitle:"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u30e9\u30f3\u30af\u4ed8\u3051\u3092\u884c\u3046",icon:VZ,color:"#10b981"},{id:"character-comparison",title:"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u6bd4\u8f03",subtitle:"2\u4f53\u306e\u30c7\u30fc\u30bf\u3092\u4e26\u3079\u3066\u5206\u6790",icon:UZ,color:"#0ea5e9"}],WZ=e=>{let{item:t,onClick:n,onHover:i,onLeave:r}=e;return(0,s.jsxs)(Ka.div,{className:"relative group cursor-pointer text-white flex flex-col items-center justify-center p-4 shadow-xl h-full",style:{backgroundColor:"".concat(t.color,"BF"),clipPath:"polygon(10% 0%, 100% 0%, 90% 100%, 0% 100%)"},whileHover:{scale:1.05,zIndex:10,boxShadow:"0 0 30px ".concat(t.color)},transition:{type:"spring",stiffness:300},onClick:n,onMouseEnter:i,onMouseLeave:r,children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-all duration-300"}),(0,s.jsxs)("div",{className:"relative z-10 text-center flex flex-col items-center gap-2",children:[(0,s.jsx)(t.icon,{size:48,className:"drop-shadow-md"}),(0,s.jsx)("h3",{className:"font-bold text-2xl drop-shadow-md",children:t.title}),(0,s.jsx)("p",{className:"text-sm opacity-80",children:t.subtitle})]})]})},GZ=e=>{let{onNavigate:n,onBack:i}=e;const{setCursorVariant:r}=av(),a=(0,t.useRef)(null),o=(0,t.useCallback)(e=>{r("default");const t=a.current;if(!t)return void n(e);const i=()=>{n(e),t.removeEventListener("ended",i)};t.addEventListener("ended",i),t.currentTime=0,t.play().catch(t=>{n(e)})},[n,r]);return(0,s.jsxs)("div",{className:"w-screen h-screen bg-emerald-900/50 relative flex flex-col items-center justify-center p-8",children:[(0,s.jsx)("audio",{ref:a,src:"/audio/click.mp3",preload:"auto"}),(0,s.jsx)("header",{className:"absolute top-8 left-8",children:(0,s.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"\u30db\u30fc\u30e0\u306b\u623b\u308b"]})}),(0,s.jsx)("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8",style:{height:"250px"},children:HZ.map(e=>(0,s.jsx)(WZ,{item:e,onClick:()=>o(e.id),onHover:()=>r("hover"),onLeave:()=>r("default")},e.id))})]})},qZ=e=>{var t,n,i,r;let{selectedCharId:a,onSelect:o,otherSelectedId:l,allChars:c,charData:u}=e;const h=c.find(e=>e.id===a),d=h?u[h.id]:null;return(0,s.jsxs)("div",{className:"bg-black/20 rounded-lg p-4 flex flex-col gap-4",children:[(0,s.jsxs)("select",{value:a||"",onChange:e=>o(e.target.value),className:"w-full bg-slate-700 p-3 rounded-md",children:[(0,s.jsx)("option",{value:"",children:"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3092\u9078\u629e"}),c.map(e=>(0,s.jsx)("option",{value:e.id,disabled:e.id===l,children:e.name},e.id))]}),h&&d?(0,s.jsxs)("div",{className:"overflow-y-auto custom-scrollbar pr-2 space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 p-2 bg-slate-700/50 rounded-md",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-md flex-shrink-0",style:{backgroundColor:h.color},children:(0,s.jsx)("img",{src:"/images/".concat(encodeURIComponent(h.icon)),alt:h.name,className:"w-full h-full object-contain p-1"})}),(0,s.jsx)("h2",{className:"text-2xl font-bold",children:h.name})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-2 text-purple-400",children:"\u7acb\u3061\u56de\u308a\u30e1\u30e2"}),(0,s.jsxs)("div",{className:"bg-slate-800/50 p-3 rounded-md text-sm space-y-2",children:[(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"\u5e8f\u76e4:"})," ",(null===(t=d.gameplan)||void 0===t?void 0:t.early)||"\u672a\u5165\u529b"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"\u4e2d\u76e4:"})," ",(null===(n=d.gameplan)||void 0===n?void 0:n.mid)||"\u672a\u5165\u529b"]}),(0,s.jsxs)("p",{children:[(0,s.jsx)("strong",{children:"\u6483\u589c\u5e2f:"})," ",(null===(i=d.gameplan)||void 0===i?void 0:i.kill)||"\u672a\u5165\u529b"]})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-bold text-lg mb-2 text-cyan-400",children:"\u4e3b\u8981\u30d5\u30ec\u30fc\u30e0"}),(0,s.jsxs)("div",{className:"bg-slate-800/50 p-3 rounded-md text-sm space-y-1",children:[(d.frameData||[]).slice(0,5).map(e=>(0,s.jsxs)("p",{children:[e.moveName,": ",(0,s.jsxs)("strong",{children:[e.startup,"F"]})]},e.id)),0===(null===(r=d.frameData)||void 0===r?void 0:r.length)&&(0,s.jsx)("p",{children:"\u672a\u5165\u529b"})]})]})]}):(0,s.jsx)("div",{className:"flex-grow flex items-center justify-center text-white/50",children:"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"})]})},XZ=e=>{var n,i;let{onBack:r}=e;const{characters:a,characterData:o}=Jg(),[l,c]=(0,t.useState)((null===(n=a[0])||void 0===n?void 0:n.id)||null),[u,h]=(0,t.useState)((null===(i=a[1])||void 0===i?void 0:i.id)||null);return(0,s.jsxs)("div",{className:"w-screen h-screen bg-slate-900 flex flex-col text-white p-4 sm:p-8",children:[(0,s.jsxs)("header",{className:"flex-shrink-0 mb-6 flex justify-between items-center",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,s.jsx)(UZ,{className:"text-blue-400"}),"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u6bd4\u8f03\u30c4\u30fc\u30eb"]}),(0,s.jsxs)("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"\u623b\u308b"]})]}),(0,s.jsxs)("main",{className:"flex-grow grid grid-cols-1 md:grid-cols-2 gap-8 min-h-0",children:[(0,s.jsx)(qZ,{selectedCharId:l,onSelect:c,otherSelectedId:u,allChars:a,charData:o}),(0,s.jsx)(qZ,{selectedCharId:u,onSelect:h,otherSelectedId:l,allChars:a,charData:o})]})]})},YZ=pv("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),KZ=pv("copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const ZZ=(()=>{let e=0;return()=>(e+=1,"u".concat("0000".concat((Math.random()*36**4|0).toString(36)).slice(-4)).concat(e))})();function QZ(e){const t=[];for(let n=0,i=e.length;n<i;n++)t.push(e[n]);return t}let JZ=null;function $Z(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return JZ||(e.includeStyleProperties?(JZ=e.includeStyleProperties,JZ):(JZ=QZ(window.getComputedStyle(document.documentElement)),JZ))}function eQ(e,t){const n=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return n?parseFloat(n.replace("px","")):0}function tQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{width:t.width||function(e){const t=eQ(e,"border-left-width"),n=eQ(e,"border-right-width");return e.clientWidth+t+n}(e),height:t.height||function(e){const t=eQ(e,"border-top-width"),n=eQ(e,"border-bottom-width");return e.clientHeight+t+n}(e)}}const nQ=16384;function iQ(e){return new Promise((t,n)=>{const i=new Image;i.onload=()=>{i.decode().then(()=>{requestAnimationFrame(()=>t(i))})},i.onerror=n,i.crossOrigin="anonymous",i.decoding="async",i.src=e})}async function rQ(e,t,n){const i="http://www.w3.org/2000/svg",r=document.createElementNS(i,"svg"),s=document.createElementNS(i,"foreignObject");return r.setAttribute("width","".concat(t)),r.setAttribute("height","".concat(n)),r.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),r.appendChild(s),s.appendChild(e),async function(e){return Promise.resolve().then(()=>(new XMLSerializer).serializeToString(e)).then(encodeURIComponent).then(e=>"data:image/svg+xml;charset=utf-8,".concat(e))}(r)}const sQ=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return null!==n&&(n.constructor.name===t.name||sQ(n,t))};function aQ(e,t,n,i){const r=".".concat(e,":").concat(t),s=n.cssText?function(e){const t=e.getPropertyValue("content");return"".concat(e.cssText," content: '").concat(t.replace(/'|"/g,""),"';")}(n):function(e,t){return $Z(t).map(t=>{const n=e.getPropertyValue(t),i=e.getPropertyPriority(t);return"".concat(t,": ").concat(n).concat(i?" !important":"",";")}).join(" ")}(n,i);return document.createTextNode("".concat(r,"{").concat(s,"}"))}function oQ(e,t,n,i){const r=window.getComputedStyle(e,n),s=r.getPropertyValue("content");if(""===s||"none"===s)return;const a=ZZ();try{t.className="".concat(t.className," ").concat(a)}catch(l){return}const o=document.createElement("style");o.appendChild(aQ(a,n,r,i)),t.appendChild(o)}const lQ="application/font-woff",cQ="image/jpeg",uQ={woff:lQ,woff2:lQ,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:cQ,jpeg:cQ,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function hQ(e){const t=function(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}(e).toLowerCase();return uQ[t]||""}function dQ(e){return-1!==e.search(/^(data:)/)}function fQ(e,t){return"data:".concat(t,";base64,").concat(e)}async function pQ(e,t,n){const i=await fetch(e,t);if(404===i.status)throw new Error('Resource "'.concat(i.url,'" not found'));const r=await i.blob();return new Promise((e,t)=>{const s=new FileReader;s.onerror=t,s.onloadend=()=>{try{e(n({res:i,result:s.result}))}catch(Mj){t(Mj)}},s.readAsDataURL(r)})}const mQ={};async function gQ(e,t,n){const i=function(e,t,n){let i=e.replace(/\?.*/,"");return n&&(i=e),/ttf|otf|eot|woff2?/i.test(i)&&(i=i.replace(/.*\//,"")),t?"[".concat(t,"]").concat(i):i}(e,t,n.includeQueryParams);if(null!=mQ[i])return mQ[i];let r;n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime());try{const i=await pQ(e,n.fetchRequestInit,e=>{let{res:n,result:i}=e;return t||(t=n.headers.get("Content-Type")||""),function(e){return e.split(/,/)[1]}(i)});r=fQ(i,t)}catch(Mj){r=n.imagePlaceholder||"";let i="Failed to fetch resource: ".concat(e);Mj&&(i="string"===typeof Mj?Mj:Mj.message),i&&console.warn(i)}return mQ[i]=r,r}async function vQ(e,t){return sQ(e,HTMLCanvasElement)?async function(e){const t=e.toDataURL();return"data:,"===t?e.cloneNode(!1):iQ(t)}(e):sQ(e,HTMLVideoElement)?async function(e,t){if(e.currentSrc){const t=document.createElement("canvas"),n=t.getContext("2d");return t.width=e.clientWidth,t.height=e.clientHeight,null===n||void 0===n||n.drawImage(e,0,0,t.width,t.height),iQ(t.toDataURL())}const n=e.poster,i=hQ(n);return iQ(await gQ(n,i,t))}(e,t):sQ(e,HTMLIFrameElement)?async function(e,t){var n;try{if(null===(n=null===e||void 0===e?void 0:e.contentDocument)||void 0===n?void 0:n.body)return await _Q(e.contentDocument.body,t,!0)}catch(fj){}return e.cloneNode(!1)}(e,t):e.cloneNode(xQ(e))}const yQ=e=>null!=e.tagName&&"SLOT"===e.tagName.toUpperCase(),xQ=e=>null!=e.tagName&&"SVG"===e.tagName.toUpperCase();function bQ(e,t,n){return sQ(t,Element)&&(function(e,t,n){const i=t.style;if(!i)return;const r=window.getComputedStyle(e);r.cssText?(i.cssText=r.cssText,i.transformOrigin=r.transformOrigin):$Z(n).forEach(n=>{let s=r.getPropertyValue(n);if("font-size"===n&&s.endsWith("px")){const e=Math.floor(parseFloat(s.substring(0,s.length-2)))-.1;s="".concat(e,"px")}sQ(e,HTMLIFrameElement)&&"display"===n&&"inline"===s&&(s="block"),"d"===n&&t.getAttribute("d")&&(s="path(".concat(t.getAttribute("d"),")")),i.setProperty(n,s,r.getPropertyPriority(n))})}(e,t,n),function(e,t,n){oQ(e,t,":before",n),oQ(e,t,":after",n)}(e,t,n),function(e,t){sQ(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),sQ(e,HTMLInputElement)&&t.setAttribute("value",e.value)}(e,t),function(e,t){if(sQ(e,HTMLSelectElement)){const n=t,i=Array.from(n.children).find(t=>e.value===t.getAttribute("value"));i&&i.setAttribute("selected","")}}(e,t)),t}async function _Q(e,t,n){return n||!t.filter||t.filter(e)?Promise.resolve(e).then(e=>vQ(e,t)).then(n=>async function(e,t,n){var i,r;if(xQ(t))return t;let s=[];return s=yQ(e)&&e.assignedNodes?QZ(e.assignedNodes()):sQ(e,HTMLIFrameElement)&&(null===(i=e.contentDocument)||void 0===i?void 0:i.body)?QZ(e.contentDocument.body.childNodes):QZ((null!==(r=e.shadowRoot)&&void 0!==r?r:e).childNodes),0===s.length||sQ(e,HTMLVideoElement)||await s.reduce((e,i)=>e.then(()=>_Q(i,n)).then(e=>{e&&t.appendChild(e)}),Promise.resolve()),t}(e,n,t)).then(n=>bQ(e,n,t)).then(e=>async function(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(0===n.length)return e;const i={};for(let s=0;s<n.length;s++){const r=n[s].getAttribute("xlink:href");if(r){const n=e.querySelector(r),s=document.querySelector(r);n||!s||i[r]||(i[r]=await _Q(s,t,!0))}}const r=Object.values(i);if(r.length){const t="http://www.w3.org/1999/xhtml",n=document.createElementNS(t,"svg");n.setAttribute("xmlns",t),n.style.position="absolute",n.style.width="0",n.style.height="0",n.style.overflow="hidden",n.style.display="none";const i=document.createElementNS(t,"defs");n.appendChild(i);for(let e=0;e<r.length;e++)i.appendChild(r[e]);e.appendChild(n)}return e}(e,t)):null}const wQ=/url\((['"]?)([^'"]+?)\1\)/g,SQ=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,MQ=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;async function CQ(e,t,n,i,r){try{const s=n?function(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),i=n.createElement("base"),r=n.createElement("a");return n.head.appendChild(i),n.body.appendChild(r),t&&(i.href=t),r.href=e,r.href}(t,n):t,a=hQ(t);let o;if(r){o=fQ(await r(s),a)}else o=await gQ(s,a,i);return e.replace(function(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp("(url\\(['\"]?)(".concat(t,")(['\"]?\\))"),"g")}(t),"$1".concat(o,"$3"))}catch(Mj){}return e}function EQ(e){return-1!==e.search(wQ)}async function TQ(e,t,n){if(!EQ(e))return e;const i=function(e,t){let{preferredFontFormat:n}=t;return n?e.replace(MQ,e=>{for(;;){const[t,,i]=SQ.exec(e)||[];if(!i)return"";if(i===n)return"src: ".concat(t,";")}}):e}(e,n),r=function(e){const t=[];return e.replace(wQ,(e,n,i)=>(t.push(i),e)),t.filter(e=>!dQ(e))}(i);return r.reduce((e,i)=>e.then(e=>CQ(e,i,t,n)),Promise.resolve(i))}async function AQ(e,t,n){var i;const r=null===(i=t.style)||void 0===i?void 0:i.getPropertyValue(e);if(r){const i=await TQ(r,null,n);return t.style.setProperty(e,i,t.style.getPropertyPriority(e)),!0}return!1}async function kQ(e,t){sQ(e,Element)&&(await async function(e,t){await AQ("background",e,t)||await AQ("background-image",e,t),await AQ("mask",e,t)||await AQ("-webkit-mask",e,t)||await AQ("mask-image",e,t)||await AQ("-webkit-mask-image",e,t)}(e,t),await async function(e,t){const n=sQ(e,HTMLImageElement);if((!n||dQ(e.src))&&(!sQ(e,SVGImageElement)||dQ(e.href.baseVal)))return;const i=n?e.src:e.href.baseVal,r=await gQ(i,hQ(i),t);await new Promise((i,s)=>{e.onload=i,e.onerror=t.onImageErrorHandler?function(){try{i(t.onImageErrorHandler(...arguments))}catch(Mj){s(Mj)}}:s;const a=e;a.decode&&(a.decode=i),"lazy"===a.loading&&(a.loading="eager"),n?(e.srcset="",e.src=r):e.href.baseVal=r})}(e,t),await async function(e,t){const n=QZ(e.childNodes).map(e=>kQ(e,t));await Promise.all(n).then(()=>e)}(e,t))}const PQ={};async function LQ(e){let t=PQ[e];if(null!=t)return t;const n=await fetch(e);return t={url:e,cssText:await n.text()},PQ[e]=t,t}async function DQ(e,t){let n=e.cssText;const i=/url\(["']?([^"')]+)["']?\)/g,r=(n.match(/url\([^)]+\)/g)||[]).map(async r=>{let s=r.replace(i,"$1");return s.startsWith("https://")||(s=new URL(s,e.url).href),pQ(s,t.fetchRequestInit,e=>{let{result:t}=e;return n=n.replace(r,"url(".concat(t,")")),[r,t]})});return Promise.all(r).then(()=>n)}function RQ(e){if(null==e)return[];const t=[];let n=e.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const e=i.exec(n);if(null===e)break;t.push(e[0])}n=n.replace(i,"");const r=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,s=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let e=r.exec(n);if(null===e){if(e=s.exec(n),null===e)break;r.lastIndex=s.lastIndex}else s.lastIndex=r.lastIndex;t.push(e[0])}return t}async function NQ(e,t){if(null==e.ownerDocument)throw new Error("Provided element is not within a Document");const n=QZ(e.ownerDocument.styleSheets),i=await async function(e,t){const n=[],i=[];return e.forEach(n=>{if("cssRules"in n)try{QZ(n.cssRules||[]).forEach((e,r)=>{if(e.type===CSSRule.IMPORT_RULE){let s=r+1;const a=LQ(e.href).then(e=>DQ(e,t)).then(e=>RQ(e).forEach(e=>{try{n.insertRule(e,e.startsWith("@import")?s+=1:n.cssRules.length)}catch(Mj){console.error("Error inserting rule from remote css",{rule:e,error:Mj})}})).catch(e=>{console.error("Error loading remote css",e.toString())});i.push(a)}})}catch(Kg){const s=e.find(e=>null==e.href)||document.styleSheets[0];null!=n.href&&i.push(LQ(n.href).then(e=>DQ(e,t)).then(e=>RQ(e).forEach(e=>{s.insertRule(e,s.cssRules.length)})).catch(e=>{console.error("Error loading remote stylesheet",e)})),console.error("Error inlining remote css file",Kg)}}),Promise.all(i).then(()=>(e.forEach(e=>{if("cssRules"in e)try{QZ(e.cssRules||[]).forEach(e=>{n.push(e)})}catch(Kg){console.error("Error while reading CSS rules from ".concat(e.href),Kg)}}),n))}(n,t);return function(e){return e.filter(e=>e.type===CSSRule.FONT_FACE_RULE).filter(e=>EQ(e.style.getPropertyValue("src")))}(i)}function IQ(e){return e.trim().replace(/["']/g,"")}async function OQ(e,t){const n=await NQ(e,t),i=function(e){const t=new Set;return function e(n){(n.style.fontFamily||getComputedStyle(n).fontFamily).split(",").forEach(e=>{t.add(IQ(e))}),Array.from(n.children).forEach(t=>{t instanceof HTMLElement&&e(t)})}(e),t}(e);return(await Promise.all(n.filter(e=>i.has(IQ(e.style.fontFamily))).map(e=>{const n=e.parentStyleSheet?e.parentStyleSheet.href:null;return TQ(e.cssText,n,t)}))).join("\n")}async function zQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:i}=tQ(e,t),r=await _Q(e,t,!0);await async function(e,t){const n=null!=t.fontEmbedCSS?t.fontEmbedCSS:t.skipFonts?null:await OQ(e,t);if(n){const t=document.createElement("style"),i=document.createTextNode(n);t.appendChild(i),e.firstChild?e.insertBefore(t,e.firstChild):e.appendChild(t)}}(r,t),await kQ(r,t),function(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width="".concat(t.width,"px")),t.height&&(n.height="".concat(t.height,"px"));const i=t.style;null!=i&&Object.keys(i).forEach(e=>{n[e]=i[e]})}(r,t);return await rQ(r,n,i)}async function FQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{width:n,height:i}=tQ(e,t),r=await zQ(e,t),s=await iQ(r),a=document.createElement("canvas"),o=a.getContext("2d"),l=t.pixelRatio||function(){let e,t;try{t=process}catch(Kg){}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}(),c=t.canvasWidth||n,u=t.canvasHeight||i;return a.width=c*l,a.height=u*l,t.skipAutoScale||function(e){(e.width>nQ||e.height>nQ)&&(e.width>nQ&&e.height>nQ?e.width>e.height?(e.height*=nQ/e.width,e.width=nQ):(e.width*=nQ/e.height,e.height=nQ):e.width>nQ?(e.height*=nQ/e.width,e.width=nQ):(e.width*=nQ/e.height,e.height=nQ))}(a),a.style.width="".concat(c),a.style.height="".concat(u),t.backgroundColor&&(o.fillStyle=t.backgroundColor,o.fillRect(0,0,a.width,a.height)),o.drawImage(s,0,0,a.width,a.height),a}const jQ=e=>{let{onClose:n,onAdd:i}=e;const[r,a]=(0,t.useState)("");return(0,s.jsxs)(Ka.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[" ",(0,s.jsxs)(Ka.div,{className:"bg-slate-800 rounded-xl p-6 w-full max-w-sm border border-green-500/30 shadow-2xl",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},children:[" ",(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[" ",(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:"\u65b0\u3057\u3044\u30e9\u30f3\u30af\u3092\u8ffd\u52a0"})," ",(0,s.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-white",children:(0,s.jsx)(jj,{size:24})})," "]})," ",(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r.trim()&&i(r.trim().toUpperCase())},children:[" ",(0,s.jsx)("input",{type:"text",value:r,onChange:e=>a(e.target.value),placeholder:"\u30e9\u30f3\u30af\u540d (\u4f8b: F)",className:"w-full px-4 py-2.5 bg-slate-700 border border-slate-600 rounded-lg text-white mb-4",autoFocus:!0})," ",(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[" ",(0,s.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 rounded-md",children:" \u30ad\u30e3\u30f3\u30bb\u30eb "})," ",(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-md",children:" \u8ffd\u52a0\u3059\u308b "})," "]})," "]})," "]})," "]})};function BQ(e){let{char:t}=e;return(0,s.jsxs)("div",{className:"w-16 h-16 rounded-md flex-shrink-0 border-2 border-slate-600",style:{backgroundColor:t.color},children:[" ",t.icon&&(0,s.jsx)("img",{src:"/images/".concat(encodeURIComponent(t.icon)),alt:t.name,className:"w-full h-full object-contain p-1"})," "]})}function VQ(e){let{char:t}=e;const{attributes:n,listeners:i,setNodeRef:r,transform:a,transition:o,isDragging:l}=HU({id:t.id}),c={transform:MB.Transform.toString(a),transition:o,opacity:l?.3:1};return(0,s.jsxs)("div",I(I(I({ref:r,style:c},n),i),{},{className:"touch-none",children:[" ",(0,s.jsx)(BQ,{char:t})," "]}))}function UQ(e){let{id:t,chars:n,onDeleteTier:i}=e;const{setNodeRef:r}=HU({id:t}),a=["S","A","B","C","D","E","unranked"].includes(t),o=t.toLocaleUpperCase(),l=t.length>1?"text-lg font-semibold":"text-2xl font-bold";return(0,s.jsxs)(OU,{items:n.map(e=>e.id),children:[" ",(0,s.jsxs)("div",{ref:r,className:"flex items-stretch min-h-[96px]",children:[" ",(0,s.jsxs)("div",{className:"w-28 flex-shrink-0 flex items-center justify-center rounded-l-lg ".concat(l),style:{backgroundColor:{S:"#ff7f7f",A:"#ffbf7f",B:"#ffff7f",C:"#7fff7f",D:"#7fbfff",E:"#bf7fff",F:"#aaa",unranked:"#555"}[t]||"#777"},children:[" ",o," "]})," ",(0,s.jsxs)("div",{className:"flex-grow bg-slate-800/50 p-2 border-y-2 border-r-2 border-slate-700 rounded-r-lg min-w-[100px] flex items-center",children:[" ",(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 flex-grow",children:[" ",n.map(e=>e&&(0,s.jsx)(VQ,{char:e},e.id))," "]})," ",!a&&(0,s.jsx)("button",{onClick:()=>i(t),className:"ml-2 p-2 text-white/30 hover:text-red-500",children:(0,s.jsx)(Uj,{size:16})})," "]})," "]})," "]})}const HQ=e=>{let{onBack:n}=e;const{characters:i,tierLists:r,setTierLists:a,activeTierListId:o,shareTierList:l}=Jg(),{setCursorVariant:c}=av(),{showConfirm:u}=yv(),[h,d]=(0,t.useState)(null),f=(0,t.useRef)(null),[p,m]=(0,t.useState)(!1),[g,v]=(0,t.useState)(""),[y,x]=(0,t.useState)(!1),b=(0,t.useMemo)(()=>r.find(e=>e.id===o)||r[0],[r,o]),[_,w]=(0,t.useState)(b?b.characterPlacements:{});(0,t.useEffect)(()=>{if(b){const e=new Set(i.map(e=>e.id)),t=new Set(Object.values(b.characterPlacements||{}).flat()),n=I({},b.characterPlacements);Object.keys(n).forEach(t=>{n[t]=(n[t]||[]).filter(t=>e.has(t))});const r=i.filter(e=>!t.has(e.id)).map(e=>e.id);n.unranked=[...new Set([...n.unranked||[],...r])],w(n)}},[i,b]);const S=(e,t,n)=>{a(i=>i.map(i=>{if(i.id===o){const r=I({},i);return e&&(r.characterPlacements=e),t&&(r.tiers=t),n&&(r.title=n),r}return i}))},M=(0,t.useMemo)(()=>{const e=new Map(i.map(e=>[e.id,e]));return t=>e.get(t)},[i]),C=BB(jB(DV,{activationConstraint:{distance:8}})),E=e=>e in _?e:Object.keys(_).find(t=>_[t]&&_[t].includes(e)),T=async e=>{if(await u("\u30e9\u30f3\u30af\u306e\u524a\u9664","\u300c".concat(e,"\u300d\u30e9\u30f3\u30af\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f\u3053\u306e\u30e9\u30f3\u30af\u306e\u30ad\u30e3\u30e9\u306f\u672a\u5206\u985e\u306b\u79fb\u52d5\u3057\u307e\u3059\u3002"))){const t=b.tiers.filter(t=>t!==e),n=I({},_),i=n[e]||[];n.unranked=[...n.unranked,...i],delete n[e],w(n),S(n,t)}},A=h?M(h):null;return(0,s.jsxs)("div",{className:"w-screen h-screen bg-slate-900 flex flex-col text-white p-4 sm:p-8",onMouseEnter:()=>c("default"),children:[(0,s.jsxs)("header",{className:"flex-shrink-0 mb-6 space-y-4",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[" ",(0,s.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold",children:(null===b||void 0===b?void 0:b.title)||"Tier\u8868"})," ",(0,s.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"Tier\u8868\u4e00\u89a7\u306b\u623b\u308b"]})," "]}),(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)("button",{onClick:()=>m(!0),className:"px-3 py-1 bg-green-600 rounded hover:bg-green-700",children:"\u30e9\u30f3\u30af\u8ffd\u52a0"}),(0,s.jsxs)("button",{onClick:()=>{f.current&&async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(await FQ(e,t)).toDataURL()}(f.current,{backgroundColor:"#1e293b"}).then(e=>{const t=document.createElement("a");t.download="".concat(b.title.replace(/\s/g,"_"),".png"),t.href=e,t.click()}).catch(e=>console.error("oops, something went wrong!",e))},className:"px-3 py-1 bg-blue-600 rounded hover:bg-blue-700 flex items-center gap-2",children:[(0,s.jsx)(iH,{size:16}),"\u753b\u50cf\u3068\u3057\u3066\u4fdd\u5b58"]}),(0,s.jsxs)("button",{onClick:async()=>{x(!0);const e=await l({title:b.title,tiers:b.tiers,placements:_,characters:i.filter(e=>Object.values(_).flat().includes(e.id))});if(e){const t="https://smash-strategy-notebook-14e22.web.app/view/".concat(e);v(t)}else alert("\u5171\u6709\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u30b3\u30f3\u30bd\u30fc\u30eb\u30ed\u30b0\u3092\u78ba\u8a8d\u3057\u3066\u304f\u3060\u3055\u3044\u3002");x(!1)},disabled:y,className:"px-3 py-1 bg-purple-600 rounded hover:bg-purple-700 flex items-center gap-2 disabled:bg-gray-500",children:[" ",(0,s.jsx)(YZ,{size:16}),y?"\u5171\u6709\u4e2d...":"\u5171\u6709\u30ea\u30f3\u30af\u3092\u4f5c\u6210"," "]})]}),g&&(0,s.jsxs)("div",{className:"bg-black/20 p-2 rounded-md flex items-center gap-2",children:[" ",(0,s.jsx)("input",{type:"text",readOnly:!0,value:g,className:"bg-slate-700 p-1 flex-grow rounded-sm"})," ",(0,s.jsx)("button",{onClick:async()=>{if(g)try{await navigator.clipboard.writeText(g),alert("\u30ea\u30f3\u30af\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\uff01")}catch(e){console.error("\u30af\u30ea\u30c3\u30d7\u30dc\u30fc\u30c9\u3078\u306e\u30b3\u30d4\u30fc\u306b\u5931\u6557\u3057\u307e\u3057\u305f: ",e),alert("\u30b3\u30d4\u30fc\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002")}},className:"p-2 hover:bg-white/10 rounded-md",children:(0,s.jsx)(KZ,{size:16})})," "]})]}),(0,s.jsxs)(dU,{sensors:C,collisionDetection:XB,onDragStart:e=>{c("hover"),d(e.active.id)},onDragEnd:e=>{const{active:t,over:n}=e;if(d(null),c("default"),!n)return;const i=E(t.id);let r=E(n.id);if(!r&&b.tiers.concat(["unranked"]).includes(n.id)&&(r=n.id),!i||!r)return;let s=I({},_);if(i!==r){const e=s[i],a=s[r],o=n.id in s?a.length:a.indexOf(n.id);s[i]=e.filter(e=>e!==t.id),-1!==o?s[r].splice(o,0,t.id):s[r].push(t.id)}else{const e=s[i].indexOf(t.id),r=s[i].indexOf(n.id);e!==r&&(s[i]=PU(s[i],e,r))}w(s),S(s)},children:[(0,s.jsxs)("div",{ref:f,className:"flex flex-col flex-grow min-h-0 bg-slate-800 p-4 rounded-lg",children:[(0,s.jsxs)("main",{className:"flex-grow space-y-2 overflow-y-auto custom-scrollbar pr-2",children:[" ",((null===b||void 0===b?void 0:b.tiers)||[]).map(e=>(0,s.jsx)(UQ,{id:e,chars:(_[e]||[]).map(M),onDeleteTier:T},e))," "]}),(0,s.jsxs)("footer",{className:"flex-shrink-0 mt-4 pt-4 border-t-2 border-slate-700",children:[" ",(0,s.jsxs)("div",{className:"h-48 overflow-y-auto custom-scrollbar pr-2",children:[" ",(0,s.jsx)(UQ,{id:"unranked",chars:(_.unranked||[]).map(M),onDeleteTier:()=>{}})," "]})," "]})]}),(0,nB.createPortal)((0,s.jsxs)(kU,{children:[" ",A?(0,s.jsx)(BQ,{char:A}):null," "]}),document.body)]}),(0,s.jsxs)(P,{children:[" ",p&&(0,s.jsx)(jQ,{onClose:()=>m(!1),onAdd:e=>{if(e&&b&&!b.tiers.includes(e)){const t=[...b.tiers,e],n=I(I({},_),{},{[e]:[]});w(n),S(n,t)}m(!1)}})," "]})]})},WQ=pv("dices",[["rect",{width:"12",height:"12",x:"2",y:"10",rx:"2",ry:"2",key:"6agr2n"}],["path",{d:"m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6",key:"1o487t"}],["path",{d:"M6 18h.01",key:"uhywen"}],["path",{d:"M10 14h.01",key:"ssrbsk"}],["path",{d:"M15 6h.01",key:"cblpky"}],["path",{d:"M18 9h.01",key:"2061c0"}]]),GQ=pv("shield-alert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),qQ=[{id:"goal-tracker",title:"\u76ee\u6a19\uff06\u30ec\u30dd\u30fc\u30c8",subtitle:"\u76ee\u6a19\u3092\u8a2d\u5b9a\u3057\u3066\u6210\u9577\u3092\u8a18\u9332",icon:QU,color:"#84cc16"},{id:"challenge-generator",title:"\u30e9\u30f3\u30c0\u30e0\u8ab2\u984c",subtitle:"\u4eca\u65e5\u306e\u7df4\u7fd2\u30e1\u30cb\u30e5\u30fc\u3092\u751f\u6210",icon:WQ,color:"#f59e0b"},{id:"nemesis-tracker",title:"\u30cd\u30e1\u30b7\u30b9\u5206\u6790",subtitle:"\u5929\u6575\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3092\u5206\u6790",icon:GQ,color:"#ef4444"}],XQ=e=>{let{item:t,onClick:n,onHover:i,onLeave:r}=e;return(0,s.jsxs)(Ka.div,{className:"relative group cursor-pointer text-white flex flex-col items-center justify-center p-4 shadow-xl h-full",style:{backgroundColor:"".concat(t.color,"BF"),clipPath:"polygon(10% 0%, 100% 0%, 90% 100%, 0% 100%)"},whileHover:{scale:1.05,zIndex:10,boxShadow:"0 0 30px ".concat(t.color)},transition:{type:"spring",stiffness:300},onClick:n,onMouseEnter:i,onMouseLeave:r,children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-all duration-300"}),(0,s.jsxs)("div",{className:"relative z-10 text-center flex flex-col items-center gap-2",children:[(0,s.jsx)(t.icon,{size:48,className:"drop-shadow-md"}),(0,s.jsx)("h3",{className:"font-bold text-2xl drop-shadow-md",children:t.title}),(0,s.jsx)("p",{className:"text-sm opacity-80",children:t.subtitle})]})]})},YQ=e=>{let{onNavigate:n,onBack:i}=e;const{setCursorVariant:r}=av(),a=(0,t.useRef)(null),o=(0,t.useCallback)(e=>{const t=qQ.find(t=>t.id===e);if(t&&t.subtitle.includes("\uff08\u6e96\u5099\u4e2d\uff09"))return void alert("\u3053\u306e\u6a5f\u80fd\u306f\u73fe\u5728\u6e96\u5099\u4e2d\u3067\u3059\u3002");r("default");const i=a.current;if(!i)return void n(e);const s=()=>{n(e),i.removeEventListener("ended",s)};i.addEventListener("ended",s),i.currentTime=0,i.play().catch(t=>{n(e)})},[n,r]);return(0,s.jsxs)("div",{className:"w-screen h-screen bg-gray-800 relative flex flex-col items-center justify-center p-8",children:[(0,s.jsx)("audio",{ref:a,src:"/audio/click.mp3",preload:"auto"}),(0,s.jsx)("header",{className:"absolute top-8 left-8",children:(0,s.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"\u30db\u30fc\u30e0\u306b\u623b\u308b"]})}),(0,s.jsx)("div",{className:"w-full max-w-6xl grid grid-cols-1 md:grid-cols-3 gap-8",style:{height:"250px"},children:qQ.map(e=>(0,s.jsx)(XQ,{item:e,onClick:()=>o(e.id),onHover:()=>r("hover"),onLeave:()=>r("default")},e.id))})]})},KQ=pv("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),ZQ=["{{character}}\u3092\u4f7f\u3063\u3066\u3001\u4e00\u5ea6\u3082\u30b7\u30fc\u30eb\u30c9\u3092\u4f7f\u308f\u305a\u306b\u52dd\u5229\u3059\u308b","{{character}}\u306e\u7a7a\u4e2d\u653b\u6483\u3060\u3051\u3067\u76f8\u624b\u3092\u6483\u589c\u3059\u308b","{{character}}\u3067\u3001\u76f8\u624b\u306e\u98db\u3073\u9053\u5177\u30923\u56de\u30b8\u30e3\u30b9\u30c8\u30b7\u30fc\u30eb\u30c9\u3059\u308b","{{character}}\u3067\u3001\u76f8\u624b\u306e\u6700\u5f8c\u306e\u30b9\u30c8\u30c3\u30af\u3092\u30e1\u30c6\u30aa\u3067\u6483\u589c\u3059\u308b","{{character}}\u3092\u4f7f\u3044\u3001\u30a2\u30d4\u30fc\u30eb\u30923\u56de\u3057\u3066\u304b\u3089\u52dd\u5229\u3059\u308b","{{character}}\u3067\u3001\u30b9\u30c6\u30fc\u30b8\u4e2d\u592e\u304b\u3089\u4e00\u5207\u52d5\u304b\u305a\u306b\u76f8\u624b\u3092\u6483\u589c\u3059\u308b"],QQ=e=>{let{onBack:n}=e;const{characters:i}=Jg(),[r,a]=(0,t.useState)("\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u8ab2\u984c\u3092\u751f\u6210\u3057\u3088\u3046\uff01");return(0,s.jsxs)("div",{className:"w-screen h-screen bg-slate-900 flex flex-col text-white p-8",children:[(0,s.jsxs)("header",{className:"flex-shrink-0 mb-8 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"\u30e9\u30f3\u30c0\u30e0\u8ab2\u984c\u30b8\u30a7\u30cd\u30ec\u30fc\u30bf\u30fc"}),(0,s.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"\u623b\u308b"]})]}),(0,s.jsxs)("main",{className:"flex-grow flex flex-col items-center justify-center text-center",children:[(0,s.jsx)("div",{className:"bg-black/20 p-8 rounded-lg border-2 border-purple-500/50 min-h-[200px] w-full max-w-2xl flex items-center justify-center",children:(0,s.jsx)(P,{mode:"wait",children:(0,s.jsx)(Ka.p,{className:"text-3xl font-semibold",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:r},r)})}),(0,s.jsxs)(Ka.button,{onClick:()=>{if(0===i.length)return void a("\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\u5148\u306b\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u9078\u629e\u753b\u9762\u304b\u3089\u8ffd\u52a0\u3057\u3066\u304f\u3060\u3055\u3044\u3002");const e=i[Math.floor(Math.random()*i.length)],t=ZQ[Math.floor(Math.random()*ZQ.length)].replace("{{character}}",e.name);a(t)},className:"mt-8 px-8 py-4 bg-purple-600 rounded-lg text-xl font-bold flex items-center gap-3",whileHover:{scale:1.05},whileTap:{scale:.95},children:[(0,s.jsx)(KQ,{size:24}),"\u65b0\u3057\u3044\u8ab2\u984c\u3092\u751f\u6210"]})]})]})},JQ=pv("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),$Q=pv("chart-bar",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M7 16h8",key:"srdodz"}],["path",{d:"M7 11h12",key:"127s9w"}],["path",{d:"M7 6h3",key:"w9rmul"}]]);$Y.register(sK,WK,TK,XK,QK,SK);const eJ=e=>{let{onBack:n}=e;const{goals:i,addGoal:r,toggleGoalStatus:a,deleteGoal:o,characters:l,characterData:c}=Jg(),[u,h]=(0,t.useState)(""),d=(0,t.useMemo)(()=>{const e=Object.values(c).map(e=>e.records||{wins:0,losses:0}),t=e.reduce((e,t)=>e+t.wins,0),n=e.reduce((e,t)=>e+t.losses,0),i=t+n;return{totalWins:t,totalLosses:n,totalMatches:i,overallWinRate:i>0?(t/i*100).toFixed(1):0,characterStats:l.map(e=>{var t;const n=(null===(t=c[e.id])||void 0===t?void 0:t.records)||{wins:0,losses:0},i=n.wins+n.losses;return{name:e.name,color:e.color,matches:i}}).sort((e,t)=>t.matches-e.matches).slice(0,5)}},[l,c]),f={labels:["\u52dd\u5229","\u6557\u5317"],datasets:[{data:[d.totalWins,d.totalLosses],backgroundColor:["rgba(34, 197, 94, 0.7)","rgba(239, 68, 68, 0.7)"],borderColor:["#22c55e","#ef4444"],borderWidth:1}]},p={labels:d.characterStats.map(e=>e.name),datasets:[{label:"\u8a66\u5408\u6570",data:d.characterStats.map(e=>e.matches),backgroundColor:d.characterStats.map(e=>"".concat(e.color,"BF")),borderColor:d.characterStats.map(e=>e.color),borderWidth:1}]};return(0,s.jsxs)("div",{className:"w-screen h-screen bg-slate-900 flex flex-col text-white p-4 sm:p-8",children:[(0,s.jsxs)("header",{className:"flex-shrink-0 mb-6 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"\u76ee\u6a19\u9054\u6210\uff06\u6210\u9577\u30ec\u30dd\u30fc\u30c8"}),(0,s.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"\u623b\u308b"]})]}),(0,s.jsxs)("div",{className:"flex-grow grid grid-cols-1 lg:grid-cols-2 gap-8 min-h-0",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("h2",{className:"text-2xl font-semibold flex items-center gap-2",children:[(0,s.jsx)(zZ,{size:24,className:"text-yellow-400"}),"\u30b5\u30de\u30ea\u30fc\uff06\u30ec\u30dd\u30fc\u30c8"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"bg-black/20 p-4 rounded-lg flex flex-col items-center justify-center",children:[(0,s.jsx)("h3",{className:"text-lg text-white/70",children:"\u7dcf\u8a66\u5408\u6570"}),(0,s.jsx)("p",{className:"text-4xl font-bold",children:d.totalMatches})]}),(0,s.jsxs)("div",{className:"bg-black/20 p-4 rounded-lg flex flex-col items-center justify-center",children:[(0,s.jsx)("h3",{className:"text-lg text-white/70",children:"\u7dcf\u5408\u52dd\u7387"}),(0,s.jsxs)("p",{className:"text-4xl font-bold text-cyan-400",children:[d.overallWinRate,"%"]})]})]}),(0,s.jsxs)("div",{className:"bg-black/20 p-4 rounded-lg flex-grow flex flex-col",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[(0,s.jsx)(JQ,{size:20,className:"text-green-400"}),"\u7dcf\u5408\u52dd\u6557"]}),(0,s.jsx)("div",{className:"relative flex-grow h-48",children:d.totalMatches>0?(0,s.jsx)(NZ,{data:f,options:{maintainAspectRatio:!1,plugins:{legend:{position:"top"}}}}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-white/50",children:"\u6226\u7e3e\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093"})})]}),(0,s.jsxs)("div",{className:"bg-black/20 p-4 rounded-lg flex-grow flex flex-col",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold mb-2 flex items-center gap-2",children:[(0,s.jsx)($Q,{size:20,className:"text-orange-400"}),"\u4f7f\u7528\u30ad\u30e3\u30e9Top5"]}),(0,s.jsx)("div",{className:"relative flex-grow h-48",children:d.totalMatches>0?(0,s.jsx)(RZ,{data:p,options:{indexAxis:"y",maintainAspectRatio:!1,plugins:{legend:{display:!1}}}}):(0,s.jsx)("div",{className:"flex items-center justify-center h-full text-white/50",children:"\u6226\u7e3e\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093"})})]})]}),(0,s.jsxs)("div",{className:"flex flex-col min-h-0",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold mb-6",children:"\u76ee\u6a19\u30ea\u30b9\u30c8"}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),u.trim()&&(r(u),h(""))},className:"flex gap-4 mb-4 flex-shrink-0",children:[(0,s.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"\u65b0\u3057\u3044\u76ee\u6a19 (\u4f8b: \u7a7a\u5f8c\u306e\u30b3\u30f3\u30dc\u3092\u899a\u3048\u308b)",className:"flex-grow bg-slate-700 p-3 rounded-md border border-slate-600 focus:ring-2 focus:ring-green-500 focus:outline-none"}),(0,s.jsxs)("button",{type:"submit",className:"px-6 py-2 bg-green-600 rounded-md hover:bg-green-700 flex items-center justify-center gap-2 font-semibold",children:[(0,s.jsx)(Fj,{size:18}),"\u8ffd\u52a0"]})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2",children:(0,s.jsx)("div",{className:"space-y-3",children:(0,s.jsx)(P,{children:i.map(e=>(0,s.jsxs)(Ka.div,{layout:!0,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,x:-20},className:"flex items-center gap-4 p-4 rounded-md transition-colors ".concat(e.completed?"bg-green-500/10":"bg-black/20"),children:[(0,s.jsx)("input",{type:"checkbox",checked:e.completed,onChange:()=>a(e.id),className:"w-6 h-6 accent-green-500 flex-shrink-0 cursor-pointer"}),(0,s.jsx)("p",{className:"flex-grow ".concat(e.completed?"line-through text-white/50":""),children:e.text}),(0,s.jsx)("button",{onClick:()=>o(e.id),className:"text-red-400 hover:text-red-300 p-1 flex-shrink-0",children:(0,s.jsx)(Uj,{size:18})})]},e.id))})})})]})]})]})},tJ=pv("film",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M7 3v18",key:"bbkbws"}],["path",{d:"M3 7.5h4",key:"zfgn84"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 16.5h4",key:"1230mu"}],["path",{d:"M17 3v18",key:"in4fa5"}],["path",{d:"M17 7.5h4",key:"myr1c1"}],["path",{d:"M17 16.5h4",key:"go4c1d"}]]),nJ=[{id:"replay-feature",title:"\u30ea\u30d7\u30ec\u30a4\u5206\u6790",subtitle:"\u52d5\u753b\u3092\u898b\u306a\u304c\u3089\u30e1\u30e2\u3092\u53d6\u308b",icon:tJ,color:"#0ea5e9"},{id:"sharing",title:"\u30c7\u30fc\u30bf\u5171\u6709",subtitle:"\uff08\u6e96\u5099\u4e2d\uff09",icon:YZ,color:"#f43f5e"}],iJ=e=>{let{item:t,onClick:n,onHover:i,onLeave:r}=e;return(0,s.jsxs)(Ka.div,{className:"relative group cursor-pointer text-white flex flex-col items-center justify-center p-4 shadow-xl h-full",style:{backgroundColor:"".concat(t.color,"BF"),clipPath:"polygon(10% 0%, 100% 0%, 90% 100%, 0% 100%)"},whileHover:{scale:1.05,zIndex:10,boxShadow:"0 0 30px ".concat(t.color)},transition:{type:"spring",stiffness:300},onClick:n,onMouseEnter:i,onMouseLeave:r,children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/10 transition-all duration-300"}),(0,s.jsxs)("div",{className:"relative z-10 text-center flex flex-col items-center gap-2",children:[(0,s.jsx)(t.icon,{size:48,className:"drop-shadow-md"}),(0,s.jsx)("h3",{className:"font-bold text-2xl drop-shadow-md",children:t.title}),t.subtitle&&(0,s.jsx)("p",{className:"text-sm opacity-80",children:t.subtitle})]})]})},rJ=e=>{let{onNavigate:n,onBack:i}=e;const{setCursorVariant:r}=av(),a=(0,t.useRef)(null),o=(0,t.useCallback)(e=>{const t=nJ.find(t=>t.id===e);if(t&&t.subtitle.includes("\uff08\u6e96\u5099\u4e2d\uff09"))return void alert("\u3053\u306e\u6a5f\u80fd\u306f\u73fe\u5728\u6e96\u5099\u4e2d\u3067\u3059\u3002");r("default");const i=a.current;if(!i)return void n(e);const s=()=>{n(e),i.removeEventListener("ended",s)};i.addEventListener("ended",s),i.currentTime=0,i.play().catch(t=>{i.removeEventListener("ended",s),n(e)})},[n,r]);return(0,s.jsxs)("div",{className:"w-screen h-screen bg-sky-900/50 relative flex flex-col items-center justify-center p-8",children:[(0,s.jsx)("audio",{ref:a,src:"/audio/click.mp3",preload:"auto"}),(0,s.jsx)("header",{className:"absolute top-8 left-8",children:(0,s.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 rounded-lg text-white hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"\u30db\u30fc\u30e0\u306b\u623b\u308b"]})}),(0,s.jsx)("div",{className:"w-full max-w-4xl grid grid-cols-1 md:grid-cols-2 gap-8",style:{height:"250px"},children:nJ.map(e=>(0,s.jsx)(iJ,{item:e,onClick:()=>o(e.id),onHover:()=>r("hover"),onLeave:()=>r("default")},e.id))})]})};var sJ=n(173),aJ=n.n(sJ),oJ=n(122),lJ=n.n(oJ),cJ=n(282),uJ=n.n(cJ),hJ=Object.defineProperty,dJ=Object.defineProperties,fJ=Object.getOwnPropertyDescriptors,pJ=Object.getOwnPropertySymbols,mJ=Object.prototype.hasOwnProperty,gJ=Object.prototype.propertyIsEnumerable,vJ=(e,t,n)=>t in e?hJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yJ=(e,t)=>{for(var n in t||(t={}))mJ.call(t,n)&&vJ(e,n,t[n]);if(pJ)for(var n of pJ(t))gJ.call(t,n)&&vJ(e,n,t[n]);return e},xJ=(e,t)=>dJ(e,fJ(t));function bJ(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return xJ(yJ({},e),{height:0,width:0,playerVars:xJ(yJ({},e.playerVars),{autoplay:0,start:0,end:0})})}var _J={videoId:aJ().string,id:aJ().string,className:aJ().string,iframeClassName:aJ().string,style:aJ().object,title:aJ().string,loading:aJ().oneOf(["lazy","eager"]),opts:aJ().objectOf(aJ().any),onReady:aJ().func,onError:aJ().func,onPlay:aJ().func,onPause:aJ().func,onEnd:aJ().func,onStateChange:aJ().func,onPlaybackRateChange:aJ().func,onPlaybackQualityChange:aJ().func},wJ=class extends t.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=e=>{var t,n;return null==(n=(t=this.props).onReady)?void 0:n.call(t,e)},this.onPlayerError=e=>{var t,n;return null==(n=(t=this.props).onError)?void 0:n.call(t,e)},this.onPlayerStateChange=e=>{var t,n,i,r,s,a,o,l;switch(null==(n=(t=this.props).onStateChange)||n.call(t,e),e.data){case wJ.PlayerState.ENDED:null==(r=(i=this.props).onEnd)||r.call(i,e);break;case wJ.PlayerState.PLAYING:null==(a=(s=this.props).onPlay)||a.call(s,e);break;case wJ.PlayerState.PAUSED:null==(l=(o=this.props).onPause)||l.call(o,e)}},this.onPlayerPlaybackRateChange=e=>{var t,n;return null==(n=(t=this.props).onPlaybackRateChange)?void 0:n.call(t,e)},this.onPlayerPlaybackQualityChange=e=>{var t,n;return null==(n=(t=this.props).onPlaybackQualityChange)?void 0:n.call(t,e)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if("undefined"===typeof document)return;if(this.destroyPlayerPromise)return void this.destroyPlayerPromise.then(this.createPlayer);const e=xJ(yJ({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=uJ()(this.container,e),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(e=>{this.props.title&&e.setAttribute("title",this.props.title),this.props.loading&&e.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var e;null==(e=this.internalPlayer)||e.getIframe().then(e=>{this.props.id?e.setAttribute("id",this.props.id):e.removeAttribute("id"),this.props.iframeClassName?e.setAttribute("class",this.props.iframeClassName):e.removeAttribute("class"),this.props.opts&&this.props.opts.width?e.setAttribute("width",this.props.opts.width.toString()):e.removeAttribute("width"),this.props.opts&&this.props.opts.height?e.setAttribute("height",this.props.opts.height.toString()):e.removeAttribute("height"),this.props.title?e.setAttribute("title",this.props.title):e.setAttribute("title","YouTube video player"),this.props.loading?e.setAttribute("loading",this.props.loading):e.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var e,t,n,i;if("undefined"===typeof this.props.videoId||null===this.props.videoId)return void(null==(e=this.internalPlayer)||e.stopVideo());let r=!1;const s={videoId:this.props.videoId};(null==(t=this.props.opts)?void 0:t.playerVars)&&(r=1===this.props.opts.playerVars.autoplay,"start"in this.props.opts.playerVars&&(s.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(s.endSeconds=this.props.opts.playerVars.end)),r?null==(n=this.internalPlayer)||n.loadVideoById(s):null==(i=this.internalPlayer)||i.cueVideoById(s)},this.refContainer=e=>{this.container=e},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return t=this,n=null,i=function*(){(function(e,t){var n,i,r,s;return e.id!==t.id||e.className!==t.className||(null==(n=e.opts)?void 0:n.width)!==(null==(i=t.opts)?void 0:i.width)||(null==(r=e.opts)?void 0:r.height)!==(null==(s=t.opts)?void 0:s.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title})(e,this.props)&&this.updatePlayer(),function(e,t){return e.videoId!==t.videoId||!lJ()(bJ(e.opts),bJ(t.opts))}(e,this.props)&&(yield this.resetPlayer()),function(e,t){var n,i;if(e.videoId!==t.videoId)return!0;const r=(null==(n=e.opts)?void 0:n.playerVars)||{},s=(null==(i=t.opts)?void 0:i.playerVars)||{};return r.start!==s.start||r.end!==s.end}(e,this.props)&&this.updateVideo()},new Promise((e,r)=>{var s=e=>{try{o(i.next(e))}catch(Kg){r(Kg)}},a=e=>{try{o(i.throw(e))}catch(Kg){r(Kg)}},o=t=>t.done?e(t.value):Promise.resolve(t.value).then(s,a);o((i=i.apply(t,n)).next())});var t,n,i}componentWillUnmount(){this.destroyPlayer()}render(){return t.createElement("div",{className:this.props.className,style:this.props.style},t.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},SJ=wJ;SJ.propTypes=_J,SJ.defaultProps={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},SJ.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var MJ=SJ;const CJ=t.memo(e=>{let{videoId:n,onReady:i}=e;const r=(0,t.useMemo)(()=>({height:"100%",width:"100%",playerVars:{autoplay:0,modestbranding:1}}),[]);return n?(0,s.jsx)(MJ,{videoId:n,opts:r,className:"w-full h-full",onReady:i}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center text-red-500",children:"\u6709\u52b9\u306aYouTube\u52d5\u753bID\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3002"})}),EJ=e=>{let{onAdd:n,onClose:i,selectedChar:r}=e;const[a,o]=(0,t.useState)("");return(0,s.jsx)(Ka.div,{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:(0,s.jsxs)(Ka.div,{className:"bg-slate-800 rounded-xl p-6 w-full max-w-lg border border-blue-500/30 shadow-2xl",initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-white",children:"\u65b0\u3057\u3044\u30ea\u30d7\u30ec\u30a4\u52d5\u753b\u3092\u8ffd\u52a0"}),(0,s.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-white",children:(0,s.jsx)(jj,{size:24})})]}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),a.trim()&&r?(n(r.id,a.trim()),i()):alert("URL\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002")},children:[(0,s.jsx)("input",{type:"text",value:a,onChange:e=>o(e.target.value),placeholder:"YouTube\u52d5\u753b\u306eURL\u3092\u8cbc\u308a\u4ed8\u3051",className:"w-full px-4 py-2.5 bg-slate-700 border border-slate-600 rounded-lg text-white mb-4",autoFocus:!0}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md",children:"\u8ffd\u52a0\u3059\u308b"})})]})]})})},TJ=e=>{let{characters:t,onSelectChar:n,onBack:i}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"mb-8 flex-shrink-0 flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u3092\u9078\u629e"}),(0,s.jsxs)("button",{onClick:i,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"\u30e1\u30cb\u30e5\u30fc\u306b\u623b\u308b"]})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-4",children:(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 xl:grid-cols-8 gap-4",children:t.map(e=>(0,s.jsx)("div",{onClick:()=>n(e),className:"group cursor-pointer aspect-square",children:(0,s.jsx)("div",{className:"w-full h-full rounded-lg flex flex-col items-center justify-end text-white font-bold shadow-lg group-hover:shadow-2xl border-2 border-transparent group-hover:border-white/80 transition-all duration-300 transform group-hover:scale-105 p-2 bg-no-repeat bg-cover bg-center",style:{backgroundImage:"linear-gradient(to top, ".concat(e.color,"A0 20%, transparent 70%), url(/images/").concat(encodeURIComponent(e.icon),")")},children:(0,s.jsx)("span",{className:"text-center text-sm shadow-black [text-shadow:_0_1px_2px_var(--tw-shadow-color)]",children:e.name})})},e.id))})})]})},AJ=e=>{let{selectedChar:t,replays:n,onSelectReplay:i,onAddReplay:r,onDeleteReplay:a,onBack:o}=e;const{showConfirm:l}=yv();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"mb-8 flex-shrink-0 flex justify-between items-center",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center border-4 border-white/20 overflow-hidden",style:{backgroundColor:t.color},children:(0,s.jsx)("img",{src:"/images/".concat(encodeURIComponent(t.icon)),alt:t.name,className:"w-full h-full object-contain"})}),(0,s.jsxs)("h1",{className:"text-3xl font-bold",children:[t.name," \u306e\u30ea\u30d7\u30ec\u30a4\u30ea\u30b9\u30c8"]})]}),(0,s.jsxs)("button",{onClick:o,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"\u30ad\u30e3\u30e9\u9078\u629e\u306b\u623b\u308b"]})]}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[n.map(e=>(0,s.jsxs)(Ka.div,{className:"group bg-black/20 rounded-lg flex flex-col transition-colors",whileHover:{y:-5},children:[(0,s.jsxs)("div",{onClick:()=>i(e),className:"cursor-pointer p-4 flex items-center gap-4 flex-grow",children:[(0,s.jsx)(tJ,{size:32,className:"text-blue-400 flex-shrink-0"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold break-all",children:e.videoUrl}),(0,s.jsxs)("p",{className:"text-sm text-white/50",children:[e.notes.length,"\u4ef6\u306e\u30e1\u30e2"]})]})]}),(0,s.jsxs)("button",{onClick:()=>(async e=>{await l("\u30ea\u30d7\u30ec\u30a4\u306e\u524a\u9664","\u3053\u306e\u30ea\u30d7\u30ec\u30a4\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f\u3053\u306e\u64cd\u4f5c\u306f\u53d6\u308a\u6d88\u305b\u307e\u305b\u3093\u3002")&&a(e)})(e.id),className:"text-red-500/50 hover:text-red-500 hover:bg-red-500/10 p-2 rounded-b-lg flex items-center justify-center gap-1 text-xs",children:[(0,s.jsx)(Uj,{size:14}),"\u524a\u9664"]})]},e.id)),(0,s.jsxs)(Ka.div,{onClick:r,className:"group cursor-pointer bg-blue-600/20 hover:bg-blue-600/40 border-2 border-dashed border-blue-500 rounded-lg flex items-center justify-center gap-2 text-blue-300 min-h-[100px]",whileHover:{y:-5},children:[(0,s.jsx)(Fj,{size:24})," \u65b0\u3057\u3044\u30ea\u30d7\u30ec\u30a4\u3092\u8ffd\u52a0"]})]})})]})},kJ=e=>{let{selectedChar:n,replay:i,onBack:r,dataHandlers:a}=e;const o=(0,t.useRef)(null),[l,c]=(0,t.useState)(""),[u,h]=(0,t.useState)(null),{showConfirm:d}=yv(),f=(0,t.useMemo)(()=>{var e;return null===(e=i.videoUrl.match(/(?:https?:\/\/)?(?:www\.)?(?:youtube\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/))||void 0===e?void 0:e[1]},[i.videoUrl]),p=e=>{e.preventDefault(),u&&u.text.trim()&&(a.updateNote(u.id,u.text),h(null))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("header",{className:"flex-shrink-0 mb-6 flex justify-between items-center",children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold truncate",children:["\u30ea\u30d7\u30ec\u30a4\u5206\u6790: ",i.videoUrl]}),(0,s.jsxs)("button",{onClick:r,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"\u30ea\u30d7\u30ec\u30a4\u4e00\u89a7\u306b\u623b\u308b"]})]}),(0,s.jsxs)("main",{className:"flex-grow grid grid-cols-3 gap-8 min-h-0 relative",children:[(0,s.jsx)("div",{className:"col-span-2 bg-black rounded-lg overflow-hidden",children:(0,s.jsx)(CJ,{videoId:f,onReady:e=>{o.current=e.target}})}),(0,s.jsxs)("div",{className:"col-span-1 bg-black/20 rounded-lg p-4 flex flex-col z-10",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4 flex-shrink-0",children:"\u30bf\u30a4\u30e0\u30b9\u30bf\u30f3\u30d7\u30e1\u30e2"}),(0,s.jsx)("div",{className:"flex-grow overflow-y-auto custom-scrollbar space-y-2 pr-2",children:i.notes.sort((e,t)=>e.time-t.time).map(e=>{return(0,s.jsxs)("div",{className:"bg-slate-700/50 p-3 rounded-md group",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsxs)("button",{onClick:()=>(e=>{o.current&&o.current.seekTo(e)})(e.time),className:"flex items-center gap-2 text-cyan-400 font-mono font-bold hover:underline",children:[(0,s.jsx)(ZU,{size:16}),(t=e.time,"".concat(Math.floor(t/60),":").concat((t%60).toString().padStart(2,"0")))]}),(0,s.jsxs)("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,s.jsx)("button",{onClick:()=>h({id:e.id,text:e.text}),className:"p-1 text-white/50 hover:text-yellow-400",children:(0,s.jsx)(Vj,{size:14})}),(0,s.jsx)("button",{onClick:()=>(async e=>{await d("\u30e1\u30e2\u306e\u524a\u9664","\u3053\u306e\u30e1\u30e2\u3092\u524a\u9664\u3057\u307e\u3059\u304b\uff1f")&&a.deleteNote(e)})(e.id),className:"p-1 text-white/50 hover:text-red-500",children:(0,s.jsx)(Uj,{size:14})})]})]}),(null===u||void 0===u?void 0:u.id)===e.id?(0,s.jsxs)("form",{onSubmit:p,className:"mt-2 flex gap-2",children:[(0,s.jsx)("input",{type:"text",value:u.text,onChange:e=>h(I(I({},u),{},{text:e.target.value})),className:"flex-grow bg-slate-900 p-1 rounded",autoFocus:!0}),(0,s.jsx)("button",{type:"submit",className:"p-1 bg-green-600 rounded",children:(0,s.jsx)(Bj,{size:16})})]}):(0,s.jsx)("p",{className:"text-white/90 mt-1 ml-1 pl-6 border-l-2 border-cyan-400/30",children:e.text})]},e.id);var t})}),(0,s.jsxs)("div",{className:"flex-shrink-0 mt-4",children:[(0,s.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),placeholder:"\u30e1\u30e2\u3092\u5165\u529b...",className:"w-full h-24 bg-slate-700 p-2 rounded-lg resize-none custom-scrollbar"}),(0,s.jsxs)("button",{type:"button",onClick:async e=>{if(e.preventDefault(),!l.trim()||!o.current)return;const t=await o.current.getCurrentTime();a.addNote({time:Math.floor(t),text:l}),c("")},className:"w-full bg-blue-600 hover:bg-blue-700 p-3 rounded-lg font-semibold flex items-center justify-center gap-2 mt-2",children:[(0,s.jsx)(Fj,{size:20}),"\u73fe\u5728\u306e\u6642\u9593\u306b\u30e1\u30e2\u3092\u8ffd\u52a0"]})]})]})]})]})},PJ=e=>{let{onBack:n}=e;const{characters:i,replayNotes:r,addReplay:a,deleteReplay:o,addNoteToReplay:l,updateNoteInReplay:c,deleteNoteFromReplay:u}=Jg(),[h,d]=(0,t.useState)("char-select"),[f,p]=(0,t.useState)(null),[m,g]=(0,t.useState)(null),[v,y]=(0,t.useState)(!1),x=(0,t.useMemo)(()=>({addNote:e=>l(f.id,m.id,e),updateNote:(e,t)=>c(f.id,m.id,e,t),deleteNote:e=>u(f.id,m.id,e)}),[f,m,l,c,u]),b=e=>{p(e),d("replay-list")},_=e=>{g(e),d("analysis")},w=()=>{"analysis"===h?(g(null),d("replay-list")):"replay-list"===h?(p(null),d("char-select")):n()};return(0,s.jsxs)("div",{className:"w-screen h-screen bg-slate-900 text-white p-8 flex flex-col",children:[(0,s.jsx)(P,{mode:"wait",children:(0,s.jsx)(Ka.div,{className:"w-full h-full flex flex-col",initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:(()=>{switch(h){case"char-select":return(0,s.jsx)(TJ,{characters:i,onSelectChar:b,onBack:n});case"replay-list":return f?(0,s.jsx)(AJ,{selectedChar:f,replays:r[f.id]||[],onSelectReplay:_,onAddReplay:()=>y(!0),onDeleteReplay:e=>o(f.id,e),onBack:w}):null;case"analysis":if(!f||!m)return null;const e=(r[f.id]||[]).find(e=>e.id===m.id);return e?(0,s.jsx)(kJ,{selectedChar:f,replay:e,onBack:w,dataHandlers:x}):(0,s.jsx)("div",{className:"text-center text-red-500",children:"\u30ea\u30d7\u30ec\u30a4\u306e\u8aad\u307f\u8fbc\u307f\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002"});default:return null}})()},h)}),(0,s.jsx)(P,{children:v&&(0,s.jsx)(EJ,{onClose:()=>y(!1),onAdd:a,selectedChar:f})})]})},LJ=(e,t,n,i)=>{e.fadeInterval&&clearInterval(e.fadeInterval);const r=e.volume,s=(t-r)/(n/25);0!==s?e.fadeInterval=setInterval(()=>{const n=e.volume+s;s>0&&n>=t||s<0&&n<=t?(e.volume=t,clearInterval(e.fadeInterval),e.fadeInterval=null,0===t&&e.pause(),i&&i()):e.volume=n},25):i&&i()},DJ=e=>{let{currentView:n}=e;const{settings:i,assignments:r}=Iv(),{isBgmEnabled:a,bgmVolume:o}=i,l={splash:"bgm_splash",shatter:"bgm_splash",home:"bgm_home"},c={splash:(0,t.useRef)(null),home:(0,t.useRef)(null)};return(0,t.useEffect)(()=>{const e=r[l[n]];Object.values($a).filter(e=>"bgm"===e.type).forEach(t=>{var n;const i=null===(n=c[t.id])||void 0===n?void 0:n.current;i&&(a?t.id===e?(i.play().catch(e=>{}),LJ(i,t.volume*o,500)):LJ(i,0,500,()=>{i.pause(),i.currentTime=0}):LJ(i,0,300,()=>i.pause()))})},[n,a,o,r]),(0,s.jsx)(s.Fragment,{children:Object.values($a).filter(e=>"bgm"===e.type).map(e=>(0,s.jsx)("audio",{ref:c[e.id],src:e.source,loop:!0},e.id))})};$Y.register(sK,WK,TK);const RJ=e=>{let{onBack:n}=e;const{characters:i,characterData:r}=Jg(),a=(0,t.useMemo)(()=>{const e={};Object.values(r).forEach(t=>{var n;((null===(n=t.records)||void 0===n?void 0:n.matches)||[]).forEach(t=>{e[t.opponent]||(e[t.opponent]={wins:0,losses:0}),"win"===t.result?e[t.opponent].wins++:e[t.opponent].losses++})});let t=null,n=101;return Object.entries(e).forEach(e=>{let[i,r]=e;const s=r.wins+r.losses;if(s>=5){const e=r.wins/s*100;e<n&&(n=e,t=I(I({name:i},r),{},{totalMatches:s,winRate:e.toFixed(1)}))}}),t},[r]),o=(0,t.useMemo)(()=>a?i.find(e=>e.name===a.name):null,[a,i]),l=(0,t.useMemo)(()=>a?{labels:["\u52dd\u5229","\u6557\u5317"],datasets:[{data:[a.wins,a.losses],backgroundColor:["rgba(74, 222, 128, 0.7)","rgba(248, 113, 113, 0.7)"],borderColor:["#4ade80","#f87171"],borderWidth:2}]}:null,[a]);return(0,s.jsxs)("div",{className:"w-screen h-screen bg-slate-900 flex flex-col text-white p-4 sm:p-8",children:[(0,s.jsxs)("header",{className:"flex-shrink-0 mb-8 flex justify-between items-center",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold flex items-center gap-3",children:[(0,s.jsx)(GQ,{className:"text-red-500"}),"\u30cd\u30e1\u30b7\u30b9\u30fb\u30c8\u30e9\u30c3\u30ab\u30fc"]}),(0,s.jsxs)("button",{onClick:n,className:"flex items-center gap-2 px-4 py-2 rounded-lg hover:bg-white/10",children:[(0,s.jsx)(tB,{size:20}),"\u30db\u30fc\u30e0\u306b\u623b\u308b"]})]}),(0,s.jsx)("main",{className:"flex-grow flex items-center justify-center",children:a?(0,s.jsxs)(Ka.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-black/20 p-8 rounded-2xl w-full max-w-lg flex flex-col items-center gap-6",children:[(0,s.jsx)("p",{className:"text-xl text-white/70",children:"\u3042\u306a\u305f\u306e\u5929\u6575\u306f..."}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[o&&(0,s.jsx)("div",{className:"w-24 h-24 rounded-full flex-shrink-0 overflow-hidden",style:{backgroundColor:o.color},children:(0,s.jsx)("img",{src:"/images/".concat(encodeURIComponent(o.icon)),alt:o.name,className:"w-full h-full object-contain"})}),(0,s.jsx)("h2",{className:"text-6xl font-bold",children:a.name})]}),(0,s.jsx)("div",{className:"w-full max-w-xs h-64",children:(0,s.jsx)(NZ,{data:l,options:{maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})}),(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-lg",children:"\u5bfe\u6226\u6210\u7e3e"}),(0,s.jsxs)("p",{className:"text-4xl font-bold",children:[a.wins,"\u52dd ",a.losses,"\u6557"]}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-red-400",children:["\u52dd\u7387: ",a.winRate,"%"]}),(0,s.jsxs)("p",{className:"text-sm text-white/50",children:["(",a.totalMatches,"\u6226\u4ee5\u4e0a\u304c\u5bfe\u8c61)"]})]})]}):(0,s.jsxs)("div",{className:"text-center text-white/50",children:[(0,s.jsx)("p",{className:"text-2xl",children:"\u307e\u3060\u5929\u6575\u3092\u7279\u5b9a\u3067\u304d\u308b\u307b\u3069\u306e\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\u3002"}),(0,s.jsx)("p",{className:"mt-2",children:"\u5404\u30ad\u30e3\u30e9\u30af\u30bf\u30fc\u306e\u300c\u6226\u7e3e\u300d\u30bf\u30d6\u304b\u3089\u30015\u6226\u4ee5\u4e0a\u306e\u5bfe\u6226\u8a18\u9332\u3092\u5165\u529b\u3057\u3066\u304f\u3060\u3055\u3044\u3002"})]})})]})},NJ=["\u5730\u4e0a\u6280","\u30b9\u30de\u30c3\u30b7\u30e5\u653b\u6483","\u5fc5\u6bba\u6280","\u7a7a\u4e2d\u6280","\u3064\u304b\u307f","\u305d\u306e\u4ed6"],IJ=()=>{const{quizzes:e}=Jg(),{settings:n}=iv(),{guerillaStep:i,setGuerillaStep:r,currentQuiz:a,setCurrentQuiz:o}=av(),[l,c]=(0,t.useState)("splash"),[u,h]=(0,t.useState)(null),d=e=>{h(e),c("tactics-note")},f=e=>{c(e)},p="splash"!==l&&"shatter"!==l;return(0,s.jsxs)("main",{className:"relative min-h-screen text-white flex flex-col items-center justify-center overflow-hidden bg-black ".concat(p?"cursor-none":"cursor-default"),children:[(0,s.jsx)(DJ,{currentView:l}),"splash"!==l&&"shatter"!==l&&(0,s.jsx)(Ij,{}),p&&(0,s.jsx)(Fw,{}),(0,s.jsx)("div",{className:"relative z-10 w-full h-full flex items-center justify-center",children:(0,s.jsx)(xv,{children:(0,s.jsx)(P,{mode:"wait",children:(0,s.jsx)(Ka.div,{className:"w-full h-full",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:(()=>{switch(l){case"splash":return(0,s.jsx)(Nw,{onAnimationComplete:()=>f("shatter")});case"shatter":return(0,s.jsx)(zw,{onTransitionEnd:()=>f("home")});case"home":return(0,s.jsx)(Gv,{onNavigate:f});case"character-select":return(0,s.jsx)(XU,{onSelect:d,onBack:()=>f("home")});case"tactics-note":return(0,s.jsx)(pH,{character:u,onBack:()=>{h(null),f("character-select")}});case"settings":return(0,s.jsx)(Kj,{onClose:()=>f("home"),commandCategories:NJ});case"collection":return(0,s.jsx)(BZ,{onNavigate:f,onBack:()=>f("home")});case"missions":return(0,s.jsx)(_H,{onBack:()=>f("collection")});case"stats":return(0,s.jsx)(OZ,{onClose:()=>f("collection")});case"another-game":return(0,s.jsx)(GZ,{onNavigate:f,onBack:()=>f("home")});case"character-comparison":return(0,s.jsx)(XZ,{onBack:()=>f("another-game")});case"tier-maker":return(0,s.jsx)(HQ,{onBack:()=>f("another-game")});case"spirits":return(0,s.jsx)(YQ,{onNavigate:f,onBack:()=>f("home")});case"challenge-generator":return(0,s.jsx)(QQ,{onBack:()=>f("spirits")});case"goal-tracker":return(0,s.jsx)(eJ,{onBack:()=>f("spirits")});case"nemesis-tracker":return(0,s.jsx)(RJ,{onBack:()=>f("spirits")});case"online":return(0,s.jsx)(rJ,{onNavigate:f,onBack:()=>f("home")});case"replay-feature":return(0,s.jsx)(PJ,{onBack:()=>f("online")});default:return(0,s.jsxs)("div",{children:[l," \u753b\u9762 (\u4f5c\u6210\u4e2d)"]})}})()},l)})})}),(0,s.jsxs)(P,{children:["marquee"===i&&(0,s.jsx)(Oj,{onTriggerProblem:()=>{e.length>0?(o(e[Math.floor(Math.random()*e.length)]),r("quiz")):r("idle")}}),"quiz"===i&&a&&(0,s.jsx)(zj,{quiz:a,onClose:()=>{r("idle"),o(null)}})]})]})};r.createRoot(document.getElementById("root")).render((0,s.jsx)(t.StrictMode,{children:(0,s.jsx)(Rv,{children:(0,s.jsx)(Fv,{children:(0,s.jsx)(rv,{children:(0,s.jsx)(tv,{children:(0,s.jsx)(ov,{children:(0,s.jsx)(IJ,{})})})})})})}))})()})();
//# sourceMappingURL=main.cb7d981c.js.map